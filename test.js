(function () {
    var __webpack_modules__ = {
            81442: function (e, t, r) {
                var s = {
                    "./lang.en.json": [73526, 73526],
                    "./lang.ka.json": [90861, 90861],
                    "./lang.kk.json": [20939, 20939],
                    "./lang.ru.json": [17728, 17728],
                    "./lang.uz.json": [68890, 68890],
                };
                function n(e) {
                    if (!r.o(s, e))
                        return Promise.resolve().then(function () {
                            var t = new Error("Cannot find module '" + e + "'");
                            throw ((t.code = "MODULE_NOT_FOUND"), t);
                        });
                    var t = s[e],
                        n = t[0];
                    return r.e(t[1]).then(function () {
                        return r.t(n, 19);
                    });
                }
                (n.keys = function () {
                    return Object.keys(s);
                }),
                    (n.id = 81442),
                    (e.exports = n);
            },
            61326: function (e, t, r) {
                "use strict";
                var s = Object.defineProperty,
                    n = Object.getOwnPropertySymbols,
                    o = Object.prototype.hasOwnProperty,
                    i = Object.prototype.propertyIsEnumerable,
                    a = (e, t, r) =>
                        t in e
                            ? s(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r);
                const l = "wb__lang";
                t.A = new (class {
                    constructor() {
                        (this.currLang = wb.currentLanguage),
                            (this.isDebug =
                                "true" === localStorage.getItem("i18n_debug")),
                            (this.initOptions = {
                                lng: this.currLang,
                                fallbackLng: "ru",
                                debug: this.isDebug,
                                saveMissing: !0,
                                missingKeyHandler: (e, t, r, s, n, o) => (
                                    (o && o.ignoreMissingKey) ||
                                        console.warn(
                                            "i18next missingKey: " + r
                                        ),
                                    r
                                ),
                                resources: {
                                    ru: {
                                        translation: window.__ru__,
                                    },
                                },
                            }),
                            (this.reactInstance = null);
                    }
                    async init() {
                        const e = i18next.createInstance();
                        if ((await e.init(this.initOptions), this.isDebug)) {
                            const t = e.t;
                            e.t = (...e) => `[[${t(...e)}]]`;
                        }
                        await this.loadTranslationsModule(e),
                            (wb.i18n = {
                                t: e.t,
                                plural: (t, r) => {
                                    var s = r,
                                        { count: l, displayCount: c } = s,
                                        u = ((e, t) => {
                                            var r = {};
                                            for (var s in e)
                                                o.call(e, s) &&
                                                    t.indexOf(s) < 0 &&
                                                    (r[s] = e[s]);
                                            if (null != e && n)
                                                for (var s of n(e))
                                                    t.indexOf(s) < 0 &&
                                                        i.call(e, s) &&
                                                        (r[s] = e[s]);
                                            return r;
                                        })(s, ["count", "displayCount"]);
                                    return e.t(
                                        `${t}.plural`,
                                        ((e, t) => {
                                            for (var r in t || (t = {}))
                                                o.call(t, r) && a(e, r, t[r]);
                                            if (n)
                                                for (var r of n(t))
                                                    i.call(t, r) &&
                                                        a(e, r, t[r]);
                                            return e;
                                        })(
                                            {
                                                count: l || 0,
                                                displayCount: c || l || 0,
                                                interpolation: {
                                                    escapeValue: !c,
                                                },
                                            },
                                            u
                                        )
                                    );
                                },
                                language: e.language,
                            }),
                            (wb.i18n.changeLang = (e) => {
                                localStorage.setItem(l, e),
                                    (wb.currentLanguage = e),
                                    location.reload();
                            }),
                            (document.documentElement.lang = this.currLang),
                            localStorage.setItem(l, this.currLang),
                            $.views.helpers({
                                t: wb.i18n.t,
                                plural: wb.i18n.plural,
                            });
                    }
                    async initReact() {
                        if (this.reactInstance) return this.reactInstance;
                        {
                            const { initReactI18next: e } = await Promise.all([
                                r.e(89362),
                                r.e(14627),
                                r.e(29883),
                            ]).then(r.bind(r, 87060));
                            return (
                                (this.reactInstance = i18next.createInstance()),
                                await this.reactInstance
                                    .use(e)
                                    .init(this.initOptions),
                                await this.loadTranslationsModule(
                                    this.reactInstance
                                ),
                                this.reactInstance
                            );
                        }
                    }
                    async loadTranslationsModule(e) {
                        try {
                            if ("ru" !== this.currLang) {
                                const t = new Promise((e, t) =>
                                        setTimeout(
                                            () =>
                                                t(
                                                    new Error(
                                                        "загрузка перевода превысила 15 секунд"
                                                    )
                                                ),
                                            15e3
                                        )
                                    ),
                                    s = r(81442)(
                                        `./lang.${this.currLang}.json`
                                    ),
                                    n = await Promise.race([s, t]);
                                n &&
                                    e.addResourceBundle(
                                        this.currLang,
                                        "translation",
                                        n.default
                                    );
                            }
                        } catch (e) {
                            console.log("Translation loading error:", e);
                        }
                    }
                })();
            },
            41476: function () {
                "use strict";
                const e = {},
                    t = (e) =>
                        e % 10 == 1 && e % 100 != 11
                            ? 0
                            : e % 10 >= 2 &&
                              e % 10 <= 4 &&
                              (e % 100 < 10 || e % 100 >= 20)
                            ? 1
                            : 2;
                let r = t;
                const s = (e, ...t) =>
                        e.replace(/{(\d+)}/g, (e, r) =>
                            void 0 !== t[r] ? String(t[r]) : e
                        ),
                    n = (t) => {
                        const r = e[t];
                        return {
                            value: r || t,
                            notfound: !r,
                        };
                    },
                    o = (e) => "string" == typeof e && e.includes("{0}");
                ($.localize = (t, ...i) => {
                    if (!i.length && ((e) => Boolean(e))(t))
                        return "object" == typeof (l = t) &&
                            null !== l &&
                            "pluralRule" in l
                            ? ("function" == typeof (a = t.pluralRule) &&
                                  1 === a.length &&
                                  (r = a),
                              "")
                            : n(t).value;
                    var a, l;
                    const c = i[0];
                    if (1 === i.length && ((e) => "object" == typeof e)(c))
                        return Object.assign(e, c), "";
                    if (i.length > 1 && o(t) && ((u = i), Array.isArray(u))) {
                        const e = n(t);
                        return s(e.value, ...i);
                    }
                    var u;
                    return "";
                }),
                    ($.pluralize = (e, ...i) => {
                        if ("number" != typeof e) return "";
                        if (0 === i.length) return String(e);
                        const a = n(i.join(",")),
                            l = a.value.split(","),
                            c = a.notfound ? t(e) : r(e),
                            u = l[c < l.length ? c : l.length - 1];
                        return o(u) ? s(u, e) : u;
                    });
            },
            2418: function () {
                "use strict";
                (DOMTokenList.prototype.addMany = function (e) {
                    if (null == e || !Array.isArray(e))
                        throw new Error(
                            "DOMTokenList.prototype.addMany accepts only array"
                        );
                    e.forEach((e) => this.add(e));
                }),
                    (DOMTokenList.prototype.removeMany = function (e) {
                        if (null == e || !Array.isArray(e))
                            throw new Error(
                                "DOMTokenList.prototype.removeMany accepts only array"
                            );
                        e.forEach((e) => this.remove(e));
                    });
            },
            82512: function () {
                "use strict";
                (HTMLElement.prototype.hide = function () {
                    this.style.display = "none";
                }),
                    (HTMLElement.prototype.show = function () {
                        this.style.display = "block";
                    }),
                    (HTMLElement.prototype.width = function () {
                        return 0 == this.clientWidth
                            ? getComputedStyle(this).width.replace("px", "")
                            : this.clientWidth;
                    }),
                    (HTMLElement.prototype.wrap = function (e) {
                        var t;
                        let r = new DOMParser().parseFromString(e, "text/html")
                            .body.firstElementChild;
                        if (null != r) {
                            for (
                                null == (t = this.parentNode) ||
                                t.insertBefore(r, this);
                                null != r.firstElementChild;

                            )
                                r = r.firstElementChild;
                            r.appendChild(this);
                        }
                    }),
                    (HTMLElement.prototype.parents = function (e) {
                        const t = [];
                        let r = this;
                        const s = void 0 !== e;
                        for (; null !== (r = r.parentElement); )
                            r.nodeType === Node.ELEMENT_NODE &&
                                ((s && !r.matches(e)) || t.push(r));
                        return t;
                    }),
                    (HTMLElement.prototype.isHidden = function () {
                        return (
                            (0 === this.offsetWidth &&
                                0 === this.offsetHeight) ||
                            "none" === window.getComputedStyle(this).display
                        );
                    }),
                    (HTMLElement.prototype.isVisible = function () {
                        return !this.isHidden();
                    });
            },
            89188: function () {
                "use strict";
                (URLSearchParams.prototype.toDictionary = function () {
                    const e = {};
                    return this.forEach((t, r) => (e[r] = t)), e;
                }),
                    URLSearchParams.prototype.hasOwnProperty("size") ||
                        Object.defineProperty(
                            URLSearchParams.prototype,
                            "size",
                            {
                                get: function () {
                                    let e = 0;
                                    for (let t of this.keys()) e++;
                                    return e;
                                },
                            }
                        );
            },
            95818: function () {
                "use strict";
                (Array.prototype.getIntesection = function (e) {
                    return Array.isArray(e)
                        ? this.filter((t) => e.includes(t))
                        : (console.error("Argument must be an array"), []);
                }),
                    Array.prototype.last ||
                        (Array.prototype.last = function () {
                            return this[this.length - 1];
                        }),
                    Array.prototype.first ||
                        (Array.prototype.first = function () {
                            return this[0];
                        }),
                    (Array.prototype.max = function () {
                        return Math.max.apply(null, this);
                    }),
                    (Array.prototype.min = function () {
                        return Math.min.apply(null, this);
                    }),
                    (Array.prototype.findWhere = function (e) {
                        return this.find((t) =>
                            Object.keys(e).every((r) => t[r] === e[r])
                        );
                    }),
                    (Array.prototype.distinct = function () {
                        return this.filter(function (e, t, r) {
                            return r.indexOf(e) === t;
                        });
                    }),
                    (Array.prototype.toHashSet = function (e) {
                        if (null != e && "function" != typeof e)
                            throw new TypeError(
                                "toHashSet method require callback function or null"
                            );
                        return this.reduce((t, r) => {
                            var s;
                            return (
                                t.add(
                                    null != (s = null == e ? void 0 : e(r))
                                        ? s
                                        : r
                                ),
                                t
                            );
                        }, new Set());
                    }),
                    (Array.prototype.toMap = function (e, t) {
                        if (null != e && "function" != typeof e)
                            throw new TypeError(
                                "toMap method require callback function or null"
                            );
                        if (null != t && "function" != typeof t)
                            throw new TypeError(
                                "toMap method require callback function or null"
                            );
                        return this.reduce(
                            (r, s) => (
                                r.set(
                                    null == e ? s : e(s),
                                    null == t ? s : t(s)
                                ),
                                r
                            ),
                            new Map()
                        );
                    }),
                    (Array.prototype.sum = function (e) {
                        let t = 0;
                        for (let r = 0, s = this.length; r < s; r++)
                            t += e ? this[r][e] : this[r];
                        return t;
                    }),
                    (Array.prototype.sumBy = function (e) {
                        let t = 0;
                        for (let r = 0, s = this.length; r < s; r++)
                            t += e(this[r]);
                        return t;
                    }),
                    (Array.prototype.groupBy = function (e) {
                        const t = new Map();
                        return (
                            this.forEach((r) => {
                                const s = e(r),
                                    n = t.get(s);
                                n ? n.push(r) : t.set(s, [r]);
                            }),
                            t
                        );
                    }),
                    (Array.prototype.selectMany = function (e) {
                        return this.length
                            ? this.map((t) => e(t)).reduce(
                                  (e, t) => e.concat(t),
                                  []
                              )
                            : [];
                    }),
                    (Array.prototype.toChunk = function (e) {
                        const t = Math.ceil(this.length / e),
                            r = new Array(t);
                        for (let s = 0; s < t; s++) {
                            const t = e * s;
                            r[s] = this.slice(t, t + e);
                        }
                        return r;
                    }),
                    (Array.prototype.merge = function (
                        e,
                        {
                            lookup: t = (e) => e,
                            hasConflict: r = (e, t) => !1,
                        } = {}
                    ) {
                        if (!e || 0 == e.length) return !1;
                        const s = new Map();
                        for (const e of this || []) {
                            const r = JSON.stringify(t(e));
                            s.set(r, e);
                        }
                        let n = !1;
                        for (const o of e) {
                            const e = JSON.stringify(t(o));
                            if (s.has(e)) {
                                const t = s.get(e);
                                null != t &&
                                    r(o, t) &&
                                    (Object.assign(t, o), (n = !0));
                            } else this.push(o), (n = !0);
                        }
                        return n;
                    }),
                    (Array.prototype.diff = function (
                        e,
                        {
                            lookup: t = (e) => e,
                            hasConflict: r = (e, t) => !1,
                        } = {}
                    ) {
                        const s = [];
                        if (!e || 0 == e.length) return s;
                        const n = new Map();
                        for (const e of this || []) {
                            const r = JSON.stringify(t(e));
                            n.set(r, e);
                        }
                        for (const o of e) {
                            const e = JSON.stringify(t(o));
                            if (n.has(e)) {
                                const t = n.get(e);
                                null != t && r(o, t) && s.push(o);
                            } else s.push(o);
                        }
                        return s;
                    }),
                    (Array.prototype.remove = function (e) {
                        let t = this.indexOf(e);
                        t > -1 && this.splice(t, 1);
                    });
            },
            71319: function () {
                "use strict";
                (Date.prototype.format = function (e, t) {
                    const r = (function () {
                        const e =
                                /d{1,4}|M{1,5}|yy(?:yy)?|([HhmsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
                            t =
                                /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
                            s = /[^-+\dA-Z]/g,
                            n = function (e, t) {
                                for (e = String(e), t = t || 2; e.length < t; )
                                    e = "0" + e;
                                return e;
                            },
                            o = (e) => {
                                var r;
                                return null ==
                                    (r = (String(e).match(t) || [""]).pop())
                                    ? void 0
                                    : r.replace(s, "");
                            };
                        return function (t, s, i) {
                            var a, l, c, u, d;
                            const p = r;
                            if (
                                (1 != arguments.length ||
                                    "[object String]" !=
                                        Object.prototype.toString.call(t) ||
                                    "string" != typeof t ||
                                    /\d/.test(t) ||
                                    ((s = t), (t = void 0)),
                                (t = t ? new Date(t) : new Date()),
                                isNaN(Number(t)))
                            )
                                throw SyntaxError("invalid date");
                            "UTC:" ==
                                (s = String(
                                    (function (e) {
                                        const t = wb.currentLanguage;
                                        if (
                                            "ru" !== t &&
                                            r.masksOverrides &&
                                            (null == r
                                                ? void 0
                                                : r.masksOverrides[t]) &&
                                            r.masksOverrides[t][e]
                                        )
                                            return r.masksOverrides[t][e];
                                        return e;
                                    })(s) || p.defaultMask
                                )).slice(0, 4) && ((s = s.slice(4)), (i = !0));
                            const h = i ? "getUTC" : "get",
                                m = (e, t, r) => t[`${e}${r}`](),
                                g = m(h, t, "Date"),
                                b = m(h, t, "Day"),
                                y = m(h, t, "Month"),
                                v = m(h, t, "FullYear"),
                                f = m(h, t, "Hours"),
                                w = m(h, t, "Minutes"),
                                S = m(h, t, "Seconds"),
                                _ = m(h, t, "Milliseconds"),
                                C = i ? 0 : t.getTimezoneOffset();
                            const I = {
                                d: g,
                                dd: n(g),
                                ddd:
                                    null == (a = p.i18n)
                                        ? void 0
                                        : a.shortDaysTranslations[b],
                                dddd:
                                    null == (l = p.i18n)
                                        ? void 0
                                        : l.longDaysTranslations[b],
                                M: y + 1,
                                MM: n(y + 1),
                                MMM:
                                    null == (c = p.i18n)
                                        ? void 0
                                        : c.shortMonthsTranslations[y],
                                MMMM:
                                    null == (u = p.i18n)
                                        ? void 0
                                        : u.monthGenitiveTranslations[y],
                                MMMMM:
                                    null == (d = p.i18n)
                                        ? void 0
                                        : d.longMonthsTranslations[y],
                                yy: String(v).slice(2),
                                yyyy: v,
                                h: f % 12 || 12,
                                hh: n(f % 12 || 12),
                                H: f,
                                HH: n(f),
                                m: w,
                                mm: n(w),
                                s: S,
                                ss: n(S),
                                l: n(_, 3),
                                L: n(_ > 99 ? Math.round(_ / 10) : _),
                                t: f < 12 ? "a" : "p",
                                tt: f < 12 ? "am" : "pm",
                                T: f < 12 ? "A" : "P",
                                TT: f < 12 ? "AM" : "PM",
                                Z: i ? "UTC" : o(t),
                                o:
                                    (C > 0 ? "-" : "+") +
                                    n(
                                        100 * Math.floor(Math.abs(C) / 60) +
                                            (Math.abs(C) % 60),
                                        4
                                    ),
                                S: (function (e) {
                                    const t = e % 10;
                                    let r;
                                    return (
                                        (r = t > 3 || 11 === e % 100 ? 0 : t),
                                        ["th", "st", "nd", "rd"][r]
                                    );
                                })(g),
                            };
                            return s.replace(e, (e) =>
                                e in I ? String(I[e]) : e.slice(1, e.length - 1)
                            );
                        };
                    })();
                    (r.defaultMask = "ddd dd MMM yyyy"),
                        (r.masksOverrides = {
                            en: {
                                "d MMMM": "MMMM d",
                                "d MMM": "MMM d",
                                "dd MMMM yyyy, HH:mm": "MMMM dd yyyy, HH:mm",
                                "dd MMMM yyyy": "MMMM dd yyyy",
                            },
                        });
                    const s = wb.i18n.t,
                        n = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"],
                        o = n.map((e) => s(`common.dates.dayNamesShort.${e}`)),
                        i = n.map((e) => s(`common.dates.dayNamesLong.${e}`)),
                        a = [
                            "jan",
                            "feb",
                            "mar",
                            "apr",
                            "may",
                            "jun",
                            "jul",
                            "aug",
                            "sep",
                            "oct",
                            "nov",
                            "dec",
                        ],
                        l = a.map((e) => s(`common.dates.monthNamesLong.${e}`)),
                        c = a.map((e) =>
                            s(`common.dates.monthNamesShort.${e}`)
                        ),
                        u = a.map((e) =>
                            s(`common.dates.monthNamesGenitive.${e}`)
                        );
                    return (
                        (r.i18n = {
                            shortDaysTranslations: o,
                            longDaysTranslations: i,
                            longMonthsTranslations: l,
                            shortMonthsTranslations: c,
                            monthGenitiveTranslations: u,
                        }),
                        r(this, e, t)
                    );
                }),
                    (Date.prototype.daysBetween = function (e) {
                        const t = new Date(
                                this.getFullYear(),
                                this.getMonth(),
                                this.getDate()
                            ),
                            r =
                                (new Date(
                                    e.getFullYear(),
                                    e.getMonth(),
                                    e.getDate()
                                ).getTime() -
                                    t.getTime()) /
                                864e5;
                        return Math.floor(r);
                    }),
                    (Date.prototype.minutesBetween = function (e) {
                        return Math.floor((this.getTime() - e.getTime()) / 6e4);
                    }),
                    (Date.prototype.dateEqual = function (e) {
                        return (
                            this.getDate() === e.getDate() &&
                            this.getMonth() === e.getMonth() &&
                            this.getFullYear() === e.getFullYear()
                        );
                    }),
                    (Date.prototype.is1stJan = function () {
                        return 1 === this.getDate() && 0 === this.getMonth();
                    }),
                    (Date.prototype.getUtcTime = function () {
                        return this.getTime() - 6e4 * this.getTimezoneOffset();
                    }),
                    (Date.utcNow = function () {
                        return new Date().getUtcTime();
                    }),
                    (Date.prototype.addDays = function (e) {
                        let t = new Date(this.valueOf());
                        return t.setDate(t.getDate() + e), t;
                    }),
                    (Date.prototype.addMinutes = function (e) {
                        let t = new Date(this.valueOf());
                        return t.setMinutes(t.getMinutes() + e), t;
                    }),
                    (Date.prototype.addHours = function (e) {
                        const t = new Date(this.valueOf());
                        return isNaN(e) || t.setHours(t.getHours() + +e), t;
                    }),
                    (Date.prototype.resetHours = function (e) {
                        const t = new Date(this.valueOf());
                        return isNaN(e) || t.setHours(e, 0, 0, 0), t;
                    });
            },
            69707: function () {
                "use strict";
                Event.prototype.stopPropagation = (function (e) {
                    return function () {
                        (this.isPropagationStopped = !0), e.call(this);
                    };
                })(Event.prototype.stopPropagation);
            },
            55989: function () {
                "use strict";
                var e = (e, t) =>
                        (t = Symbol[e]) ? t : Symbol.for("Symbol." + e),
                    t = function (e, t) {
                        (this[0] = e), (this[1] = t);
                    },
                    r = (r) => {
                        var s,
                            n = r[e("asyncIterator")],
                            o = !1,
                            i = {};
                        return (
                            null == n
                                ? ((n = r[e("iterator")]()),
                                  (s = (e) => (i[e] = (t) => n[e](t))))
                                : ((n = n.call(r)),
                                  (s = (e) =>
                                      (i[e] = (r) => {
                                          if (o) {
                                              if (((o = !1), "throw" === e))
                                                  throw r;
                                              return r;
                                          }
                                          return (
                                              (o = !0),
                                              {
                                                  done: !1,
                                                  value: new t(
                                                      new Promise((t) => {
                                                          var s = n[e](r);
                                                          s instanceof Object ||
                                                              ((e) => {
                                                                  throw TypeError(
                                                                      e
                                                                  );
                                                              })(
                                                                  "Object expected"
                                                              ),
                                                              t(s);
                                                      }),
                                                      1
                                                  ),
                                              }
                                          );
                                      }))),
                            (i[e("iterator")] = () => i),
                            s("next"),
                            "throw" in n
                                ? s("throw")
                                : (i.throw = (e) => {
                                      throw e;
                                  }),
                            "return" in n && s("return"),
                            i
                        );
                    };
                (Map.prototype.every = function (e) {
                    if ("function" != typeof e)
                        throw new TypeError("Callback is not a function");
                    let t = !0;
                    return (
                        this.forEach((r, s, n) => {
                            t = t && e(r, s, n);
                        }),
                        t
                    );
                }),
                    (Map.prototype.some = function (e) {
                        if (!(e instanceof Function))
                            throw new TypeError("Callback is not a function");
                        let t = !1;
                        return (
                            this.forEach((r, s, n) => {
                                t || (t = e(r, s, n));
                            }),
                            t
                        );
                    }),
                    (Map.prototype.reduce = function (e, t) {
                        if ("function" != typeof e)
                            throw new TypeError(
                                "Map reduce argument 1 must be a function"
                            );
                        let r = t,
                            s = 0;
                        return (
                            this.forEach((n, o, i) => {
                                s++,
                                    (r =
                                        1 != s || null != t
                                            ? e(r, n, o, i)
                                            : n);
                            }),
                            r
                        );
                    }),
                    (Map.prototype.map = function (e) {
                        if ("function" != typeof e)
                            throw new TypeError("Callback is not a function");
                        const t = new Map();
                        return (
                            this.forEach((r, s, n) => {
                                t.set(s, e(r, s, n));
                            }),
                            t
                        );
                    }),
                    (Map.prototype.toArray = function (e) {
                        if ("function" != typeof e && null != e)
                            throw new TypeError("Callback if not a function");
                        const t = [];
                        let r = 0;
                        return (
                            this.forEach((s, n) => {
                                t.push(null == e ? s : e(s, n, r)), r++;
                            }),
                            t
                        );
                    }),
                    (Map.prototype.find = function (e) {
                        if ("function" != typeof e)
                            throw new TypeError("Callback is not a function");
                        let t = null;
                        return (
                            this.forEach((r, s, n) => {
                                t || (e(r, s, n) && (t = r));
                            }),
                            t
                        );
                    }),
                    (Map.prototype.sort = function (e) {
                        const t = new Map();
                        this[Symbol.iterator] = function* () {
                            yield* r([...this.entries()].sort(e));
                        };
                        for (let [e, r] of this) t.set(e, r);
                        return t;
                    });
            },
            94206: function () {
                "use strict";
                (Number.prototype.countDecimals = function () {
                    return Math.floor(this.valueOf()) === this.valueOf()
                        ? 0
                        : this.toString().split(".")[1].length || 0;
                }),
                    (Number.prototype.toFixedNumber = function (e, t = 10) {
                        const r = Math.pow(t, e);
                        return Math.round(Number(this) * r) / r;
                    }),
                    (Number.prototype.parseIntOrDefault = function (e = null) {
                        return Number.isInteger(this) ? ~~this : e;
                    }),
                    (Number.prototype.floatToFixed = function (e) {
                        return Number.isInteger(this)
                            ? this.toString()
                            : this.toFixed(e);
                    });
            },
            93459: function () {
                "use strict";
                (Set.prototype.toArray = function (e) {
                    if (null != e && "function" != typeof e)
                        throw new TypeError(
                            "Callback at Set.prototype.toArray must be null or function"
                        );
                    const t = [];
                    return this.forEach((r) => t.push(null == e ? r : e(r))), t;
                }),
                    (Set.prototype.map = function (e) {
                        if ("function" != typeof e)
                            throw new TypeError(
                                "Callback at Set.prototype.map must be function"
                            );
                        const t = new Set();
                        return this.forEach((r) => t.add(e(r))), t;
                    }),
                    (Set.prototype.filter = function (e) {
                        if ("function" != typeof e)
                            throw new TypeError(
                                "Callback at Set.prototype.map must be function"
                            );
                        const t = new Set();
                        return (
                            this.forEach((r) => {
                                e(r) && t.add(r);
                            }),
                            t
                        );
                    });
            },
            42240: function () {
                "use strict";
                if ("localStorage" in window || null !== window.localStorage) {
                    const e = Storage.prototype.setItem;
                    (Storage.prototype.setItem = function (t, r) {
                        try {
                            e.apply(this, arguments);
                        } catch (t) {
                            if (-1 === t.message.indexOf("quota"))
                                throw (wb.spa.logError(t), t);
                            let r,
                                s,
                                n = {
                                    len: 0,
                                },
                                o = 0;
                            for (s in localStorage)
                                localStorage.hasOwnProperty(s) &&
                                    ((r =
                                        2 *
                                        (localStorage[s].length + s.length)),
                                    (o += r),
                                    n.len < r &&
                                        (n = {
                                            len: r,
                                            key: s,
                                        }));
                            if (n.key)
                                if (n.len > 307200) {
                                    this.removeItem(n.key);
                                    const r = `localstorage delkey:${
                                        n.key
                                    }, len:${n.len / 1024} KB, key:${
                                        arguments[0]
                                    }, exp:${t.message}`;
                                    console.log(r),
                                        wb.spa.logError(new Error(r)),
                                        e.apply(this, arguments);
                                } else {
                                    const e = `localstorage exception key:${
                                        arguments[0]
                                    }, exp:${t.message}, storageKeys:${
                                        localStorage.length
                                    }, storageLen:${o / 1024} KB`;
                                    console.log(e),
                                        wb.spa.logError(new Error(e));
                                }
                        }
                    }),
                        (Storage.prototype.trySetItem = function (e, t) {
                            try {
                                this.setItem(e, t);
                            } catch (e) {}
                        }),
                        (Storage.prototype.clearStartsWith = function (e, t) {
                            if (e)
                                try {
                                    Object.entries(this)
                                        .filter(
                                            (r) =>
                                                0 === r[0].indexOf(e) &&
                                                r[0] !== t
                                        )
                                        .forEach((e) => {
                                            this.removeItem(e[0]);
                                        });
                                } catch (e) {}
                        }),
                        (Storage.prototype.putObject = function (
                            e,
                            t,
                            { tryCatch: r } = {}
                        ) {
                            if (r)
                                try {
                                    this.setItem(e, JSON.stringify(t));
                                } catch (e) {}
                            else this.setItem(e, JSON.stringify(t));
                        }),
                        (Storage.prototype.getObject = function (e) {
                            var t = this.getItem(e);
                            try {
                                return t && JSON.parse(t);
                            } catch (t) {
                                this.removeItem(e);
                            }
                            return null;
                        }),
                        (Storage.prototype.hasItem = function (e) {
                            return null != this.getItem(e);
                        });
                }
            },
            69334: function () {
                "use strict";
                (String.prototype.format = function () {
                    let e = String(this);
                    for (let t = 0; t < arguments.length; t++) {
                        const r = new RegExp("\\{" + t + "\\}", "gm");
                        e = e.replace(r, arguments[t]);
                    }
                    return e;
                }),
                    (String.prototype.formatPhone = function (e) {
                        let t = this.split(""),
                            r = "";
                        for (let s = 0; s < e.length; s++)
                            r += "#" === e[s] ? t.splice(0, 1) : e[s];
                        return r;
                    }),
                    (String.prototype.capitalize = function () {
                        return this.charAt(0).toUpperCase() + this.slice(1);
                    }),
                    (String.prototype.toSafeString = function () {
                        return encodeURIComponent(
                            this.replace(/<\/?[^>]+>/gi, "").trim()
                        );
                    }),
                    (String.prototype.hashCode = function () {
                        let e,
                            t,
                            r = 0;
                        if (0 === this.length) return r;
                        for (e = 0; e < this.length; e++)
                            (t = this.charCodeAt(e)),
                                (r = (r << 5) - r + t),
                                (r |= 0);
                        return r;
                    }),
                    (String.prototype.parseIntOrDefault = function (e = null) {
                        const t = parseInt(String(this));
                        return isNaN(t) ? e : t;
                    });
            },
            86055: function (e, t, r) {
                "use strict";
                var s = JSON.parse(
                    '{"switches":{"addUserVector":true,"addUserVectorCatalog":true,"addUserVectorRecommend":true,"antiDDoSFeedbackComplain":false,"apiShowEvents":true,"bannerWebp":true,"brandLogoV3":true,"catalogShowDeliveryDate":true,"catalogVideoPreview":true,"customerReceipt":true,"disableCountryFlags":false,"disableQuestionForm":false,"dontIncludeSoldItemsInOrder":false,"enable2faForEmployee":false,"enableAstroReceipts":true,"enableBalanceRefill":false,"enableCargoDeliveryUpdate":false,"enableCargoDeliveryUpdateV2":false,"enableCashback":false,"enableCashbackWidgetHide":false,"enableCatalogCaptcha":true,"enableChatBot":true,"enableChatsHistory":true,"enableChatUploadV2":true,"enableChooseColor":true,"enableClaims":true,"enableClaimsInKT":true,"enableCommentContentCheck":false,"enableContentErrorApi":false,"enableCourierDelivery":true,"enableCryptoChange":false,"enableCustomsDuty":true,"enableCWBReceiptsPage":true,"enableDoubleChanceActionClub":true,"enableErrorImagePlug":false,"enableFeedbackFirstLock":true,"enableFeedbackPhoto":true,"enableFeedbacksBables":true,"enableFeedbacksForPoints":true,"enableFeedbacksSortRelevance":false,"enableGenerativeFeedback":false,"enableGiftCerts":true,"enableHomeSaleCarousel":false,"enableHomeSaleTabs":false,"enableImageTags":true,"enableInfiniteScroll":false,"enableLazyProductSwiper":false,"enableLocalization":false,"enableLogoSbpQr":true,"enableManualGluingOnProduct":true,"enableMe2MeReplenish":true,"enableMyRefunds":true,"enableNewShopWindow":true,"enableNewSimilarInPostponed":true,"enableNewSizeBannerDelivery":false,"enableNewSizeBannerLK":false,"enableNewSizeBannerMain":false,"enableNewSizeBannerSearch":false,"enableNewSizeBannerThxForOrder":false,"enableNewVisualSimilar":true,"enableNewWalletHistory":true,"enableOnlineChat":true,"enableOpenNewTab":false,"enableOrderQRWalletRefill":false,"enablePartnerWbDigital":true,"enablePartnerWbTravel":false,"enablePdlWithoutCardAndSbp":false,"enablePremiumSellerAccent":true,"enablePriceHistoryChart":true,"enableProductCounter":false,"enableProductImageDowngrade":true,"enableProductQuestions":true,"enablePromoExtraCatalogSliders":true,"enablePromoExtraHeaderSlider":true,"enablePublicSellerPercent":true,"enableRecIdentical":false,"enableRefund":true,"enableRefusalInBasket":false,"enableRichVideoAutoplay":true,"enableRoundingPayment":true,"enableSellerPercent":true,"enableSellerRecommendation":true,"enableSellersChat":true,"enableSendPersonalDataGe":true,"enableShowFeedbacksBables":false,"enableSignatureInPhotoSearch":false,"enableSomeProductInSellers":false,"enableStaticFeedbacks":true,"enableSubscriptionPopup":false,"enableSupportBooking":true,"enableTalesKT":false,"enableTinkoffIdentification":false,"enableTravelForEmployees":true,"enableUpdatedReview":true,"enableWalletDiscountForPaidIns":true,"enableWalletForCerts":true,"enableWalletRedesign":false,"enableWbClubCancelAb":true,"enableWbClubRedesign":true,"enableWbInstallment":false,"enableWBTravelEmployee":true,"enableWBTravelInMenu":false,"enableWbxOrder":true,"enableWebpImages":true,"feedbacksByNm":true,"hideMultipleSellersLever":true,"hidePremiumSellerBadge":true,"hlsVideoCard":true,"isWbGeocoder":true,"localCurrency":false,"mergeSellerAndBrandMobile":false,"multicardEnable":false,"multicardV2Enable":true,"oferta0724":true,"oferta0724Logoff":true,"priceWithLogistics":false,"priceWithLogisticsOnSplitter":true,"rafflePromo0325":false,"recommendedCardLikeCatalog":true,"relatedGoodsInBasket":false,"removeReviewBlockMobile":true,"showAnswerToCommentBtn":true,"showArticlesPreviewInCard":false,"showBirthdayWbBadge":false,"showFeedbackMessengers":false,"showLogisticsInPrice":true,"showNextPayment":true,"showPremiumSeller":true,"showQuickViewOnWaitingFeedback":false,"showTravelOffers":false,"showTrustFactorsFeedbacks":true,"showWallet":true,"showWbKidsLooks":false,"switchVersionOnHighlight":false,"tecDocEnable":true,"useCatalogReturnCost":false,"useFeedbacksNewForClaims":true,"useFreeYandexMapsSite":false,"useNewPublicFeedbacks":true,"useSearchForHomeRec":true,"useSearchForHomeRecAb":false,"useSearchInKT":true,"useSearchInKTWithAB":true,"wbClubPaymentWallet":false,"wbTilesMap":true,"enableOnboardingTooltipPaidInstallments":false,"enableCreditForKT":false,"enableAccountDiscountLimitV2":false},"variables":{"minCreditSum":4999,"destToShowLogistics":[123585503,123585522,123585707,123585736,123585751,123586051,123586073,123586136,123586196,123589345],"catalogReturnCostLocales":["am","kz","kg","uz","by","ru","ge"],"resourseStatSettings":{"img":"2-6;10"},"publicBasketApiUrl":"//ru-basket-api.wildberries.ru","pricesDeltaToShowSale":5,"usersRangeForFavs":"0;925000000","wbxOrdersSyncRange":"0;14000000000","userGradeUsersRange":"0;1300000000","usersRangeForPremiumSubs":"0;200000000","usersRangeForVideoFirstInProductCard":"0;199000000","usersRangeCdnConfigV2":"0;1000000000","newVisualSimilarRange":"0;10000000","newSimilarInPostponedRange":"0;0","enableSubscriptionPopupRange":"0;1000000000","cardMirSbpSaleToShow":0,"failedPaymentsDisplayMinutes":150,"minutesForOrderCancel":60,"minutesForMPOrderCancel":60,"minutesForWBOrderCancel":60,"usersRangeForTravel":"0;14000000000","highlightForFeedbacks":"highlight.wildberries.ru/highlight-api/api/v1","highlightForQuestions":"highlight.wildberries.ru/highlight-api/api/v1","disableAuthSms":["99","77","374","76","375"],"wbxOrderUsersRange":"0;300000000","wbxOrderCancelUsersRange":"0;2000000000","siteMinVersion":"11.13.0","wbxAuthPhonePrefix":"79;99;374;76;77;375;86;85;886","walletDiscountPercent":0,"walletDiscountDisplayMaxPrice":0,"wlt1DiscountPercent":0,"wlt2DiscountPercent":5,"wlt1DiscountDisplayMaxPrice":15000,"wlt2DiscountDisplayMaxPrice":60000,"cwbInstRange":"1;1000000000","bellPercentage":"100","clientActionsInQuery":"5|1|5|8","promoWithTimers":{"195704":1738530000},"enableLanguageSwitcher":["ge"],"travelClubDate":"16 января"},"currencies":{"BYN":{"rubRate":27.3044},"KZT":{"rubRate":0.177308},"AMD":{"rubRate":0.220173},"KGS":{"rubRate":0.99051},"UZS":{"rubRate":0.00669818},"AZN":{"rubRate":50.9532},"GEL":{"rubRate":31.0534},"TJS":{"rubRate":7.91654},"TMT":{"rubRate":24.7487},"RUB":{"rubRate":1}},"mobileAppVariables":{"objects":{"directPosCreditParameters":{"maxAmount":30000000,"maxPeriod":36,"medianCommission":20,"minAmount":100000,"minPeriod":6,"noneSubjectIds":[8241],"range":[{"fromId":1,"toId":1}],"summForShowWidget":1000000}},"numbers":{"paidInstallmentsOnboardingTooltipCounter":2,"expirationPvzDays":12}}}'
                );
                r(69334),
                    r(95818),
                    r(55989),
                    r(93459),
                    r(82512),
                    r(2418),
                    r(71319),
                    r(94206),
                    r(42240),
                    r(69707),
                    r(89188);
                (NodeList.prototype.toArray = function () {
                    return Array.prototype.slice.call(this);
                }),
                    (HTMLCollection.prototype.forEach = function (e) {
                        Array.prototype.slice
                            .call(this)
                            .forEach((t, r, s) => e(t, r, s));
                    }),
                    window.requestIdleCallback ||
                        (window.requestIdleCallback = function (e) {
                            setTimeout(e, 1);
                        });
                var n = r(62819),
                    o = (r(86485), r(93141));
                var i = class {
                        constructor(e) {
                            this._setStatic(e);
                        }
                        async init() {
                            var e;
                            const t = {},
                                r = document.querySelector(".j-lk-menu-top"),
                                s = [
                                    {
                                        type: "top",
                                        selector:
                                            document.querySelector(
                                                ".j-lk-menu-top"
                                            ),
                                    },
                                ];
                            return (
                                (this.loadTemplateTask =
                                    $.views.helpers.loadTemplateAsync(
                                        "menuLk"
                                    )),
                                await this.loadTemplateTask,
                                (this.moneyBalanceGEL =
                                    (WbSpaModel.prototype.$auth.isAuth &&
                                        (null ==
                                        (e = WbSpaModel.prototype.$user.balance)
                                            ? void 0
                                            : e.moneyBalanceGEL)) ||
                                    0),
                                (this.isGeLocale =
                                    "ge" === wb.settings.currentLocale),
                                (this.showWalletMenu =
                                    !this.isGeLocale ||
                                    0 !== this.moneyBalanceGEL),
                                $.templates.menuLk.link(r, this),
                                $.link(!0, r, this),
                                (this.alternateRoutes = new Map()),
                                s.forEach((e) =>
                                    e.selector
                                        .querySelectorAll("a")
                                        .forEach((e) => {
                                            var r;
                                            let s;
                                            try {
                                                s = new URL(e.href).pathname;
                                            } catch (e) {
                                                return;
                                            }
                                            const n = "true" == e.dataset.main,
                                                o = "true" == e.dataset.sub,
                                                i = e.parentElement;
                                            t.hasOwnProperty(s) ||
                                                (t[s] = {
                                                    links: [],
                                                    elements: [],
                                                });
                                            const a = e.closest(
                                                n ? "li" : "ul"
                                            );
                                            t[s].elements.push(a),
                                                t[s].links.push({
                                                    el: i,
                                                    isMainMenu: n,
                                                    isSubMenu: o,
                                                    path: s,
                                                    switch: i.dataset.switch,
                                                    funcSwitch:
                                                        i.dataset.funcSwitch,
                                                }),
                                                null ==
                                                    (r = e.dataset.altRoutes) ||
                                                    r
                                                        .split(",")
                                                        .forEach((e) => {
                                                            e &&
                                                                this.alternateRoutes.set(
                                                                    e.trim(),
                                                                    s
                                                                );
                                                        }),
                                                "6" === a.dataset.attr &&
                                                    ((this.walletWrapperEl = a),
                                                    (this.walletEl = e),
                                                    (this.walletEl.innerText =
                                                        wb.settings.balanceTitle),
                                                    this.walletWrapperEl.classList.add(
                                                        wb.settings
                                                            .walletTypeCode > 0
                                                            ? "lk-menu-main__item--wallet"
                                                            : "lk-menu-main__item--balance"
                                                    ));
                                        })
                                ),
                                (this.menuDictionary = t),
                                (this.menuDictionaryKeys = Object.keys(
                                    this.menuDictionary
                                )),
                                (this.root = r),
                                (this.roots = s.map((e) => e.selector)),
                                this._initDropDownMenu(),
                                this.toggleVisibilityNodes(),
                                wb.global.subscribe(
                                    this.toggleVisibilityNodes.bind(this)
                                ),
                                $.observe(wb.settings, "balanceTitle", () => {
                                    (this.walletEl.innerText =
                                        wb.settings.balanceTitle),
                                        this.walletWrapperEl.classList.add(
                                            wb.settings.walletTypeCode > 0
                                                ? "lk-menu-main__item--wallet"
                                                : "lk-menu-main__item--balance"
                                        ),
                                        this.walletEl.setAttribute(
                                            "data-lk-header-st-name",
                                            wb.settings.walletTypeCode < 0
                                                ? "Balance"
                                                : "Wallet"
                                        );
                                }),
                                this
                            );
                        }
                        _setStatic(e) {
                            this.stylesLink = e.stylesLink;
                        }
                        async updateMenu(e, t, r) {
                            if (
                                (await this.loadTemplateTask,
                                this.toggleVisibility(t, r),
                                "/" != e[0] && (e = "/" + e),
                                null == this.root)
                            )
                                return;
                            const s = this.alternateRoutes.get(e);
                            s && (e = s);
                            const n = this.menuDictionary[e];
                            if (null == n) return;
                            const o =
                                n.elements.length > 0
                                    ? n.elements[0].dataset.attr
                                    : "";
                            this.menuDictionaryKeys.forEach((t) => {
                                const r = this.menuDictionary[t].elements;
                                r.length > 0 &&
                                    r.forEach((e) => {
                                        const t = e.dataset.attr == o;
                                        e.classList.toggle("active", t);
                                    }),
                                    this.menuDictionary[t].links.forEach(
                                        (t) => {
                                            !t.isMainMenu &&
                                                t.el.classList.toggle(
                                                    "active",
                                                    t.path == e
                                                );
                                        }
                                    );
                            });
                        }
                        toggleVisibility(e, t) {
                            if (
                                !e ||
                                !e.visible ||
                                (e.authOnly && void 0 !== t && !t)
                            )
                                return this.hide();
                            this.show();
                        }
                        toggleVisibilityNodes() {
                            this.menuDictionaryKeys.forEach((e) => {
                                this.menuDictionary[e].links.forEach((e) => {
                                    var t;
                                    if (e.switch || e.funcSwitch) {
                                        let r =
                                            wb.global.settings.switches[
                                                e.switch
                                            ] ||
                                            (null == (t = this[e.funcSwitch])
                                                ? void 0
                                                : t.call(this));
                                        if (r)
                                            for (const [t, r] of this
                                                .alternateRoutes)
                                                if (r == e.path) {
                                                    const r =
                                                        e.el.querySelector("a");
                                                    if (r) {
                                                        r.href = t;
                                                        break;
                                                    }
                                                }
                                        e.el.classList.toggle("hide", !r);
                                    }
                                });
                            });
                        }
                        async show() {
                            await this.$helper.loadCssAsync(this.stylesLink),
                                this.roots.forEach((e) =>
                                    e.classList.remove("hide")
                                ),
                                "ru" == wb.settings.currentLocale ||
                                    wb.global.userSettings.closed.includes(
                                        "new_fin_oper_loc"
                                    ) ||
                                    (wb.global.userSettings.closed.push(
                                        "new_fin_oper_loc"
                                    ),
                                    wb.global.saveUserSettings(),
                                    this._showFinOperationsTooltip());
                        }
                        hide() {
                            this.roots.forEach((e) => e.classList.add("hide"));
                        }
                        _initDropDownMenu() {
                            const e = ["mouseleave", "click"];
                            this.menuDictionaryKeys.forEach((t) => {
                                this.menuDictionary[t].links.forEach((t) => {
                                    t.isMainMenu &&
                                        t.el.addEventListener(
                                            "mouseover",
                                            () => {
                                                t.isMainMenu &&
                                                    t.el.classList.add("open");
                                            }
                                        ),
                                        e.forEach(function (e) {
                                            t.isMainMenu &&
                                                t.el.addEventListener(
                                                    e,
                                                    function () {
                                                        t.isMainMenu &&
                                                            t.el.classList.remove(
                                                                "open"
                                                            );
                                                    }
                                                );
                                        });
                                });
                            }),
                                this._addClickStat();
                        }
                        _addClickStat() {
                            this.roots.forEach((e) => {
                                e.addEventListener("click", (e) => {
                                    var t, r, s;
                                    const n =
                                            null == (t = e.target)
                                                ? void 0
                                                : t.closest("a"),
                                        o =
                                            null ==
                                            (r = null == n ? void 0 : n.dataset)
                                                ? void 0
                                                : r.lkHeaderWba,
                                        i =
                                            null ==
                                            (s = null == n ? void 0 : n.dataset)
                                                ? void 0
                                                : s.lkHeaderStName;
                                    void 0 !== o && this.handleWbaName(o),
                                        void 0 !== i && this.handleWbaNameSt(i);
                                });
                            });
                        }
                        handleWbaName(e) {
                            e &&
                                ([
                                    "LK_Purchases",
                                    "LK_Favorites",
                                    "LK_DLV",
                                    "LK_eCheck",
                                    "Favourite_Brand",
                                ].includes(e)
                                    ? this.sendClickStat(e)
                                    : ["LK_RefundRegistration"].includes(e)
                                    ? this.sendClickStat("LK_Refunds")
                                    : "LK_Header_Purchases" !== e
                                    ? "LK_Header_Favorites" !== e
                                        ? this.$analitic.sendEvent(`${e}_T`)
                                        : this.$analitic.sendEvent(
                                              "LK_Favorites_T",
                                              {
                                                  location: "LK_Block",
                                              }
                                          )
                                    : this.$analitic.sendEvent(
                                          "LK_Purchases_T",
                                          {
                                              location: "LK_Block",
                                          }
                                      ));
                        }
                        handleWbaNameSt(e) {
                            e &&
                                this.$analitic.sendEvent("LK_Header_T", {
                                    name: e,
                                });
                        }
                        sendClickStat(e) {
                            this.$analitic.sendEvent(`${e}_T`, {
                                location: "Sub_Header",
                            });
                        }
                        _showFinOperationsTooltip() {
                            const e = "lk-menu-main__item--tooltip-active",
                                t =
                                    document.getElementById(
                                        "menuTooltipTarget"
                                    );
                            if (!t) return;
                            const r = t.querySelector(".j-tooltip-close"),
                                s = () => t.classList.remove(e);
                            null == r || r.addEventListener("click", s),
                                setTimeout(s, 6e3),
                                t.classList.add(e);
                        }
                    },
                    a = Object.defineProperty,
                    l = Object.getOwnPropertySymbols,
                    c = Object.prototype.hasOwnProperty,
                    u = Object.prototype.propertyIsEnumerable,
                    d = (e, t, r) =>
                        t in e
                            ? a(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r);
                const p = new RegExp(
                        [
                            "ru-basket-api.wildberries.ru",
                            "basket-api.wildberries.by",
                            "basket-api.wildberries.kz",
                            "basket-api.wildberries.kg",
                            "basket-api.wildberries.am",
                            "basket-api.wildberries.tj",
                            "basket-api.wildberries.ge",
                            "basket-api.wildberries.uz",
                            "localhost",
                            "wbxoofex.wildberries.ru",
                            "customs.wb.ru",
                            "user-geo-data.wildberries.ru",
                            "shopper-bt.wb.ru",
                            "webappx-proxy.wbx-site-utility.k8s.stage-xc",
                            "wbx-site-utility-ingress-controller.wbx-site-utility.k8s.stage-el",
                            "webapp-*.wbx-site.k8s.dev-el",
                            "webapp-*.wbx-site.k8s.stage-dm",
                            "webapp-*.wbx-site.k8s.prod-el",
                            "kg.wildberries.ru",
                            "uz.wildberries.ru",
                        ]
                            .map((e) =>
                                e.replace(/\./g, "\\.").replace(/\*/g, ".*")
                            )
                            .join("|")
                    ),
                    h = new RegExp(
                        [
                            "www.wildberries.ru",
                            "www.wildberries.by",
                            "www.wildberries.kz",
                            "www.wildberries.kg",
                            "kz.wildberries.ru",
                            "www.wildberries.am",
                            "www.wildberries.tj",
                            "www.wildberries.ge",
                            "www.wildberries.uz",
                            "ru-basket-api.wildberries.ru",
                            "basket-api.wildberries.by",
                            "basket-api.wildberries.kz",
                            "basket-api.wildberries.kg",
                            "basket-api.wildberries.am",
                            "basket-api.wildberries.tj",
                            "basket-api.wildberries.ge",
                            "basket-api.wildberries.uz",
                            "localhost",
                            "webapp-*.wbx-site.k8s.dev-el",
                            "webapp-*.wbx-site.k8s.stage-dm",
                            "webapp-*.wbx-site.k8s.prod-el",
                            "kg.wildberries.ru",
                            "uz.wildberries.ru",
                        ]
                            .map((e) =>
                                e.replace(/\./g, "\\.").replace(/\*/g, ".*")
                            )
                            .join("|")
                    );
                class m {
                    async fetchJSON(e, t = {}, r = {}) {
                        for (let s = 1; s <= 2; s++) {
                            let s;
                            try {
                                if (r.timeout) {
                                    const e = new AbortController();
                                    setTimeout(() => e.abort(), r.timeout),
                                        (t.signal = e.signal);
                                }
                                let n;
                                switch (
                                    ((s = await this.fetch(e, t)), s.status)
                                ) {
                                    case 401:
                                    case 403:
                                        throw new UnauthorizeError({
                                            jwtDrop:
                                                s.headers.has("X-Jwt-Drop"),
                                        });
                                    case 404:
                                        throw new NotFoundError();
                                    case 204:
                                    case 208:
                                        n = null;
                                        break;
                                    default:
                                        if (!s.ok) {
                                            const e = new Error(
                                                `Fetch failed with status code ${s.status}`
                                            );
                                            throw (
                                                ((e.status = s.status),
                                                r.keepRespData &&
                                                    (e.data = await s.json()),
                                                e)
                                            );
                                        }
                                        n = await s.json();
                                }
                                return r.noProcessResponse || null == n
                                    ? r.includeResponse
                                        ? {
                                              response: s,
                                              responseData: n,
                                              headers: s.headers,
                                          }
                                        : n
                                    : new Promise((e, t) => {
                                          $.processResponse(
                                              n,
                                              (t) =>
                                                  r.includeResponse
                                                      ? e({
                                                            response: s,
                                                            responseData: t,
                                                            headers: s.headers,
                                                        })
                                                      : e(t),
                                              (e) => t(new KnownServerError(e)),
                                              (t) =>
                                                  r.includeResponse
                                                      ? e({
                                                            response: s,
                                                            responseData: t,
                                                            headers: s.headers,
                                                        })
                                                      : e(t)
                                          );
                                      });
                            } catch (s) {
                                let n = s;
                                if (
                                    "AbortError" == s.name &&
                                    r.throwTimeoutError
                                )
                                    throw s;
                                const o =
                                    !s.isCustomError &&
                                    s instanceof TypeError &&
                                    ("Failed to fetch" === s.message ||
                                        "NetworkError when attempting to fetch resource." ===
                                            s.message ||
                                        "Cancelled" === s.message);
                                if (
                                    (o &&
                                        (n = new CancelledRequestError(
                                            s.message
                                        )),
                                    (o || "AbortError" == s.name) &&
                                        r.tryResend)
                                )
                                    return (
                                        WbSpaModel.prototype.$services.retryFetchService.saveRequest(
                                            e,
                                            t,
                                            r
                                        ),
                                        Promise.resolve({})
                                    );
                                if (r.hasOwnProperty("defaultValue"))
                                    return r.includeResponse
                                        ? {
                                              response: void 0,
                                              responseData: r.defaultValue,
                                          }
                                        : r.defaultValue;
                                throw (
                                    (n.isCustomError ||
                                        ("AbortError" !== s.name &&
                                            console.error(
                                                `Unknown server error, msg=${s.message}, requested_url=${e}`
                                            )),
                                    n.isUnauthorize &&
                                        (n.jwtDrop &&
                                            WbSpaModel.prototype.$auth.setToken(
                                                null
                                            ),
                                        await WbSpaModel.prototype.$auth.loginPopup()),
                                    n)
                                );
                            }
                        }
                    }
                    async fetchBasicJSON(e, t = {}, r = {}) {
                        var s, n, o, i;
                        if (
                            (t.headers || (t.headers = new Headers()),
                            r.addContentTypeHeader &&
                                t.headers.set(
                                    "Content-Type",
                                    "application/json"
                                ),
                            r.addUserHeader)
                        ) {
                            const e = WbSpaModel.prototype.$user.getId();
                            e && t.headers.set("X-Userid", e);
                        }
                        r.noCache && t.headers.set("cache", "no-cache");
                        const a = WbSpaModel.prototype.$auth.jwt;
                        r.addAuthHeader &&
                            a &&
                            t.headers.set("Authorization", `Bearer ${a}`);
                        const l = null != (s = r.retry) ? s : 1;
                        let c;
                        for (let s = 1; s <= l; s++) {
                            const u = s % 2 == 0 && r.reserve ? r.reserve : e;
                            if (r.timeout)
                                if (
                                    AbortSignal.timeout &&
                                    "function" == typeof AbortSignal.timeout
                                )
                                    t.signal = AbortSignal.timeout(r.timeout);
                                else {
                                    const e = new AbortController();
                                    setTimeout(() => e.abort(), r.timeout),
                                        (t.signal = e.signal);
                                }
                            try {
                                if (
                                    r.addCatalogCaptcha &&
                                    (null == (n = wb.global)
                                        ? void 0
                                        : n.settings.switches
                                              .enableCatalogCaptcha) &&
                                    !a
                                ) {
                                    const e =
                                            null !=
                                            (o =
                                                WbSpaModel.prototype.$services
                                                    .parseTokenService)
                                                ? o
                                                : await WbSpaModel.prototype.$getService(
                                                      "parseTokenService"
                                                  ),
                                        r =
                                            await e.providers.catalog.getToken();
                                    r &&
                                        t.headers.set(
                                            "X-Captcha-ID",
                                            `Catalog ${r}`
                                        );
                                }
                                return await this.fetch(u, t).then(
                                    async (e) => {
                                        var t, s, n;
                                        if (204 === e.status)
                                            return Promise.resolve(
                                                r.return204 ? e : null
                                            );
                                        if (208 === e.status)
                                            return Promise.resolve(null);
                                        if (404 === e.status && r.throwErr404)
                                            throw new NotFoundError();
                                        if (e.ok)
                                            return (
                                                (c =
                                                    "text" === r.fetchType
                                                        ? await e.text()
                                                        : await e.json()),
                                                "v2" === r.v && c.error
                                                    ? Promise.reject(
                                                          new KnownServerError(
                                                              c.error
                                                          )
                                                      )
                                                    : c
                                            );
                                        if (
                                            r.addCatalogCaptcha &&
                                            (null == (t = wb.global)
                                                ? void 0
                                                : t.settings.switches
                                                      .enableCatalogCaptcha) &&
                                            498 === e.status
                                        )
                                            throw (
                                                (null ==
                                                    (s =
                                                        WbSpaModel.prototype
                                                            .$services
                                                            .parseTokenService) ||
                                                    s.providers.catalog.resetToken(),
                                                new Error("Need refresh token"))
                                            );
                                        if ("v2" === r.v)
                                            return Promise.reject(
                                                new NetworkError()
                                            );
                                        r.logOff ||
                                            null == (n = wb.spa) ||
                                            n.logError(
                                                new Error(
                                                    `Failed fetch. status:${e.status}; type:${e.type}`
                                                ),
                                                {
                                                    url: u,
                                                }
                                            );
                                    }
                                );
                            } catch (e) {
                                if (
                                    (e.isCustomError || e.isNetworkError) &&
                                    "v2" === r.v
                                )
                                    return Promise.reject(e);
                                if (
                                    ("TimeoutError" === e.name ||
                                        "AbortError" === e.name) &&
                                    r.throwTimeoutError
                                )
                                    throw e;
                                if (
                                    e instanceof TypeError &&
                                    "Cancelled" === e.message
                                )
                                    return null;
                                if (
                                    (r.logOff ||
                                        null == (i = wb.spa) ||
                                        i.logError(e, {
                                            url: u,
                                            attempt: s,
                                        }),
                                    e.isNotFound && r.throwErr404)
                                )
                                    throw e;
                                if (s === l && r.nullOnError) return null;
                                if (
                                    s === l &&
                                    e instanceof TypeError &&
                                    ("Failed to fetch" === e.message ||
                                        "NetworkError when attempting to fetch resource." ===
                                            e.message)
                                )
                                    throw new NetworkError();
                            }
                        }
                        return null;
                    }
                    async fetchText(e, t = {}, r = {}) {
                        var s;
                        let n;
                        if (r.timeout) {
                            const e = new AbortController();
                            setTimeout(() => e.abort(), r.timeout),
                                (t.signal = e.signal);
                        }
                        try {
                            let r;
                            if (
                                ((n = await this.fetch(e, t)), 401 === n.status)
                            )
                                throw new UnauthorizeError();
                            return n.ok && (r = await n.text()), r;
                        } catch (t) {
                            let n = t;
                            throw (
                                (!t.isCustomError &&
                                    t instanceof TypeError &&
                                    ("Failed to fetch" === t.message ||
                                        "NetworkError when attempting to fetch resource." ===
                                            t.message ||
                                        "Cancelled" === t.message) &&
                                    (n = new CancelledRequestError()),
                                n.isCustomError ||
                                    (console.log(t.message),
                                    (n = new KnownServerError(
                                        "Unknown server error, msg=" +
                                            t.message +
                                            ", requested_url=" +
                                            e
                                    ))),
                                n.isUnauthorize &&
                                    (n.jwtDrop &&
                                        WbSpaModel.prototype.$auth.setToken(
                                            null
                                        ),
                                    r.redirectUnauth &&
                                        wb.spa.signIn(
                                            {
                                                query: {
                                                    returnUrl:
                                                        window.location.href,
                                                },
                                            },
                                            null != (s = r.replaceState) && s
                                        )),
                                n)
                            );
                        }
                    }
                    async fetchStaticDataV2(e, t = 3e4, r = "json") {
                        return await this.fetchStaticV3(
                            wb.helpers.url.urlStaticData,
                            {
                                timeout: t,
                                fetchType: r,
                            },
                            e
                        );
                    }
                    async fetchStaticV3(e, t = {}, ...r) {
                        if ("function" != typeof e) return;
                        const s = Object.assign(
                            {
                                timeout: 3e4,
                                nullOnError: !0,
                                retry: 2,
                                reserve: e.apply(void 0, [...r, !0]),
                            },
                            t
                        );
                        return await this.fetchBasicJSON(
                            e.apply(void 0, r),
                            {},
                            s
                        );
                    }
                    async fetch(e, t = {}) {
                        var r, s, n;
                        const o = t,
                            { headers: i = {} } = o,
                            a = ((e, t) => {
                                var r = {};
                                for (var s in e)
                                    c.call(e, s) &&
                                        t.indexOf(s) < 0 &&
                                        (r[s] = e[s]);
                                if (null != e && l)
                                    for (var s of l(e))
                                        t.indexOf(s) < 0 &&
                                            u.call(e, s) &&
                                            (r[s] = e[s]);
                                return r;
                            })(o, ["headers"]),
                            m = new Headers(i),
                            g = WbSpaModel.prototype;
                        let b = 1,
                            y = !1;
                        try {
                            const t = new URL(
                                e.startsWith("//")
                                    ? `${document.location.protocol}${e}`
                                    : e
                            );
                            if (
                                (((t.hostname === window.location.host &&
                                    t.port === window.location.port) ||
                                    p.test(t.hostname)) &&
                                    (h.test(t.hostname) &&
                                        ((b = 2),
                                        m.set(
                                            "X-Spa-Version",
                                            WbSpaModel.appVersion
                                        ),
                                        m.set(
                                            "X-Requested-With",
                                            "XMLHttpRequest"
                                        ),
                                        m.set(
                                            "DeviceId",
                                            g.$services.sessionService.getSession()
                                        ),
                                        g.$adult.isConfirmed &&
                                            m.set("adultConfirmed", "1")),
                                    !m.has("Authorization") &&
                                        g.$auth.jwt &&
                                        m.set(
                                            "Authorization",
                                            `Bearer ${g.$auth.jwt}`
                                        )),
                                wb.settings.secondHost)
                            ) {
                                const r = t.host.split(".");
                                r.splice(-1)[0] !== wb.settings.currentDomain &&
                                    ((t.pathname = r.join(".") + t.pathname),
                                    (t.host = wb.settings.secondHost),
                                    (t.port = ""),
                                    (e = t.href));
                            }
                        } catch (e) {
                            (y = !0),
                                (b = 2),
                                m.set("X-Requested-With", "XMLHttpRequest"),
                                m.set("X-Spa-Version", WbSpaModel.appVersion),
                                m.set(
                                    "DeviceId",
                                    g.$services.sessionService.getSession()
                                ),
                                !m.has("Authorization") &&
                                    g.$auth.jwt &&
                                    m.set(
                                        "Authorization",
                                        `Bearer ${g.$auth.jwt}`
                                    ),
                                g.$adult.isConfirmed &&
                                    m.set("adultConfirmed", "1");
                        }
                        t.body instanceof URLSearchParams &&
                            (m.set(
                                "Content-Type",
                                "application/x-www-form-urlencoded; charset=UTF-8"
                            ),
                            (a.body =
                                null == (r = null == a ? void 0 : a.body)
                                    ? void 0
                                    : r.toString()));
                        const v = ((e, t) => {
                            for (var r in t || (t = {}))
                                c.call(t, r) && d(e, r, t[r]);
                            if (l)
                                for (var r of l(t))
                                    u.call(t, r) && d(e, r, t[r]);
                            return e;
                        })(
                            {
                                credentials: "same-origin",
                                headers: m,
                            },
                            a
                        );
                        let f;
                        for (let t = 1; t <= b; t++) {
                            if (((f = await fetch(e, v)), 498 === f.status)) {
                                const e = f.headers.get("x-wbaas-token");
                                if ("get" === e || "refresh" === e) {
                                    const e =
                                        null !=
                                        (s =
                                            WbSpaModel.prototype.$services
                                                .parseTokenService)
                                            ? s
                                            : await WbSpaModel.prototype.$getService(
                                                  "parseTokenService"
                                              );
                                    await e.providers.main.getToken();
                                    continue;
                                }
                            }
                            if (
                                y &&
                                (null == (n = null == wb ? void 0 : wb.helpers)
                                    ? void 0
                                    : n.date)
                            ) {
                                const e = f.headers.get("Date");
                                wb.helpers.date.serverDate = new Date(
                                    String(e)
                                );
                            }
                            break;
                        }
                        return f;
                    }
                    static factory() {
                        return new m();
                    }
                }
                var g = new (class {
                        async fetch(e, t, r, s) {
                            var n;
                            const o = WbSpaModel.prototype.$auth;
                            let i = o.getToken();
                            const a =
                                null == s
                                    ? void 0
                                    : s(
                                          null == (n = i.data)
                                              ? void 0
                                              : n.shard_key
                                      );
                            if (null == t ? void 0 : t.timeout) {
                                const e = new AbortController();
                                setTimeout(() => e.abort(), t.timeout),
                                    (t.signal = e.signal);
                            }
                            return this._fetch(
                                `${a || ""}${e}`,
                                t,
                                i.token
                            ).then(async (t) => {
                                if (t.ok) {
                                    const e = +t.headers.get("content-length");
                                    if (e > 16 && e < 256) {
                                        const e = await t.clone().json();
                                        -1 === (null == e ? void 0 : e.state) &&
                                            41 === e.reason &&
                                            o._slide(!0);
                                    }
                                    return t;
                                }
                                function s(r, s) {
                                    return (
                                        wb.spa.logError(
                                            {
                                                message: r,
                                            },
                                            {
                                                status: s,
                                                msg: "wbx_fetch",
                                            }
                                        ),
                                        Promise.reject(
                                            new Error(
                                                `url:${e}, response:${r}, code:${t.status}`
                                            )
                                        )
                                    );
                                }
                                return (
                                    401 === t.status && o._slide(!0),
                                    "function" == typeof r
                                        ? r(t, s)
                                        : t.text().then((e) => s(e, t.status))
                                );
                            });
                        }
                        async postJSON(e, t, r) {
                            return this._fetchJSON(e, t, r, "POST");
                        }
                        async getJSON(e, t) {
                            return this._fetchJSON(e, null, t, "GET");
                        }
                        _fetch(e, t, r) {
                            return r
                                ? (!t && (t = {}),
                                  (t.headers = Object.assign({}, t.headers, {
                                      Authorization: "Bearer " + r,
                                  })),
                                  WbSpaModel.prototype.$httpClient.fetch(e, t))
                                : Promise.reject("miss accessToken");
                        }
                        async _fetchJSON(e, t, r, s) {
                            const n = {
                                method: s,
                            };
                            Object.assign(n, r),
                                (n.headers = {
                                    "X-Service-Name": "site",
                                }),
                                t &&
                                    ((n.headers["Content-Type"] =
                                        "application/json"),
                                    (n.body = t));
                            const o = await this.fetch(e, n);
                            if (o.ok) return await o.json();
                        }
                    })(),
                    b = r(98864);
                const y = "wbx__tokenData",
                    v = "v2",
                    f = `/${v}/auth/slide-v3`,
                    w = `/${v}/auth/slide-v3-confirm`,
                    S = `/${v}/auth/logoff`;
                var _ = new (class {
                        constructor() {
                            this._pull(),
                                window.addEventListener("storage", (e) => {
                                    e.key === y && this._pull();
                                });
                        }
                        get AUTH_HOST() {
                            let e = wb.settings.currentDomain;
                            return "kz" === e && (e = "ru"), b.R0 + e;
                        }
                        get isAuth() {
                            return !!this._data.token;
                        }
                        get jwt() {
                            return this._data.token;
                        }
                        get jwtData() {
                            return this._data.data;
                        }
                        get isUserGuid() {
                            var e;
                            return isNaN(
                                null == (e = this.jwtData) ? void 0 : e.user
                            );
                        }
                        get um() {
                            return this._data.um;
                        }
                        get shard() {
                            var e;
                            return (
                                Number(
                                    null == (e = this.jwtData)
                                        ? void 0
                                        : e.shard_key
                                ) || 1
                            );
                        }
                        get sShard() {
                            return $.views.converters.leadZero(this.shard, 2);
                        }
                        getToken() {
                            if (this.jwt)
                                if (this.isWbxSite) this._slide(!1, !0);
                                else {
                                    this._isJwtExpired(this.jwtData) &&
                                        this._slide();
                                }
                            return this._data;
                        }
                        setToken(e) {
                            try {
                                if (e) {
                                    const t = this._tryDecodeJwt(e);
                                    if (t) {
                                        this._data = {
                                            token: e,
                                            data: t,
                                            um: this._createUm(t),
                                        };
                                        try {
                                            localStorage.putObject(y, {
                                                token: e,
                                            });
                                        } catch (e) {}
                                        return;
                                    }
                                }
                                (this._data = {
                                    token: null,
                                    data: {},
                                    um: this._createUm(),
                                }),
                                    localStorage.removeItem(y);
                            } catch (e) {
                            } finally {
                                this._jwtUpdateResp = null;
                            }
                        }
                        async signOut(e) {
                            if (!this.isAuth) return;
                            const t = new AbortController();
                            setTimeout(() => t.abort(), 2e3),
                                await this._fetch(S, {
                                    method: "POST",
                                    credentials: "include",
                                    signal: t.signal,
                                    headers: {
                                        deviceid:
                                            WbSpaModel.prototype.$services.sessionService.getSession(),
                                        "wb-apptype": "web",
                                        "wb-appversion": WbSpaModel.appVersion,
                                    },
                                }).catch((e) =>
                                    Promise.resolve({
                                        isNetworkError: !0,
                                    })
                                ),
                                this.signOutOld(e),
                                this.setToken(null);
                        }
                        async signOutOld(e) {
                            return WbSpaModel.prototype.$httpClient.fetchJSON(
                                `/webapi/security/exit?returnUrl=${encodeURIComponent(
                                    e || ""
                                )}`,
                                {
                                    method: "POST",
                                }
                            );
                        }
                        _pull() {
                            var e;
                            const t =
                                    null == (e = localStorage.getObject(y))
                                        ? void 0
                                        : e.token,
                                r = this._tryDecodeJwt(t);
                            this._data = r
                                ? {
                                      token: t,
                                      data: r,
                                      um: this._createUm(r),
                                  }
                                : {
                                      token: null,
                                      data: {},
                                      um: this._createUm(r),
                                  };
                        }
                        _isJwtExpired(e) {
                            return Date.now() >= 1e3 * (e.iat + 172800);
                        }
                        _isJwtShortExpired(e) {
                            return Date.now() >= 1e3 * (e.iat + 120);
                        }
                        _slide(e, t) {
                            try {
                                return this._slideToken(e, t);
                            } catch (e) {
                                wb.spa.logError(e, {
                                    msg: "wbx_auth_slide",
                                });
                            }
                        }
                        _createUm(e) {
                            let t = null == e ? void 0 : e.user;
                            if (t) {
                                t = `user:${t}`;
                                const e = [];
                                for (let r = 0; r < t.length; r++)
                                    e.push(129 ^ t.charCodeAt(r));
                                return {
                                    userUid: btoa(
                                        String.fromCodePoint(
                                            ...new TextEncoder().encode(
                                                String.fromCharCode.apply(
                                                    null,
                                                    e
                                                )
                                            )
                                        )
                                    ),
                                    userId: t,
                                };
                            }
                            return {
                                userUid: "",
                                userId: "",
                            };
                        }
                        _tryDecodeJwt(e) {
                            try {
                                if (!e) return null;
                                const [t, r, s] = e.split(".");
                                if (!(t || r || s)) return null;
                                const n = atob(r);
                                return n ? JSON.parse(n) || {} : null;
                            } catch (e) {
                                return console.error(e), null;
                            }
                        }
                        get isWbxSite() {
                            if ("ge" === wb.settings.currentLocale)
                                return localStorage.hasItem(
                                    "wbx__exchangeRates"
                                );
                        }
                        slideRefreshCookie() {
                            return WbSpaModel.prototype.$httpClient.fetchBasicJSON(
                                "/v2/auth/sliderefresh",
                                {
                                    method: "POST",
                                    credentials: "include",
                                }
                            );
                        }
                        delRefreshCookie() {
                            return WbSpaModel.prototype.$httpClient
                                .fetch("/v2/auth/delrefresh", {
                                    method: "POST",
                                    credentials: "include",
                                })
                                .catch(() => {});
                        }
                        _fetch(e, t) {
                            return WbSpaModel.prototype.$httpClient.fetch(
                                this.AUTH_HOST + e,
                                t
                            );
                        }
                        async _slideToken(e, t) {
                            navigator.locks.request(
                                "lock-auth-slide",
                                async (r) => {
                                    var s;
                                    if (!this.jwt) return;
                                    if (
                                        t &&
                                        this.isWbxSite &&
                                        this._isJwtShortExpired(this.jwtData)
                                    ) {
                                        const t =
                                            await this.slideRefreshCookie().catch(
                                                () => {}
                                            );
                                        0 ===
                                        (null == t ? void 0 : t.ResultState)
                                            ? (e = !0)
                                            : -1 ===
                                                  (null == t
                                                      ? void 0
                                                      : t.ResultState) &&
                                              localStorage.removeItem(
                                                  "wbx__exchangeRates"
                                              );
                                    }
                                    if (
                                        e &&
                                        !this._isJwtShortExpired(this.jwtData)
                                    )
                                        return;
                                    if (!e && !this._isJwtExpired(this.jwtData))
                                        return;
                                    const n = new AbortController();
                                    setTimeout(() => n.abort(), 1e4);
                                    const o =
                                            WbSpaModel.prototype.$services.sessionService.getSession(),
                                        i = await this._fetch(f, {
                                            method: "POST",
                                            credentials: "include",
                                            signal: n.signal,
                                            headers: {
                                                deviceid: o,
                                                "wb-apptype": "web",
                                                "wb-appversion":
                                                    WbSpaModel.appVersion,
                                                "Access-Token": this.jwt,
                                            },
                                        })
                                            .then((e) => (e.ok ? e.json() : {}))
                                            .then(
                                                (e) => (
                                                    e.error &&
                                                        wb.spa.logError(
                                                            new Error(
                                                                `[wbx_auth_slide]: res: ${e.result}, error: ${e.error}`
                                                            )
                                                        ),
                                                    e
                                                )
                                            )
                                            .catch(() => ({}));
                                    if (
                                        (t &&
                                            (await this.delRefreshCookie(),
                                            localStorage.removeItem(
                                                "wbx__exchangeRates"
                                            )),
                                        12 !== i.result)
                                    ) {
                                        if (
                                            0 === i.result &&
                                            (null == (s = i.payload)
                                                ? void 0
                                                : s.sticker) &&
                                            i.payload.access_token
                                        ) {
                                            const e = JSON.stringify({
                                                    sticker: i.payload.sticker,
                                                }),
                                                t = await this._fetch(w, {
                                                    method: "POST",
                                                    credentials: "include",
                                                    signal: n.signal,
                                                    headers: {
                                                        deviceid: o,
                                                        "wb-apptype": "web",
                                                        "wb-appversion":
                                                            WbSpaModel.appVersion,
                                                    },
                                                    body: e,
                                                })
                                                    .then((e) =>
                                                        e.ok ? e.json() : {}
                                                    )
                                                    .then(
                                                        (e) => (
                                                            e.error &&
                                                                wb.spa.logError(
                                                                    new Error(
                                                                        `[wbx_auth_slide_confirm]: res: ${e.result}, error: ${e.error}`
                                                                    )
                                                                ),
                                                            e
                                                        )
                                                    )
                                                    .catch(() => ({}));
                                            12 === t.result
                                                ? this.setToken(null)
                                                : 0 === t.result &&
                                                  this.setToken(
                                                      i.payload.access_token
                                                  );
                                        }
                                    } else this.setToken(null);
                                }
                            );
                        }
                        sendMetrics(e, t) {
                            if (!window._debug)
                                try {
                                    WbSpaModel.prototype.$httpClient.fetch(
                                        `/webapi/logging/wbxauth/metrics?act=${e}&status=${t}`,
                                        {
                                            method: "POST",
                                        }
                                    );
                                } catch (e) {}
                        }
                        async loginPopup(e) {
                            if (this.signInModel)
                                this.signInModel.showAuthPopup();
                            else {
                                const t =
                                    await WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                        "signInBase"
                                    );
                                (this.signInModel = new t()),
                                    await this.signInModel.init(!0, e);
                            }
                        }
                    })(),
                    C = r(52890),
                    I = r(17765),
                    k = Object.defineProperty,
                    M = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? k(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var P = class {
                        constructor() {
                            M(this, "allModules"),
                                M(this, "allServices"),
                                M(this, "modulesDict"),
                                M(this, "servicesDict"),
                                M(this, "loadingServices"),
                                (this.allModules = {}),
                                (this.modulesDict = {}),
                                (this.allServices = {}),
                                (this.servicesDict = {}),
                                (this.loadingServices = {});
                        }
                        init() {
                            return (
                                (window.__spaModuleManager__ = {
                                    register: (e, t) => {
                                        this._enrichProto(t),
                                            (this.modulesDict[e] = t);
                                    },
                                    getModule: (e, t) => {
                                        if (null != this.modulesDict[e] || t)
                                            return this.modulesDict[e];
                                        throw new Error(
                                            "Module " +
                                                e +
                                                " has not been loaded yet"
                                        );
                                    },
                                }),
                                (window.__spaServiceManager__ = {
                                    register: (e, t) => {
                                        this._enrichProto(t),
                                            (this.servicesDict[e] = t);
                                    },
                                    getService: (e, t) => {
                                        if (null != this.servicesDict[e] || t)
                                            return this.servicesDict[e];
                                        throw new Error(
                                            "Service " +
                                                e +
                                                " has not been loaded yet"
                                        );
                                    },
                                }),
                                this
                            );
                        }
                        setModules(e) {
                            this.allModules = e;
                        }
                        setServices(e) {
                            this.allServices = e;
                        }
                        async loadServiceAsync(e) {
                            const { physicalPath: t } =
                                this.allServices[e] || {};
                            if (null == t)
                                throw new Error(e + " service doesnt exist");
                            const r = await this._loadServiceAsync(e, t);
                            WbSpaModel.prototype.$services[e] =
                                null != r ? new r() : null;
                        }
                        async loadServiceAsSingletonAsync(e) {
                            const { physicalPath: t } =
                                this.allServices[e] || {};
                            if (null == t)
                                throw new Error(e + " service doesnt exist");
                            return (
                                this.loadingServices[e] ||
                                    (this.loadingServices[e] =
                                        this._loadServiceAsync(e, t).then(
                                            (t) => (
                                                (WbSpaModel.prototype.$services[
                                                    e
                                                ] = null != t ? new t() : null),
                                                WbSpaModel.prototype.$services[
                                                    e
                                                ]
                                            )
                                        )),
                                this.loadingServices[e]
                            );
                        }
                        async loadModuleAsync(e, t = !1) {
                            "pooMapModule" === e &&
                                wb.global.settings.switches.wbTilesMap &&
                                (e = "pooWbMapModule");
                            let {
                                physicalPath: r,
                                dataPath: s,
                                hasTmpl: n,
                                tmpls: o = [],
                                templateId: i,
                                isDynamic: a = !1,
                                httpMethod: l = "GET",
                                cssPaths: c,
                                jsPaths: u,
                                apiName: d,
                            } = this.allModules[e] || {};
                            if (null == r)
                                throw new Error(e + " module doesnt exist");
                            const p = o.map((e) => this._loadTemplateAsync(e)),
                                h = this._loadTemplateAsync(n ? e : null, i),
                                m = this._loadDataAsync(e, s, a, l, d),
                                g =
                                    null == c
                                        ? [Promise.resolve(null)]
                                        : c.map((e) =>
                                              WbSpaModel.prototype.$helper.loadCssAsync(
                                                  e
                                              )
                                          ),
                                b =
                                    null == u
                                        ? [Promise.resolve(null)]
                                        : u.map((e) =>
                                              WbSpaModel.prototype.$helper.loadJsAsync(
                                                  e
                                              )
                                          ),
                                [y, v, f] = await Promise.all([
                                    this._loadModule(e, r, t),
                                    m,
                                    h,
                                    ...p,
                                    ...g,
                                    ...b,
                                ]);
                            return (
                                null != y && ((y.data = v), (y.template = f)), y
                            );
                        }
                        async execModule(e = "", t = "", r = []) {
                            try {
                                (await this.loadModuleAsync(e))[t](...r);
                            } catch (e) {
                                console.error(e);
                            }
                        }
                        async _loadModule(e, t, r) {
                            if (null == e || null == t)
                                throw new Error(
                                    "path and name are required to load module"
                                );
                            return (
                                await WbSpaModel.prototype.$helper.loadJsAsync(
                                    t
                                ),
                                window.__spaModuleManager__.getModule(e, r)
                            );
                        }
                        async _loadServiceAsync(e, t) {
                            if (null == e || null == t)
                                throw new Error(
                                    "path and name are required to load service"
                                );
                            return (
                                await WbSpaModel.prototype.$helper.loadJsAsync(
                                    t
                                ),
                                window.__spaServiceManager__.getService(e)
                            );
                        }
                        async _loadDataAsync(e, t, r, s, n) {
                            if (null == t) return null;
                            const o = this.modulesDict[e];
                            if (!r && null != o && (0, I.rI)(o)) {
                                const e = new o();
                                if (!e.isNetworkError) return e.data;
                            }
                            return (
                                "basket" === n &&
                                    (t = `${WbSpaModel.prototype.$services.cartService.publicBasketApiUrl}${t}`),
                                await WbSpaModel.prototype.$httpClient.fetchJSON(
                                    t,
                                    {
                                        method: s || "GET",
                                        credentials: "include",
                                    },
                                    {
                                        defaultValue: {
                                            isNetworkError: !0,
                                        },
                                    }
                                )
                            );
                        }
                        async _loadTemplateAsync(e, t, r) {
                            return null == e && null == t
                                ? Promise.resolve(null)
                                : t
                                ? $.views.loadWebApiTemplateAsync(t, r)
                                : null != e
                                ? $.views.loadTemplateAsync(e, r)
                                : Promise.resolve(null);
                        }
                        _enrichProto(e) {
                            if (!e.prototype) return;
                            let t = e.prototype,
                                r = null;
                            for (
                                ;
                                (r = Object.getPrototypeOf(t)) &&
                                r != Object.prototype;

                            )
                                t = r;
                            t != WbSpaModel.prototype &&
                                Object.setPrototypeOf(t, WbSpaModel.prototype);
                        }
                    },
                    T = Object.defineProperty,
                    A = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? T(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var D = class {
                        constructor() {
                            A(this, "_isConfirmed"),
                                A(this, "_adultPopup"),
                                (this.proceedIfAdultConfirmed =
                                    this.proceedIfAdultConfirmed.bind(this));
                        }
                        get isConfirmed() {
                            if (null == this._isConfirmed) {
                                const e = localStorage.getObject("__ac");
                                e && e.dtExp > Date.utcNow()
                                    ? (this._isConfirmed = e.state)
                                    : (this._isConfirmed = !1);
                            }
                            return this._isConfirmed;
                        }
                        set isConfirmed(e) {
                            this._isConfirmed = e;
                            try {
                                localStorage.putObject("__ac", {
                                    dtExp: Date.utcNow() + 36e5,
                                    state: e,
                                });
                            } catch (e) {}
                        }
                        get adultPopup() {
                            return this._adultPopup
                                ? Promise.resolve(this._adultPopup)
                                : new Promise((e) => {
                                      WbSpaModel.prototype.$moduleLoader
                                          .loadModuleAsync(
                                              "adultConfirmedPopup"
                                          )
                                          .then((t) => {
                                              (this._adultPopup = new t()),
                                                  e(this._adultPopup);
                                          });
                                  });
                        }
                        proceedIfAdultConfirmed(e, t, r, ...s) {
                            this.adultPopup.then((n) => {
                                null == n || n.closePopup(),
                                    !e || this.isConfirmed
                                        ? null == t || t.apply(r, s)
                                        : null == n ||
                                          n
                                              .proceedIfAdultConfirmed(t, r, s)
                                              .then((e) => {
                                                  $.observable(
                                                      this
                                                  ).setProperty({
                                                      isConfirmed: e,
                                                  });
                                              });
                            });
                        }
                        pushToQueue(e) {
                            this.adultPopup.then((t) =>
                                null == t ? void 0 : t.pushToQueue(e)
                            );
                        }
                        closePopup() {
                            this.adultPopup.then((e) =>
                                null == e ? void 0 : e.closePopup()
                            );
                        }
                    },
                    B = Object.defineProperty,
                    O = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? B(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var E = class {
                    getVerticalObserver(e, t, r) {
                        return new x(e, t, r);
                    }
                    getCarouselBannersObserver(e, t, r) {
                        const s = Object.assign(
                            {
                                keepObserve: !0,
                                sendOutEvent: !0,
                            },
                            null != r ? r : {}
                        );
                        return new x(e, t, s);
                    }
                    getSimpleObserver(e, t, r) {
                        if (
                            WbSpaModel.prototype.$apiSupport
                                .intersectionObserver
                        ) {
                            let s = function () {
                                    u.forEach((e) => d.unobserve(e)), (u = []);
                                },
                                n = function () {
                                    null == d || d.disconnect();
                                },
                                o = function (e) {
                                    s(),
                                        (u = e),
                                        u.forEach((e) => d.observe(e));
                                };
                            const i = {
                                    threshold: 0.5,
                                },
                                a = Object.assign(i, null != t ? t : {}),
                                l = {
                                    keepObserve: !1,
                                },
                                c = Object.assign(l, null != r ? r : {});
                            let u = [];
                            const d = new IntersectionObserver((t, r) => {
                                t.forEach((t) => {
                                    t.isIntersecting &&
                                        (e(t.target, u.indexOf(t.target) + 1),
                                        c.keepObserve || r.unobserve(t.target));
                                });
                            }, a);
                            return {
                                observe: o,
                                destroy: n,
                            };
                        }
                        return {
                            observe: (t) =>
                                t.forEach((r) => e(r, t.indexOf(r) + 1)),
                            destroy: () => {},
                        };
                    }
                };
                class x {
                    constructor(e, t, r) {
                        O(this, "intersectionObserverEnable"),
                            O(this, "items"),
                            O(this, "settings"),
                            O(this, "observer"),
                            O(this, "options"),
                            O(this, "elementOutOfViewportEventName"),
                            O(this, "elementInViewportEventName"),
                            (this.intersectionObserverEnable =
                                WbSpaModel.prototype.$apiSupport.intersectionObserver),
                            (e = null != e ? e : []),
                            (this.items = (
                                Array.isArray(e) ? e : [e]
                            ).toHashSet()),
                            (this.options = null != t ? t : {});
                        (this.settings = Object.assign(
                            {
                                keepObserve: !1,
                                sendOutEvent: !1,
                            },
                            null != r ? r : {}
                        )),
                            (this.observer = null),
                            (this.elementInViewportEventName =
                                "elementInViewportEvent"),
                            (this.elementOutOfViewportEventName =
                                "elementOutOfViewportEvent");
                    }
                    _observe(e) {
                        var t, r;
                        const s = {
                            bubbles: !0,
                        };
                        (null == (t = this.settings)
                            ? void 0
                            : t.eventDetails) &&
                            (s.detail = this.settings.eventDetails);
                        let n = new CustomEvent(
                                this.elementInViewportEventName,
                                s
                            ),
                            o = new CustomEvent(
                                this.elementOutOfViewportEventName,
                                s
                            );
                        this.intersectionObserverEnable
                            ? ((this.observer =
                                  null != (r = this.observer)
                                      ? r
                                      : new IntersectionObserver((e, t) => {
                                            e.forEach((e) => {
                                                var r, s;
                                                e.isIntersecting
                                                    ? (e.target.dispatchEvent(
                                                          n
                                                      ),
                                                      (null ==
                                                      (r = this.settings)
                                                          ? void 0
                                                          : r.keepObserve) ||
                                                          (this.items.delete(
                                                              e.target
                                                          ),
                                                          t.unobserve(
                                                              e.target
                                                          )))
                                                    : !e.isIntersecting &&
                                                      (null ==
                                                      (s = this.settings)
                                                          ? void 0
                                                          : s.sendOutEvent) &&
                                                      e.target.dispatchEvent(o);
                                            });
                                        }, this.options)),
                              e.forEach((e) => {
                                  var t;
                                  e &&
                                      (null == (t = this.observer) ||
                                          t.observe(e));
                              }))
                            : e.forEach((e) => {
                                  e.dispatchEvent(n), this.items.delete(e);
                              });
                    }
                    observe() {
                        return this._observe(this.items), this;
                    }
                    update(e) {
                        let t;
                        if (Array.isArray(e)) t = e;
                        else if (e instanceof HTMLElement) t = [e];
                        else {
                            if (!("toArray" in e)) return;
                            t = e.toArray();
                        }
                        this._observe(t);
                    }
                    unobserve(e) {
                        var t;
                        e &&
                            this.intersectionObserverEnable &&
                            (null == (t = this.observer) || t.unobserve(e));
                    }
                    unobserveAll() {
                        this.items.forEach((e) => {
                            var t;
                            return null == (t = this.observer)
                                ? void 0
                                : t.unobserve(e);
                        }),
                            this.items.clear();
                    }
                    destroy() {
                        var e;
                        this.items.clear(),
                            null == (e = this.observer) || e.disconnect();
                    }
                }
                var L = Object.defineProperty,
                    j = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? L(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                let F = null;
                var N = class {
                        constructor() {
                            j(this, "processing"),
                                j(this, "currentData"),
                                j(this, "targetData"),
                                (this.processing = !1),
                                (this.currentData = null),
                                (this.targetData = null),
                                (this.onPopupShow =
                                    this.onPopupShow.bind(this));
                        }
                        async showSlider(e, t, r) {
                            if (!WbSpaModel.prototype.$isDesktop)
                                return void WbSpaModel.prototype.$router.moveTo(
                                    $.views.converters.urlForGood(
                                        e.cod1S,
                                        !0,
                                        e.newTargetUrl,
                                        null,
                                        !1,
                                        e.chrtId
                                    )
                                );
                            const { observeDisplayMode: s, removeObserver: n } =
                                this.createObservable();
                            wb.displayModeSettings.addObserver(s),
                                (e.onHideCallback = n);
                            if (
                                await this.processingPopup(
                                    e.cod1S,
                                    e.chrtId,
                                    e.newTargetUrl,
                                    r
                                )
                            )
                                try {
                                    await F.showSlider(e, t, r);
                                } catch (e) {
                                    this.onShowError(n);
                                } finally {
                                    this.onPopupShow();
                                }
                        }
                        async show(e, t, r, s, n = {}) {
                            if (!WbSpaModel.prototype.$isDesktop)
                                return (
                                    s &&
                                        WbSpaModel.prototype.$analitic.updateState(
                                            s
                                        ),
                                    void WbSpaModel.prototype.$router.moveTo(
                                        $.views.converters.urlForGood(
                                            e,
                                            !0,
                                            r,
                                            null,
                                            !1,
                                            t
                                        )
                                    )
                                );
                            const { observeDisplayMode: o, removeObserver: i } =
                                this.createObservable();
                            wb.displayModeSettings.addObserver(o);
                            if (await this.processingPopup(e, t, r, null))
                                try {
                                    await F.show(e, t, s, i, n);
                                } catch (e) {
                                    this.onShowError(i);
                                } finally {
                                    this.onPopupShow();
                                }
                        }
                        async onPopupShow() {
                            (this.processing = !1),
                                (this.currentData = null),
                                (this.targetData = null);
                        }
                        async processingPopup(e, t, r, s) {
                            var n;
                            return this.processing
                                ? (e !=
                                      (null == (n = this.currentData)
                                          ? void 0
                                          : n.cod1S) &&
                                      (this.targetData = {
                                          cod1S: e,
                                          chrtId: t,
                                          newTargetUrl: r,
                                          cardIndex: s,
                                      }),
                                  !1)
                                : ((this.processing = !0),
                                  (this.currentData = {
                                      cod1S: e,
                                      chrtId: t,
                                      newTargetUrl: r,
                                      cardIndex: s,
                                  }),
                                  await this.loadProductCardPopup(),
                                  !0);
                        }
                        async loadProductCardPopup() {
                            const e =
                                await WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "productCardPopup"
                                );
                            F = e;
                            window.addEventListener(
                                "spaTransition",
                                (() => {
                                    (this.processing = !1),
                                        (this.currentData = null),
                                        (this.targetData = null);
                                }).bind(this)
                            );
                        }
                        createObservable() {
                            const e = () =>
                                    wb.displayModeSettings.removeObserver(t),
                                t = () => {
                                    e();
                                };
                            return {
                                observeDisplayMode: t,
                                removeObserver: e,
                            };
                        }
                        onShowError(e) {
                            navigator.onLine ||
                                wb.popup.renderModalError(
                                    "Internet connection is lost"
                                ),
                                null == e || e(),
                                (this.processing = !1),
                                (this.currentData = null),
                                (this.targetData = null);
                        }
                    },
                    W = Object.defineProperty,
                    R = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? W(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var U = new (class {
                        constructor() {
                            R(this, "eventsDictionary"),
                                (this.eventsDictionary = {});
                        }
                        addEventListener(e, t, { single: r } = {}) {
                            const s = this._validateInput(e, t);
                            if (!s.valid) throw s.error;
                            null == this.eventsDictionary[e] &&
                                (this.eventsDictionary[e] = []);
                            const n = this.eventsDictionary[e];
                            (r && n.includes(t)) || n.push(t);
                        }
                        removeEventListener(e, t) {
                            var r;
                            const s = this._validateInput(e, t);
                            if (!s.valid) throw s.error;
                            const n = this.eventsDictionary[e];
                            this.eventsDictionary[e] =
                                null !=
                                (r =
                                    null == n
                                        ? void 0
                                        : n.filter((e) => e !== t))
                                    ? r
                                    : [];
                        }
                        dispatchEvent(e) {
                            if (!(e instanceof Event))
                                throw new TypeError(
                                    "DispatchEvent can be called only with Event instance"
                                );
                            if ("" == e.type)
                                throw new TypeError(
                                    "Event doesnt have sufficient type"
                                );
                            const t = this.eventsDictionary[e.type];
                            null == t ||
                                t.forEach((t) => {
                                    e.isPropagationStopped ||
                                        queueMicrotask(() => {
                                            t(e);
                                        });
                                });
                        }
                        _validateInput(e, t) {
                            return "string" != typeof e || "" == e
                                ? {
                                      valid: !1,
                                      error: new TypeError(
                                          "Event type must be a valid string value"
                                      ),
                                  }
                                : t instanceof Function
                                ? {
                                      valid: !0,
                                  }
                                : {
                                      valid: !1,
                                      error: new TypeError(
                                          "Callback must be a function"
                                      ),
                                  };
                        }
                    })(),
                    H = Object.defineProperty,
                    q = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? H(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var z = new (class {
                        constructor() {
                            q(this, "items"),
                                q(this, "requestUrl"),
                                q(this, "defaultTitle"),
                                (this.items = []),
                                (this.requestUrl = "");
                        }
                        init() {
                            this.defaultTitle = wb.i18n.t(
                                "common.metaInfo.title"
                            );
                            const e = [
                                {
                                    tagName: "title",
                                    htmlContent: wb.i18n.t(
                                        "common.metaInfo.title"
                                    ),
                                },
                            ];
                            this.items = e.map((e) => {
                                var t;
                                try {
                                    const r = Object.keys(
                                        null != (t = e.attributesDictionary)
                                            ? t
                                            : {}
                                    ).map((t) => {
                                        return `[${t}='${
                                            ((r = e.attributesDictionary
                                                ? e.attributesDictionary[t]
                                                : ""),
                                            r
                                                .replace(/[\n\r]/g, "")
                                                .replace(/["']/g, "\\$&"))
                                        }']`;
                                        var r;
                                    });
                                    return document.querySelector(
                                        `${e.tagName}${r.join("")}`
                                    );
                                } catch (e) {
                                    return console.error(e.message), null;
                                }
                            });
                        }
                        async update(e, t = null) {
                            return this._loadMetaTags(
                                null != t ? t : this.requestUrl,
                                e
                            )
                                .then((e) => {
                                    if (
                                        (this.delete(),
                                        (null != e ? e : []).length > 0)
                                    )
                                        return this._renderMetatags(e), e;
                                    this._renderDefaultTitle();
                                })
                                .catch(() => {});
                        }
                        render(e) {
                            this.delete(),
                                (null != e ? e : []).length > 0
                                    ? this._renderMetatags(e)
                                    : this._renderDefaultTitle();
                        }
                        async loadMetaTags(e, t) {
                            if (e.metaTags) return this.render(e.metaTags);
                            const r = await this.update(
                                window.location.pathname,
                                WbSpaModel.prototype.$router.currentRoute
                                    .metaTagsUrl
                            );
                            if (!r) return;
                            const s = r.find((e) => "H1" === e.tagName);
                            if (
                                (s &&
                                    window.requestAnimationFrame(() =>
                                        $.observable(e).setProperty({
                                            title: s.hTMLContent,
                                        })
                                    ),
                                t)
                            ) {
                                const t = r.find(
                                    (e) => "bottomText" === e.tagName
                                );
                                t &&
                                    window.requestAnimationFrame(() =>
                                        $.observable(e).setProperty({
                                            bottomText: t.hTMLContent,
                                        })
                                    );
                            }
                        }
                        delete() {
                            this.items.forEach((e) =>
                                null == e ? void 0 : e.remove()
                            ),
                                (this.items.length = 0);
                        }
                        _loadMetaTags(e, t) {
                            var r, s, n;
                            if (!e) return Promise.resolve();
                            const o = new URLSearchParams(
                                WbSpaModel.prototype.$router.queryParams
                            );
                            let i;
                            return (
                                o.append(
                                    "targetUrl",
                                    encodeURIComponent(
                                        ("/" === t[0] ? "" : "/") + t
                                    )
                                ),
                                e.indexOf("{*category}") > -1 &&
                                    (e = e.replace(
                                        "{*category}",
                                        null !=
                                            (r =
                                                WbSpaModel.prototype.$router
                                                    .routeParameters.category)
                                            ? r
                                            : ""
                                    )),
                                e.indexOf("{brandBasePath}") > -1 &&
                                    "/" ===
                                        (e = e.replace(
                                            "{brandBasePath}",
                                            null !=
                                                (s =
                                                    WbSpaModel.prototype.$router
                                                        .routeParameters
                                                        .brandBasePath)
                                                ? s
                                                : ""
                                        ))[e.length - 1] &&
                                    (e = e.slice(0, -1)),
                                e.indexOf("{promoBasePath}") > -1 &&
                                    "/" ===
                                        (e = e.replace(
                                            "{promoBasePath}",
                                            null !=
                                                (n =
                                                    WbSpaModel.prototype.$router
                                                        .routeParameters
                                                        .promoBasePath)
                                                ? n
                                                : ""
                                        ))[e.length - 1] &&
                                    (e = e.slice(0, -1)),
                                (i = e),
                                WbSpaModel.prototype.$httpClient
                                    .fetchJSON(i + "?" + o)
                                    .then((e) =>
                                        Promise.resolve(
                                            null == e ? void 0 : e.metaTags
                                        )
                                    )
                                    .catch(
                                        (r) => (
                                            r.isCancelled ||
                                                "" === r.message ||
                                                (console.error(r.message),
                                                console.error(
                                                    `Error loading meta tags for path ${t} by requesting ${e}`
                                                )),
                                            Promise.resolve()
                                        )
                                    )
                            );
                        }
                        _renderMetatags(e) {
                            const t = document.createDocumentFragment();
                            e.forEach((e) => {
                                var r;
                                if ("H1" === e.tagName) return;
                                if ("bottomText" === e.tagName) return;
                                const s = document.createElement(e.tagName);
                                Object.keys(
                                    null != (r = e.attributesDictionary)
                                        ? r
                                        : {}
                                ).forEach((t) =>
                                    s.setAttribute(
                                        t,
                                        e.attributesDictionary
                                            ? e.attributesDictionary[t]
                                            : ""
                                    )
                                );
                                const n = e.hTMLContent || e.htmlContent;
                                n && (s.innerHTML = n),
                                    this.items.push(s),
                                    t.appendChild(s);
                            }),
                                document.head.appendChild(t);
                        }
                        _renderDefaultTitle() {
                            const e = document.createElement("title");
                            (e.innerHTML = this.defaultTitle || ""),
                                this.items.push(e),
                                document.head.appendChild(e);
                        }
                    })(),
                    V = {
                        updateVerificationToken(e) {
                            const t = document.querySelector(
                                "input[name=__RequestVerificationToken]"
                            );
                            t && (t.value = e);
                        },
                    },
                    G = Object.defineProperty,
                    Q = Object.getOwnPropertySymbols,
                    K = Object.prototype.hasOwnProperty,
                    J = Object.prototype.propertyIsEnumerable,
                    X = (e, t, r) =>
                        t in e
                            ? G(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r),
                    Y = (e, t) => {
                        for (var r in t || (t = {}))
                            K.call(t, r) && X(e, r, t[r]);
                        if (Q)
                            for (var r of Q(t)) J.call(t, r) && X(e, r, t[r]);
                        return e;
                    },
                    Z = (e, t, r) => X(e, "symbol" != typeof t ? t + "" : t, r);
                const ee = {
                    short: 9e5,
                    halfHour: 18e5,
                    normal: 36e5,
                };
                Object.freeze(ee);
                class te {
                    static createStorageHelperItem(e, t, r) {
                        return new re(e, t, r);
                    }
                    static get cacheActivityType() {
                        return ee;
                    }
                    static supportIndexedDb() {
                        return null != window.indexedDB;
                    }
                    static metadataTableName(e) {
                        return e + "_metadata";
                    }
                    static openDb(e, t = {}) {
                        return new Promise((r, s) => {
                            var n;
                            const o = indexedDB.open(
                                e,
                                null != (n = null == t ? void 0 : t.version)
                                    ? n
                                    : 1
                            );
                            (o.onupgradeneeded = (e) => {
                                var r;
                                null == (r = t.onupgradeneeded) ||
                                    r.call(t, e.target.result);
                            }),
                                (o.onsuccess = (e) => {
                                    r(e.target.result);
                                }),
                                (o.onerror = () => {
                                    s(
                                        new Error(
                                            `[StorageHelper]: Database cannot be opened db_name=${e} error=${o.error}`
                                        )
                                    );
                                });
                        });
                    }
                    static setItem(e, t, r) {
                        return new Promise((s, n) => {
                            const o = e
                                .transaction([t], "readwrite")
                                .objectStore(t)
                                .put(r);
                            (o.onsuccess = s),
                                (o.onerror = (e) => {
                                    var t;
                                    console.error(
                                        null == (t = e.target.error)
                                            ? void 0
                                            : t.message
                                    ),
                                        n(
                                            "Error while setting item from indexedDb"
                                        );
                                });
                        });
                    }
                    static addItem(e, t, r, s) {
                        return new Promise((n, o) => {
                            const i = e
                                .transaction([t], "readwrite")
                                .objectStore(t)
                                .add(r);
                            (i.onsuccess = (e) => n(e.target.result)),
                                (i.onerror = (e) => {
                                    var t;
                                    !s &&
                                        console.error(
                                            null == (t = e.target.error)
                                                ? void 0
                                                : t.message
                                        ),
                                        o(
                                            "Error while setting item from indexedDb"
                                        );
                                });
                        });
                    }
                    static addItems(e, t, r, s = 0) {
                        const n = [];
                        if (s && r.length > s)
                            for (let i = 0; i < Math.ceil(r.length / s); i++) {
                                const a = r.slice(i * s, (i + 1) * s);
                                n.push(o(e, t, a));
                            }
                        else n.push(o(e, t, r));
                        return Promise.all(n);
                        function o(e, t, r) {
                            return new Promise((s, n) => {
                                const o = e.transaction([t], "readwrite"),
                                    i = o.objectStore(t);
                                (o.onerror = (e) => {
                                    var t;
                                    console.error(
                                        null == (t = e.target.error)
                                            ? void 0
                                            : t.message
                                    ),
                                        n(
                                            "Error while setting items to indexedDb"
                                        );
                                }),
                                    (o.oncomplete = s);
                                for (const e of r) {
                                    i.put(e).onerror = (e) => console.error(e);
                                }
                            });
                        }
                    }
                    static setItems(e, t, r, s) {
                        return new Promise((n, o) => {
                            let i = e.transaction([t], "readwrite"),
                                a = i.objectStore(t);
                            a.clear(),
                                s.forEach((e) => {
                                    (e.__expiredAt__ = r), a.add(e);
                                }),
                                (i.oncomplete = n),
                                (i.onerror = (e) => {
                                    var t;
                                    console.error(
                                        null == (t = e.target.error)
                                            ? void 0
                                            : t.message
                                    ),
                                        o(
                                            "Error while setting item from indexedDb"
                                        );
                                });
                        });
                    }
                    static getAll(e, t) {
                        return new Promise((r, s) => {
                            const n = e
                                .transaction([t])
                                .objectStore(t)
                                .getAll();
                            (n.onsuccess = (e) => r(e.target.result)),
                                (n.onerror = () =>
                                    s(
                                        "Error while getting item from indexedDb"
                                    ));
                        });
                    }
                    static get(e, t, r) {
                        return new Promise((s, n) => {
                            const o = e.transaction([t]).objectStore(t).get(r);
                            (o.onsuccess = (e) => s(e.target.result)),
                                (o.onerror = () =>
                                    n(
                                        "Error while getting item from indexedDb"
                                    ));
                        });
                    }
                    static getItem(e, t, r) {
                        return new Promise((s, n) => {
                            const o = e.transaction([t]).objectStore(t).get(r);
                            (o.onsuccess = (n) => {
                                const o = n.target.result;
                                return o && o.__expiredAt__ <= Date.now()
                                    ? (te.removeItem(e, t, r), s(null))
                                    : s(n.target.result);
                            }),
                                (o.onerror = () =>
                                    n(
                                        "Error while getting item from indexedDb"
                                    ));
                        });
                    }
                    static removeItem(e, t, r) {
                        return new Promise((s, n) => {
                            const o = e
                                .transaction([t], "readwrite")
                                .objectStore(t)
                                .delete(r);
                            (o.onsuccess = s),
                                (o.onerror = () =>
                                    n(
                                        "Error while removing item from indexedDb"
                                    ));
                        });
                    }
                    static updateItem(e, t, r, s) {
                        return new Promise((n, o) => {
                            const i = e
                                .transaction([t], "readwrite")
                                .objectStore(t)
                                .put(r, s);
                            (i.onsuccess = n),
                                (i.onerror = (e) => {
                                    var t;
                                    console.error(
                                        null == (t = e.target.error)
                                            ? void 0
                                            : t.message
                                    ),
                                        o(
                                            "Error while updating item in indexedDb"
                                        );
                                });
                        });
                    }
                    static clear(e, t) {
                        return new Promise((r, s) => {
                            const n = e
                                .transaction([t], "readwrite")
                                .objectStore(t)
                                .clear();
                            (n.onsuccess = r),
                                (n.onerror = () =>
                                    s(
                                        "Error while removing item from indexedDb"
                                    ));
                        });
                    }
                    static removeDb(e) {
                        return new Promise((t, r) => {
                            const s = indexedDB.deleteDatabase(e);
                            (s.onsuccess = t),
                                (s.onerror = () =>
                                    r("Error while removing database"));
                        });
                    }
                    static exec(e, t, r) {
                        if ("function" == typeof r)
                            return new Promise((s, n) => {
                                const o = e.transaction([t]).objectStore(t),
                                    i = r(o);
                                (i.onsuccess = (e) => s(e.target.result)),
                                    (i.onerror = () =>
                                        n(
                                            "Error while getting item from indexedDb"
                                        ));
                            });
                    }
                    static withCursor(e, t, r, s) {
                        return new Promise((n, o) => {
                            let i = e
                                .transaction([t], "readwrite")
                                .objectStore(t);
                            r && (i = i.index(r));
                            const a = i.openCursor();
                            (a.onsuccess = (e) => {
                                const t = e.target.result;
                                t
                                    ? (s(t.key, t.value, t), t.continue())
                                    : n(void 0);
                            }),
                                (a.onerror = () =>
                                    o(
                                        "Error while getting item from indexedDb"
                                    ));
                        });
                    }
                    static objectStorePromise(e, t, r) {
                        return new Promise((s, n) => {
                            const o = e.objectStore(t),
                                i = r(o);
                            (i.onsuccess = (e) => s(e.target.result)),
                                (i.onerror = () =>
                                    n(
                                        "Error while work on objectStore from indexedDb"
                                    ));
                        });
                    }
                    static withTransaction(e, t, r) {
                        return new Promise((s, n) => {
                            const o = e.transaction(t, "readwrite");
                            r(o).then((e) => {}),
                                (o.oncomplete = () => s(o)),
                                (o.onerror = () =>
                                    n(
                                        "Error while open transaction in indexedDb on :" +
                                            t.join(",")
                                    ));
                        });
                    }
                }
                class re {
                    constructor(e, t, r = 1) {
                        if (
                            (Z(this, "databaseName"),
                            Z(this, "databaseVersion"),
                            Z(this, "onupgradeneeded"),
                            null == e || "" == e)
                        )
                            throw new Error(
                                "creating database without name is impossible"
                            );
                        (this.databaseName = e),
                            (this.databaseVersion = r),
                            (this.onupgradeneeded = t);
                    }
                    updateCacheAsync(e, t, r, s, n) {
                        return (
                            (n = Y(
                                Y(
                                    {},
                                    {
                                        saveAllDb: !1,
                                        getResultFunc: (e) => e,
                                    }
                                ),
                                n
                            )),
                            te.supportIndexedDb()
                                ? this._getItemFromDb(e, t, r, s, n)
                                : this._getItemFromLocalStorage(e, t, r, s, n)
                        );
                    }
                    _getItemFromDb(e, t, r, s, n) {
                        let o;
                        return te
                            .openDb(this.databaseName, {
                                version: this.databaseVersion,
                                onupgradeneeded: this.onupgradeneeded,
                            })
                            .then((r) => ((o = r), te.getItem(o, e, t)))
                            .then((t) =>
                                null != t
                                    ? Promise.resolve(t)
                                    : s().then((t) => {
                                          null != t &&
                                              (n.saveAllDb
                                                  ? te.setItems(
                                                        o,
                                                        e,
                                                        Date.now() + r,
                                                        t
                                                    )
                                                  : te.setItem(
                                                        o,
                                                        e,
                                                        Y(
                                                            {
                                                                __expiredAt__:
                                                                    Date.now() +
                                                                    r,
                                                            },
                                                            t
                                                        )
                                                    ));
                                          const s = n.getResultFunc(t);
                                          return Promise.resolve(s);
                                      })
                            );
                    }
                    _getItemFromLocalStorage(e, t, r, s, n) {
                        var o;
                        const i = n.saveAllDb
                                ? `${this.databaseName};${this.databaseVersion};${e}`
                                : `${this.databaseName};${this.databaseVersion};${e};${t}`,
                            a = localStorage.getItem(i),
                            l = a ? JSON.parse(a) : null;
                        if (
                            l &&
                            (null == l ? void 0 : l.__expiredAt__) >=
                                Date.now() &&
                            (!n.saveAllDb ||
                                !!(null == (o = l.items) ? void 0 : o.length))
                        ) {
                            const e = n.getResultFunc(
                                n.saveAllDb ? l.items : l
                            );
                            return Promise.resolve(e);
                        }
                        return s().then((e) => {
                            const t = n.saveAllDb
                                ? {
                                      items: e,
                                      __expiredAt__: 0,
                                  }
                                : e;
                            return (
                                (t.__expiredAt__ = Date.now() + r),
                                localStorage.setItem(i, JSON.stringify(t)),
                                Promise.resolve(n.getResultFunc(e))
                            );
                        });
                    }
                }
                var se = te,
                    ne = r(3659);
                var oe = class {
                        constructor() {
                            this.$eventBus.addEventListener(
                                "CurrencyChanged",
                                this._onChangeCurrency.bind(this)
                            );
                        }
                        async initPreferredLocation() {
                            await this.updateLocation();
                            document
                                .querySelectorAll(".j-geocity-link")
                                .forEach((e) => {
                                    e.addEventListener(
                                        "click",
                                        this.doOnGeoBtnClick.bind(this)
                                    );
                                });
                        }
                        async updateLocation() {
                            (this.location =
                                await this.$user.getLocationData()),
                                this.setCityName(this.location.address);
                        }
                        setCityName(e) {
                            const t =
                                    document.querySelectorAll(
                                        ".j-geocity-link"
                                    ),
                                r = decodeURI(e);
                            t.forEach((e) => {
                                e.textContent !== r && (e.textContent = r);
                            });
                        }
                        doOnGeoBtnClick(e) {
                            const t = e.currentTarget;
                            e.preventDefault(),
                                t.classList.contains("_click") ||
                                    (t.classList.add("_click"),
                                    this.openDeliveryPointsPopup().then((e) =>
                                        t.classList.remove("_click")
                                    ));
                        }
                        findCurrentAddress(e, t = !1) {
                            return this.location
                                ? null == e
                                    ? void 0
                                    : e.find(
                                          (e) =>
                                              e.lat == this.location.latitude &&
                                              e.lon ==
                                                  this.location.longitude &&
                                              (e.address ==
                                                  this.location.address ||
                                                  !t)
                                      )
                                : null;
                        }
                        async openDeliveryPointsPopup(e) {
                            const t = await this.$moduleLoader.loadModuleAsync(
                                "deliveryPointsChoosePopup"
                            );
                            this.dpPopup || (this.dpPopup = new t()),
                                await this.dpPopup.init({
                                    source: "geo",
                                    selectAddress: (e, t, r, s) => {
                                        const n =
                                            r ||
                                            this.$services.userAddressService.get(
                                                t,
                                                e
                                            );
                                        this._submitGeo(n, s);
                                    },
                                    updateSelectedAddresses: (t) => {
                                        const r = this.findCurrentAddress(
                                                t.courier.list,
                                                !0
                                            ),
                                            s = this.findCurrentAddress(
                                                t.self.list
                                            );
                                        (t.courier.selected =
                                            null == r ? void 0 : r.addressId),
                                            (t.self.selected =
                                                null == s
                                                    ? void 0
                                                    : s.addressId),
                                            (t.preferred =
                                                "courier" === e || "self" === e
                                                    ? e
                                                    : r
                                                    ? "courier"
                                                    : "self"),
                                            wb.settings.b2bMode &&
                                                ((t.preferred = "self"),
                                                (t.source = "basketB2B"),
                                                (t.courier.selected = void 0));
                                    },
                                    beforeSelectDw: (e, t) => {
                                        if (
                                            "self" ==
                                            $.view(e.target).ctxPrm(
                                                "selectedDeliveryWay"
                                            )
                                        )
                                            return;
                                        if (
                                            this.dpPopup.deliveryWays.length < 2
                                        )
                                            return;
                                        "self" === $.view(e.target).data.code &&
                                            this.$moduleLoader
                                                .loadModuleAsync(
                                                    "basketProductModel"
                                                )
                                                .then((t) => {
                                                    var r;
                                                    const s =
                                                        (null ==
                                                        (r =
                                                            this.$services.cartService.get()
                                                                .basketItems)
                                                            ? void 0
                                                            : r
                                                                  .map(
                                                                      (e) =>
                                                                          new t(
                                                                              e
                                                                          )
                                                                  )
                                                                  .filter(
                                                                      (e) =>
                                                                          e.onlyCourier
                                                                  )) || [];
                                                    s.length > 0 &&
                                                        (e.preventDefault(),
                                                        this.$moduleLoader
                                                            .loadModuleAsync(
                                                                "productCourierOnlyPopup"
                                                            )
                                                            .then((e) => {
                                                                var t;
                                                                e.show(
                                                                    e.template,
                                                                    s,
                                                                    null ==
                                                                        (t =
                                                                            this
                                                                                .dpPopup
                                                                                .selectedAddresses)
                                                                        ? void 0
                                                                        : t.preferred,
                                                                    this.openDeliveryPointsPopup.bind(
                                                                        this
                                                                    )
                                                                );
                                                            }),
                                                        this.dpPopup.close());
                                                });
                                    },
                                }),
                                this.dpPopup.show();
                        }
                        _onChangeCurrency() {
                            var e;
                            "SpaBasketEntrypoint" !==
                                (null == (e = this.$router.currentRoute)
                                    ? void 0
                                    : e.name) &&
                                this.$services.cartService.localBasket.enrichProductsIfNeedAsync(
                                    {
                                        force: !0,
                                    }
                                );
                        }
                        _submitGeo(e, t) {
                            var r;
                            let s,
                                n = this.map;
                            if (
                                (((null == e ? void 0 : e.id) ||
                                    (null == e ? void 0 : e.addressId)) &&
                                    (s = e),
                                s ||
                                    (s = (
                                        null == n ? void 0 : n.selectedPointId
                                    )
                                        ? ("courier" === n.deliveryType
                                              ? n.courierList
                                              : n.visiblePoints
                                          ).find(
                                              (e) => e.id === n.selectedPointId
                                          )
                                        : n.selectedPoint),
                                !s)
                            )
                                return;
                            const o =
                                s.id ||
                                s.addressId ||
                                (null == n ? void 0 : n.selectedPointId);
                            this.saveLastAddressAsync(
                                o,
                                s.deliveryType,
                                e.address,
                                t,
                                null != (r = s.officeId) ? r : s.addressId
                            ),
                                this.$user.setGeo(s).then(() => {
                                    this.$eventBus.dispatchEvent(
                                        new CustomEvent(
                                            "ExternalSelectAddress",
                                            {
                                                detail: {
                                                    selectedAddressId: o,
                                                    dWay: s.deliveryType,
                                                },
                                            }
                                        )
                                    );
                                }),
                                this.dpPopup.close();
                        }
                        async saveLastAddressAsync(e, t, r, s, n) {
                            this.$services.cartService.localBasket.setAddress(
                                e,
                                t,
                                r,
                                s
                            ),
                                this.$auth.isAuth &&
                                    this.$httpClient.fetchJSON(
                                        this.$services.cartService
                                            .publicBasketApiUrl +
                                            "/spa/address/select",
                                        {
                                            credentials: "include",
                                            method: "POST",
                                            body: this.$helper.objectSerializer(
                                                {
                                                    addressId: e,
                                                    deliveryWay: t,
                                                }
                                            ),
                                        }
                                    ),
                                this.$analitic.setCurrentAddress(t, n),
                                this.$analitic.sendAddressSelection({
                                    source: "Header",
                                    deliveryType: t,
                                    addressId: e,
                                    address: r,
                                    isChanged: s,
                                });
                        }
                    },
                    ie = Object.defineProperty,
                    ae = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? ie(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var le = class {
                    constructor() {
                        ae(this, "nativeLazyImage"),
                            ae(this, "intersectionObserver"),
                            ae(this, "webpImage"),
                            (this.nativeLazyImage =
                                "loading" in HTMLImageElement.prototype),
                            (this.intersectionObserver =
                                "IntersectionObserver" in window),
                            (this.webpImage = !1),
                            this._checkWebpImageSupport();
                    }
                    _checkWebpImageSupport() {
                        if (
                            0 ===
                            document
                                .createElement("canvas")
                                .toDataURL("image/webp")
                                .indexOf("data:image/webp")
                        )
                            this.webpImage = !0;
                        else
                            try {
                                const e = new Image();
                                (e.onload = () => {
                                    e.width > 0 &&
                                        e.height > 0 &&
                                        (this.webpImage = !0);
                                }),
                                    (e.src =
                                        "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA");
                            } catch (e) {}
                    }
                };
                class ce {
                    static get() {
                        const {
                            nm: e,
                            query: t,
                            url: r,
                        } = localStorage.getObject(ce.storageKey()) || {
                            url: [],
                            query: [],
                            nm: [],
                        };
                        return {
                            nm: e.map((e) => e.nmId),
                            query: t,
                            url: r,
                        };
                    }
                    static getRecentWithTimestamp() {
                        return (
                            localStorage.getObject(ce.storageKey()) || {
                                url: [],
                                query: [],
                                nm: [],
                            }
                        );
                    }
                    static addProduct(e) {
                        ("number" == typeof e ||
                            ("string" == typeof e && !isNaN(Number(e)))) &&
                            ce.putInStorage("nm", Number(e), 100);
                    }
                    static putInStorage(e, t, r) {
                        let s = ce.getRecentWithTimestamp(),
                            n = {
                                time: parseInt("" + Date.now() / 1e3),
                                nmId: t,
                            },
                            o = s[e];
                        const i = o.findIndex((e) => e.nmId === n.nmId);
                        0 !== i &&
                            (i > 0 && o.splice(i, 1),
                            o.unshift(n),
                            o.length > r && (o.length = r),
                            (s[e] = o),
                            ce.clearPrevStorage(),
                            localStorage.putObject(ce.storageKey(), s));
                    }
                    static storageKey() {
                        return `recentViewsV2-${WbSpaModel.prototype.$user.getUid()}`;
                    }
                    static clearPrevStorage() {
                        const e = `recentViews-${WbSpaModel.prototype.$user.getUid()}`;
                        localStorage.removeItem(e);
                    }
                }
                var ue = ce;
                const de = "promotion-creatives";
                let pe, he, me, ge;
                const be = class {
                    static getById(e) {
                        return pe && pe[e];
                    }
                    static isThermometerNeeded(e) {
                        return he && he.has(e);
                    }
                    static isRedPriceNeeded(e) {
                        return ge && ge.has(e);
                    }
                    static getFilter() {
                        return me;
                    }
                    static getMainActionId() {
                        return 188852;
                    }
                    static getHomeCarouselData() {
                        return {
                            caruselUrl: "/promotions/uhtydazha",
                            carouselName: wb.i18n.t("promo.forBrightPrices"),
                            carouselBg: "#ED1AD8",
                        };
                    }
                    static async _startUpdate() {
                        try {
                            await navigator.locks.request(
                                `lock-${de}`,
                                async (e) => {
                                    var t;
                                    const r =
                                        await WbSpaModel.prototype.$httpClient.fetchStaticV3(
                                            wb.helpers.url.urlStaticData,
                                            {
                                                noCache: !0,
                                                fetchType: "text",
                                            },
                                            `${de}.json.hash`
                                        );
                                    if (
                                        r &&
                                        r !==
                                            (null ==
                                            (t = localStorage.getObject(de))
                                                ? void 0
                                                : t.hash)
                                    ) {
                                        const e =
                                            await WbSpaModel.prototype.$httpClient.fetchStaticV3(
                                                wb.helpers.url.urlStaticData,
                                                {
                                                    noCache: !0,
                                                },
                                                `${de}.json`
                                            );
                                        (e.hash = r),
                                            this.initPromoCreatives(e),
                                            localStorage.putObject(de, e),
                                            localStorage.removeItem(
                                                "promotions"
                                            ),
                                            localStorage.removeItem(
                                                "promotions-hash"
                                            );
                                    }
                                }
                            );
                        } catch (e) {}
                    }
                    static initPromoCreatives(e) {
                        var t, r, s;
                        e &&
                            ((pe = {}),
                            null == (t = e.panels) ||
                                t.forEach((e) => (pe[e.id] = e)),
                            (he = new Set(
                                null != (r = e.thermometer) ? r : []
                            )),
                            (ge = new Set(null != (s = e.redPrices) ? s : [])),
                            e.filter &&
                                (null == me ? void 0 : me.id) !== e.filter.id &&
                                (document.documentElement.style.setProperty(
                                    "--custom-promo-filter-color",
                                    e.filter.color
                                ),
                                document.documentElement.style.setProperty(
                                    "--custom-promo-filter-background",
                                    e.filter.background
                                ),
                                document.documentElement.style.setProperty(
                                    "--custom-promo-filter-switch-color",
                                    e.filter.switch
                                ),
                                document.documentElement.style.setProperty(
                                    "--custom-promo-filter-switch-background",
                                    e.filter.switchBackground
                                ),
                                document.documentElement.style.setProperty(
                                    "--custom-promo-filter-switch-active-color",
                                    e.filter.switchActive
                                ),
                                document.documentElement.style.setProperty(
                                    "--custom-promo-filter-switch-active-background",
                                    e.filter.switchActiveBackground
                                )),
                            (me = e.filter));
                    }
                };
                be.initPromoCreatives(localStorage.getObject(de)),
                    be._startUpdate(),
                    setInterval(be._startUpdate.bind(be), 18e4);
                var ye = be,
                    ve = (r(36881), r(86678)),
                    fe = r.n(ve);
                const we =
                        navigator.connection ||
                        navigator.mozConnection ||
                        navigator.webkitConnection,
                    Se = Object.freeze({
                        c246x328: "c246x328",
                        c516x688: "c246x328",
                        big: "c516x688",
                        hq: "c516x688",
                    }),
                    _e = {
                        volHostV2: (e, t = !1) => {
                            let r;
                            const s = ~~(e / 1e5);
                            switch (!0) {
                                case s >= 0 && s <= 143:
                                    r = "01";
                                    break;
                                case s <= 287:
                                    r = "02";
                                    break;
                                case s <= 431:
                                    r = "03";
                                    break;
                                case s <= 719:
                                    r = "04";
                                    break;
                                case s <= 1007:
                                    r = "05";
                                    break;
                                case s <= 1061:
                                    r = "06";
                                    break;
                                case s <= 1115:
                                    r = "07";
                                    break;
                                case s <= 1169:
                                    r = "08";
                                    break;
                                case s <= 1313:
                                    r = "09";
                                    break;
                                case s <= 1601:
                                    r = "10";
                                    break;
                                case s <= 1655:
                                    r = "11";
                                    break;
                                case s <= 1919:
                                    r = "12";
                                    break;
                                case s <= 2045:
                                    r = "13";
                                    break;
                                case s <= 2189:
                                    r = "14";
                                    break;
                                case s <= 2405:
                                    r = "15";
                                    break;
                                case s <= 2621:
                                    r = "16";
                                    break;
                                case s <= 2837:
                                    r = "17";
                                    break;
                                case s <= 3053:
                                    r = "18";
                                    break;
                                case s <= 3269:
                                    r = "19";
                                    break;
                                case s <= 3485:
                                    r = "20";
                                    break;
                                case s <= 3701:
                                    r = "21";
                                    break;
                                case s <= 3917:
                                    r = "22";
                                    break;
                                default:
                                    r = "23";
                            }
                            return wb.settings.secondHost
                                ? `${wb.settings.secondHost}/basket-${r}.wbbasket/vol${s}`
                                : `basket-${r}.wbbasket.ru/vol${s}`;
                        },
                        volFeedbackPhotoHost: (e, t = !1) => {
                            let r;
                            const s = ~~(e / 1e5);
                            switch (!0) {
                                case s >= 0 && s <= 431:
                                    r = "01";
                                    break;
                                case s <= 863:
                                    r = "02";
                                    break;
                                case s <= 1199:
                                    r = "03";
                                    break;
                                case s <= 1535:
                                    r = "04";
                                    break;
                                case s <= 1919:
                                    r = "05";
                                    break;
                                case s <= 2303:
                                    r = "06";
                                    break;
                                case s <= 2687:
                                    r = "07";
                                    break;
                                case s <= 3071:
                                    r = "08";
                                    break;
                                default:
                                    r = "09";
                            }
                            return wb.settings.secondHost
                                ? `${wb.settings.secondHost}/feedback${r}.wbbasket/vol${s}`
                                : `feedback${r}.wbbasket.ru/vol${s}`;
                        },
                        volVideoHost: (e, t = !1) => {
                            let r;
                            const s = e % 144;
                            switch (!0) {
                                case s >= 0 && s <= 11:
                                    r = "01";
                                    break;
                                case s <= 23:
                                    r = "02";
                                    break;
                                case s <= 35:
                                    r = "03";
                                    break;
                                case s <= 47:
                                    r = "04";
                                    break;
                                case s <= 59:
                                    r = "05";
                                    break;
                                case s <= 71:
                                    r = "06";
                                    break;
                                case s <= 83:
                                    r = "07";
                                    break;
                                case s <= 95:
                                    r = "08";
                                    break;
                                case s <= 107:
                                    r = "09";
                                    break;
                                case s <= 119:
                                    r = "10";
                                    break;
                                case s <= 131:
                                    r = "11";
                                    break;
                                case s <= 143:
                                    r = "12";
                                    break;
                                default:
                                    r = "13";
                            }
                            return wb.settings.secondHost
                                ? `${wb.settings.secondHost}/videonme-basket-${r}.wbbasket/vol${s}`
                                : `videonme-basket-${r}.wbbasket.ru/vol${s}`;
                        },
                        volStaticHost: (e, t = !1) => {
                            let r;
                            const s = e;
                            switch (!0) {
                                case s >= 0 && s <= 4:
                                    r = "01";
                                    break;
                                case s >= 20 && s <= 35:
                                    r = "02";
                                    break;
                                case s >= 40 && s <= 54:
                                    r = "03";
                                    break;
                                case s >= 70 && s <= 113:
                                    r = "04";
                                    break;
                                case s >= 114 && s <= 125:
                                    r = "05";
                                    break;
                                case s >= 126 && s <= 137:
                                    r = "06";
                                    break;
                                case s >= 138 && s <= 149:
                                    r = "07";
                                    break;
                                default:
                                    r = "08";
                            }
                            return wb.settings.secondHost
                                ? `${wb.settings.secondHost}/static-basket-${r}.wbbasket/vol${s}`
                                : `static-basket-${r}.wbbasket.ru/vol${s}`;
                        },
                        volFeedbackVideoHost: (e, t = !1) => {
                            const r = `00${e}`.slice(-2);
                            return wb.settings.secondHost
                                ? `${wb.settings.secondHost}/videofeedback${r}.wbbasket`
                                : `videofeedback${r}.wbbasket.ru`;
                        },
                        volContentHost: (e, t = !1) => {
                            const r = `00${e}`.slice(-2);
                            return wb.settings.secondHost
                                ? `${wb.settings.secondHost}/content-${r}.wbbasket`
                                : `content-${r}.wbbasket.ru`;
                        },
                        constructHostV2: (e, t = "nm", r = !1) => {
                            const s = parseInt(String(e), 10),
                                n = "video" === t ? ~~(s / 1e4) : ~~(s / 1e3);
                            let o = "";
                            return (
                                "nm" === t
                                    ? (o = _e.volHostV2(s, r))
                                    : "feedbackPhoto" === t
                                    ? (o = _e.volFeedbackPhotoHost(s, r))
                                    : "content" === t
                                    ? (o = _e.volContentHost(s, r))
                                    : "video" === t &&
                                      (o = _e.volVideoHost(s, r)),
                                `https://${o}/part${n}/${s}`
                            );
                        },
                    },
                    Ce = {
                        deepClone: (e) => JSON.parse(JSON.stringify(e)),
                        getHashCode: (e) => {
                            let t,
                                r,
                                s = 0;
                            if (0 === e.length) return s;
                            for (t = 0; t < e.length; t++)
                                (r = e.charCodeAt(t)),
                                    (s = (s << 5) - s + r),
                                    (s |= 0);
                            return s;
                        },
                        generateGuid: (e) => {
                            const t = URL.createObjectURL(new Blob())
                                .split("/")
                                .pop();
                            return e
                                ? t
                                : null == t
                                ? void 0
                                : t.replace(/-/g, "");
                        },
                        hasBit(e, t) {
                            return !!(t & (1 << e));
                        },
                        toMap(e, t, r) {
                            if (!t && "function" != typeof t)
                                throw new TypeError(
                                    "toMap method require callback function or null"
                                );
                            if (!r && "function" != typeof r)
                                throw new TypeError(
                                    "toMap method require callback function or null"
                                );
                            return e.reduce(
                                (e, s) => (
                                    e.set(t ? t(s) : s, r ? r(s) : s), e
                                ),
                                new Map()
                            );
                        },
                        dateToFormat(e, t) {
                            return e.format(t);
                        },
                        roundUpToNextMultipleOfNumber(e, t) {
                            const r = Math.ceil(e / t) * t;
                            return r !== e ? r : r + t;
                        },
                        date: {
                            leftBefore: (e) => {
                                const t = wb.helpers.date.serverDate
                                        ? new Date(wb.helpers.date.serverDate)
                                        : new Date(),
                                    r = e.getTime() - t.getTime(),
                                    s = Math.floor((r / 1e3) % 60),
                                    n = Math.floor((r / 6e4) % 60),
                                    o = Math.floor(r / 36e5);
                                return "{0}:{1}:{2}".format(
                                    $.views.converters.leadZero(o, 2),
                                    $.views.converters.leadZero(n, 2),
                                    $.views.converters.leadZero(s, 2)
                                );
                            },
                            diff: (e, t = new Date()) => {
                                const r = {
                                    days: 0,
                                    months: 0,
                                    years: 0,
                                };
                                if (e == t) return r;
                                if (e > t) return wb.helpers.date.diff(t, e);
                                if (
                                    ((r.years =
                                        t.getFullYear() - e.getFullYear()),
                                    (r.months = t.getMonth() - e.getMonth()),
                                    (r.days = t.getDate() - e.getDate()),
                                    r.days < 0)
                                ) {
                                    const t = new Date(
                                        e.getFullYear(),
                                        e.getMonth() + 1,
                                        0
                                    );
                                    r.months--, (r.days += t.getDate());
                                }
                                return (
                                    r.months < 0 &&
                                        (r.years--, (r.months += 12)),
                                    r
                                );
                            },
                            formatEstimated: (e, t, r) => {
                                const { timeFrom: s, timeTo: n } = r || {},
                                    o = new Date();
                                o.setHours(0, 0, 0, 0);
                                const i = new Date(e);
                                t || (t = new Date(e)), t.setDate(t.getDate());
                                if (t.valueOf() - o.valueOf() < 0)
                                    return wb.i18n.t("delivery.status.delayed");
                                if (!s || !n)
                                    return i.getMonth() !== t.getMonth()
                                        ? `${i.format("d MMMM")}-${t.format(
                                              "d MMMM"
                                          )}`
                                        : i.getDate() !== t.getDate()
                                        ? `${i.getDate()}-${t.format("d MMMM")}`
                                        : `${i.format("d MMMM")}`;
                                const a = $.views.converters.formatTimeStr(s);
                                return wb.i18n.t(
                                    "delivery.dayNameWithTimeFromTimeTo",
                                    {
                                        dayName:
                                            $.views.converters.dayNameFromDate(
                                                i,
                                                !0
                                            ),
                                        newTimeFrom: a,
                                        timeTo: n,
                                    }
                                );
                            },
                            paymentFedbackTimerStr: (e, t) => {
                                const r = e.setDate(e.getDate() + 5),
                                    s = Number(r) - Number(t),
                                    n = Math.floor((s / 1e3) % 60),
                                    o = Math.floor((s / 6e4) % 60),
                                    i = Math.floor(s / 36e5);
                                return s > 0 && i < 24
                                    ? "{0}:{1}:{2}".format(
                                          $.views.converters.leadZero(i, 2),
                                          $.views.converters.leadZero(o, 2),
                                          $.views.converters.leadZero(n, 2)
                                      )
                                    : "";
                            },
                        },
                        getParamsFromUrlQuery: (e) => {
                            if (!e) return {};
                            0 === e.indexOf("?") && (e = e.substring(1));
                            const t = e.split("&"),
                                r = {};
                            for (let e = 0, s = t.length; e < s; e++) {
                                const s = t[e].split("=");
                                r[s[0]] = s[1];
                            }
                            return r;
                        },
                        appendToParamsFromQuery: (e, t) => {
                            if (!t) return;
                            0 === t.indexOf("?") && (t = t.substring(1));
                            const r = t.split("&");
                            for (let t = 0, s = r.length; t < s; t++) {
                                const s = r[t].split("=");
                                e.set(s[0], s[1]);
                            }
                        },
                        getCardImgName: (e) => {
                            if (1 === e.idx && e.viewFlags) {
                                const t = ((e, t) => {
                                    const r = parseInt(
                                        (2048 & t ? "1" : "0") +
                                            (1024 & t ? "1" : "0"),
                                        2
                                    );
                                    if (0 === r) return;
                                    const s =
                                        wb.cookieHelper.getCookie("_wbauid");
                                    if (!s) return;
                                    const n = e + s + "ABTest=Be$t",
                                        o = fe()(n),
                                        i = JSBI.BigInt("0x" + o.slice(-16)),
                                        a = JSBI.remainder(
                                            i,
                                            JSBI.BigInt(r + 1)
                                        ),
                                        l = JSBI.toNumber(a);
                                    return 0 != l ? `ab_${l}` : void 0;
                                })(e.nmId, e.viewFlags);
                                return null != t ? t : e.idx;
                            }
                            return e.idx;
                        },
                        url: {
                            imageUrl: (e, t, r = 1, s, n, o = !1) => {
                                var i, a;
                                if (
                                    (s &&
                                        !WbSpaModel.prototype.$isDesktop &&
                                        (t = s),
                                    (null == we ? void 0 : we.effectiveType) &&
                                        "4g" !==
                                            (null == we
                                                ? void 0
                                                : we.effectiveType) &&
                                        "3g" !==
                                            (null == we
                                                ? void 0
                                                : we.effectiveType) &&
                                        ((e) => e in Se)(t) &&
                                        (null ==
                                        (a =
                                            null == (i = wb.global.settings)
                                                ? void 0
                                                : i.switches)
                                            ? void 0
                                            : a.enableProductImageDowngrade) &&
                                        (t = Se[t]),
                                    0 === e)
                                )
                                    return wb.helpers.url.urlSiteStatic(
                                        `i/product/notfound/${t}.jpg`,
                                        o
                                    );
                                return `${_e.constructHostV2(
                                    e,
                                    "nm",
                                    o
                                )}/images/${t}/${wb.helpers.getCardImgName({
                                    nmId: e,
                                    viewFlags: n,
                                    idx: r,
                                })}.webp`;
                            },
                            urlForJsTmpl: (e, t = !1) =>
                                wb.helpers.url.urlSiteStatic(`t/jst/${e}`, t),
                            urlProductStatic: (e, t = !1, r = "ru", s = !1) =>
                                `${_e.constructHostV2(
                                    e,
                                    "nm",
                                    s
                                )}/info/${r}/card.json`,
                            urlPriceHistoryStatic: (e, t = !1) =>
                                `${_e.constructHostV2(
                                    e,
                                    "nm",
                                    t
                                )}/info/price-history.json`,
                            urlSellerStatic: (e, t = !1) =>
                                `${_e.constructHostV2(
                                    e,
                                    "nm",
                                    t
                                )}/info/sellers.json`,
                            urlCertificateStatic: (e) =>
                                `${_e.constructHostV2(
                                    e,
                                    "nm"
                                )}/info/certificate.json`,
                            urlStaticData: (e, t = !1) =>
                                wb.helpers.url.urlStaticBasket(
                                    `data/${e}`,
                                    0,
                                    t
                                ),
                            urlSiteStatic: (e, t = !1) => (
                                (e =
                                    e.startsWith("//") || e.startsWith("http")
                                        ? e
                                        : `${wb.settings.siteStaticPath}${e}`),
                                "/" === wb.settings.siteStaticPath
                                    ? e
                                    : wb.helpers.url.urlStaticBasket(e, 2, t)
                            ),
                            urlStaticBasket: (e, t, r = !1) => {
                                if (e.startsWith("//") || e.startsWith("http"))
                                    return e;
                                return `https://${_e.volStaticHost(t, r)}/${e}`;
                            },
                            urlFeedbackPhoto: (e, t = "ms", r = !1) => {
                                const s = parseInt(String(e), 10);
                                return `${_e.constructHostV2(
                                    s,
                                    "feedbackPhoto",
                                    r
                                )}/photos/${t}.${$.views.converters.toWebp(
                                    "jpg"
                                )}`;
                            },
                            urlVideoProduct: (
                                e,
                                t = "mp4",
                                r = "360p",
                                s = !1
                            ) => {
                                const n = parseInt(e, 10);
                                return `${_e.constructHostV2(
                                    n,
                                    "video",
                                    s
                                )}/${t}/${r}/${
                                    "mp4" === t ? "1.mp4" : "index.m3u8"
                                }`;
                            },
                            urlRichContent: (e, t = !1) =>
                                `${_e.constructHostV2(
                                    e,
                                    "nm",
                                    t
                                )}/info/ru/rich_v1.json`,
                            urlImageTags: function (e, t, r = !1) {
                                const s = _e.constructHostV2(e, "nm", r);
                                return t
                                    ? `${s}/info/tags/${t}.json`
                                    : `${s}/info/tags/picMap.json`;
                            },
                            urlFeedbackVideo: (
                                e,
                                t = "preview.webp",
                                r = !1
                            ) => {
                                var s;
                                const n = e.id,
                                    [o, i] =
                                        null == (s = String(n))
                                            ? void 0
                                            : s.split("/");
                                return `https://${_e.volFeedbackVideoHost(
                                    o,
                                    r
                                )}/${i}/${t}`;
                            },
                            urlPdfInstruction: (e, t = !1) =>
                                `https://${_e.volContentHost(e.shard, t)}/${
                                    e.uuid
                                }/${e.type_id}.pdf`,
                        },
                        replaceDeliveryFilterVal: (e) =>
                            e.replace(/&fdlvr=(\d+)/, (e, t) => {
                                const r =
                                    23 - new Date(Date.now()).getHours() - 1;
                                let s = null;
                                switch (parseInt(t)) {
                                    case 4:
                                        s = r > 4 ? 4 : r;
                                        break;
                                    case 12:
                                        s = r;
                                        break;
                                    case 24:
                                        s = 24 + r;
                                        break;
                                    case 48:
                                        s = 48 + r;
                                        break;
                                    case 72:
                                        s = 72 + r;
                                        break;
                                    case 120:
                                        s = 120 + r;
                                }
                                return null != s ? `&fdlvr=${s}` : "";
                            }),
                        path: {
                            fileName: (e) =>
                                (null == e
                                    ? void 0
                                    : e.substring(e.lastIndexOf("/") + 1)) ||
                                "",
                            extension: (e) =>
                                (null == e
                                    ? void 0
                                    : e.slice(
                                          1 +
                                              (Math.max(
                                                  e.lastIndexOf("."),
                                                  0
                                              ) || e.length)
                                      )) || "",
                        },
                        iOS: function () {
                            return (
                                [
                                    "iPad Simulator",
                                    "iPhone Simulator",
                                    "iPod Simulator",
                                    "iPad",
                                    "iPhone",
                                    "iPod",
                                ].includes(navigator.platform) ||
                                (navigator.userAgent.includes("Mac") &&
                                    "ontouchend" in document)
                            );
                        },
                        huawei: () => {
                            const e =
                                navigator.userAgent ||
                                navigator.vendor ||
                                window.opera;
                            return /huawei/i.test(e);
                        },
                        formatVideoDuration: (e) => {
                            const t = Math.floor(e / 60),
                                r = e % 60;
                            return `${t < 10 ? `0${t}` : t}:${
                                r < 10 ? `0${r}` : r
                            }`;
                        },
                        setImgFunc: (e, t) => {
                            if ("function" == typeof t)
                                switch (e) {
                                    case "mediabasket_route_map":
                                        _e.volHostV2 = t;
                                        break;
                                    case "feedback_route_map":
                                        _e.volFeedbackPhotoHost = t;
                                        break;
                                    case "videonme_route_map":
                                        _e.volVideoHost = t;
                                        break;
                                    case "staticbasket_route_map":
                                        _e.volStaticHost = t;
                                }
                        },
                        downloadFile: (e, t) => {
                            const r = URL.createObjectURL(e),
                                s = document.createElement("a");
                            s.setAttribute("target", "_blank"),
                                (s.href = r),
                                t && (s.download = t),
                                document.body.appendChild(s),
                                s.click(),
                                document.body.removeChild(s);
                        },
                        downloadOrShareFile: async (e, t, r, s, n) => {
                            const o = new File([e], t, {
                                    type: r,
                                }),
                                i = [o];
                            try {
                                if (
                                    "m" === wb.settings.displayMode &&
                                    navigator.canShare({
                                        files: i,
                                    })
                                )
                                    return (
                                        await navigator.share({
                                            files: i,
                                        }),
                                        void (null == n || n())
                                    );
                            } catch (e) {
                                wb.spa.logError(e, s);
                            }
                            wb.helpers.downloadFile(o);
                        },
                    };
                wb.helpers = Ce;
                var Ie = Object.freeze({
                    delete: 0,
                    add: 1,
                });
                var ke = class {
                    constructor(e, t = !1) {
                        (this.items = e.sort((e, t) => {
                            var r, s;
                            return null != (s = t.timestamp)
                                ? s
                                : 0 - (null != (r = e.timestamp) ? r : 0);
                        })),
                            (this.isEmptyCache = t),
                            (this._favoritesGoodsMap = null);
                    }
                    get count() {
                        return this.items.length;
                    }
                    get favoritesGoodsMap() {
                        return (
                            null != this._favoritesGoodsMap ||
                                (this._favoritesGoodsMap = this.items.reduce(
                                    (e, t) => (e.set(t.characteristicId, t), e),
                                    new Map()
                                )),
                            this._favoritesGoodsMap
                        );
                    }
                };
                const Me = "user_favorite_goods_{0}_v{1}";
                var Pe = class {
                    constructor(e) {
                        (this.uid = null),
                            (this.cacheModel = null),
                            (this._storageHelper = e),
                            this._bindEvents();
                    }
                    get cacheKey() {
                        return Me.format(this.uid, 1);
                    }
                    get lastSyncCacheKey() {
                        return "favorite_last_sync_dt_{0}_v{1}".format(
                            this.uid,
                            1
                        );
                    }
                    get tabsSyncCacheKey() {
                        return "favorite_tabs_sync_v{0}".format(1);
                    }
                    setKey(e) {
                        (this.uid = e),
                            this._checkOldCache(),
                            (this.cacheModel = null);
                    }
                    async getLastSyncDt() {
                        var e;
                        if (null == this.uid) return -1;
                        try {
                            const t = await this._openIDb(),
                                r = await this._storageHelper.getItem(
                                    t,
                                    this.lastSyncCacheKey,
                                    "sync_dt"
                                );
                            return null !=
                                (e = null == r ? void 0 : r.lastSyncDt)
                                ? e
                                : -1;
                        } catch (e) {
                            return this.getLastSyncDtFromLocalStorage();
                        }
                    }
                    getLastSyncDtFromLocalStorage() {
                        var e;
                        if (null == this.uid) return -1;
                        const t =
                            null !=
                            (e = localStorage.getItem(this.lastSyncCacheKey))
                                ? e
                                : -1;
                        return parseInt(
                            localStorage.hasItem(this.cacheKey) ? t : -1
                        );
                    }
                    async setLastSyncDt(e) {
                        if (
                            !(
                                (await this.getLastSyncDt()) >= e ||
                                null == this.uid
                            )
                        )
                            try {
                                const t = await this._openIDb();
                                await this._storageHelper.setItem(
                                    t,
                                    this.lastSyncCacheKey,
                                    {
                                        name: "sync_dt",
                                        lastSyncDt: e,
                                    }
                                );
                            } catch (t) {
                                localStorage.setItem(this.lastSyncCacheKey, e);
                            }
                    }
                    async clearLastSyncDt() {
                        try {
                            const e = await this._openIDb();
                            await this._storageHelper.removeItem(
                                e,
                                this.lastSyncCacheKey,
                                "sync_dt"
                            );
                        } catch (e) {
                            localStorage.removeItem(this.lastSyncCacheKey);
                        }
                    }
                    async getFavoriteGoods(e = !1) {
                        if (
                            (null == this.uid &&
                                (this.cacheModel = new ke([], !0)),
                            !this.cacheModel)
                        ) {
                            let e = await this._fetchFromIDb();
                            null == e &&
                                (e = localStorage.getObject(this.cacheKey)),
                                (this.cacheModel =
                                    null == e ? new ke([], !0) : new ke(e));
                        }
                        return e
                            ? this.cacheModel
                            : new ke(
                                  this.cacheModel.items.filter(
                                      (e) =>
                                          !e.needSync ||
                                          (e.needSync &&
                                              e.syncType !== Ie.delete)
                                  ),
                                  this.cacheModel.isEmptyCache
                              );
                    }
                    async setFavoriteGoods(e) {
                        if (null == this.uid) return;
                        this.cacheModel =
                            null == e ? new ke([], !0) : new ke(e);
                        !(await this._saveToIDb(e)) &&
                            localStorage.putObject(this.cacheKey, e),
                            localStorage.setItem(
                                this.tabsSyncCacheKey,
                                `${Date.now()}`
                            );
                    }
                    contains(e) {
                        if (null == this.cacheModel) return !1;
                        const t = this.cacheModel.favoritesGoodsMap.get(e);
                        return (
                            null != t &&
                            !(t.needSync && t.syncType === Ie.delete)
                        );
                    }
                    _checkOldCache() {
                        for (let e = 1; e < 1; e++)
                            localStorage.removeItem(Me.format(this.uid, e));
                    }
                    _bindEvents() {
                        window.addEventListener("storage", (e) => {
                            (null != e.key &&
                                e.key !== this.tabsSyncCacheKey) ||
                                ((this.cacheModel = null),
                                this.getFavoriteGoods());
                        });
                    }
                    async _fetchFromIDb() {
                        try {
                            const e = await this._openIDb(),
                                t = await this._storageHelper.getAll(
                                    e,
                                    this.cacheKey
                                );
                            return null != t ? t : [];
                        } catch (e) {
                            return (
                                console.log(
                                    `[FAVS_STORAGE]: fetching from idb failed, reason=${e.message}`
                                ),
                                null
                            );
                        }
                    }
                    async _saveToIDb(e) {
                        try {
                            const t = await this._openIDb(),
                                r = t
                                    .transaction([this.cacheKey], "readwrite")
                                    .objectStore(this.cacheKey);
                            r.clear();
                            for (let t of e) r.put(t);
                            return !0;
                        } catch (e) {
                            return (
                                console.log(
                                    `[FAVS_STORAGE]: saving to idb failed, reason=${e.message}`
                                ),
                                !1
                            );
                        }
                    }
                    async _openIDb() {
                        try {
                            return await this._storageHelper.openDb(
                                "wb_" + this.cacheKey,
                                {
                                    onupgradeneeded: (e) => {
                                        if (
                                            !e.objectStoreNames.contains(
                                                this.cacheKey
                                            )
                                        ) {
                                            e.createObjectStore(this.cacheKey, {
                                                keyPath: "characteristicId",
                                            }).createIndex(
                                                "timestamp",
                                                "timestamp",
                                                {
                                                    unique: !1,
                                                }
                                            );
                                        }
                                        e.objectStoreNames.contains(
                                            this.lastSyncCacheKey
                                        ) ||
                                            e.createObjectStore(
                                                this.lastSyncCacheKey,
                                                {
                                                    keyPath: "name",
                                                }
                                            );
                                    },
                                    version: 1,
                                }
                            );
                        } catch (e) {
                            return null;
                        }
                    }
                };
                var Te = class {
                        static convertToFavoriteGoods(e = {}, t = {}) {
                            var r, s, n, o, i, a, l, c;
                            const u =
                                    null == (r = e.sizes)
                                        ? void 0
                                        : r.find(
                                              (e) =>
                                                  e.optionId ===
                                                  t.characteristicId
                                          ),
                                d =
                                    null != (s = null == u ? void 0 : u.price)
                                        ? s
                                        : e.price,
                                p =
                                    d &&
                                    null !=
                                        (o =
                                            null ==
                                            (n = null == u ? void 0 : u.stocks)
                                                ? void 0
                                                : n.some((e) => e.qty > 0)) &&
                                    o,
                                h =
                                    20624 === e.brandId ||
                                    30624 === e.siteBrandId,
                                m = p ? d.logistics : 0,
                                g = p ? d.priceToShow / 100 : 0,
                                b =
                                    !wb.settings.b2bMode && p
                                        ? d.paymentDiscountAmount
                                        : 0,
                                y = 15 & e.dtype,
                                v = !!p && (2 === y || 7 === y),
                                f = {
                                    nmId: e.id,
                                    cod1S: e.id,
                                    brandName: e.brand,
                                    characteristicId: t.characteristicId,
                                    meta: t.meta,
                                    id: t.characteristicId,
                                    goodsName: e.name,
                                    colorName:
                                        null ==
                                        (a =
                                            null == (i = e.colors)
                                                ? void 0
                                                : i[0])
                                            ? void 0
                                            : a.name,
                                    onStock: p ? 1 : 0,
                                    star: e.rating,
                                    price: p ? d.basic / 100 : 0,
                                    priceWithSale: g,
                                    priceWithCouponAndDiscount: g,
                                    sale: p ? d.sale : 0,
                                    totalSale: p ? d.sale : 0,
                                    salePrice: g,
                                    targetUrl:
                                        null != (l = t.targetUrl) ? l : "",
                                    sizeName:
                                        null !=
                                        (c = null == u ? void 0 : u.origName)
                                            ? c
                                            : "",
                                    stocks: null == u ? void 0 : u.stocks,
                                    timestamp: t.timestamp,
                                    deliveryHours: p && e.time1 + e.time2,
                                    isDbs: v,
                                    source: t.source,
                                    subjectId: e.subjectId,
                                    subjectParentId: e.subjectParentId,
                                    reviewRating: e.reviewRating,
                                    feedbacks: e.feedbacks || e.commentsCount,
                                    supplierId: e.supplierId,
                                    supplier: e.supplier,
                                    newlyArrived: p && (1 & t.source) > 0,
                                    _rawCatalogModel: e,
                                    viewFlags: e.viewFlags,
                                    shouldShowOriginalMark:
                                        !h && !!(8 & e.viewFlags),
                                    paymentDiscountAmount: b,
                                    premiumSale: e.premiumSale,
                                    showRedPrice: wb.xnm.isRedPrice(
                                        e.panelPromoId
                                    ),
                                    logisticsCost: m,
                                    is2025LogisticCost: e.is2025LogisticCost,
                                    canBeBooking: 10 === y,
                                    isPostpaidBooking: e.isPostpaidBooking,
                                    isPreorder: e.isPreorder,
                                    isItemInBasket: !1,
                                    get isDeleted() {
                                        return !(
                                            this.goodsName ||
                                            this.brandName ||
                                            this.colorName ||
                                            this.sizeName
                                        );
                                    },
                                    get showDiscount() {
                                        return (
                                            (this.price > 0 ||
                                                this
                                                    .priceWithCouponAndDiscount >
                                                    0) &&
                                            this.price !=
                                                this.priceWithCouponAndDiscount
                                        );
                                    },
                                };
                            return (
                                wb.settings.b2bMode &&
                                    ((f.isVatRefundable =
                                        wb.xnm.isVatRefundable(e.viewFlags)),
                                    (f.vatPercent = wb.xnm.getVatPercent(
                                        e.viewFlags
                                    ))),
                                f
                            );
                        }
                        static convertFromAddModelToCacheItem(e, t) {
                            var r, s, n;
                            const o = wb.analitics.analiticsInfoToListName(e),
                                i = {
                                    characteristicId: e.characteristicId,
                                    cod1S: e.cod1S,
                                    id: e.characteristicId,
                                    source: t,
                                    targetUrl: `${
                                        null != (r = e.targetUrl) ? r : ""
                                    }|${null != (s = e.iid) ? s : 1}|${o}|${
                                        e.logs
                                    }`,
                                    timestamp: Math.ceil(Date.now() / 1e3),
                                    meta: e.meta,
                                };
                            return (
                                (null == (n = i.meta) ? void 0 : n.shade) &&
                                    delete i.meta.shade,
                                i
                            );
                        }
                    },
                    $e = Object.freeze({
                        waitlist: 1,
                        poned: 2,
                        both: 3,
                    });
                class Ae {
                    constructor(e, t, r, s, n) {
                        (this.chrt_id = +t),
                            (this.cod_1s = r),
                            (this.client_ts = s || (Date.now() / 1e3) | 0),
                            (this.op_type = e || 1),
                            (this.type = n || 2);
                    }
                    static fromCache(e) {
                        if (0 === e.syncType)
                            return Ae.toDelete(e.characteristicId);
                        const t = new Ae(
                            1,
                            e.characteristicId,
                            e.cod1S,
                            e.timestamp,
                            e.source
                        );
                        return (
                            t.client_ts > 1e12 &&
                                (t.client_ts = (t.client_ts / 1e3) | 0),
                            (t.target_url = e.targetUrl),
                            e.meta && (t.meta_json = JSON.stringify(e.meta)),
                            t
                        );
                    }
                    static toDelete(e) {
                        return new Ae(3, e);
                    }
                    static convertFromSharedModelToCacheItem(e) {
                        const t = {
                            characteristicId: e.chrt_id,
                            cod1S: e.cod_1s,
                            targetUrl: e.target_url,
                            timestamp: e.client_ts,
                            source: e.type,
                        };
                        try {
                            t.meta = e.meta_json
                                ? JSON.parse(e.meta_json)
                                : null;
                        } catch (e) {}
                        return t;
                    }
                }
                var De = Ae;
                const Be = b.D4;
                var Oe = class {
                        constructor(e) {
                            (this._cacheHelper = e),
                                (this.debounceSync = this.$helper.debounce(
                                    this.sync.bind(this),
                                    3e3
                                ));
                        }
                        async _getOperationAsync() {
                            return (
                                await this._cacheHelper.getFavoriteGoods(!0)
                            ).items
                                .filter((e) => e.needSync)
                                .map((e) => De.fromCache(e));
                        }
                        async _getAllAsync() {
                            return (
                                await this._cacheHelper.getFavoriteGoods()
                            ).items.map((e) => De.fromCache(e));
                        }
                        async sync(e) {
                            var t;
                            if (this.$auth.isAuth) {
                                this._syncProcess =
                                    null != (t = this._syncProcess)
                                        ? t
                                        : this._sync(e);
                                try {
                                    return await this._syncProcess;
                                } catch (e) {
                                } finally {
                                    this._syncProcess = null;
                                }
                            }
                        }
                        async _sync(e) {
                            return await navigator.locks.request(
                                "lock-fav-sync",
                                async (t) => {
                                    const r =
                                            await this._cacheHelper.getLastSyncDt(),
                                        s = await this._getOperationAsync(),
                                        n =
                                            this.$services.sessionService.getSession();
                                    try {
                                        const t = await this._doSync({
                                            ts: r,
                                            sessionId: n,
                                            operations: s,
                                            timeout: e,
                                        });
                                        if (
                                            (this._sendMetrics(t.state),
                                            0 === t.state && t.change_ts > 0)
                                        )
                                            return await this._updateProductsAsync(
                                                s,
                                                t
                                            );
                                        if (1 === t.state) {
                                            const e = await this._getAllAsync(),
                                                t = await this._doSync({
                                                    ts: r,
                                                    sessionId: n,
                                                    operations: e,
                                                    rememberMe: !0,
                                                });
                                            if (
                                                0 === t.state &&
                                                t.change_ts > 0
                                            )
                                                return await this._updateProductsAsync(
                                                    e,
                                                    t
                                                );
                                        } else
                                            t &&
                                                wb.spa.logError(
                                                    new Error(
                                                        `[WB_FAVS_SYNC]: sync state:${t.state}`
                                                    ),
                                                    {
                                                        result: t,
                                                        ts: r,
                                                        deviceId: n,
                                                        opLen: s.length,
                                                        hasJwt: this.$auth
                                                            .isAuth,
                                                    }
                                                );
                                    } catch (e) {
                                        const t =
                                            !e.isCustomError &&
                                            e instanceof TypeError &&
                                            ("Failed to fetch" === e.message ||
                                                "NetworkError when attempting to fetch resource." ===
                                                    e.message ||
                                                "Cancelled" === e.message);
                                        this._sendMetrics(
                                            t ? "network" : "error"
                                        ),
                                            wb.spa.logError(
                                                new Error(
                                                    `[WB_FAVS_SYNC]: ${e.message}`
                                                ),
                                                {
                                                    ts: r,
                                                    deviceId: n,
                                                    opLen: s.length,
                                                    hasJwt: this.$auth.isAuth,
                                                }
                                            );
                                    }
                                    return !1;
                                }
                            );
                        }
                        async _updateProductsAsync(e, t) {
                            return (
                                await this._cacheHelper.setFavoriteGoods(
                                    await this.mergeUpdatedAndCacheItems(
                                        e,
                                        t.result_set
                                    )
                                ),
                                await this._cacheHelper.setLastSyncDt(
                                    t.change_ts
                                ),
                                !0
                            );
                        }
                        async mergeUpdatedAndCacheItems(e, t) {
                            var r;
                            const s =
                                (null ==
                                (r = (
                                    await this._cacheHelper.getFavoriteGoods(!0)
                                ).items)
                                    ? void 0
                                    : r.toMap(
                                          (e) => e.characteristicId,
                                          (e) => e
                                      )) || new Map();
                            return (
                                null == e ||
                                    e.forEach((e) => {
                                        if (3 === e.op_type)
                                            s.delete(e.chrt_id);
                                        else {
                                            const t = s.get(e.chrt_id);
                                            t &&
                                                (delete t.needSync,
                                                delete t.syncType);
                                        }
                                    }),
                                null == t ||
                                    t.forEach((e) => {
                                        const t = s.get(e.chrt_id);
                                        if (null == t ? void 0 : t.needSync) {
                                            if (!e.is_deleted) return;
                                            if (1 === t.op_type) return;
                                        }
                                        e.is_deleted
                                            ? s.delete(e.chrt_id)
                                            : s.set(
                                                  e.chrt_id,
                                                  De.convertFromSharedModelToCacheItem(
                                                      e
                                                  )
                                              );
                                    }),
                                s
                                    .toArray()
                                    .sort((e, t) => t.timestamp - e.timestamp)
                            );
                        }
                        _doSync({
                            ts: e,
                            sessionId: t,
                            operations: r,
                            rememberMe: s = !1,
                            timeout: n = null,
                        }) {
                            return this.$wbxHttpClient
                                .fetch(
                                    `${Be}/sync?ts=${e}&device_id=${t}${
                                        s ? "&remember_me=true" : ""
                                    }`,
                                    {
                                        method: "POST",
                                        body: JSON.stringify(r),
                                        headers: {
                                            "Content-Type": "application/json",
                                            "Wb-AppType": "site",
                                        },
                                        timeout: n || 1e4,
                                    }
                                )
                                .then(async (e) => (e.ok ? e.json() : {}))
                                .then(
                                    (e) => (
                                        e.result_set &&
                                            (e.result_set =
                                                e.result_set[0] || []),
                                        e
                                    )
                                );
                        }
                        _sendMetrics(e) {
                            if (!window._debug)
                                try {
                                    fetch(
                                        `/webapi/logging/favs/metrics?status=${e}`,
                                        {
                                            method: "POST",
                                        }
                                    );
                                } catch (e) {}
                        }
                    },
                    Ee = Object.defineProperty,
                    xe = Object.getOwnPropertySymbols,
                    Le = Object.prototype.hasOwnProperty,
                    je = Object.prototype.propertyIsEnumerable,
                    Fe = (e, t, r) =>
                        t in e
                            ? Ee(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r);
                var Ne = class {
                        constructor() {
                            (this._cacheHelper = new Pe(this.$storageHelper)),
                                (this._enrichedFavoriteItems = new Map()),
                                (this._timer = null),
                                (this.isSynced = !1),
                                this._bindEvents();
                        }
                        init() {
                            Object.setPrototypeOf(
                                Oe.prototype,
                                WbSpaModel.prototype
                            ),
                                (this.dumpFav = new Oe(this._cacheHelper));
                        }
                        setKey(e, t) {
                            e &&
                                (this._cacheHelper.setKey(t),
                                localStorage.clearStartsWith(
                                    "_favs_synced_v3"
                                ));
                        }
                        async syncFromServerAsync() {
                            if (this.isSynced || this._initialSyncInProgress)
                                return;
                            this._initialSyncInProgress = !0;
                            const e = await this._loadRawGoodsFromDumpAsync();
                            return (this._initialSyncInProgress = !1), e;
                        }
                        async getWlArrivedCatalogModelAsync() {
                            window._debug &&
                                console.time("buildWlArrivedCatalogModel");
                            try {
                                const [e, t] = await Promise.all([
                                        this._loadFavoriteGoodsAsync(),
                                        this.$moduleLoader.loadModuleAsync(
                                            "favoriteGoodsModel"
                                        ),
                                    ]),
                                    r = new t(e);
                                return (
                                    r
                                        .setOnlyWlArrived(!0)
                                        .setSorting(1)
                                        .setGoods(Number.MAX_SAFE_INTEGER)
                                        .complete(),
                                    {
                                        goods: r.favoriteGoods,
                                    }
                                );
                            } catch (e) {
                                return (
                                    console.error(e),
                                    {
                                        goods: [],
                                        isEmptyCache: !0,
                                    }
                                );
                            } finally {
                                window._debug &&
                                    console.timeEnd(
                                        "buildWlArrivedCatalogModel"
                                    );
                            }
                        }
                        async getSimplifiedModelAsync() {
                            window._debug &&
                                console.time("buildFavSimpleModel");
                            try {
                                const [e, t] = await Promise.all([
                                    this._loadFavoriteGoodsAsync(),
                                    this.$moduleLoader.loadModuleAsync(
                                        "favoriteGoodsModel"
                                    ),
                                ]);
                                return new t(e)
                                    .setSorting(7)
                                    .setGoods(16)
                                    .toSimpleModel();
                            } catch (e) {
                                return (
                                    console.error(e),
                                    {
                                        goods: [],
                                        totalCount: 0,
                                        availableCount: 0,
                                        isEmptyCache: !0,
                                    }
                                );
                            } finally {
                                window._debug &&
                                    console.timeEnd("buildFavSimpleModel");
                            }
                        }
                        async getFavsDataAsync(e = "", t, r = !1) {
                            var s, n, o;
                            window._debug && console.time("buildFavModel");
                            const i = new URLSearchParams(e),
                                a =
                                    null != (s = i.get("sort"))
                                        ? s
                                        : "newlydown",
                                l = null != (n = i.get("search")) ? n : "",
                                c =
                                    "true" ==
                                    (null != (o = i.get("wlArrived"))
                                        ? o
                                        : i.get("wlarrived"));
                            try {
                                const [e, s, { FavoriteGoodsSorterModel: n }] =
                                        await Promise.all([
                                            this._loadFavoriteGoodsAsync(r),
                                            this.$moduleLoader.loadModuleAsync(
                                                "favoriteGoodsModel"
                                            ),
                                            this.$moduleLoader.loadModuleAsync(
                                                "sorterModel"
                                            ),
                                        ]),
                                    o = new s(
                                        e,
                                        new n(a, window.location.href)
                                    );
                                return (
                                    o
                                        .setOnlyWlArrived(c)
                                        .setSearch(l)
                                        .setSorting()
                                        .setGoods(t)
                                        .complete(),
                                    o
                                );
                            } catch (e) {
                                return (
                                    console.error(e),
                                    {
                                        isEmptyCache: !0,
                                    }
                                );
                            } finally {
                                window._debug &&
                                    console.timeEnd("buildFavModel");
                            }
                        }
                        async addToFavs(e, t = !1, r) {
                            if (!this.$auth.isAuth)
                                throw new UnauthorizeError();
                            return (
                                this.sendToWishlistStat(e, r),
                                t ? this._addToPoned(e) : this._addToWl(e)
                            );
                        }
                        async sendToWishlistStat(e, t) {
                            var r, s, n, o, i, a, l, c, u, d, p, h;
                            if (window.wba)
                                try {
                                    const m =
                                        (t && t.sizes) || (e && e.sizes) || [];
                                    let g = {
                                        stores:
                                            null ==
                                            (r = m.find(
                                                (t) =>
                                                    t.ch == e.characteristicId
                                            ))
                                                ? void 0
                                                : r.stocks,
                                        salePrice: t
                                            ? t.salePrice
                                            : e.salePrice,
                                    };
                                    if (!g.stores) {
                                        g = (
                                            await wb.xnm.getInfoForWbaStat([
                                                {
                                                    nmId: e.cod1S,
                                                    size: e.characteristicId,
                                                },
                                            ])
                                        ).get(e.cod1S);
                                    }
                                    const b =
                                            this.$analitic.getAnaliticsInfoFromTargetUrl(
                                                e.targetUrl
                                            ),
                                        y = () =>
                                            this.$analitic.analiticsInfoToListName(
                                                e.l ? e : b
                                            ),
                                        v = () =>
                                            this.$analitic.getTailObjectFromAnalyticsInfo(
                                                e.l ? e : b
                                            ),
                                        f = this.$analitic.getStoreProp(
                                            null == g ? void 0 : g.stores,
                                            "dtype"
                                        ),
                                        w =
                                            this.$analitic.getDeliveryTypeForStat(
                                                f
                                            ),
                                        S = this.$analitic.getStoreProp(
                                            null == g ? void 0 : g.stores,
                                            "wh"
                                        );
                                    if (
                                        ["CSD", "CAD", "WLC", "WLA"].includes(
                                            e.l
                                        )
                                    ) {
                                        const t =
                                            WbSpaModel.prototype.$analitic.getTermsFromTailObject(
                                                e.l
                                            );
                                        (e.t = t.category),
                                            (e.t1 = t.id_category),
                                            (e.t2 = t.discount_name);
                                    }
                                    const _ = {
                                        id: e.cod1S,
                                        chrt: e.characteristicId,
                                        quantity: e.quantity,
                                        price: null == g ? void 0 : g.salePrice,
                                        affiliation:
                                            null !=
                                            (s =
                                                null == t
                                                    ? void 0
                                                    : t.supplierId)
                                                ? s
                                                : e.supplierId,
                                        deliveryType: w,
                                        inListIndex: e.iid || 1,
                                        listName: y(),
                                        name:
                                            null !=
                                            (n = null == t ? void 0 : t.name)
                                                ? n
                                                : e.goodsName,
                                        brand:
                                            null !=
                                            (o = null == t ? void 0 : t.brand)
                                                ? o
                                                : e.brandName,
                                        rating:
                                            null !=
                                            (i =
                                                null == t
                                                    ? void 0
                                                    : t.reviewRating)
                                                ? i
                                                : e.reviewRating,
                                        storeId:
                                            null !=
                                            (a = null == e ? void 0 : e.storeId)
                                                ? a
                                                : S,
                                        feedbacksCount:
                                            null !=
                                            (l =
                                                null == t
                                                    ? void 0
                                                    : t.feedbacks)
                                                ? l
                                                : e.feedbacks,
                                        subjectId:
                                            null !=
                                            (c =
                                                null == t
                                                    ? void 0
                                                    : t.subjectId)
                                                ? c
                                                : e.subjectId,
                                        subjectParentId:
                                            null !=
                                            (u =
                                                null == t
                                                    ? void 0
                                                    : t.subjectParentId)
                                                ? u
                                                : e.subjectParentId,
                                        logs:
                                            null !=
                                            (d = null == t ? void 0 : t.logs)
                                                ? d
                                                : e.logs,
                                        tailObject: v(),
                                        is_available:
                                            (null == t ? void 0 : t.soldOut) ||
                                            e.soldOut
                                                ? 0
                                                : 1,
                                    };
                                    this.$analitic.isSearchTerms(e.l ? e : b) &&
                                        (null ==
                                        (h =
                                            null ==
                                            (p = null == e ? void 0 : e.meta)
                                                ? void 0
                                                : p.analitic)
                                            ? void 0
                                            : h.tailObject) &&
                                        (_.tailObject.terms =
                                            e.meta.analitic.tailObject.terms),
                                        this.$analitic.sendWbaEcomStat(
                                            "add_to_wishlist",
                                            [_]
                                        );
                                } catch (e) {
                                    console.error(e);
                                }
                        }
                        deleteFromFavs(e, t) {
                            return this._removeFromPoned(t);
                        }
                        isAddedToFavs(e) {
                            return (
                                this.syncFromServerAsync(),
                                this._cacheHelper.contains(e)
                            );
                        }
                        async deleteManyFromFavsAsync(e) {
                            const t = await this._cacheHelper.getFavoriteGoods(
                                !0
                            );
                            e.forEach((e) => {
                                const r = t.favoritesGoodsMap.get(
                                    e.characteristicId
                                );
                                r &&
                                    ((r.needSync = !0),
                                    (r.syncType = Ie.delete));
                            }),
                                await this._cacheHelper.setFavoriteGoods(
                                    t.favoritesGoodsMap.toArray()
                                );
                            const r = t.favoritesGoodsMap
                                .toArray()
                                .every((e) => e.syncType === Ie.delete);
                            return this.dumpFav.debounceSync(), r;
                        }
                        async moveManyToBasketAsync(e) {
                            const t =
                                this.$services.cartService.addManyItems(e);
                            return (
                                t.isSuccess &&
                                    WbSpaModel.prototype.$moduleLoader.execModule(
                                        "bottomNotificationPanel",
                                        "showNotification",
                                        [
                                            0,
                                            wb.i18n.t(
                                                "favorites.productAddedToBasket"
                                            ),
                                        ]
                                    ),
                                t
                            );
                        }
                        _bindEvents() {
                            this.$eventBus.addEventListener("GeoUpdated", () =>
                                this._enrichedFavoriteItems.clear()
                            );
                        }
                        async _loadFavoriteGoodsAsync(e) {
                            try {
                                const t = await this._loadRawGoodsFromDumpAsync(
                                    4e3,
                                    e
                                );
                                if (!t)
                                    return {
                                        isEmptyCache: !0,
                                        items: [],
                                    };
                                if (t.isEmptyCache)
                                    return {
                                        isEmptyCache: !0,
                                        items: [],
                                    };
                                const r = t.items;
                                return r.length < 1
                                    ? {
                                          isEmptyCache: !1,
                                          items: [],
                                      }
                                    : this._enrichGoodsAsync(r);
                            } catch (e) {
                                return console.error(e), null;
                            }
                        }
                        async _enrichGoodsAsync(e) {
                            const t = wb.xnm.show2025Logistics();
                            this._enrichedFavoriteItems.toArray().some((e) => {
                                var r;
                                return (
                                    (null != (r = e.is2025LogisticCost) &&
                                        r) !== t
                                );
                            }) && this._enrichedFavoriteItems.clear();
                            const r = e.reduce(
                                (e, t) => (
                                    !this._enrichedFavoriteItems.has(
                                        t.characteristicId
                                    ) && e.set(t.characteristicId, t),
                                    e
                                ),
                                new Map()
                            );
                            let s = {};
                            r.size > 0 &&
                                (s = await wb.xnm.getCatalogCards(
                                    r.toArray((e) => e.cod1S),
                                    !1,
                                    !0,
                                    !0
                                ));
                            const n = this.$services.cartService
                                .getItems()
                                .toMap((e) => e.characteristicId);
                            return {
                                isEmptyCache: !1,
                                items: e.reduce((e, t) => {
                                    var r;
                                    const o = s[t.cod1S],
                                        i = this._enrichedFavoriteItems.get(
                                            t.characteristicId
                                        );
                                    if (o || i) {
                                        const s =
                                            null !=
                                            (r =
                                                i &&
                                                ((e, t) => {
                                                    for (var r in t || (t = {}))
                                                        Le.call(t, r) &&
                                                            Fe(e, r, t[r]);
                                                    if (xe)
                                                        for (var r of xe(t))
                                                            je.call(t, r) &&
                                                                Fe(e, r, t[r]);
                                                    return e;
                                                })({}, i))
                                                ? r
                                                : Te.convertToFavoriteGoods(
                                                      o,
                                                      t
                                                  );
                                        (s.isItemInBasket = n.has(s.id)),
                                            e.push(s),
                                            !i &&
                                                this._enrichedFavoriteItems.set(
                                                    s.characteristicId,
                                                    s
                                                );
                                    }
                                    return e;
                                }, []),
                            };
                        }
                        _addToPoned(e) {
                            return this._addThroughCache(e, $e.poned);
                        }
                        async _removeFromPoned(e) {
                            const t = (
                                    await this._cacheHelper.getFavoriteGoods(!0)
                                ).items,
                                r = t.find((t) => t.characteristicId === e);
                            r && ((r.needSync = !0), (r.syncType = Ie.delete)),
                                await this._cacheHelper.setFavoriteGoods(t),
                                this.dumpFav.debounceSync();
                        }
                        _addToWl(e) {
                            return this._addThroughCache(e, $e.waitlist);
                        }
                        async _addThroughCache(e, t) {
                            if (!e.isFromCache) {
                                if (
                                    (await this._cacheHelper.getFavoriteGoods())
                                        .count >= 2e3
                                )
                                    throw new KnownServerError(
                                        wb.i18n
                                            .t("favorites.ponedMaxStorage")
                                            .format(2e3)
                                    );
                            }
                            const r = (
                                await this._cacheHelper.getFavoriteGoods(!0)
                            ).items;
                            let s = r.find(
                                (t) => t.characteristicId == e.characteristicId
                            );
                            s
                                ? (s.timestamp = Math.ceil(Date.now() / 1e3))
                                : ((s = Te.convertFromAddModelToCacheItem(
                                      e,
                                      t
                                  )),
                                  r.push(s)),
                                (s.needSync = !0),
                                (s.syncType = Ie.add),
                                await this._cacheHelper.setFavoriteGoods(r),
                                this.dumpFav.debounceSync();
                        }
                        _updateSyncStatus(e) {
                            $.observable(this).setProperty({
                                isSynced: e,
                            }),
                                WbSpaModel.prototype.$eventBus.dispatchEvent(
                                    new CustomEvent("favouritesSynced")
                                );
                        }
                        async _loadRawGoodsFromDumpAsync(e, t) {
                            return (
                                t ||
                                    (await this.dumpFav.sync(e),
                                    this._updateSyncStatus(!0)),
                                await this._cacheHelper.getFavoriteGoods()
                            );
                        }
                        resetCache() {
                            this._enrichedFavoriteItems.clear();
                        }
                    },
                    We = r(70322);
                const Re = "user-info-{0}";
                var Ue = class {
                        constructor() {
                            (this.timer = null),
                                (this.lastUpdate = -1 / 0),
                                (this.userData = (0, We.O)({})),
                                (this.balanceInfo = {}),
                                (this.loadRequesterPromise = null);
                        }
                        setKey(e, t) {
                            e &&
                                (this.USER_INFO_CACHE_KEY_FORMATTED =
                                    Re.format(t));
                        }
                        getMaskedInfo() {
                            return this._getLocalUserInfo();
                        }
                        _getLocalUserInfo() {
                            var e;
                            return null != (e = this._masketInfo)
                                ? e
                                : localStorage.getObject(
                                      this.USER_INFO_CACHE_KEY_FORMATTED
                                  );
                        }
                        clear() {
                            this.lastUpdate = -1 / 0;
                        }
                        clearLocalUserInfo() {
                            this.USER_INFO_CACHE_KEY_FORMATTED &&
                                localStorage.removeItem(
                                    this.USER_INFO_CACHE_KEY_FORMATTED
                                );
                        }
                        async getUserDataAsync(e = !1, t = !1, r = !1) {
                            var s;
                            if (
                                t &&
                                this.userData.isAuthenticated &&
                                !this.userData.isAuthenticated
                            )
                                return wb.spa.signIn({
                                    query: {
                                        returnUrl: window.location.href,
                                    },
                                });
                            this.basicDataTask =
                                null != (s = this.basicDataTask)
                                    ? s
                                    : this._loadBasicDataInternal(r);
                            const n = this.basicDataTask,
                                [o] = await Promise.all([n]);
                            if (
                                ((this.basicDataTask = null),
                                t && !this.userData.isAuthenticated)
                            )
                                return wb.spa.signIn({
                                    query: {
                                        returnUrl: window.location.href,
                                    },
                                });
                            if (o.maskedInfo) {
                                (o.maskedInfo.isEmp = o.isEmployeeSynced),
                                    (this._masketInfo = o.maskedInfo);
                                try {
                                    localStorage.putObject(
                                        this.USER_INFO_CACHE_KEY_FORMATTED,
                                        o.maskedInfo
                                    );
                                } catch (e) {}
                            }
                            return {
                                userInfo: o,
                                userExtraInfo: {
                                    dataLoaded: !0,
                                    discountInfo: {
                                        purchase: o.purchaseAmount,
                                        personalDiscount: o.personalDiscount,
                                        purchasePercent: o.purchasePercent,
                                    },
                                },
                            };
                        }
                        async checkAccountsBinding(e, t) {
                            var r, s, n, o, i, a, l, c;
                            if (!this.$auth.isAuth) return !1;
                            const u =
                                await this.$services.userData.getUserDataAsync(
                                    !1,
                                    !1,
                                    t
                                );
                            let d = !1,
                                p = !1,
                                h = !1,
                                m = !1;
                            for (let t of (null ==
                            (r = null == u ? void 0 : u.userInfo)
                                ? void 0
                                : r.contacts) || [])
                                "esiaID" ==
                                    (null == t ? void 0 : t.contact_type) &&
                                    e.esiaSignIn &&
                                    (d = !0),
                                    "sberID" ==
                                        (null == t ? void 0 : t.contact_type) &&
                                        e.sberIdSignIn &&
                                        (p = !0),
                                    "oneID" ==
                                        (null == t ? void 0 : t.contact_type) &&
                                        (h = !0),
                                    "dcbankID" ==
                                        (null == t ? void 0 : t.contact_type) &&
                                        (m = !0);
                            const g =
                                    null ==
                                    (o =
                                        null ==
                                        (n =
                                            null ==
                                            (s =
                                                null == u ? void 0 : u.userInfo)
                                                ? void 0
                                                : s.phone)
                                            ? void 0
                                            : n.toString())
                                        ? void 0
                                        : o.startsWith("79"),
                                b =
                                    null ==
                                    (l =
                                        null ==
                                        (a =
                                            null ==
                                            (i =
                                                null == u ? void 0 : u.userInfo)
                                                ? void 0
                                                : i.phone)
                                            ? void 0
                                            : a.toString())
                                        ? void 0
                                        : l.startsWith("998"),
                                y = WbSpaModel.prototype.$user.getLocale(),
                                v = wb.settings.currentLocale;
                            let f = !1,
                                w = !1,
                                S = !1,
                                _ = !1;
                            return (
                                ((g && (null == e ? void 0 : e.esiaSignIn)) ||
                                    d) &&
                                    (f = !0),
                                ((g && (null == e ? void 0 : e.sberIdSignIn)) ||
                                    p) &&
                                    (w = !0),
                                (((b || "uz" == y || "uz" == v) &&
                                    ((null == e ? void 0 : e.oneIdSignIn) ||
                                        ((null == e
                                            ? void 0
                                            : e.enableOneidForEmployees) &&
                                            (null ==
                                            (c =
                                                null == u ? void 0 : u.userInfo)
                                                ? void 0
                                                : c.isActiveEmployee)))) ||
                                    h) &&
                                    (S = !0),
                                ("tj" != y && "tj" != v && !m) ||
                                    "kg" == v ||
                                    (_ = !0),
                                {
                                    showBoundAccountsBlock: !!(
                                        f ||
                                        w ||
                                        S ||
                                        _
                                    ),
                                    avaliableBindings: {
                                        showEsia: f,
                                        showSberId: w,
                                        showOneid: S,
                                        showDcb: _,
                                    },
                                    activeBindings: {
                                        isEsiaBound: d,
                                        isSberidBound: p,
                                        isOneidBound: h,
                                        isDcbBound: m,
                                    },
                                }
                            );
                        }
                        removeInn() {
                            $.observable(this.userData).setProperty({
                                inn: "",
                            });
                        }
                        async updateFioAsync(e, t, r) {
                            return (await this._loadRequetser()).updateFioAsync(
                                e,
                                t,
                                r,
                                this.userData
                            );
                        }
                        async updateSexAsync(e) {
                            return (await this._loadRequetser()).updateSexAsync(
                                e,
                                this.userData
                            );
                        }
                        async updateBirthdayAsync(e) {
                            return (
                                await this._loadRequetser()
                            ).updateBirthdayAsync(e, this.userData);
                        }
                        async updateEmailAsync(e) {
                            return (
                                await this._loadRequetser()
                            ).updateEmailAsync(e, this.userData);
                        }
                        async updatePhoneMobileAsync(e, t, r) {
                            return (
                                await this._loadRequetser()
                            ).updatePhoneMobileAsync(e, t, r, this.userData);
                        }
                        async updateInnAsync(e) {
                            return (await this._loadRequetser()).updateInnAsync(
                                e,
                                this.userData
                            );
                        }
                        async updateImageAsync(e) {
                            return (
                                await this._loadRequetser()
                            ).updateImageAsync(e, this.userData);
                        }
                        async removeUserPhotoAsync() {
                            return (
                                await this._loadRequetser()
                            ).removeUserPhotoAsync(this.userData);
                        }
                        async updateSettingsAsync(e, t) {
                            return (
                                await this._loadRequetser()
                            ).updateUserSettingsAsync(e, t, this.userData);
                        }
                        async _loadBasicDataInternal(e) {
                            if (Date.now() - this.lastUpdate < 6e5 && !e)
                                return this.userData;
                            const t = await this._loadRequetser();
                            return (
                                (this.lastUpdate = Date.now()),
                                t.loadBasicInfo(
                                    this.userData,
                                    this._getLocalUserInfo()
                                )
                            );
                        }
                        async _loadRequetser() {
                            return (
                                this.loadRequesterPromise ||
                                    (this.loadRequesterPromise =
                                        this.$moduleLoader.loadModuleAsync(
                                            "userInfoRequester"
                                        )),
                                this.loadRequesterPromise
                            );
                        }
                        async migrateProfileFromGlobal() {
                            if (
                                localStorage.hasItem("wbx_to_wb_profile_synced")
                            )
                                return;
                            let e = await this.$services.apiUserStorage.getList(
                                "profile"
                            );
                            if (
                                !!(null == e
                                    ? void 0
                                    : e.find(
                                          (e) =>
                                              "profile/info_synced" === e.path
                                      ))
                            )
                                return;
                            const t = `${this.$services.cartService.publicBasketApiUrl}/lk/account/addresses/migratefromglobal`;
                            try {
                                await this.$httpClient.fetchJSON(t, {
                                    method: "POST",
                                }),
                                    localStorage.setItem(
                                        "wbx_to_wb_profile_synced",
                                        1
                                    );
                            } catch (e) {
                                wb.spa.logError(
                                    "[WBX_PROFILE_MIGR]: failed to migrate profile",
                                    e
                                );
                            }
                        }
                    },
                    He = Object.defineProperty,
                    qe = Object.getOwnPropertySymbols,
                    ze = Object.prototype.hasOwnProperty,
                    Ve = Object.prototype.propertyIsEnumerable,
                    Ge = (e, t, r) =>
                        t in e
                            ? He(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r),
                    Qe = (e, t, r) =>
                        Ge(e, "symbol" != typeof t ? t + "" : t, r);
                const Ke = "_hasUnreadEvents",
                    Je = "/webapi/newsfeed/events",
                    Xe = "wb_notification_cash",
                    Ye = "cash_store_object";
                class Ze extends We.c {
                    constructor() {
                        super(),
                            Qe(this, "eventsCount", 0),
                            Qe(this, "loading", !0);
                    }
                }
                var et = class {
                        constructor() {
                            (this.getMoreUrl =
                                "/webapi/lk/newsfeed/events/spa/loadmore"),
                                (this.eventsModel = new Ze()),
                                window.addEventListener("storage", (e) => {
                                    e.key === Ke &&
                                        this._fireHasEvent(Number(e.newValue));
                                });
                        }
                        init() {
                            WbSpaModel.prototype.$user.getId()
                                ? this._delOldCashBell()
                                : this._delAllCashBellDb();
                        }
                        get baseUrl() {
                            return b.YM;
                        }
                        canSendToBell() {
                            var e, t, r;
                            const s = Number(
                                null ==
                                    (r =
                                        null ==
                                        (t =
                                            null == (e = wb.global)
                                                ? void 0
                                                : e.settings)
                                            ? void 0
                                            : t.variables)
                                    ? void 0
                                    : r.bellPercentage
                            );
                            return s > 0 && this.$auth.jwtData.user % 100 < s;
                        }
                        getBellNotifications() {
                            return this.bellFetch(
                                "api/v3/notice/get?app_type=web",
                                {
                                    method: "POST",
                                }
                            )
                                .then((e) => {
                                    var t;
                                    return (
                                        (null == (t = e.payload)
                                            ? void 0
                                            : t.length) &&
                                            this._syncCashBellAsync(e.payload),
                                        e
                                    );
                                })
                                .catch(() => this._getCashBellAsync());
                        }
                        getNotifications(e = 0) {
                            return this.$httpClient.fetchJSON(this.getMoreUrl, {
                                method: "POST",
                                body: new URLSearchParams({
                                    page: e,
                                }),
                            });
                        }
                        delete(e) {
                            if (null == e ? void 0 : e.length)
                                return (
                                    this._delByUuidsCashBell(e),
                                    this.bellFetch("api/notice/delete", {
                                        method: "POST",
                                        body: JSON.stringify({
                                            notice_ids: e,
                                        }),
                                    })
                                );
                        }
                        preview() {
                            return this.fetch("api/v3/notice/preview", {
                                method: "GET",
                            });
                        }
                        read(e) {
                            if (null == e ? void 0 : e.length)
                                return this.fetch("api/notice/read", {
                                    method: "POST",
                                    body: JSON.stringify({
                                        notice_ids: e,
                                    }),
                                });
                        }
                        _fireHasEvent(e) {
                            e &&
                                this.$eventBus.dispatchEvent(
                                    new CustomEvent("HasUnreadEvents", {
                                        detail: {
                                            count: e,
                                        },
                                    })
                                );
                        }
                        async checkNotificationCountAsync() {
                            var e, t;
                            if ((this._clearTimer(), !this.$auth.isAuth))
                                return this.eventsModel;
                            let r,
                                s = !1;
                            try {
                                if (this.canSendToBell())
                                    (r = await this.bellFetch(
                                        "api/v3/notice/unread?app_type=web",
                                        {
                                            method: "GET",
                                        }
                                    )),
                                        $.observable(
                                            this.eventsModel
                                        ).setProperty({
                                            eventsCount:
                                                (null ==
                                                (e =
                                                    null == r
                                                        ? void 0
                                                        : r.payload)
                                                    ? void 0
                                                    : e.count) || 0,
                                        }),
                                        (this.eventsModel.eventsCount =
                                            (null ==
                                            (t = null == r ? void 0 : r.payload)
                                                ? void 0
                                                : t.count) || 0);
                                else {
                                    const e = await this.$httpClient.fetchJSON(
                                        `${Je}/count`,
                                        {
                                            method: "POST",
                                        }
                                    );
                                    $.observable(this.eventsModel).setProperty({
                                        eventsCount: e,
                                    }),
                                        (this.eventsModel.eventsCount = e);
                                }
                                if (this.eventsModel.eventsCount > 0) {
                                    this._fireHasEvent(
                                        this.eventsModel.eventsCount
                                    );
                                    try {
                                        localStorage.setItem(
                                            Ke,
                                            this.eventsModel.eventsCount
                                        );
                                    } catch (e) {}
                                }
                                s = !0;
                            } catch (e) {
                                console.error(e),
                                    $.observable(this.eventsModel).setProperty({
                                        isNetworkError: !0,
                                    }),
                                    (this.eventsModel.isNetworkError = !0);
                            } finally {
                                return (
                                    $.observable(this.eventsModel).setProperty({
                                        loading: !1,
                                    }),
                                    (this.eventsModel.loading = !1),
                                    this._startTimer(s),
                                    this.eventsModel
                                );
                            }
                        }
                        async markNotificationRead(e) {
                            if (!(null == e ? void 0 : e.length)) return;
                            this._clearTimer();
                            let t,
                                r = !1;
                            try {
                                this.canSendToBell()
                                    ? await this.bellFetch("api/notice/read", {
                                          method: "POST",
                                          body: JSON.stringify({
                                              notice_ids: e,
                                          }),
                                      })
                                    : await this.$httpClient.fetchJSON(
                                          `${Je}/mark`,
                                          {
                                              method: "POST",
                                              body: new URLSearchParams({
                                                  readIds: e.join(";"),
                                              }),
                                          }
                                      ),
                                    $.observable(this.eventsModel).setProperty({
                                        eventsCount: Math.max(
                                            this.eventsModel.eventsCount -
                                                e.length,
                                            0
                                        ),
                                    }),
                                    (r = !0);
                            } catch (e) {
                                (t = e),
                                    $.observable(this.eventsModel).setProperty({
                                        isNetworkError: !0,
                                    });
                            } finally {
                                this._startTimer(r);
                            }
                            return {
                                isSuccess: r,
                                error: t,
                            };
                        }
                        _clearTimer() {
                            clearTimeout(this.timer);
                        }
                        _startTimer(e) {
                            this.timer = setTimeout(
                                () => this.checkNotificationCountAsync(),
                                9e4
                            );
                        }
                        bellFetch(e, t = {}) {
                            const r = t,
                                { headers: s = {} } = r,
                                n = ((e, t) => {
                                    var r = {};
                                    for (var s in e)
                                        ze.call(e, s) &&
                                            t.indexOf(s) < 0 &&
                                            (r[s] = e[s]);
                                    if (null != e && qe)
                                        for (var s of qe(e))
                                            t.indexOf(s) < 0 &&
                                                Ve.call(e, s) &&
                                                (r[s] = e[s]);
                                    return r;
                                })(r, ["headers"]),
                                o = new Headers(s);
                            return (
                                o.set(
                                    "X-Request-ID",
                                    wb.helpers.generateGuid()
                                ),
                                this.$wbxHttpClient
                                    .fetch(
                                        `${b.YM}/shard-proxy/${e}`,
                                        ((e, t) => {
                                            for (var r in t || (t = {}))
                                                ze.call(t, r) && Ge(e, r, t[r]);
                                            if (qe)
                                                for (var r of qe(t))
                                                    Ve.call(t, r) &&
                                                        Ge(e, r, t[r]);
                                            return e;
                                        })(
                                            {
                                                headers: o,
                                            },
                                            n
                                        )
                                    )
                                    .then(async (e) =>
                                        204 === e.status
                                            ? Promise.resolve(null)
                                            : e.ok
                                            ? e.json()
                                            : void 0
                                    )
                            );
                        }
                        _openCashBellDb() {
                            return this.$storageHelper.openDb(Xe, {
                                onupgradeneeded: (e) =>
                                    e.createObjectStore(Ye, {
                                        keyPath: "uuid",
                                    }),
                                version: 1,
                            });
                        }
                        _getCashBellAsync() {
                            return this._openCashBellDb()
                                .then((e) => this.$storageHelper.getAll(e, Ye))
                                .then((e) => ({
                                    payload: e.filter(
                                        (e) =>
                                            !this._isOldMessage(e) &&
                                            e.user_id ===
                                                WbSpaModel.prototype.$user.getId()
                                    ),
                                }));
                        }
                        _delAllCashBellDb() {
                            indexedDB.deleteDatabase(Xe);
                        }
                        _delOldCashBell() {
                            this._openCashBellDb().then((e) => {
                                const t = e
                                        .transaction([Ye], "readwrite")
                                        .objectStore(Ye),
                                    r = t.getAll(),
                                    s = WbSpaModel.prototype.$user.getId();
                                r.onsuccess = () => {
                                    (r.result || []).forEach((e) => {
                                        (this._isOldMessage(e.dt) ||
                                            e.user_id !== s) &&
                                            t.delete(e.uuid);
                                    });
                                };
                            });
                        }
                        _delByUuidsCashBell(e) {
                            this._openCashBellDb().then((t) => {
                                const r = t
                                    .transaction([Ye], "readwrite")
                                    .objectStore(Ye);
                                e.forEach((e) => r.delete(e));
                            });
                        }
                        _isOldMessage(e) {
                            return e.dt / 1e6 + 1728e5 < Date.utcNow();
                        }
                        _syncCashBellAsync(e) {
                            this._openCashBellDb().then((t) => {
                                const r = t
                                    .transaction([Ye], "readwrite")
                                    .objectStore(Ye);
                                e.forEach((e) => {
                                    r.put(e);
                                });
                            });
                        }
                    },
                    tt = Object.defineProperty,
                    rt = Object.getOwnPropertySymbols,
                    st = Object.prototype.hasOwnProperty,
                    nt = Object.prototype.propertyIsEnumerable,
                    ot = (e, t, r) =>
                        t in e
                            ? tt(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r);
                class it {
                    constructor() {
                        (this.maxQuantity = 10),
                            (this.canBeOrdered = !0),
                            (this.includeInOrder = !0);
                    }
                    static fromWbBasketProduct(e) {
                        var t;
                        const r = new it(),
                            s = +e.quantity;
                        (r.characteristicId = r.id = +e.chrt_id),
                            (r.quantity = s > 0 ? s : 1),
                            (r.cod1S = e.cod_1s);
                        try {
                            r.meta = e.meta_json
                                ? JSON.parse(e.meta_json)
                                : null;
                        } catch (e) {}
                        return (
                            (r.targetUrl =
                                null == (t = e.target_url)
                                    ? void 0
                                    : t.replace(/\x00/g, "")),
                            (r.isDeleted = e.is_deleted),
                            (r.timestamp = e.client_ts),
                            (r._fromSync = !0),
                            (r.viewFlags = e.viewFlags),
                            r
                        );
                    }
                    static fromCardModel(e, t, r) {
                        var s, n, o, i, a, l, c, u;
                        const d = new it(),
                            p = +e.quantity,
                            h =
                                WbSpaModel.prototype.$analitic.analiticsInfoToListName(
                                    ((e, t) => {
                                        for (var r in t || (t = {}))
                                            st.call(t, r) && ot(e, r, t[r]);
                                        if (rt)
                                            for (var r of rt(t))
                                                nt.call(t, r) && ot(e, r, t[r]);
                                        return e;
                                    })(
                                        {
                                            l: "AAA",
                                            lw: "IT",
                                        },
                                        e
                                    )
                                ),
                            m = null == (s = e.meta) ? void 0 : s.analitic,
                            g =
                                (null == m ? void 0 : m.logs) ||
                                e.logs ||
                                (null ==
                                (o =
                                    null == (n = e.targetInfo)
                                        ? void 0
                                        : n.analiticsInfo)
                                    ? void 0
                                    : o.logs) ||
                                "";
                        m && g && (m.logs = g),
                            e.meta || (e.meta = {}),
                            (e.meta.analitic = m);
                        const b =
                            WbSpaModel.prototype.$user.getUserGradeFromCache();
                        if (
                            ((d.characteristicId = d.id = +e.characteristicId),
                            (d.quantity = p > 0 ? p : 1),
                            (d.maxQuantity =
                                (null == t ? void 0 : t.totalQuantity) || 10),
                            (d.cod1S = e.cod1S),
                            (d.targetUrl = `EX|${e.iid || "1"}|${h}|${g}`),
                            (d.priceWithCoupon =
                                d.priceWithCouponAndDiscount =
                                d.priceWithCouponAndSpp =
                                d.priceWithSale =
                                d.price =
                                    e.priceWithCouponAndDiscount),
                            (d.subjectId = e.subjectId),
                            (d.subjectParentId = e.subjectParentId),
                            (d.supplierId = e.supplierId),
                            (d.supplierName = e.supplier),
                            (d.reviewRating = e.reviewRating),
                            (d.feedbacks = e.feedbacks || e.commentsCount),
                            (d.meta = e.meta),
                            (d.timestamp = (Date.now() / 1e3) | 0),
                            (d.viewFlags =
                                (null == t ? void 0 : t.viewFlags) ||
                                e.viewFlags),
                            t)
                        ) {
                            if (
                                ((d.brandName = t.brand),
                                (d.goodsName = t.name),
                                (d.colorName = t.colorName || t.color),
                                (d.promos = t.promotions),
                                (d.isUnrefusable = t.isUnrefusable),
                                (d.isPrepaid = t.isPrepaid),
                                (d.isUnreturnable = t.isUnreturnable),
                                (d.isVerificationReturn =
                                    t.isVerificationReturn),
                                (d.logisticsCost = t.logisticsCost),
                                (d.payloadV2 = t.payloadV2),
                                (d.whDtype =
                                    null != (i = t.whDtype) ? i : t.dtype),
                                (d.catalogReturnCost =
                                    null != (l = t.returnCost)
                                        ? l
                                        : null == (a = t.catalogPrice)
                                        ? void 0
                                        : a.return),
                                (d.saleConditions = t.saleConditions),
                                t.panelPromoId &&
                                    (d.panelPromoId = t.panelPromoId),
                                t.feedbacks && (d.feedbacks = t.feedbacks),
                                t.reviewRating &&
                                    (d.reviewRating = t.reviewRating),
                                t.deliveryHours &&
                                    (d.deliveryHours = t.deliveryHours),
                                t.catalogPrice
                                    ? ((d.price = d.priceWithCoupon =
                                          t.catalogPrice.basic / 100),
                                      (d.salePrice =
                                          d.priceWithSale =
                                          d.priceWithCouponAndDiscount =
                                          d.priceWithCouponAndSpp =
                                              t.catalogPrice.total / 100),
                                      (d.sale = t.catalogPrice.sale))
                                    : ((d.priceWithSale = t.salePrice),
                                      (d.sale = t.sale)),
                                WbSpaModel.prototype.$useCatalogReturnCost() &&
                                    ((d.returnCost = Math.round(
                                        d.catalogReturnCost / 100
                                    )),
                                    4 == (null == b ? void 0 : b.version)))
                            ) {
                                const e =
                                    16 & d.whDtype || 32 & d.whDtype
                                        ? 1
                                        : b.return_fee;
                                d.returnCost = Math.min(
                                    d.priceWithCouponAndDiscount,
                                    d.returnCost * e
                                );
                            }
                            const e =
                                null == (c = t.sizes)
                                    ? void 0
                                    : c.find((e) => e.ch === d.id);
                            if (
                                e &&
                                ((d.sizeName = e.nm),
                                (d.stocks = e.stocks),
                                e.deliveryHours &&
                                    (d.deliveryHours = e.deliveryHours),
                                (d.payloadV2 = e.payloadV2),
                                (d.whDtype =
                                    null != (u = e.whDtype) ? u : e.dtype),
                                e.returnCost &&
                                    (d.catalogReturnCost = e.returnCost),
                                e.logisticsCost &&
                                    (d.logisticsCost = e.logisticsCost),
                                e.saleConditions &&
                                    (d.saleConditions = e.saleConditions),
                                e.catalogPrice
                                    ? ((d.price = d.priceWithCoupon =
                                          e.catalogPrice.basic / 100),
                                      (d.salePrice =
                                          d.priceWithSale =
                                          d.priceWithCouponAndDiscount =
                                              e.catalogPrice.total / 100),
                                      (d.sale = e.catalogPrice.sale))
                                    : e.salePrice &&
                                      e.salePrice !=
                                          d.priceWithCouponAndDiscount &&
                                      (d.priceWithCoupon =
                                          d.priceWithCouponAndDiscount =
                                          d.priceWithCouponAndSpp =
                                          d.priceWithSale =
                                          d.price =
                                              e.salePrice),
                                e.saleConditions &&
                                    wb.xnm.expandSaleConditions(d, e),
                                WbSpaModel.prototype.$useCatalogReturnCost() &&
                                    e.returnCost &&
                                    ((d.returnCost = Math.round(
                                        d.catalogReturnCost / 100
                                    )),
                                    4 == (null == b ? void 0 : b.version)))
                            ) {
                                const e =
                                    16 & d.whDtype || 32 & d.whDtype
                                        ? 1
                                        : b.return_fee;
                                d.returnCost = Math.min(
                                    d.priceWithCouponAndDiscount,
                                    d.returnCost * e
                                );
                            }
                        }
                        return (
                            r && (d.stocks = r),
                            d.stocks &&
                                (d.maxQuantity = d.stocks.sumBy((e) => e.qty)),
                            (d.canBeOrdered = d.maxQuantity > 0),
                            d
                        );
                    }
                    static fromBasketInputExtended(e) {
                        const t = it.fromCardModel(e, null, e.stocks);
                        return (
                            (t.price = e.price),
                            (t.colorName = e.colorName),
                            (t.goodsName = e.goodsName),
                            (t.sizeName = e.sizeName),
                            (t.viewFlags = e.viewFlags),
                            t
                        );
                    }
                    static enrichCatalogGood(e, t = {}) {
                        var r, s, n, o, i, a, l;
                        if (!e) return;
                        const c =
                                null == (r = t.sizes)
                                    ? void 0
                                    : r.find(
                                          (t) =>
                                              t.optionId === e.characteristicId
                                      ),
                            u =
                                null !=
                                    (n =
                                        null ==
                                        (s = null == c ? void 0 : c.stocks)
                                            ? void 0
                                            : s.some((e) => e.qty > 0)) && n,
                            d =
                                null != (o = null == c ? void 0 : c.price)
                                    ? o
                                    : t.price;
                        if (
                            ((e.brandName = t.brand),
                            (e.goodsName = t.name),
                            (e.colorName =
                                null ==
                                (a = null == (i = t.colors) ? void 0 : i[0])
                                    ? void 0
                                    : a.name),
                            (e.canBeOrdered = u),
                            (e.price = u ? d.basic / 100 : 0),
                            (e.priceWithSale = u ? d.total / 100 : 0),
                            (e.priceWithCoupon = u ? d.basic / 100 : 0),
                            (e.priceWithCouponAndDiscount = d.total / 100),
                            (e.sale = u ? d.sale : 0),
                            (e.totalSale = u ? d.sale : 0),
                            (e.salePrice = u ? d.total / 100 : 0),
                            (e.sizeName =
                                null != (l = null == c ? void 0 : c.origName)
                                    ? l
                                    : ""),
                            (e.stocks = null == c ? void 0 : c.stocks),
                            e.stocks &&
                                (e.maxQuantity = e.stocks.sumBy((e) => e.qty)),
                            (e.subjectId = t.subjectId),
                            (e.subjectParentId = t.subjectParentId),
                            (e.supplierId = t.supplierId),
                            (e.supplierName = t.supplier),
                            (e.volume = t.volume),
                            (e.reviewRating = t.reviewRating),
                            (e.feedbacks = t.feedbacks || t.commentsCount),
                            (e.promos = t.promotions),
                            (e.isUnrefusable = t.isUnrefusable),
                            (e.isPrepaid = t.isPrepaid),
                            (e.isUnreturnable = t.isUnreturnable),
                            (e.isVerificationReturn = t.isVerificationReturn),
                            (e.priceWithCouponAndSpp =
                                e.priceWithCouponAndDiscount),
                            (e.catalogReturnCost = d.return),
                            WbSpaModel.prototype.$useCatalogReturnCost())
                        ) {
                            e.returnCost = Math.round(d.return / 100);
                            const t =
                                WbSpaModel.prototype.$user.getUserGradeFromCache();
                            if (4 == (null == t ? void 0 : t.version)) {
                                const r =
                                    16 & e.whDtype || 32 & e.whDtype
                                        ? 1
                                        : t.return_fee;
                                e.returnCost = Math.min(
                                    e.priceWithCouponAndDiscount,
                                    e.returnCost * r
                                );
                            }
                        }
                        return (
                            (e.logisticsCost = d.logistics || 0),
                            (e.priceBasic = d.basic),
                            (e.priceTotal = d.total),
                            (e.whDtype = null == c ? void 0 : c.dtype),
                            (e.payloadV2 = null == c ? void 0 : c.payload),
                            (e.saleConditions =
                                null == c ? void 0 : c.saleConditions),
                            (e.viewFlags = t.viewFlags),
                            t.panelPromoId && (e.panelPromoId = t.panelPromoId),
                            e
                        );
                    }
                    static enrichStaticGood(e, t = {}) {
                        if (e)
                            return (
                                (e.goodsName =
                                    t.n ||
                                    e.goodsName ||
                                    wb.i18n.t("basket.goodsInfo.untitled")),
                                (e.colorName = t.c || e.colorName),
                                (e.specs = t.specs || e.specs),
                                e
                            );
                    }
                }
                var at = it;
                var lt = class {
                    constructor(e, t) {
                        (this.settings = {}),
                            (this.paymentTypes = [
                                e
                                    ? {
                                          userGrade: 0,
                                          bankCards: [
                                              {
                                                  id: "_newcardid",
                                                  name: wb.i18n.t(
                                                      "basket.payment.linkCard"
                                                  ),
                                                  createNew: !0,
                                                  system: "bindnew",
                                              },
                                          ],
                                          isOnline: !0,
                                          isCreditCard: !0,
                                          codeLower: "crd",
                                          name: wb.i18n.t(
                                              "basket.payment.paymentCard"
                                          ),
                                          id: "63",
                                          available: !0,
                                      }
                                    : {
                                          isOnline: !0,
                                          isCreditCard: !0,
                                          codeLower: "crd",
                                          name: wb.i18n.t(
                                              "basket.payment.paymentCard"
                                          ),
                                          id: "63",
                                          available: !0,
                                      },
                            ]),
                            (this.deliveryWay = "self"),
                            (this.basketItems = null != t ? t : []);
                    }
                    static calc(e) {
                        e.basketItems.forEach((e) => {
                            e.stocks &&
                                (e.maxQuantity = e.stocks.sumBy((e) => e.qty)),
                                e.maxQuantity > 0 && e.maxQuantity < e.quantity
                                    ? (e.partQuantity = e.maxQuantity)
                                    : (e.partQuantity = null),
                                (e._qnt = e.partQuantity || e.quantity),
                                wb.global.settings.switches
                                    .dontIncludeSoldItemsInOrder &&
                                    !e.maxQuantity &&
                                    (e.includeInOrder = !1);
                        });
                        const t = e.basketItems.filter(
                            (e) => e.maxQuantity > 0
                        );
                        return (
                            1 === t.length && (t[0].includeInOrder = !0),
                            (e.totalQuantity = e.basketItems.sumBy(
                                (e) => e._qnt
                            )),
                            e
                        );
                    }
                };
                const ct = 256;
                class ut {
                    constructor(e, t, r, s, n) {
                        this.chrt_id = +t;
                        const o = +r;
                        (this.quantity = o > 0 ? o : 1),
                            (this.cod_1s = s),
                            (this.client_ts = n || (Date.now() / 1e3) | 0),
                            (this.op_type = e || 1);
                    }
                    static fromLocalBasket(e, t) {
                        const r = new ut(
                            t,
                            e.characteristicId,
                            e.quantity,
                            e.cod1S,
                            e.timestamp
                        );
                        return (
                            r.client_ts > 1e12 &&
                                (r.client_ts = (r.client_ts / 1e3) | 0),
                            (r.target_url = e.targetUrl),
                            e.meta && (r.meta_json = JSON.stringify(e.meta)),
                            r
                        );
                    }
                    static toUpdate(e) {
                        return ut.fromLocalBasket(e, 2);
                    }
                    static toDelete(e) {
                        return new ut(3, e);
                    }
                }
                var dt = ut;
                const pt = "wb___basketStorage",
                    ht = {
                        ts: 0,
                        c_ts: 0,
                        operations: new Map(),
                    };
                var mt = class {
                    constructor(e) {
                        window.addEventListener("storage", (e) => {
                            e.key === this._basketKey && this._pull();
                        }),
                            WbSpaModel.prototype.$eventBus.addEventListener(
                                "onUserAuth",
                                this._pull.bind(this)
                            ),
                            (this.getLocalItems = e),
                            (this._data = ht);
                    }
                    checkBug() {
                        this._data.ts > 10 &&
                            WbSpaModel.prototype.$auth.um.userUid &&
                            !localStorage.hasItem(
                                `wb_basket_${WbSpaModel.prototype.$auth.um.userUid}`
                            ) &&
                            (wb.spa.logError(
                                new Error(
                                    `[WB_BASKET_STORAGE]: key wb_basket_${WbSpaModel.prototype.$auth.um.userUid} notfound`
                                ),
                                {
                                    ts: this.ts,
                                    opLen: this._data.operations.size,
                                    hasKey: localStorage.hasItem(
                                        this._basketKey
                                    ),
                                }
                            ),
                            (this._data.ts = 10));
                    }
                    get _basketKey() {
                        return `${pt}_${WbSpaModel.prototype.$auth.um.userUid}`;
                    }
                    get clientTs() {
                        return this._data.c_ts;
                    }
                    get ts() {
                        return this._data.ts;
                    }
                    hasOperations() {
                        return !!this._data.operations.size;
                    }
                    getOperations() {
                        return (
                            this.ts ||
                                (this._data.operations.clear(),
                                this.getLocalItems().forEach((e) => {
                                    this._data.operations.set(e.chrt_id, e);
                                })),
                            this._data.operations.toArray()
                        );
                    }
                    setTs(e) {
                        e && ((this._data.ts = e), this._push());
                    }
                    setClientTs(e) {
                        (this._data.c_ts = e), this._push();
                    }
                    _mergeOp(e, t) {
                        return (
                            (null == e ? void 0 : e.chrt_id) === t.chrt_id &&
                                (1 === e.op_type &&
                                    2 === t.op_type &&
                                    (t.op_type = 1),
                                2 === e.op_type &&
                                    2 === t.op_type &&
                                    ((t.meta = t.meta || e.meta),
                                    (t.quantity = t.quantity || e.quantity))),
                            t
                        );
                    }
                    normalize(e, t) {
                        e.forEach((e) => {
                            const t = this._data.operations.get(e.chrt_id);
                            t.quantity === e.quantity &&
                                t.client_ts === e.client_ts &&
                                t.op_type === e.op_type &&
                                this._data.operations.delete(e.chrt_id);
                        });
                        let r = [];
                        return (
                            (null == t ? void 0 : t.length) > 0 &&
                                (t.forEach((e) => {
                                    const t = this._data.operations.get(
                                        e.chrt_id
                                    );
                                    if (t) {
                                        if (!e.is_deleted) return;
                                        if (1 === t.op_type) return;
                                        this._data.operations.delete(e.chrt_id);
                                    }
                                    r.push(e);
                                }),
                                this._push()),
                            r
                        );
                    }
                    update(e) {
                        if ((null == e ? void 0 : e.length) > 0) {
                            for (let t = 0; t < e.length; t++) {
                                const r = e[t].chrt_id;
                                this._data.operations.set(
                                    r,
                                    this._mergeOp(
                                        this._data.operations.get(r),
                                        e[t]
                                    )
                                );
                            }
                            this._push();
                        }
                    }
                    clear() {
                        localStorage.removeItem(pt);
                    }
                    _pull() {
                        const e =
                            localStorage.getObject(this._basketKey) ||
                            localStorage.getObject(pt);
                        e &&
                            (e.operations = Array.isArray(e.operations)
                                ? new Map(
                                      e.operations.map((e) => [e.chrt_id, e])
                                  )
                                : ht.operations),
                            (this._data = null != e ? e : ht);
                    }
                    _push() {
                        try {
                            const e = this._data.operations.toArray();
                            localStorage.putObject(this._basketKey, {
                                ts: this._data.ts,
                                c_ts: this._data.c_ts,
                                operations: e,
                            }),
                                localStorage.hasItem(pt) &&
                                    localStorage.putObject(pt, {
                                        ts: this._data.ts,
                                        c_ts: this._data.c_ts,
                                        operations: e,
                                    });
                        } catch (e) {}
                    }
                };
                const gt = b.F3;
                var bt = class {
                    constructor(e) {
                        (this.localBasket = e),
                            (this.storage = new mt(() =>
                                this.localBasket
                                    .getItems()
                                    .map((e) => dt.fromLocalBasket(e))
                            )),
                            (this.debounceSync = this.$helper.debounce(
                                this._sync.bind(this),
                                3e3
                            )),
                            (this.debounceShortSync = this.$helper.debounce(
                                this._sync.bind(this),
                                1e3
                            )),
                            setTimeout(() => this._backupBasketAsync(), 11e3);
                    }
                    unAuth() {
                        this.storage.clear();
                    }
                    onBeforeSignOut() {
                        this.storage.hasOperations() && this._sync(),
                            Object.keys(localStorage)
                                .filter((e) =>
                                    e.startsWith("user_subscription_offers")
                                )
                                .forEach((e) => localStorage.removeItem(e));
                    }
                    addItem(e) {
                        e &&
                            (this.storage.update([dt.fromLocalBasket(e)]),
                            this.debounceShortSync());
                    }
                    addManyItems(e) {
                        e.length &&
                            (this.storage.update(
                                e.map((e) => dt.fromLocalBasket(e))
                            ),
                            this.debounceShortSync());
                    }
                    clearItems(e) {
                        e.length &&
                            (this.storage.update(e.map((e) => dt.toDelete(e))),
                            this.debounceShortSync());
                    }
                    updateItem(e) {
                        if (!e) return;
                        const t = this.localBasket
                            .getItems()
                            .find((t) => t.characteristicId === e);
                        t && this.storage.update([dt.toUpdate(t)]),
                            this.debounceSync();
                    }
                    refresh(e, t) {
                        var r, s, n, o;
                        if ("remove" === t) {
                            const t =
                                null !=
                                (o =
                                    null !=
                                    (n =
                                        null == (r = e.chrtIds) ? void 0 : r[0])
                                        ? n
                                        : null == (s = e.items)
                                        ? void 0
                                        : s[0].chrtId)
                                    ? o
                                    : e.chrtId;
                            t > 0 && this.storage.update([dt.toDelete(t)]);
                        } else "recalc" === t && this.updateItem(e.chrtId);
                        this.debounceSync();
                    }
                    async sync(e, t) {
                        return await this._sync(e, t);
                    }
                    async _sync(e, t) {
                        return await navigator.locks.request(
                            "lock-basket-sync",
                            async (r) => {
                                this.storage.checkBug();
                                const s = this.storage.getOperations();
                                if (
                                    t &&
                                    !s.length &&
                                    this.storage.clientTs >
                                        ((Date.now() / 1e3) | 0)
                                )
                                    return !1;
                                const n =
                                    this.$services.sessionService.getSession();
                                try {
                                    const t = await this._doSync({
                                        sessionId: n,
                                        operations: s,
                                        signal: e,
                                    });
                                    if (
                                        (this._sendMetrics(t.state),
                                        0 === t.state && t.change_ts > 0)
                                    )
                                        return this._updateProducts(t, s);
                                    if (1 === t.state) {
                                        const e = this.localBasket
                                                .getItems()
                                                .map((e) =>
                                                    dt.fromLocalBasket(e)
                                                ),
                                            t = await this._doSync({
                                                sessionId: n,
                                                operations: e,
                                                rememberMe: !0,
                                            });
                                        if (0 === t.state && t.change_ts > 0)
                                            return this._updateProducts(t, s);
                                    } else
                                        t &&
                                            wb.spa.logError(
                                                new Error(
                                                    `[WB_BASKET_SYNC]: sync state:${t.state}`
                                                ),
                                                {
                                                    result: t,
                                                    ts: this.storage.ts,
                                                    deviceId: n,
                                                    opLen: s.length,
                                                    hasJwt: this.$auth.isAuth,
                                                }
                                            );
                                } catch (e) {
                                    const t =
                                        !e.isCustomError &&
                                        e instanceof TypeError &&
                                        ("Failed to fetch" === e.message ||
                                            "NetworkError when attempting to fetch resource." ===
                                                e.message ||
                                            "Cancelled" === e.message);
                                    this._sendMetrics(t ? "network" : "error"),
                                        wb.spa.logError(
                                            new Error(
                                                `[WB_BASKET_SYNC]: ${e.message}`
                                            ),
                                            {
                                                ts: this.storage.ts,
                                                deviceId: n,
                                                opLen: s.length,
                                                hasJwt: this.$auth.isAuth,
                                            }
                                        );
                                }
                                return !1;
                            }
                        );
                    }
                    _updateProducts(e, t) {
                        const r = this.storage.normalize(t, e.result_set);
                        return (
                            this.localBasket.updateWbProducts(r),
                            this.storage.setTs(e.change_ts),
                            this.storage.setClientTs(
                                235 + ((Date.now() / 1e3) | 0)
                            ),
                            e.change_ts > 0
                        );
                    }
                    _doSync({
                        sessionId: e,
                        operations: t,
                        rememberMe: r = !1,
                        signal: s = null,
                    }) {
                        return this.$wbxHttpClient
                            .fetch(
                                `${gt}/sync?ts=${
                                    this.storage.ts
                                }&device_id=${e}${
                                    r ? "&remember_me=true" : ""
                                }`,
                                {
                                    method: "POST",
                                    body: JSON.stringify(t),
                                    headers: {
                                        "Content-Type": "application/json",
                                        "Wb-AppType": "site",
                                    },
                                    signal: s,
                                }
                            )
                            .then(async (e) => (e.ok ? e.json() : {}))
                            .then(
                                (e) => (
                                    e.result_set &&
                                        (e.result_set = e.result_set[0] || []),
                                    e
                                )
                            );
                    }
                    _sendMetrics(e) {
                        if (!window._debug)
                            try {
                                this.$httpClient.fetch(
                                    `/webapi/logging/wbbasket/metrics?status=${e}`,
                                    {
                                        method: "POST",
                                    }
                                );
                            } catch (e) {}
                    }
                    _backupBasketAsync() {
                        if (this.storage.ts <= 0) return;
                        const e = this.localBasket.getItems().map((e) => {
                                let t = dt.fromLocalBasket(e);
                                return delete t.op_type, t;
                            }),
                            t = [
                                {
                                    path: "/cart/wb_backup",
                                    file: this.$helper.base64.encode(
                                        JSON.stringify(e)
                                    ),
                                },
                            ];
                        this.$services.apiUserStorage.setData(t);
                    }
                };
                var yt = class {
                    constructor(e) {
                        var t, r, s, n;
                        this.characteristicId = +e.characteristicId;
                        const o = +e.quantity;
                        (this.quantity = o > 0 ? o : 1),
                            (this.cod1S = e.cod1S),
                            (this.customsFeeAmount = e.customCharges),
                            (this.targetUrl =
                                null == (t = e.targetUrl)
                                    ? void 0
                                    : t.replace(/\x00/g, "")),
                            (this.includeInOrder = e.includeInOrder),
                            (this.dstOffice = e.dstOffice),
                            (this.storeName = e.storeName),
                            (this.isLargeItem = e.isLargeItem),
                            (this.couponSale = e.couponSale),
                            (this.goodsName = e.goodsName),
                            (this.colorName = e.colorName),
                            (this.sizeName = e.sizeName),
                            (this.brandName = e.brandName),
                            (this.sale = e.sale),
                            (this.salePrice = e.salePrice),
                            (this.totalSale = e.totalSale),
                            (this.personalDiscount = e.personalDiscount),
                            (this.returnCost = e.returnCost),
                            (this.premiumSaleAmount = e.premiumSaleAmount
                                ? e.premiumSaleAmount
                                : 0),
                            (this.priceAdjustmentAmount =
                                e.priceAdjustmentAmount
                                    ? e.priceAdjustmentAmount
                                    : 0),
                            (this.price = e.price),
                            (this.priceWithSale = e.priceWithSale),
                            (this.priceWithCoupon = e.priceWithCoupon),
                            (this.priceWithCouponAndSpp =
                                e.priceWithCouponAndSpp +
                                this.premiumSaleAmount +
                                this.priceAdjustmentAmount),
                            (this.priceWithCouponAndDiscount =
                                e.priceWithCouponAndDiscount +
                                this.premiumSaleAmount +
                                this.priceAdjustmentAmount),
                            (this.paymentSaleAmount = e.paymentSaleAmount),
                            (this.subjectId = e.subjectId),
                            (this.subjectRoot = e.subjectParentId),
                            (this.reviewRating = e.reviewRating),
                            (this.commentsCount =
                                e.commentsCount || e.feedbacks),
                            (this.payloadV2 = e.payloadV2),
                            (this.logisticsCost = e.logisticsCost),
                            (this.whDtype = e.whDtype),
                            (this.supplierId = e.supplierId),
                            (this.supplierName = e.supplierName),
                            (this.saleConditions = e.saleConditions),
                            (this.catalogReturnCost = e.catalogReturnCost),
                            (this.maxQuantity = e.maxQuantity),
                            (this.volume = e.volume),
                            (this.storeIds =
                                (null ==
                                (s =
                                    null == (r = e.stocks)
                                        ? void 0
                                        : r.filter((e) => e.qty > 0))
                                    ? void 0
                                    : s.map((e) => e.wh)) || []),
                            (this.stocks =
                                null == (n = e.stocks)
                                    ? void 0
                                    : n.reduce(
                                          (e, t) => (
                                              (e[t.wh] = {
                                                  storeId: t.wh,
                                                  quantity: t.qty || 0,
                                                  time1: t.time1,
                                                  time2: t.time2,
                                                  priority: t.priority,
                                              }),
                                              e
                                          ),
                                          {}
                                      )),
                            (this.timestamp = e.timestamp),
                            (this.shadeModel = e.shadeModel);
                    }
                };
                const vt = class {
                        constructor(e, t, r) {
                            (this._isAuth = e),
                                (this.sessionService = t),
                                (this.$eventBus = r),
                                this.$eventBus.addEventListener(
                                    "onUserAuth",
                                    this.clearMemory.bind(this)
                                );
                        }
                        get isAuth() {
                            return this._isAuth();
                        }
                        clearMemory() {
                            this.innerStorage = new lt(this.isAuth, []);
                        }
                        migrate() {
                            if (localStorage.hasItem("_basket")) {
                                const e = this._getGuestBasket();
                                return (
                                    e.basketItems && e.basketItems.reverse(),
                                    this.addManyItems(e.basketItems, !0),
                                    this._detGuestBasket(),
                                    e.basketItems
                                );
                            }
                            return [];
                        }
                        addManyItems(e, t) {
                            if (!(null == e ? void 0 : e.length))
                                return {
                                    isSuccess: !1,
                                    error: "[basket] Неизвестная ошибка",
                                };
                            const r = this._syncFrom();
                            if (!t && r.basketItems.length + e.length > ct)
                                return {
                                    isSuccess: !1,
                                    error: wb.i18n.t(
                                        "basket.errors.limitInBasketWithCount",
                                        {
                                            count: ct,
                                        }
                                    ),
                                };
                            let s = !0;
                            const n = r.basketItems
                                .filter((e) => e.maxQuantity > 0)
                                .every((e) => e.includeInOrder);
                            for (let t = 0; t < e.length; t++) {
                                const o = r.basketItems.findIndex(
                                    (r) =>
                                        r.characteristicId ===
                                        e[t].characteristicId
                                );
                                -1 === o
                                    ? ((s = !1),
                                      e[t].timestamp <= this.lastTs &&
                                          (e[t].timestamp = this.lastTs + 1),
                                      (e[t].includeInOrder = n),
                                      r.basketItems.unshift(e[t]))
                                    : r.basketItems[o].timestamp > 0 &&
                                      ((e[t].timestamp =
                                          r.basketItems[o].timestamp),
                                      (e[t].quantity =
                                          r.basketItems[o].quantity));
                            }
                            this._syncTo();
                            return {
                                isExist: s,
                                isSuccess: !0,
                                xnmDictTask: this._enrichProducts(
                                    r.basketItems.map((e) => e.cod1S)
                                ),
                            };
                        }
                        clearItems(e) {
                            if ((null == e ? void 0 : e.length) > 0) {
                                const t = this._syncFrom();
                                (t.basketItems = t.basketItems.filter(function (
                                    t
                                ) {
                                    return -1 === e.indexOf(t.characteristicId);
                                })),
                                    this._syncTo();
                            }
                        }
                        get lastTs() {
                            var e, t;
                            return null ==
                                (t =
                                    null == (e = this.innerStorage.basketItems)
                                        ? void 0
                                        : e[0])
                                ? void 0
                                : t.timestamp;
                        }
                        add(e) {
                            const t = this._syncFrom();
                            if (t.basketItems.length + 1 > ct)
                                return {
                                    isSuccess: !1,
                                    error: wb.i18n.t(
                                        "basket.errors.limitInBasketWithCount",
                                        {
                                            count: ct,
                                        }
                                    ),
                                };
                            const r = t.basketItems.find(
                                (t) => t.characteristicId === e.characteristicId
                            );
                            r
                                ? r.timestamp > 0 &&
                                  ((e.timestamp = r.timestamp),
                                  (e.quantity = r.quantity))
                                : (e.timestamp <= this.lastTs &&
                                      (e.timestamp = this.lastTs + 1),
                                  (e.includeInOrder = t.basketItems
                                      .filter((e) => e.maxQuantity > 0)
                                      .every((e) => e.includeInOrder)),
                                  t.basketItems.unshift(e)),
                                this._syncTo();
                            return {
                                isExist: !!r,
                                isSuccess: !0,
                                xnmDictTask: this._enrichProducts(
                                    t.basketItems.map((e) => e.cod1S)
                                ),
                            };
                        }
                        updateMeta(e, t) {
                            if (!e || !t) return !1;
                            const r = this._syncFrom().basketItems.find(
                                (t) => t.characteristicId === e
                            );
                            return (
                                !!r &&
                                ((r.meta =
                                    WbSpaModel.prototype.$helper.deepMerge(
                                        r.meta || {},
                                        t
                                    )),
                                this._syncTo(),
                                !0)
                            );
                        }
                        refresh(e, t) {
                            var r, s, n, o, i, a, l;
                            const c = this._syncFrom();
                            if ("remove" === t) {
                                const t =
                                    (null == (r = e.chrtIds)
                                        ? void 0
                                        : r.length) > 0
                                        ? e.chrtIds[0]
                                        : e.chrtId;
                                c.basketItems = c.basketItems.filter(function (
                                    e
                                ) {
                                    return e.characteristicId !== t;
                                });
                            } else if ("recalc" === t && e.quantity > 0) {
                                const t = c.basketItems.find(
                                    (t) => t.characteristicId === e.chrtId
                                );
                                t && (t.quantity = e.quantity);
                            }
                            if (
                                (e.includeInOrderMap &&
                                    c.basketItems.forEach((t) => {
                                        e.includeInOrderMap.has(t.id) &&
                                            (t.includeInOrder =
                                                e.includeInOrderMap.get(t.id));
                                    }),
                                "booking" !== e.deliveryWay)
                            ) {
                                c.deliveryWay = e.deliveryWay;
                                let t =
                                    WbSpaModel.prototype.$services.userAddressService.get(
                                        e.addressId,
                                        e.deliveryWay
                                    );
                                t &&
                                    (null == (s = c.deliveryPoint)
                                        ? void 0
                                        : s.addressId) !== t.addressId &&
                                    ((c.deliveryPoint = t),
                                    (c.deliveryPriceModel = null));
                            }
                            "war" !== e.paymentTypeId &&
                                (e.paymentTypeId &&
                                    e.paymentTypeId !==
                                        (null == (n = c.paymentType)
                                            ? void 0
                                            : n.id) &&
                                    (c.paymentType = c.paymentTypes.find(
                                        (t) =>
                                            t.id === e.paymentTypeId &&
                                            t.available
                                    )),
                                (null == (o = c.paymentType)
                                    ? void 0
                                    : o.isCreditCard) &&
                                    e.bankCardId &&
                                    e.bankCardId !==
                                        (null == (i = c.paymentType)
                                            ? void 0
                                            : i.bankCardId) &&
                                    ((c.paymentType.bankCardId = e.bankCardId),
                                    (c.paymentType.selectedBankCard =
                                        null ==
                                        (l =
                                            null ==
                                            (a = c.paymentTypes.find(
                                                (e) => e.isCreditCard
                                            ))
                                                ? void 0
                                                : a.bankCards)
                                            ? void 0
                                            : l.find(
                                                  (t) => t.id === e.bankCardId
                                              )))),
                                this._syncTo();
                        }
                        deleteCards(e) {
                            var t;
                            if (!e) return;
                            const r =
                                null == (t = this._syncFrom().paymentTypes)
                                    ? void 0
                                    : t.find((e) => e.isCreditCard);
                            r &&
                                (r.bankCards = (r.bankCards || []).filter(
                                    (t) => -1 === e.indexOf(t.id)
                                )),
                                this._syncTo();
                        }
                        setCardDefault(e) {
                            this.getBankCards().forEach((t) => {
                                t.default = t.id === e;
                            }),
                                this._syncTo();
                        }
                        setAddress(e, t) {
                            var r;
                            const s = this._syncFrom();
                            let n =
                                WbSpaModel.prototype.$services.userAddressService.get(
                                    e,
                                    t
                                );
                            n &&
                                (null == (r = s.deliveryPoint)
                                    ? void 0
                                    : r.addressId) !== n.addressId &&
                                ((s.deliveryWay = t),
                                (s.deliveryPoint = n),
                                (s.deliveryPriceModel = null),
                                this._syncTo());
                        }
                        getBankCards() {
                            var e, t;
                            return (
                                (null ==
                                (t =
                                    null == (e = this._syncFrom().paymentTypes)
                                        ? void 0
                                        : e.find((e) => e.isCreditCard))
                                    ? void 0
                                    : t.bankCards) || []
                            );
                        }
                        enrichItemsLocalInfo(e) {
                            if (!(null == e ? void 0 : e.length)) return;
                            const t = this._syncFrom().basketItems.toMap(
                                (e) => e.id,
                                (e) => e
                            );
                            e.forEach((e) => {
                                const r = t.get(e.id);
                                (e.meta = null == r ? void 0 : r.meta),
                                    (e.specs = null == r ? void 0 : r.specs),
                                    (null == r ? void 0 : r.goodsName) &&
                                        (e.goodsName =
                                            null == r ? void 0 : r.goodsName);
                            });
                        }
                        get count() {
                            const e = this._syncFrom();
                            return (
                                this.$eventBus.dispatchEvent(
                                    new CustomEvent("LocalBasketUpdateCount", {
                                        detail: {
                                            count: e.totalQuantity,
                                        },
                                    })
                                ),
                                e.totalQuantity
                            );
                        }
                        save(e) {
                            const t = this._syncFrom(),
                                r = JSON.parse(
                                    JSON.stringify(e, (e, t) =>
                                        "basketItems" === e ? void 0 : t
                                    )
                                );
                            (r.basketItems = e.basketItems
                                .reduce(
                                    (e, t) => (
                                        e.get(t.id) &&
                                            e.set(
                                                t.id,
                                                wb.helpers.deepClone(t)
                                            ),
                                        e
                                    ),
                                    t.basketItems.toMap(
                                        (e) => e.id,
                                        (e) => e
                                    )
                                )
                                .toArray()),
                                this._syncTo(r);
                        }
                        updateIncludeInOrder(e) {
                            if (!e) return;
                            this._syncFrom().basketItems.forEach((t) => {
                                e.has(t.id) && (t.includeInOrder = e.get(t.id));
                            }),
                                this._syncTo();
                        }
                        _filterItemsByParams(
                            e,
                            {
                                sellerId: t = null,
                                includeInOrderStr: r = null,
                            } = {}
                        ) {
                            if (t || r) {
                                const s = e.basketItems.filter((e) => {
                                    var s;
                                    return (
                                        (null == (s = e.stocks)
                                            ? void 0
                                            : s.length) > 0 &&
                                        (r
                                            ? e.characteristicId == r
                                            : e.supplierId == t)
                                    );
                                });
                                return (
                                    1 === s.length &&
                                        (s[0].includeInOrder = !0),
                                    {
                                        filtered: !0,
                                        filteredItems: s,
                                    }
                                );
                            }
                            return {
                                filtered: !1,
                                filteredItems: e.basketItems,
                            };
                        }
                        get(e) {
                            const t = this._syncFrom(),
                                { filtered: r, filteredItems: s } =
                                    this._filterItemsByParams(t, e);
                            if (r) {
                                const e = new lt(this.isAuth, s);
                                return (
                                    (e.isBuyItNowMode = !0),
                                    (e.settings = t.settings),
                                    (e.deliveryWay = t.deliveryWay),
                                    (e.deliveryPoint = t.deliveryPoint),
                                    (e.paymentTypes = t.paymentTypes),
                                    (e.paymentType = t.paymentType),
                                    e.paymentType &&
                                        ((e.paymentType.bankCardId =
                                            t.paymentType.bankCardId),
                                        (e.paymentType.selectedBankCard =
                                            t.paymentType.selectedBankCard)),
                                    lt.calc(e),
                                    e
                                );
                            }
                            return t;
                        }
                        getItems(e) {
                            const t = this._syncFrom();
                            return this._filterItemsByParams(t, e)
                                .filteredItems;
                        }
                        getDeliveryPoint() {
                            return this._syncFrom().deliveryPoint;
                        }
                        enrichProductsIfNeedAsync({ force: e } = {}) {
                            const t = this._syncFrom();
                            return (t.basketItems.length > 0 &&
                                t.basketItems.some(
                                    (e) =>
                                        !e.hasOwnProperty(
                                            "priceWithCouponAndDiscount"
                                        ) && !e.hasOwnProperty("price")
                                )) ||
                                e
                                ? this._enrichProducts(
                                      t.basketItems.map((e) => e.cod1S)
                                  )
                                : Promise.resolve([]);
                        }
                        get basketKey() {
                            return this.isAuth
                                ? `wb_basket_${this.sessionService.getUserUid()}`
                                : "_basket";
                        }
                        _getGuestBasket() {
                            const e = localStorage.getObject("_basket");
                            return e || new lt(!1);
                        }
                        _detGuestBasket() {
                            localStorage.removeItem("_basket");
                        }
                        _syncFrom() {
                            var e, t, r;
                            try {
                                const r = this.basketKey,
                                    s = localStorage.getObject(r);
                                return (
                                    s
                                        ? ((this.innerStorage = s),
                                          this.innerStorage
                                              ? this.innerStorage.basketItems ||
                                                (this.innerStorage.basketItems =
                                                    [])
                                              : (this.innerStorage = new lt(
                                                    this.isAuth,
                                                    []
                                                )))
                                        : (null ==
                                          (t =
                                              null == (e = this.innerStorage)
                                                  ? void 0
                                                  : e.basketItems)
                                              ? void 0
                                              : t.length) ||
                                          (this.innerStorage = new lt(
                                              this.isAuth,
                                              []
                                          )),
                                    this.isAuth &&
                                        (localStorage.clearStartsWith(
                                            "wb_basket_",
                                            r
                                        ),
                                        localStorage.clearStartsWith(
                                            "wb___basketStorage_",
                                            `wb___basketStorage_${this.sessionService.getUserUid()}`
                                        )),
                                    1 ===
                                        this.innerStorage.basketItems.length &&
                                        (this.innerStorage.basketItems[0].includeInOrder =
                                            !0),
                                    this.innerStorage
                                );
                            } catch (e) {
                                return (
                                    console.error(e),
                                    wb.spa.logError(e, "cartService syncfrom"),
                                    null != (r = this.innerStorage)
                                        ? r
                                        : new lt(this.isAuth)
                                );
                            }
                        }
                        _syncTo(e) {
                            var t;
                            e && (this.innerStorage = e),
                                lt.calc(this.innerStorage);
                            try {
                                localStorage.putObject(
                                    this.basketKey,
                                    this.innerStorage
                                );
                            } catch (e) {}
                            this.$eventBus.dispatchEvent(
                                new CustomEvent("LocalBasketUpdateCount", {
                                    detail: {
                                        count:
                                            null == (t = this.innerStorage)
                                                ? void 0
                                                : t.totalQuantity,
                                    },
                                })
                            );
                        }
                        async _enrichProducts(e) {
                            if (0 === e.length) return {};
                            const [t, r] = await Promise.all([
                                    wb.xnm.getXnmProducts(e, !1),
                                    wb.xnm.getProductColorsByNmIdsAsync(e),
                                ]),
                                s = this._syncFrom();
                            let n = !1;
                            return (
                                s.basketItems.forEach((e) => {
                                    t[e.cod1S] &&
                                        (at.enrichCatalogGood(e, t[e.cod1S]),
                                        (n = !0)),
                                        r[e.cod1S] &&
                                            (at.enrichStaticGood(e, r[e.cod1S]),
                                            (n = !0));
                                }),
                                (s.currency =
                                    WbSpaModel.prototype.$user.getCurrency()),
                                n && this._syncTo(s),
                                t
                            );
                        }
                        updateWbProducts(e) {
                            const t = this._syncFrom();
                            localStorage.hasItem(this.basketKey) ||
                                this._syncTo(),
                                (null == e ? void 0 : e.length) &&
                                    ((t.basketItems = [
                                        ...t.basketItems,
                                        ...e.map((e) =>
                                            at.fromWbBasketProduct(e)
                                        ),
                                    ]
                                        .reduce((e, t) => {
                                            const r = e.findIndex(
                                                (e) => e.id === t.id
                                            );
                                            return (
                                                -1 !== r || t.isDeleted
                                                    ? -1 !== r &&
                                                      ((e[r].timestamp =
                                                          Math.max(
                                                              e[r].timestamp,
                                                              t.timestamp
                                                          )),
                                                      (e[r].quantity =
                                                          t.quantity),
                                                      (e[r].targetUrl =
                                                          t.targetUrl),
                                                      (e[r].isDeleted =
                                                          t.isDeleted),
                                                      (e[r].meta = t.meta))
                                                    : (t._fromSync &&
                                                          ((t.includeInOrder = e
                                                              .filter(
                                                                  (e) =>
                                                                      e.maxQuantity >
                                                                      0
                                                              )
                                                              .every(
                                                                  (e) =>
                                                                      e.includeInOrder
                                                              )),
                                                          delete t._fromSync),
                                                      e.push(
                                                          JSON.parse(
                                                              JSON.stringify(t)
                                                          )
                                                      )),
                                                e
                                            );
                                        }, [])
                                        .filter((e) => !e.isDeleted)
                                        .sort(
                                            (e, t) => t.timestamp - e.timestamp
                                        )),
                                    this._syncTo());
                        }
                    },
                    ft = at;
                var wt,
                    St = class {
                        get BasketItemSharedModel() {
                            return yt;
                        }
                        init() {
                            Object.setPrototypeOf(
                                bt.prototype,
                                WbSpaModel.prototype
                            ),
                                (this.getBankCards = this.$helper.lockPromise(
                                    this.getBankCards
                                )),
                                (this.localBasket = new vt(
                                    () => this.$auth.isAuth,
                                    this.$services.sessionService,
                                    this.$eventBus
                                )),
                                (this.wbBasket = new bt(this.localBasket)),
                                (this.srv = this.wbBasket),
                                (this.isGeLocale =
                                    "ge" === wb.settings.currentLocale),
                                this.$eventBus.addEventListener(
                                    "onUserAuth",
                                    this.sync.bind(this)
                                ),
                                this.$eventBus.addEventListener(
                                    "onUserUnAuth",
                                    this.wbBasket.unAuth.bind(this.wbBasket)
                                ),
                                this.$eventBus.addEventListener(
                                    "onBeforeSignOut",
                                    this.wbBasket.onBeforeSignOut.bind(
                                        this.wbBasket
                                    )
                                ),
                                $.observe(
                                    this.$router,
                                    "activeContainer",
                                    "showPreview",
                                    (e, t) => {
                                        document.body.classList.toggle(
                                            "body-gray",
                                            2 === e.target.activeContainer &&
                                                !e.target.showPreview
                                        );
                                    }
                                ),
                                "hidden" in document &&
                                    "visibilityState" in document &&
                                    document.addEventListener(
                                        "visibilitychange",
                                        (e) => {
                                            "visible" ===
                                                document.visibilityState &&
                                                this.sync("interval");
                                        }
                                    );
                        }
                        get publicBasketApiUrl() {
                            return "ru" === (e = wb.settings.currentDomain) ||
                                "kz" === e
                                ? b.E$
                                : b.sk + e;
                            var e;
                        }
                        deliveryWays(e = "") {
                            var t, r;
                            let s = [
                                {
                                    id: 2,
                                    code: "self",
                                    name: wb.i18n.t(
                                        "basket.delivery.pickupPoint"
                                    ),
                                    calendars: [],
                                },
                                {
                                    id: 1,
                                    code: "courier",
                                    name: wb.i18n.t(
                                        "basket.goodsInfo.deliveryByCourier"
                                    ),
                                    calendars: [],
                                },
                            ];
                            return (
                                (!1 ===
                                    (null ==
                                    (r =
                                        null == (t = wb.global.settings)
                                            ? void 0
                                            : t.switches)
                                        ? void 0
                                        : r.enableCourierDelivery) ||
                                    (this.isGeLocale && "refund" !== e)) &&
                                    (s = s.filter((e) => "courier" !== e.code)),
                                s
                            );
                        }
                        async sync(e) {
                            var t;
                            if (this.$auth.isAuth) {
                                let r = new AbortController();
                                return (
                                    (r._dt = new Date().getTime() + 6e4),
                                    (null == e ? void 0 : e.timeout)
                                        ? (this.backgroundController &&
                                          this.backgroundController._dt <
                                              new Date().getTime()
                                              ? (this.backgroundController.abort(),
                                                (this.backgroundController =
                                                    null))
                                              : this.backgroundController &&
                                                (r = this.backgroundController),
                                          setTimeout(
                                              () => r.abort(),
                                              e.timeout
                                          ))
                                        : (this.backgroundController = r),
                                    (this._syncProcess =
                                        null != (t = this._syncProcess)
                                            ? t
                                            : this.srv.sync(
                                                  r.signal,
                                                  "interval" === e
                                              )),
                                    this._syncProcess
                                        .catch((e) => {})
                                        .finally(() => {
                                            this.$auth.isAuth &&
                                                (this._migrate(),
                                                this.localBasket.enrichProductsIfNeedAsync()),
                                                (this._syncProcess = null),
                                                (this.backgroundController =
                                                    null);
                                        })
                                );
                            }
                        }
                        updateMeta(e, t) {
                            t &&
                                this.localBasket.updateMeta(e, t) &&
                                this.srv.updateItem(e);
                        }
                        addItem({ model: e, product: t, stores: r }) {
                            const s = ft.fromCardModel(e, t, r),
                                n = this.localBasket.add(s);
                            return (
                                this.$auth.isAuth &&
                                    n.isSuccess &&
                                    !n.isExist &&
                                    this.srv.addItem(s),
                                n
                            );
                        }
                        addManyItems(e, t) {
                            if (!(null == e ? void 0 : e.length)) return;
                            const r = e.map((e) =>
                                    ft.prototype.isPrototypeOf(e)
                                        ? e
                                        : ft.fromBasketInputExtended(e)
                                ),
                                s = this.localBasket.addManyItems(r, t);
                            return (
                                this.$auth.isAuth &&
                                    s.isSuccess &&
                                    !s.isExist &&
                                    this.srv.addManyItems(r),
                                s
                            );
                        }
                        refresh({ data: e, type: t }) {
                            this.localBasket.refresh(e, t),
                                this.$auth.isAuth &&
                                    t &&
                                    this.srv.refresh(e, t);
                        }
                        clearItems(e) {
                            (null == e ? void 0 : e.length) &&
                                (this.localBasket.clearItems(e),
                                this.$auth.isAuth && this.srv.clearItems(e));
                        }
                        getItems(e) {
                            return this.localBasket
                                .getItems(e)
                                .map((e) => new yt(e));
                        }
                        async getBankCards(e = 6e3, t = "", r = !1) {
                            var s, n, o;
                            const i =
                                null ==
                                (s = (
                                    await this.$services.userData.getUserDataAsync()
                                ).userInfo.phone)
                                    ? void 0
                                    : s.toString().startsWith("79");
                            try {
                                t || (t = this.$user.getCurrency());
                                const s = await this.$user.getUserGrade(t),
                                    a = await this.$httpClient.fetchJSON(
                                        `${this.publicBasketApiUrl}/webapi/lk/bankcards`,
                                        {
                                            method: "POST",
                                            credentials: "include",
                                            body: this.$helper.objectSerializer(
                                                {
                                                    currency: t,
                                                    userGradeSigned: s,
                                                    bypassCache: r,
                                                },
                                                new URLSearchParams(),
                                                !0,
                                                !0
                                            ),
                                        },
                                        {
                                            timeout: e,
                                        }
                                    );
                                null ==
                                    (n = null == a ? void 0 : a.maskedCards) ||
                                    n.forEach((e) => {
                                        e.isSbp ||
                                            ((e.icon = e.system),
                                            "mir" !== e.system ||
                                                (i && !this.isGeLocale) ||
                                                ((e.icon = "none"),
                                                (e.name = e.nameNotPaySystem)));
                                    });
                                const l =
                                    null !=
                                    (o = null == a ? void 0 : a.maskedCards)
                                        ? o
                                        : [];
                                return (
                                    this.$eventBus.dispatchEvent(
                                        new CustomEvent("BankCardsUpdated", {
                                            detail: l,
                                        })
                                    ),
                                    l
                                );
                            } catch (e) {}
                        }
                        async getPaymentsForDeliveries(e) {
                            var t;
                            const r = wb.settings.currentLocale,
                                { payments: s } =
                                    (await this.$httpClient.fetchJSON(
                                        `${this.$services.cartService.publicBasketApiUrl}/payment/list/fordeliveriesv2`,
                                        {
                                            method: "POST",
                                            credentials: "include",
                                            body: new URLSearchParams({
                                                currency: e,
                                                currentLocale: r,
                                            }),
                                        }
                                    )) || {};
                            return (
                                null ==
                                    (t =
                                        null == s
                                            ? void 0
                                            : s.find((e) => e.isCreditCard)) ||
                                    t.bankCards.forEach((e) => {
                                        e.isSbp || (e.icon = e.system),
                                            this.isGeLocale &&
                                                "mir" === e.system &&
                                                ((e.icon = "none"),
                                                e.nameNotPaySystem &&
                                                    (e.name =
                                                        e.nameNotPaySystem));
                                    }),
                                this.isGeLocale &&
                                    (null == s ||
                                        s.forEach((e) => {
                                            ("wlt" !== e.codeLower &&
                                                "ebl" !== e.codeLower) ||
                                                (e.hideForGe = !0);
                                        })),
                                s
                            );
                        }
                        async getSopsBooking(e) {
                            return await this.$httpClient.fetchStaticDataV2(
                                `shopdata/${e}/shops.json`
                            );
                        }
                        get localCount() {
                            return this.localBasket.count;
                        }
                        get currentDeliveryType() {
                            return this.localBasket.getDeliveryPoint();
                        }
                        save(e) {
                            this.localBasket.save(e);
                        }
                        get(e) {
                            return this.localBasket.get(e);
                        }
                        _migrate() {
                            const e = this.localBasket.migrate();
                            0 !== e.length && this.srv.addManyItems(e);
                        }
                        async getBanner(e) {
                            var t;
                            try {
                                const r =
                                    await WbSpaModel.prototype.$httpClient.fetchBasicJSON(
                                        `/webapi/lk/payment/marketing/banner?pan=${e}`,
                                        {
                                            method: "POST",
                                        }
                                    );
                                return null ==
                                    (t = null == r ? void 0 : r.result)
                                    ? void 0
                                    : t.banner;
                            } catch (e) {
                                console.log(e.error);
                            }
                        }
                    },
                    _t = r(41365);
                const Ct =
                    "by" ===
                    (null == (wt = wb.settings) ? void 0 : wt.currentLocale)
                        ? "Склад поставщика"
                        : "Склад продавца";
                var It = {
                    0: Ct,
                    507: "Коледино WB",
                    686: "Новосибирск WB",
                    1193: "Хабаровск WB",
                    1733: "Екатеринбург WB",
                    2737: "Уткина Заводь WB",
                    117442: "Калуга WB",
                    117501: "Подольск WB",
                    117866: "Тамбов WB",
                    117986: "Казань WB",
                    120762: "Электросталь WB",
                    121709: "Электросталь WB",
                    130744: "Краснодар WB",
                    159402: "Шушары WB",
                    161812: "Санкт-Петербург WB",
                    172430: "Барнаул WB",
                    204615: "Томск WB",
                    204939: "Астана WB",
                    205104: "Ульяновск WB",
                    205205: "Киров WB",
                    205228: "Белая дача WB",
                    206236: "Белые Столбы WB",
                    206348: "Алексин WB",
                    206708: "Новокузнецк WB",
                    206844: "Калининград WB",
                    206968: "Новосёлки WB",
                    208277: "Невинномысск WB",
                    208941: "Домодедово WB",
                    209513: "Домодедово WB",
                    210001: "Новосёлки-2 WB",
                    210515: "Вёшки WB",
                    208768: Ct + " Абакан",
                    209649: Ct + " Алексин",
                    208769: Ct + " Алматы",
                    212038: Ct + " Алматы-2",
                    209902: Ct + " Артём",
                    214110: Ct + " Архангельск",
                    122495: Ct + " Астана",
                    204492: Ct + " Астрахань",
                    204493: Ct + " Барнаул",
                    206239: Ct + " Белая Дача (Москва)",
                    213892: Ct + " Белгород",
                    214112: Ct + " Белогорск",
                    209112: Ct + " Белые Столбы",
                    208814: Ct + " Бишкек",
                    204494: Ct + " Брянск",
                    204495: Ct + " Владикавказ",
                    117392: Ct + " Владимир",
                    152588: Ct + " Волгоград",
                    204496: Ct + " Вологда",
                    211895: Ct + " Воронеж",
                    209111: Ct + " Гольяново (Москва)",
                    208771: Ct + " Гомель (Беларусь)",
                    210967: Ct + " Домодедово",
                    208815: Ct + " Екатеринбург",
                    211790: Ct + " Екатеринбург-2",
                    208816: Ct + " Ереван",
                    208772: Ct + " Иваново",
                    172073: Ct + " Ижевск",
                    131643: Ct + " Иркутск",
                    208817: Ct + " Казань",
                    208761: Ct + " Калининград",
                    144046: Ct + " Калуга",
                    208773: Ct + " Киров",
                    119261: Ct + " Коледино",
                    209109: Ct + " Комсомольский (Москва)",
                    208818: Ct + " Краснодар",
                    118365: Ct + " Красноярск",
                    208774: Ct + " Крыловская (Краснодар)",
                    172075: Ct + " Курск",
                    209108: Ct + " Курьяновская (Москва)",
                    208776: Ct + " Липецк",
                    168826: Ct + " Лобня (Москва)",
                    121700: Ct + " Минск",
                    211672: Ct + " Минск-2",
                    212032: Ct + " Вешки",
                    211730: Ct + " Внуково",
                    117673: Ct + " Москва",
                    122259: Ct + " Москва",
                    208777: Ct + " Мурманск",
                    208778: Ct + " Набережные Челны",
                    209107: Ct + " Нахабино (Москва)",
                    209601: Ct + " Невинномысск",
                    118535: Ct + " Нижний Новгород",
                    213651: Ct + " Нижний Тагил",
                    208789: Ct + " Новокузнецк",
                    117419: Ct + " Новосибирск",
                    209591: Ct + " Омск",
                    208780: Ct + " Оренбург",
                    157848: Ct + " Пенза",
                    209592: Ct + " Пермь",
                    208781: Ct + " Печатники",
                    214111: Ct + " Псков",
                    208782: Ct + " Пушкино (Москва)",
                    204497: Ct + " Пятигорск",
                    118019: Ct + " Ростов-на-Дону",
                    152594: Ct + " Рязань",
                    146666: Ct + " Самара",
                    132043: Ct + " Санкт-Петербург",
                    117414: Ct + " Санкт-Петербург (Уткина Заводь)",
                    208819: Ct + " Санкт-Петербург (Шушары)",
                    158929: Ct + " Саратов",
                    204498: Ct + " Серов",
                    144154: Ct + " Симферополь",
                    208783: Ct + " Смоленск",
                    204212: Ct + " Солнцево",
                    158448: Ct + " Ставрополь",
                    208784: Ct + " Сургут",
                    115651: Ct + " Тамбов",
                    152610: Ct + " Тверь",
                    208785: Ct + " Темрюк (Краснодарский край)",
                    208786: Ct + " Томск",
                    146725: Ct + " Тюмень",
                    209950: Ct + " Ульяновск",
                    152700: Ct + " Уфа",
                    208820: Ct + " Хабаровск",
                    210815: Ct + " Хоргос",
                    204499: Ct + " Чебоксары",
                    152611: Ct + " Челябинск",
                    209113: Ct + " Черная грязь (Москва)",
                    209106: Ct + " Чертановский (Москва)",
                    208787: Ct + " Чита",
                    209510: Ct + " Электросталь",
                    209110: Ct + " Южные ворота (Москва)",
                    152612: Ct + " Ярославль",
                };
                const kt = ["ru", "by", "kg", "kz", "am", "uz", "tj"];
                var Mt = class {
                    isMp(e) {
                        return e ? this._checkStoreFlag(e, 2, "type") : null;
                    }
                    isCargoStore(e) {
                        return e ? this._checkStoreFlag(e, 4, "type") : null;
                    }
                    isDbs(e) {
                        return e ? this._checkStoreFlag(e, 8, "type") : null;
                    }
                    isForeign(e) {
                        return e ? this._checkStoreFlag(e, 16, "type") : null;
                    }
                    isWbGo(e) {
                        return e ? this._checkStoreFlag(e, 32, "type") : null;
                    }
                    isExpress(e) {
                        return e ? this._checkStoreFlag(e, 64, "type") : null;
                    }
                    isBooking(e) {
                        return e ? this._checkStoreFlag(e, 128, "type") : null;
                    }
                    needVerification(e, t) {
                        return (
                            !!t &&
                            this._checkStoreFlag(
                                t,
                                1 << this._localeBit(e),
                                "import"
                            )
                        );
                    }
                    _checkStoreFlag(e, t, r) {
                        var s;
                        return (
                            void 0 !==
                                (null == (s = this[e]) ? void 0 : s[r]) &&
                            (this[e][r] & t) === t
                        );
                    }
                    _localeBit(e) {
                        const t = kt.indexOf(e);
                        return Math.max(t, 0);
                    }
                };
                const Pt = "wb__cargo_data_dt",
                    Tt = 9e5,
                    $t = "cargo-stores",
                    At = "stores-data";
                var Dt = class {
                        constructor() {
                            (this._storeNames = It),
                                (this._stores = new Mt()),
                                (this._cargoStores = []),
                                this._getStoresData().then((e) => {
                                    if (e) {
                                        for (let {
                                            id: t,
                                            name: r,
                                            type: s,
                                            intervals: n,
                                            workingHours: o,
                                            import: i,
                                            isWb: a,
                                        } of e)
                                            (this._storeNames[t] = r),
                                                !0 & s &&
                                                    this._cargoStores.push(t),
                                                (this._stores[t] = {
                                                    name: r,
                                                    type: s,
                                                    intervals: n,
                                                    workingHours: o,
                                                    import: i,
                                                    isWb: a,
                                                });
                                        this._storesLoaded = !0;
                                    }
                                    this._startJobSync();
                                });
                        }
                        get cargoStores() {
                            return this._cargoStores || [];
                        }
                        get names() {
                            return this._storeNames;
                        }
                        get storesMap() {
                            return this._stores;
                        }
                        _openDb() {
                            return this.$storageHelper.openDb("all-stores", {
                                onupgradeneeded: (e) => {
                                    e.objectStoreNames.contains($t) ||
                                        e.createObjectStore($t, {
                                            keyPath: "id",
                                        }),
                                        e.objectStoreNames.contains(At) ||
                                            e.createObjectStore(At, {
                                                keyPath: "id",
                                            });
                                },
                                version: 2,
                            });
                        }
                        _setStoresAsync(e) {
                            this._openDb().then((t) => {
                                e instanceof Array &&
                                    this.$storageHelper.addItems(t, At, e, 500);
                            });
                        }
                        async _getStoresData() {
                            return this._openDb().then((e) =>
                                this.$storageHelper.getAll(e, At)
                            );
                        }
                        _startJobSync() {
                            (!this._storesLoaded ||
                                +localStorage.getItem(Pt) < Date.now()) &&
                                this._syncStores(),
                                setInterval(this._syncStores.bind(this), Tt);
                        }
                        async _syncStores() {
                            const e = await this.$httpClient.fetchStaticDataV2(
                                "stores-data.json"
                            );
                            if (e instanceof Array) {
                                (this._storesLoaded = !0),
                                    (this._cargoStores = []);
                                for (let {
                                    id: t,
                                    name: r,
                                    type: s,
                                    intervals: n = null,
                                    workingHours: o = null,
                                    import: i,
                                    isWb: a,
                                } of e)
                                    (this._storeNames[t] = r),
                                        !0 & s && this._cargoStores.push(t),
                                        (this._stores[t] = {
                                            name: r,
                                            type: s,
                                            intervals: n,
                                            workingHours: o,
                                            import: i,
                                            isWb: a,
                                        });
                                localStorage.setItem(Pt, Date.now() + Tt);
                            }
                            this._setStoresAsync(e);
                        }
                    },
                    Bt = Object.defineProperty,
                    Ot = Object.defineProperties,
                    Et = Object.getOwnPropertyDescriptors,
                    xt = Object.getOwnPropertySymbols,
                    Lt = Object.prototype.hasOwnProperty,
                    jt = Object.prototype.propertyIsEnumerable,
                    Ft = (e, t, r) =>
                        t in e
                            ? Bt(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r),
                    Nt = (e, t) => {
                        for (var r in t || (t = {}))
                            Lt.call(t, r) && Ft(e, r, t[r]);
                        if (xt)
                            for (var r of xt(t))
                                jt.call(t, r) && Ft(e, r, t[r]);
                        return e;
                    },
                    Wt = (e, t) => Ot(e, Et(t));
                const Rt = [5352, 2255],
                    Ut = [
                        1, 2, 3, 4, 6, 200, 204, 1327, 1465, 1513, 1616, 2273,
                        3497, 4607, 4735,
                    ],
                    Ht = [
                        213, 1542, 2605, 2693, 4733, 4737, 212, 380, 733, 1675,
                        2687, 4738, 4827, 4932, 214, 2616, 218, 757, 53, 61, 63,
                        305, 946, 1161, 1422, 1439, 1475, 1487, 2318, 2379,
                        2747, 2920, 3489, 3490, 3579, 3766, 4200, 4256, 4537,
                        5154, 5220, 5222, 5273, 5094, 5096, 1339, 836, 5131,
                        1542, 5095, 4021, 4022, 1338, 2564,
                    ],
                    qt = [786, 1107],
                    zt = [1524, 1525],
                    Vt = [1, 2, 4, 200, 204, 239, 1513, 5038],
                    Gt = "stashed_catalog_product";
                class Qt {
                    constructor() {
                        var e;
                        Ft(
                            this,
                            "symbol" !=
                                typeof (e = "stashedCatalogProductInner")
                                ? e + ""
                                : e,
                            null
                        );
                    }
                    stashCatalogProduct(e) {
                        e &&
                            ((this.stashedCatalogProductInner = e),
                            localStorage.putObject(Gt, e));
                    }
                    async fetchProductCard(e, t, r) {
                        const s = async (s) => {
                            const [n] = await Promise.all([
                                WbSpaModel.prototype.$httpClient.fetchStaticV3(
                                    wb.helpers.url.urlProductStatic,
                                    t,
                                    e,
                                    void 0,
                                    s
                                ),
                                null == r ? void 0 : r(),
                            ]);
                            return (
                                n && (n.lang = s),
                                404 === (null == n ? void 0 : n.status)
                                    ? null
                                    : n
                            );
                        };
                        if ("ka" === wb.currentLanguage) {
                            let e = await s("ka");
                            return (
                                e ||
                                ((e = await s("ru")), (e.lang = "default"), e)
                            );
                        }
                        return s("ru");
                    }
                    get stashedCatalogProduct() {
                        var e;
                        return null != (e = this.stashedCatalogProductInner)
                            ? e
                            : localStorage.getObject(Gt);
                    }
                    async loadProductCardAsync(e, t, r = !1) {
                        try {
                            const s = this.stashedCatalogProduct;
                            return (null == s ? void 0 : s.nmId) !== e ||
                                r ||
                                s.currency !==
                                    WbSpaModel.prototype.$user.getCurrency()
                                ? this.loadDynamicProductAsync(
                                      e,
                                      t,
                                      await this.loadStaticProductAsync(e)
                                  )
                                : this.fromCatalogProduct(s, t);
                        } catch (e) {
                            return null;
                        }
                    }
                    async loadStaticProductAsync(e) {
                        return await WbSpaModel.prototype.$services.productCard.fetchProductCard(
                            e,
                            {
                                timeout: 2e3,
                            },
                            wb.xnm.waitNoReturnSubjectsInitialized
                        );
                    }
                    async loadDynamicProductAsync(e, t, r) {
                        var s, n;
                        if (!e || isNaN(e))
                            throw new TypeError(
                                "[ProductCardService] nmId must be an integer at loadDynamicProductAsync"
                            );
                        t &&
                            isNaN(t) &&
                            (console.warn(
                                "[ProductCardService] chrtId is not an integer at loadDynamicProductAsync"
                            ),
                            (t = null)),
                            (r =
                                null != r
                                    ? r
                                    : await this.loadStaticProductAsync(e));
                        const o = new Map();
                        let i =
                            null != (s = null == r ? void 0 : r.colors)
                                ? s
                                : [e];
                        r &&
                            ((r.colors = this.colorLimiter(e, i)),
                            (i = r.colors),
                            o.set(r.nm_id, r));
                        const a =
                                "SubscriptionPageEntrypoint" ===
                                WbSpaModel.prototype.$router.targetRoute
                                    ? null ==
                                      (n = this.stashedCatalogProductInner)
                                        ? void 0
                                        : n.currency
                                    : null,
                            l = await wb.xnm
                                .getXnmProducts(i, !1, null, a)
                                .catch(() => null),
                            c = e.toString();
                        if (!l) return null;
                        const u = l[c];
                        if (!u) return null;
                        const d = await this.getMetaCardInfo(u, r),
                            p = !!d,
                            h = this.fillBaseProductCardFromX(r, u, p),
                            m = Wt(Nt({}, h), {
                                metacard: d,
                            });
                        p && (i = [e]),
                            i.forEach((e) => {
                                const t = o.get(e),
                                    r = null == l ? void 0 : l[e];
                                if (r && r.pics > 0) {
                                    const s = this.fillNomenclature(e, t, r);
                                    (s.groupedAddedOptions =
                                        m.groupedAddedOptions),
                                        (s.miniAddedOptions =
                                            m.miniAddedOptions),
                                        (s.verifiedCertificate =
                                            this.setVerifiedCertificate(t)),
                                        "SubscriptionPageEntrypoint" ===
                                            WbSpaModel.prototype.$router
                                                .targetRoute &&
                                            (s.currency = "RUB"),
                                        m.nomenclatures.push(s);
                                }
                            }),
                            (m.nomenclatures = m.nomenclatures.sort((t, r) =>
                                t.nmId === e
                                    ? -1
                                    : r.nmId === e
                                    ? 1
                                    : r.sort - t.sort
                            ));
                        const g = m.nomenclatures.find((t) => t.nmId === e);
                        if (null == g || null == g.sizes) return null;
                        const b = Object.assign({}, g);
                        this.fillSelectedNomenclature(b, t),
                            this.addDigitalLinks(b, r);
                        const y = this.fillProductCardMetaTags(m);
                        return (
                            b.goodsName ||
                                (m.goodsName = wb.i18n.t(
                                    "productCard.noNameSpecified"
                                )),
                            this.checkGroupedAddedOptionsExist(
                                b.groupedAddedOptions
                            ) || (b.groupedAddedOptions = []),
                            {
                                metaTags: y,
                                product: m,
                                selectedNomenclature: b,
                            }
                        );
                    }
                    async loadNomenclature(e) {
                        var t,
                            r,
                            s,
                            n,
                            o,
                            i,
                            a,
                            l,
                            c,
                            u,
                            d,
                            p,
                            h,
                            m,
                            g,
                            b,
                            y,
                            v,
                            f;
                        let w = null;
                        if (!e.isDataLoaded)
                            try {
                                w = await this.loadStaticProductAsync(e.nmId);
                            } catch (e) {
                                w = null;
                            }
                        if (w) {
                            if (
                                ((e.goodsName =
                                    null !=
                                    (t = null == w ? void 0 : w.imt_name)
                                        ? t
                                        : e.goodsName),
                                (e.brandName =
                                    null !=
                                    (s =
                                        null ==
                                        (r = null == w ? void 0 : w.selling)
                                            ? void 0
                                            : r.brand_name)
                                        ? s
                                        : e.brandName),
                                (e.colorName = w.nm_colors_names),
                                (e.hasVideo =
                                    null == (n = w.media)
                                        ? void 0
                                        : n.has_video),
                                (e.isBestQualityVideo =
                                    null !=
                                        (i =
                                            null ==
                                            (o = null == w ? void 0 : w.media)
                                                ? void 0
                                                : o.is_best_quality_video) &&
                                    i),
                                (e.bestQualityPics =
                                    null !=
                                    (l =
                                        null == (a = w.media)
                                            ? void 0
                                            : a.best_qualities_photos)
                                        ? l
                                        : []),
                                (e.hasRich =
                                    null !=
                                        (c = null == w ? void 0 : w.has_rich) &&
                                    c),
                                (e.hasImageTags =
                                    null !=
                                        (u =
                                            (null == w
                                                ? void 0
                                                : w.enable_tags) &&
                                            (null == w
                                                ? void 0
                                                : w.has_photo_tags)) && u),
                                (e.consist =
                                    null !=
                                    (g =
                                        null !=
                                        (m =
                                            null ==
                                            (d =
                                                null == w
                                                    ? void 0
                                                    : w.compositions)
                                                ? void 0
                                                : d
                                                      .map((e) =>
                                                          e.value
                                                              ? `${e.name} ${e.value}%`
                                                              : e.name
                                                      )
                                                      .join(", "))
                                            ? m
                                            : null ==
                                              (h =
                                                  null ==
                                                  (p =
                                                      null == w
                                                          ? void 0
                                                          : w.options)
                                                      ? void 0
                                                      : p.find(
                                                            (e) =>
                                                                "Состав" ===
                                                                e.name
                                                        ))
                                            ? void 0
                                            : h.value)
                                        ? g
                                        : ""),
                                w.sizes_table && w.sizes_table.details_props)
                            ) {
                                e.sizeTable = [];
                                const t =
                                        w.sizes_table.details_props.indexOf(
                                            "RU"
                                        ),
                                    r = {
                                        row: [],
                                    };
                                t >= 0 &&
                                    (r.row[0] =
                                        wb.i18n.t("common.russianSize")),
                                    (r.row[1] = wb.i18n.t(
                                        "common.manufactureSize"
                                    ));
                                let s = 2;
                                for (
                                    let e = 2;
                                    e < w.sizes_table.details_props.length;
                                    e++
                                ) {
                                    const t = w.sizes_table.details_props[e];
                                    r.row[s++] = "" !== t ? t : "-";
                                }
                                if (
                                    (e.sizeTable.push(r),
                                    w.sizes_table.values.forEach((r) => {
                                        var s, n;
                                        const o = {
                                            chrtId:
                                                null != (s = r.chrt_id) ? s : 0,
                                            row: [],
                                        };
                                        if (
                                            (t >= 0 &&
                                                (o.row[0] = r.details[t]),
                                            (o.row[1] = r.tech_size),
                                            r.details.length > 2)
                                        )
                                            for (
                                                let e = 2;
                                                e < r.details.length;
                                                e++
                                            )
                                                o.row[e] =
                                                    "" !== r.details[e]
                                                        ? r.details[e]
                                                        : "-";
                                        null == (n = e.sizeTable) || n.push(o);
                                    }),
                                    e.sizes)
                                )
                                    for (const t of e.sizes) {
                                        const e = w.sizes_table.values.find(
                                            (e) =>
                                                e.chrt_id === t.characteristicId
                                        );
                                        if (
                                            e &&
                                            w.sizes_table.details_props
                                                .length === e.details.length
                                        )
                                            for (
                                                let r = 2;
                                                r <
                                                w.sizes_table.details_props
                                                    .length;
                                                r++
                                            ) {
                                                const s = {
                                                    name: w.sizes_table
                                                        .details_props[r],
                                                    value:
                                                        "" !== e.details[r]
                                                            ? e.details[r]
                                                            : "-",
                                                };
                                                t.dimensions &&
                                                    t.dimensions.push(s);
                                            }
                                    }
                            }
                            const S = this.fillGroupedAddedOptions(w);
                            (e.groupedAddedOptions = S),
                                (e.miniAddedOptions =
                                    this.fillMiniGroupedAddedOptions(S, 6)),
                                (e.specs = wb.xnm.convertOptionsToSpecs(
                                    null == w ? void 0 : w.options
                                )),
                                (e.subjectName =
                                    null !=
                                    (b = null == w ? void 0 : w.subj_name)
                                        ? b
                                        : ""),
                                (e.subjectParent =
                                    null !=
                                    (y = null == w ? void 0 : w.subj_root_name)
                                        ? y
                                        : ""),
                                (e.verifiedCertificate =
                                    this.setVerifiedCertificate(w)),
                                this.addDigitalLinks(e, w),
                                (e.description = w.description),
                                (e.markdownDescription =
                                    null != (v = w.markdown_description) && v),
                                (e.isAutoplayingVideo =
                                    null == (f = w.media)
                                        ? void 0
                                        : f.is_autoplaying_video),
                                (e.isDataLoaded = !0),
                                this.fillIsChooseColor(w, e);
                        }
                        const S = Object.assign({}, e);
                        return this.fillSelectedNomenclature(S), S;
                    }
                    async getMetaCardInfo(e, t) {
                        var r;
                        if (
                            !(null == (r = wb.global.settings.switches)
                                ? void 0
                                : r.multicardV2Enable)
                        )
                            return null;
                        const s = null == e ? void 0 : e.rcId;
                        if (!s) return null;
                        let n;
                        if (((n = e.id ? e.id : e.nmId), !n)) return null;
                        const [o] = await Promise.all([
                                (async () =>
                                    null != t
                                        ? t
                                        : this.loadStaticProductAsync(n))(),
                                WbSpaModel.prototype.$moduleLoader.loadServiceAsync(
                                    "metaCardService"
                                ),
                            ]),
                            i = WbSpaModel.prototype.$services.metaCardService;
                        if (
                            !(null == o ? void 0 : o.rc) ||
                            2 !== o.rc.type ||
                            o.rc.id !== s
                        )
                            return null;
                        return await i.getMetaCardData(s, n, o);
                    }
                    async loadMiniCardData(e, t) {
                        var r, s, n, o;
                        const i = await wb.xnm.getMiniProductCard(e);
                        if (!i) return null;
                        let a = null,
                            l = null;
                        if (
                            t &&
                            !isNaN(t) &&
                            (null == (r = i.sizes)
                                ? void 0
                                : r.some((e) => e.ch == t))
                        )
                            (a = t),
                                (l =
                                    null !=
                                    (n =
                                        null ==
                                        (s = i.sizes.find((e) => e.ch == t))
                                            ? void 0
                                            : s.nm)
                                        ? n
                                        : null);
                        else if (
                            1 == (null == (o = i.sizes) ? void 0 : o.length)
                        ) {
                            const e = i.sizes[0];
                            (a = e.ch), (l = null == e ? void 0 : e.nm);
                        }
                        return Wt(Nt({}, i), {
                            characteristicId: a,
                            sizeName: l,
                            isOnlyColor: !0,
                        });
                    }
                    async loadPriceHistory(e) {
                        return await WbSpaModel.prototype.$httpClient.fetchStaticV3(
                            wb.helpers.url.urlPriceHistoryStatic,
                            {
                                logOff: !0,
                            },
                            e
                        );
                    }
                    async loadSizeTable(e) {
                        const t = await this.loadStaticProductAsync(e);
                        return this.fillSizeTable(t);
                    }
                    setChooseColorInBasket(e, t) {
                        var r, s, n;
                        for (let o = 0; o < e.length; o++)
                            if (
                                (null ==
                                (s = null == (r = e[o].meta) ? void 0 : r.shade)
                                    ? void 0
                                    : s.colorHex) &&
                                t.sizes
                            ) {
                                if (
                                    e[o].characteristicId ===
                                    (null == (n = t.sizes[0])
                                        ? void 0
                                        : n.characteristicId)
                                ) {
                                    $.observable(t).setProperty({
                                        chooseColorInBasket: !0,
                                    });
                                    break;
                                }
                            } else
                                $.observable(t).setProperty({
                                    chooseColorInBasket: !1,
                                });
                    }
                    fromCatalogProduct(e, t) {
                        var r, s, n, o, i, a, l, c, u;
                        const d = {},
                            p = {
                                imtId: e.imtId,
                                nomenclatures: [],
                                supplierDeliveryInfo: {
                                    time1: e.time1 || null,
                                    time2: e.time2 || null,
                                    storeId: e.fastestStore || null,
                                },
                                rcId: e.rcId,
                            },
                            h = e.pics,
                            m = 20624 === e.brandId || 30624 === e.siteBrandId,
                            g = {
                                adult: e.adult,
                                brandId: e.brandCod,
                                brandName: e.brand,
                                canFit: this.setCanFit(
                                    e.subjectId,
                                    e.subjectParentId
                                ),
                                colorName: null,
                                consist: "",
                                deliveryHours: e.deliveryHours,
                                description: null,
                                markdownDescription: !1,
                                dest: e.dest,
                                fastestStore: e.fastestStore,
                                feedbacks: e.feedbacks,
                                goodsName: e.name,
                                isAlcohol: null != (r = e.isAlcohol) && r,
                                isPostpaidBooking:
                                    null != (s = e.isPostpaidBooking) && s,
                                isBooking: null != (n = e.isBooking) && n,
                                isActivationKey: -1 !== Rt.indexOf(e.subjectId),
                                isDataLoaded: !1,
                                isDetailsLoaded: !1,
                                isDigital: e.isDigitalGood,
                                isPreorder:
                                    5772 === e.brandCod &&
                                    wb.settings.preOrderList.includes(e.nmId),
                                isPrepaid: e.isPrepaid,
                                isVideo: 5105 === e.subjectId,
                                hasVideo: !!(16 & e.viewFlags),
                                isBestQualityVideo: !1,
                                hasRich: !1,
                                hasImageTags: !1,
                                kindId: null != (o = e.kindId) ? o : 0,
                                nmId: e.nmId,
                                nonRefundable:
                                    e.isUnrefusable ||
                                    wb.xnm.setNoRefund(e.subjectId),
                                panelPromoId: e.panelPromoId,
                                picsCount: h,
                                bestQualityPics: [],
                                promoText: e.promoTextCard,
                                promotions: null,
                                saleConditions: e.saleConditions,
                                subjectId: e.subjectId,
                                subjectName: "",
                                subjectParent: "",
                                subjectParentId: e.subjectParentId,
                                sizes:
                                    null == (i = e.sizes)
                                        ? void 0
                                        : i.map((t) => {
                                              var r;
                                              const s = t.catalogPrice;
                                              return {
                                                  characteristicId: t.ch,
                                                  sizeName: t.nm,
                                                  sizeNameRus: t.rusNm,
                                                  quantity:
                                                      t.unavailable || e.soldOut
                                                          ? 0
                                                          : 1,
                                                  stocks: t.stocks,
                                                  storeIds:
                                                      null == (r = t.stocks)
                                                          ? void 0
                                                          : r.map((e) => e.wh),
                                                  isSoldOut:
                                                      !!t.unavailable ||
                                                      e.soldOut,
                                                  deliveryHours:
                                                      e.deliveryHours,
                                                  payloadV2: t.payloadV2,
                                                  saleConditions:
                                                      t.saleConditions,
                                                  whDtype: t.whDtype,
                                                  price: s
                                                      ? {
                                                            price: s.basic
                                                                ? s.basic / 100
                                                                : 0,
                                                            salePrice:
                                                                s.priceToShow
                                                                    ? s.priceToShow /
                                                                      100
                                                                    : 0,
                                                            sale: s.sale,
                                                            logisticsCost:
                                                                s.logistics,
                                                            returnCost:
                                                                s.return,
                                                            paymentDiscountAmount:
                                                                s.paymentDiscountAmount,
                                                            productPrice:
                                                                s.product / 100,
                                                        }
                                                      : null,
                                                  dimensions: [],
                                              };
                                          }),
                                sizeTable: null,
                                showMinDetails: !Vt.includes(e.subjectParentId),
                                reviewRating: e.reviewRating,
                                star: e.star,
                                urlForReccomendations: `/recommendation/catalog?type=visuallysimilar&forproduct=${e.nmId}&excludeNms=true`,
                                supplier: $.views.helpers.supplierFineName(
                                    "Wildberries" === e.supplier
                                        ? "WILDBERRIES"
                                        : $.views.converters.trimSupplierName(
                                              e.supplier,
                                              $.views.helpers.suppliersOrgForms
                                          ),
                                    e.brandId
                                ),
                                supplierId: e.supplierId,
                                supplierRating: e.supplierRating,
                                viewFlags: e.viewFlags,
                                shouldShowOriginalMark:
                                    !m && !!(8 & e.viewFlags),
                                miniAddedOptions: [],
                                groupedAddedOptions: [],
                                showThermometer: e.showThermometer,
                                quantity: e.totalQuantity,
                                whDtype: e.whDtype,
                                cashbackPercent:
                                    null == e ? void 0 : e.cashbackPercent,
                                expandedRichContent: !!(
                                    4 &
                                    ((null == e ? void 0 : e.supplierFlags) ||
                                        0)
                                ),
                            };
                        e.supplierFlags &&
                            (g.hideMultipleSellers =
                                !!(2 & e.supplierFlags) &&
                                !!(null == (a = wb.global)
                                    ? void 0
                                    : a.settings.switches
                                          .hideMultipleSellersLever)),
                            (g.allSizesSoldOut =
                                null !=
                                    (c =
                                        null == (l = g.sizes)
                                            ? void 0
                                            : l.every((e) => e.isSoldOut)) &&
                                c);
                        const b =
                            !g.allSizesSoldOut &&
                            (null == (u = e.catalogPrice) ? void 0 : u.total) >
                                0;
                        return (
                            (g.price = {
                                price: b ? e.catalogPrice.basic / 100 : 0,
                                salePrice:
                                    b && e.catalogPrice.priceToShow
                                        ? e.catalogPrice.priceToShow / 100
                                        : 0,
                                sale:
                                    b && e.catalogPrice.sale
                                        ? e.catalogPrice.sale
                                        : 0,
                                priceDiff: !!b && e.priceDiff,
                                logisticsCost: e.catalogPrice.logistics,
                                returnCost: e.catalogPrice.return,
                                soldOut: g.allSizesSoldOut,
                                productPrice: e.catalogPrice.product / 100,
                                paymentDiscountAmount:
                                    e.catalogPrice.paymentDiscountAmount,
                            }),
                            (g.sort = 0),
                            g.sizes &&
                                g.sizes.length > 0 &&
                                (1 === g.sizes.length
                                    ? (g.sort = g.sizes[0].quantity > 0 ? 1 : 0)
                                    : g.sizes.reduce(
                                          (e, t) =>
                                              (g.sort += +(t.quantity > 0)),
                                          {}
                                      )),
                            p.nomenclatures.push(g),
                            this.fillSelectedNomenclature(g, t),
                            Object.assign(d, {
                                product: p,
                                selectedNomenclature: g,
                            }),
                            (d.metaTags = this.fillProductCardMetaTags(p)),
                            d
                        );
                    }
                    fillSelectedNomenclature(e, t) {
                        var r, s, n, o;
                        wb.xnm.fillFeedbacksPayment([e]),
                            wb.xnm.isRedPrice(e.panelPromoId) &&
                                (e.showRedPrice = !0),
                            wb.settings.b2bMode &&
                                ((e.isVatRefundable = wb.xnm.isVatRefundable(
                                    e.viewFlags
                                )),
                                (e.vatPercent = wb.xnm.getVatPercent(
                                    e.viewFlags
                                )));
                        let i = !0;
                        e.sizes &&
                            ((i =
                                e.sizes.length <= 2 &&
                                (null == (r = e.sizes)
                                    ? void 0
                                    : r.every((e) => "0" === e.sizeName))),
                            i || 1 === e.sizes.length
                                ? (e.selectedSize =
                                      e.sizes.find((e) => !e.isSoldOut) ||
                                      e.sizes[0])
                                : null != t &&
                                  (e.selectedSize = e.sizes.find(
                                      (e) => e.characteristicId === t
                                  ))),
                            this.setSelectedPrice(e),
                            wb.global.settings.switches.enableCashback &&
                                this._setCashbackAmount(e),
                            this.setButtons(e),
                            (e.showSize = !i),
                            (e.deliveryInfoEnable =
                                !e.isDigital &&
                                !(
                                    (null == (s = e.selectedSize)
                                        ? void 0
                                        : s.isSoldOut) || e.allSizesSoldOut
                                )),
                            (e.isVehicle = 8242 == e.subjectParentId),
                            (e.saleConditions =
                                null ==
                                (o =
                                    null == (n = e.sizes)
                                        ? void 0
                                        : n.find((e) => {
                                              var t;
                                              return null == (t = e.stocks)
                                                  ? void 0
                                                  : t.length;
                                          }))
                                    ? void 0
                                    : o.saleConditions),
                            e.colorGroupBaseType &&
                                e.selectedSize &&
                                (e.isShowChooseColorBtn = !0);
                    }
                    fillNomenclature(e, t, r) {
                        var s,
                            n,
                            o,
                            i,
                            a,
                            l,
                            c,
                            u,
                            d,
                            p,
                            h,
                            m,
                            g,
                            b,
                            y,
                            v,
                            f,
                            w,
                            S,
                            _,
                            C,
                            I,
                            k,
                            M,
                            P,
                            T,
                            A,
                            D,
                            B,
                            O,
                            E,
                            x,
                            L,
                            j,
                            F,
                            N,
                            W,
                            R,
                            U,
                            H,
                            q,
                            z,
                            V,
                            G,
                            Q,
                            K,
                            J,
                            X;
                        const Y =
                                null !=
                                (o =
                                    null !=
                                    (n =
                                        null ==
                                        (s = null == t ? void 0 : t.data)
                                            ? void 0
                                            : s.subject_id)
                                        ? n
                                        : null == r
                                        ? void 0
                                        : r.subjectId)
                                    ? o
                                    : 0,
                            Z =
                                null !=
                                (l =
                                    null !=
                                    (a =
                                        null ==
                                        (i = null == t ? void 0 : t.data)
                                            ? void 0
                                            : i.subject_root_id)
                                        ? a
                                        : null == r
                                        ? void 0
                                        : r.subjectParentId)
                                    ? l
                                    : 0,
                            ee =
                                null != (c = null == t ? void 0 : t.subj_name)
                                    ? c
                                    : "",
                            te =
                                null !=
                                (u = null == t ? void 0 : t.subj_root_name)
                                    ? u
                                    : "",
                            re =
                                null !=
                                (h =
                                    null != (p = null == r ? void 0 : r.pics)
                                        ? p
                                        : null ==
                                          (d = null == t ? void 0 : t.media)
                                        ? void 0
                                        : d.photo_count)
                                    ? h
                                    : 0,
                            se =
                                null !=
                                (g =
                                    null == (m = null == t ? void 0 : t.media)
                                        ? void 0
                                        : m.best_qualities_photos)
                                    ? g
                                    : [],
                            ne =
                                20624 === (null == r ? void 0 : r.brandId) ||
                                30624 === (null == r ? void 0 : r.siteBrandId),
                            oe =
                                WbSpaModel.prototype.$services.storeService
                                    .storesMap,
                            ie = (null == r ? void 0 : r.wh) ? oe[r.wh] : null,
                            ae = !(8 & ~(null == ie ? void 0 : ie.type)),
                            le = {
                                adult:
                                    null !=
                                        (b = null == r ? void 0 : r.isAdult) &&
                                    b,
                                attachments: null == t ? void 0 : t.attachments,
                                brandId:
                                    null != (y = null == r ? void 0 : r.brandId)
                                        ? y
                                        : 0,
                                brandName:
                                    null !=
                                    (w =
                                        null !=
                                        (f =
                                            null ==
                                            (v = null == t ? void 0 : t.selling)
                                                ? void 0
                                                : v.brand_name)
                                            ? f
                                            : null == r
                                            ? void 0
                                            : r.brand)
                                        ? w
                                        : "",
                                canFit: this.setCanFit(Y, Z),
                                colorName:
                                    -1 !==
                                    qt.indexOf(null == r ? void 0 : r.subjectId)
                                        ? null
                                        : null !=
                                          (C =
                                              null !=
                                              (_ =
                                                  null == t
                                                      ? void 0
                                                      : t.nm_colors_names)
                                                  ? _
                                                  : null ==
                                                    (S =
                                                        null == r
                                                            ? void 0
                                                            : r.colors)
                                                  ? void 0
                                                  : S.map((e) => e.name).join(
                                                        ", "
                                                    ))
                                        ? C
                                        : "",
                                consist:
                                    null !=
                                    (T =
                                        null !=
                                        (P =
                                            null ==
                                            (I =
                                                null == t
                                                    ? void 0
                                                    : t.compositions)
                                                ? void 0
                                                : I.map((e) =>
                                                      e.value
                                                          ? `${e.name} ${e.value}%`
                                                          : e.name
                                                  ).join(", "))
                                            ? P
                                            : null ==
                                              (M =
                                                  null ==
                                                  (k =
                                                      null == t
                                                          ? void 0
                                                          : t.options)
                                                      ? void 0
                                                      : k.find(
                                                            (e) =>
                                                                "Состав" ===
                                                                e.name
                                                        ))
                                            ? void 0
                                            : M.value)
                                        ? T
                                        : "",
                                deliveryHours:
                                    ((null == r ? void 0 : r.time1) || 0) +
                                    ((null == r ? void 0 : r.time2) || 0),
                                intervals: null == ie ? void 0 : ie.intervals,
                                workingHours:
                                    null == ie ? void 0 : ie.workingHours,
                                isDbs: ae,
                                description: null == t ? void 0 : t.description,
                                markdownDescription:
                                    null !=
                                        (A =
                                            null == t
                                                ? void 0
                                                : t.markdown_description) && A,
                                dest: null == r ? void 0 : r.dest,
                                fastestStore: null == r ? void 0 : r.wh,
                                feedbacks:
                                    null !=
                                    (D = null == r ? void 0 : r.feedbacks)
                                        ? D
                                        : 0,
                                specs: wb.xnm.convertOptionsToSpecs(
                                    null == t ? void 0 : t.options
                                ),
                                goodsName:
                                    null !=
                                    (O =
                                        null !=
                                        (B = null == t ? void 0 : t.imt_name)
                                            ? B
                                            : null == r
                                            ? void 0
                                            : r.name)
                                        ? O
                                        : "",
                                isActivationKey: -1 !== Rt.indexOf(Y),
                                isAlcohol:
                                    null !=
                                        (E =
                                            null == r ? void 0 : r.isAlcohol) &&
                                    E,
                                isPostpaidBooking:
                                    null !=
                                        (x =
                                            null == r
                                                ? void 0
                                                : r.isPostpaidBooking) && x,
                                isBooking:
                                    null !=
                                        (L =
                                            null == r ? void 0 : r.isBooking) &&
                                    L,
                                isAutoplayingVideo:
                                    null !=
                                        (F =
                                            null ==
                                            (j = null == t ? void 0 : t.media)
                                                ? void 0
                                                : j.is_autoplaying_video) && F,
                                isDataLoaded: null != t,
                                isDetailsLoaded: !0,
                                isDigital:
                                    null !=
                                        (N =
                                            null == r ? void 0 : r.isDigital) &&
                                    N,
                                isPreorder:
                                    5772 === (null == r ? void 0 : r.brandId) &&
                                    wb.settings.preOrderList.includes(e),
                                isPrepaid: null == r ? void 0 : r.isPrepaid,
                                isVideo: 5105 === Y,
                                hasVideo:
                                    null !=
                                        (R =
                                            null ==
                                            (W = null == t ? void 0 : t.media)
                                                ? void 0
                                                : W.has_video) && R,
                                isBestQualityVideo:
                                    null !=
                                        (H =
                                            null ==
                                            (U = null == t ? void 0 : t.media)
                                                ? void 0
                                                : U.is_best_quality_video) && H,
                                hasRich:
                                    null !=
                                        (q = null == t ? void 0 : t.has_rich) &&
                                    q,
                                hasImageTags:
                                    null !=
                                        (z =
                                            (null == t
                                                ? void 0
                                                : t.enable_tags) &&
                                            (null == t
                                                ? void 0
                                                : t.has_photo_tags)) && z,
                                kindId:
                                    null != (V = null == r ? void 0 : r.kindId)
                                        ? V
                                        : 0,
                                nmId: e,
                                nonRefundable:
                                    (null == r ? void 0 : r.isUnrefusable) ||
                                    wb.xnm.setNoRefund(Y),
                                panelPromoId:
                                    null == r ? void 0 : r.panelPromoId,
                                picsCount: re,
                                bestQualityPics: se,
                                promoText: null == r ? void 0 : r.promoTextCard,
                                promotions: null == r ? void 0 : r.promotions,
                                subjectId: Y,
                                subjectName: ee,
                                subjectParent: te,
                                subjectParentId: Z,
                                sizes: this.fillSizes(r, t),
                                sizeTable: t ? this.fillSizeTable(t) : null,
                                showMinDetails: !Vt.includes(Z),
                                reviewRating:
                                    null == r ? void 0 : r.reviewRating,
                                star:
                                    null != (G = null == r ? void 0 : r.rating)
                                        ? G
                                        : 0,
                                urlForReccomendations: `/recommendation/catalog?type=visuallysimilar&forproduct=${e}&excludeNms=true`,
                                supplier: $.views.helpers.supplierFineName(
                                    null == r ? void 0 : r.supplier,
                                    null == r ? void 0 : r.brandId
                                ),
                                supplierId: null == r ? void 0 : r.supplierId,
                                supplierRating:
                                    null == r ? void 0 : r.supplierRating,
                                supplierFlags:
                                    null == r ? void 0 : r.supplierFlags,
                                premiumSale: null == r ? void 0 : r.premiumSale,
                                premiumSalePercent:
                                    null == r ? void 0 : r.premiumSalePercent,
                                showRedPrice: wb.xnm.isRedPrice(
                                    null == r ? void 0 : r.panelPromoId
                                ),
                                whDtype: null == r ? void 0 : r.dtype,
                                expandedRichContent: !!(
                                    4 &
                                    ((null == r ? void 0 : r.supplierFlags) ||
                                        0)
                                ),
                                is2025LogisticCost: r.is2025LogisticCost,
                                cashbackPercent:
                                    null == r ? void 0 : r.cashbackPercent,
                            };
                        r &&
                            wb.settings.b2bMode &&
                            ((le.isVatRefundable = wb.xnm.isVatRefundable(
                                r.viewFlags
                            )),
                            (le.vatPercent = wb.xnm.getVatPercent(
                                r.viewFlags
                            ))),
                            (le.allSizesSoldOut =
                                null !=
                                    (K =
                                        null == (Q = le.sizes)
                                            ? void 0
                                            : Q.every((e) => e.isSoldOut)) &&
                                K);
                        const ce = null == r ? void 0 : r.price,
                            ue =
                                !le.allSizesSoldOut &&
                                (null == ce ? void 0 : ce.total) > 0;
                        return (
                            this.fillIsChooseColor(t, le),
                            (le.price = {
                                price:
                                    ue && (null == ce ? void 0 : ce.basic)
                                        ? ce.basic / 100
                                        : 0,
                                salePrice:
                                    ue && (null == ce ? void 0 : ce.total)
                                        ? ce.priceToShow / 100
                                        : 0,
                                priceForBasket:
                                    ue &&
                                    (null == ce ? void 0 : ce.priceForBasket)
                                        ? ce.priceForBasket / 100
                                        : 0,
                                sale: ue ? (null == ce ? void 0 : ce.sale) : 0,
                                priceDiff:
                                    !!ue && (null == r ? void 0 : r.diffPrice),
                                logisticsCost:
                                    null == ce ? void 0 : ce.logistics,
                                returnCost: null == ce ? void 0 : ce.return,
                                soldOut: le.allSizesSoldOut,
                                paymentDiscountAmount:
                                    null == ce
                                        ? void 0
                                        : ce.paymentDiscountAmount,
                                productPrice:
                                    (null == ce ? void 0 : ce.product) / 100,
                            }),
                            (le.sort = 0),
                            (le.quantity = 0),
                            le.sizes &&
                                (null == (J = le.sizes) ? void 0 : J.length) >
                                    0 &&
                                (1 === le.sizes.length
                                    ? ((le.quantity = le.sizes[0].quantity),
                                      (le.sort = le.quantity > 0 ? 1 : 0))
                                    : le.sizes.reduce((e, t) => {
                                          (le.quantity += t.quantity),
                                              (le.sort += +(t.quantity > 0));
                                      }, {})),
                            (le.supplierDeliveryInfo = {
                                time1: null == r ? void 0 : r.time1,
                                time2: null == r ? void 0 : r.time2,
                                storeId: null == r ? void 0 : r.wh,
                            }),
                            r &&
                                ((le.viewFlags = r.viewFlags),
                                (le.shouldShowOriginalMark =
                                    !ne && !!(8 & r.viewFlags)),
                                (le.hideMultipleSellers =
                                    !!(
                                        r.supplierFlags && 2 & r.supplierFlags
                                    ) &&
                                    !!(null == (X = wb.global)
                                        ? void 0
                                        : X.settings.switches
                                              .hideMultipleSellersLever))),
                            (null == r ? void 0 : r.panelPromoId) &&
                                this.setCanShowThermometer(r.panelPromoId, le),
                            le
                        );
                    }
                    fillBaseProductCardFromX(e, t, r) {
                        var s, n, o, i, a, l, c, u;
                        const d = this.fillGroupedAddedOptions(e);
                        return {
                            imtId:
                                null !=
                                (n =
                                    null != (s = null == e ? void 0 : e.imt_id)
                                        ? s
                                        : null == t
                                        ? void 0
                                        : t.root)
                                    ? n
                                    : 0,
                            groupedAddedOptions: d,
                            miniAddedOptions: this.fillMiniGroupedAddedOptions(
                                d,
                                r || t.sizes.length > 1 ? 4 : 6
                            ),
                            nomenclatures: [],
                            promoTemplateUfu:
                                null !=
                                (a =
                                    null ==
                                    (i =
                                        null ==
                                        (o = null == e ? void 0 : e.media)
                                            ? void 0
                                            : o.promo_url)
                                        ? void 0
                                        : i.replace(/^\/+|\/+$/g, ""))
                                    ? a
                                    : null,
                            supplierDeliveryInfo: {
                                time1:
                                    null != (l = null == t ? void 0 : t.time1)
                                        ? l
                                        : null,
                                time2:
                                    null != (c = null == t ? void 0 : t.time2)
                                        ? c
                                        : null,
                                storeId:
                                    null != (u = null == t ? void 0 : t.wh)
                                        ? u
                                        : null,
                            },
                        };
                    }
                    fillSizes(e, t) {
                        var r;
                        return e && e.sizes
                            ? e.sizes
                                  .sort((e, t) => e.rank - t.rank)
                                  .map((r) => {
                                      var s, n, o, i, a, l, c;
                                      const u = [],
                                          d =
                                              null ==
                                              (n =
                                                  null ==
                                                  (s =
                                                      null == t
                                                          ? void 0
                                                          : t.sizes_table)
                                                      ? void 0
                                                      : s.values)
                                                  ? void 0
                                                  : n.find(
                                                        (e) =>
                                                            e.chrt_id ===
                                                            r.optionId
                                                    );
                                      if (
                                          (null == d ? void 0 : d.details) &&
                                          (null ==
                                          (o =
                                              null == t
                                                  ? void 0
                                                  : t.sizes_table.details_props)
                                              ? void 0
                                              : o.length) === d.details.length
                                      )
                                          for (
                                              let e = 0;
                                              e <
                                              t.sizes_table.details_props
                                                  .length;
                                              e++
                                          ) {
                                              if (
                                                  "RU" ===
                                                      t.sizes_table
                                                          .details_props[e] ||
                                                  "EU" ===
                                                      t.sizes_table
                                                          .details_props[e]
                                              )
                                                  continue;
                                              const r = {
                                                  name:
                                                      null == t
                                                          ? void 0
                                                          : t.sizes_table
                                                                .details_props[
                                                                e
                                                            ],
                                                  value:
                                                      "" !== d.details[e]
                                                          ? d.details[e]
                                                          : "-",
                                              };
                                              u.push(r);
                                          }
                                      const p = null == e ? void 0 : e.price,
                                          h =
                                              null !=
                                              (a =
                                                  null == (i = r.price)
                                                      ? void 0
                                                      : i.total)
                                                  ? a
                                                  : p.total;
                                      let m = 0;
                                      h > 0 &&
                                          (null == (l = r.stocks)
                                              ? void 0
                                              : l.length) > 0 &&
                                          (1 === r.stocks.length
                                              ? (m = r.stocks[0].qty)
                                              : r.stocks.reduce(
                                                    (e, t) => (m += t.qty),
                                                    0
                                                ));
                                      const g =
                                              m > 0
                                                  ? null == (c = r.stocks)
                                                      ? void 0
                                                      : c.map((e) => e.wh)
                                                  : null,
                                          b = {
                                              characteristicId: r.optionId,
                                              sizeName: r.origName,
                                              sizeNameRus: r.name,
                                              dimensions: u,
                                              quantity: m,
                                              stocks: r.stocks,
                                              storeIds: g,
                                              isSoldOut: 0 === m,
                                              lowQuantity: m < 3 && m > 0,
                                              deliveryHours:
                                                  (r.time1 || 0) +
                                                  (r.time2 || 0),
                                              fastestStore: r.wh,
                                              payloadV2: r.payload,
                                              saleConditions: r.saleConditions,
                                              whDtype: r.dtype,
                                              isForeign:
                                                  r.dtype && !!(32 & r.dtype),
                                          };
                                      return (
                                          m > 0 &&
                                              r.price &&
                                              ((b.price = {
                                                  price: r.price.basic
                                                      ? r.price.basic / 100
                                                      : 0,
                                                  salePrice: r.price.total
                                                      ? r.price.priceToShow /
                                                        100
                                                      : 0,
                                                  priceForBasket: r.price
                                                      .priceForBasket
                                                      ? r.price.priceForBasket /
                                                        100
                                                      : 0,
                                                  sale: r.price.sale,
                                                  logisticsCost:
                                                      r.price.logistics,
                                                  returnCost: r.price.return,
                                                  paymentDiscountAmount:
                                                      r.price
                                                          .paymentDiscountAmount,
                                                  productPrice:
                                                      r.price.product / 100,
                                              }),
                                              e.panelPromoId &&
                                                  this.setCanShowThermometer(
                                                      e.panelPromoId,
                                                      b
                                                  )),
                                          b
                                      );
                                  })
                            : (
                                  null == (r = null == t ? void 0 : t.data)
                                      ? void 0
                                      : r.chrt_ids
                              )
                            ? t.data.chrt_ids.map((e) => {
                                  var r, s, n;
                                  const o =
                                          null ==
                                          (r =
                                              null == t
                                                  ? void 0
                                                  : t.sizes_table)
                                              ? void 0
                                              : r.values.find(
                                                    (t) => t.chrt_id === e
                                                ),
                                      i = [];
                                  if (o) {
                                      const e =
                                          null ==
                                          (s =
                                              null == t
                                                  ? void 0
                                                  : t.sizes_table)
                                              ? void 0
                                              : s.values.find(
                                                    (e) =>
                                                        e.chrt_id === o.optionId
                                                );
                                      if (
                                          (null == e ? void 0 : e.details) &&
                                          (null ==
                                          (n = t.sizes_table.details_props)
                                              ? void 0
                                              : n.length) === e.details.length
                                      )
                                          for (
                                              let r = 0;
                                              r <
                                              t.sizes_table.details_props
                                                  .length;
                                              r++
                                          ) {
                                              if (
                                                  "RU" ===
                                                      t.sizes_table
                                                          .details_props[r] ||
                                                  "EU" ===
                                                      t.sizes_table
                                                          .details_props[r]
                                              )
                                                  continue;
                                              const s = {
                                                  name: t.sizes_table
                                                      .details_props[r],
                                                  value:
                                                      "" !== e.details[r]
                                                          ? e.details[r]
                                                          : "-",
                                              };
                                              i.push(s);
                                          }
                                  }
                                  return {
                                      characteristicId: e,
                                      sizeName: "0",
                                      sizeNameRus: "",
                                      dimensions: i,
                                      quantity: 0,
                                      isSoldOut: !0,
                                  };
                              })
                            : null;
                    }
                    fillSizeTable(e) {
                        var t;
                        const r = [];
                        if (
                            (null == e ? void 0 : e.sizes_table) &&
                            (null == (t = e.sizes_table)
                                ? void 0
                                : t.details_props)
                        ) {
                            const t = e.sizes_table.details_props.indexOf("RU"),
                                s = e.sizes_table.details_props.indexOf("EU"),
                                n = {
                                    row: [],
                                };
                            let o = 0;
                            t >= 0 &&
                                (n.row[o++] = wb.i18n.t("common.russianSize")),
                                (n.row[o++] = wb.i18n.t(
                                    "common.manufactureSize"
                                ));
                            for (
                                let r = 0;
                                r < e.sizes_table.details_props.length;
                                r++
                            ) {
                                if (r === t || r === s) continue;
                                const i = e.sizes_table.details_props[r];
                                n.row[o++] = "" !== i ? i : "-";
                            }
                            r.push(n),
                                e.sizes_table.values.forEach((e) => {
                                    var n;
                                    let o = 0;
                                    const i = {
                                        chrtId: null != (n = e.chrt_id) ? n : 0,
                                        row: [],
                                    };
                                    t >= 0 && (i.row[o++] = e.details[t]),
                                        (i.row[o++] = e.tech_size);
                                    const a =
                                        (-1 !== t ? 1 : 0) + (-1 !== s ? 1 : 0);
                                    if (e.details.length > a)
                                        for (
                                            let r = 0;
                                            r < e.details.length;
                                            r++
                                        )
                                            r !== t &&
                                                r !== s &&
                                                (i.row[o++] =
                                                    "" !== e.details[r]
                                                        ? e.details[r]
                                                        : "-");
                                    r.push(i);
                                });
                        }
                        return r;
                    }
                    fillGroupedAddedOptions(e) {
                        var t, r, s, n, o, i, a;
                        const l =
                            null !=
                            (r =
                                null ==
                                (t = null == e ? void 0 : e.grouped_options)
                                    ? void 0
                                    : t.map((e) => {
                                          var t;
                                          return {
                                              categoryName: e.group_name,
                                              addedOptions:
                                                  null == (t = e.options)
                                                      ? void 0
                                                      : t.map((e) => ({
                                                            property: e.name,
                                                            subProperty:
                                                                e.value,
                                                        })),
                                          };
                                      }))
                                ? r
                                : [];
                        let c =
                            null == l
                                ? void 0
                                : l.find(
                                      (e) =>
                                          "Дополнительная информация" ===
                                          (null == e ? void 0 : e.categoryName)
                                  );
                        return (
                            (null != c && null != c.addedOptions) ||
                                ((c = {
                                    categoryName: wb.i18n.t(
                                        "productCard.additionalInfo"
                                    ),
                                    addedOptions: [],
                                }),
                                l.push(c)),
                            (null == (s = null == e ? void 0 : e.options)
                                ? void 0
                                : s.find((e) => "Состав" === e.name)) ||
                                null == (null == e ? void 0 : e.compositions) ||
                                c.addedOptions.unshift({
                                    property: wb.i18n.t(
                                        "productCard.structure"
                                    ),
                                    subProperty:
                                        null ==
                                        (n =
                                            null == e ? void 0 : e.compositions)
                                            ? void 0
                                            : n
                                                  .map((e) =>
                                                      e.value
                                                          ? `${e.name} ${e.value}%`
                                                          : e.name
                                                  )
                                                  .join("; "),
                                }),
                            (null == (o = null == e ? void 0 : e.options)
                                ? void 0
                                : o.find((e) => "Комплектация" === e.name)) ||
                                null == (null == e ? void 0 : e.contents) ||
                                c.addedOptions.push({
                                    property: wb.i18n.t(
                                        "productCard.equipment"
                                    ),
                                    subProperty: e.contents,
                                }),
                            (null == (i = null == e ? void 0 : e.options)
                                ? void 0
                                : i.find((e) => "Пол" === e.name)) ||
                                null == (null == e ? void 0 : e.kinds) ||
                                c.addedOptions.push({
                                    property: wb.i18n.t("productCard.gender"),
                                    subProperty: e.kinds.join(", "),
                                }),
                            !(null == (a = null == e ? void 0 : e.options)
                                ? void 0
                                : a.find((e) => "Сезон" === e.name)) &&
                                (null == e ? void 0 : e.season) &&
                                c.addedOptions.push({
                                    property: wb.i18n.t("productCard.season"),
                                    subProperty: e.season,
                                }),
                            l.filter((e) => e.addedOptions.length > 0)
                        );
                    }
                    fillIsChooseColor(e, t) {
                        var r, s, n, o, i, a, l;
                        const c =
                                null == (r = null == e ? void 0 : e.options)
                                    ? void 0
                                    : r.findIndex(
                                          (e) =>
                                              "база для колеровки" ===
                                                  e.name.toLowerCase() &&
                                              e.value
                                      ),
                            u =
                                null == (s = null == e ? void 0 : e.options)
                                    ? void 0
                                    : s.find(
                                          (e) =>
                                              "есть колеровка" ===
                                                  e.name.toLowerCase() &&
                                              "да" === e.value.toLowerCase()
                                      ),
                            d =
                                null == (n = null == e ? void 0 : e.options)
                                    ? void 0
                                    : n.find(
                                          (e) =>
                                              "каталог цветов" ===
                                                  e.name.toLowerCase() &&
                                              e.value
                                                  .toLowerCase()
                                                  .split(/[; ]+/)
                                                  .includes("ncs")
                                      );
                        t.sizes = null != (o = t.sizes) ? o : [];
                        const p =
                            null ==
                            (a = null == (i = t.sizes[0]) ? void 0 : i.stocks)
                                ? void 0
                                : a.every((e) => [1, 2, 3].includes(e.dtype));
                        if (c && c > 0 && u && d && p) {
                            if (
                                !t.sizes
                                    .map((e) =>
                                        wb.xnm.expandSaleConditions({}, e)
                                    )
                                    .some(
                                        (e) =>
                                            e.isUnrefusable &&
                                            e.isPrepaid &&
                                            (e.isUnreturnable ||
                                                e.isVerificationReturn)
                                    )
                            )
                                return;
                            const r =
                                    null ==
                                    (l = null == e ? void 0 : e.options[c])
                                        ? void 0
                                        : l.value.toLowerCase(),
                                s = ["a", "1", "bw"],
                                n = ["c", "3", "bc", "d"];
                            r &&
                                ((t.colorBaseType = r.toUpperCase()),
                                s.includes(r)
                                    ? (t.colorGroupBaseType = "A")
                                    : n.includes(r) &&
                                      (t.colorGroupBaseType = "C"));
                            const o =
                                WbSpaModel.prototype.$services.cartService.get()
                                    .basketItems;
                            this.setChooseColorInBasket(o, t);
                        }
                    }
                    fillProductCardMetaTags(e) {
                        const t = {};
                        return (
                            e.nomenclatures.map((e) => {
                                const r = `${e.goodsName} ${e.brandName} ${e.nmId}`;
                                t[e.nmId] = {
                                    title: wb.i18n.t("lk.cardMetaTags.title", {
                                        title: r,
                                    }),
                                    description: wb.i18n.t(
                                        "lk.cardMetaTags.desc",
                                        {
                                            title: r,
                                        }
                                    ),
                                };
                            }),
                            t
                        );
                    }
                    fillMiniGroupedAddedOptions(e, t = 4) {
                        const r = [];
                        if (!e) return [];
                        for (let s = 0; s < e.length; s++) {
                            const n = e[s].addedOptions
                                .slice(0, t)
                                .filter((e) => "Цвет" !== e.property);
                            if ((r.push(...n), (t -= n.length) < 1)) break;
                        }
                        return r;
                    }
                    checkGroupedAddedOptionsExist(e) {
                        return (
                            (null == e ? void 0 : e.length) > 0 &&
                            e.some((e) => {
                                var t;
                                return (
                                    (null == (t = e.addedOptions)
                                        ? void 0
                                        : t.length) > 0
                                );
                            })
                        );
                    }
                    addDigitalLinks(e, t) {
                        var r, s;
                        e.digitalLinks = {
                            audio:
                                null == (r = null == t ? void 0 : t.media)
                                    ? void 0
                                    : r.audiobook,
                            electronic:
                                null == (s = null == t ? void 0 : t.media)
                                    ? void 0
                                    : s.electronic_book,
                        };
                    }
                    colorLimiter(e, t) {
                        if (null === t || t.length < 60) return t;
                        if (t.indexOf(e) < 60) return t.slice(0, 60);
                        const r = [e];
                        return r.push(...t.slice(0, 59)), r;
                    }
                    setCanFit(e, t) {
                        return -1 !== Ut.indexOf(t) && -1 === Ht.indexOf(e);
                    }
                    setVerifiedCertificate(e) {
                        var t, r;
                        return (
                            null == (t = null == e ? void 0 : e.certificate)
                                ? void 0
                                : t.verified
                        )
                            ? (null == (r = e.data) ? void 0 : r.subject_id) &&
                              zt.indexOf(e.data.subject_id) >= 0
                                ? 2
                                : 1
                            : 0;
                    }
                    setSelectedPrice(e) {
                        var t;
                        e.selectedPrice = (
                            null == (t = e.selectedSize) ? void 0 : t.price
                        )
                            ? e.selectedSize.price
                            : e.price;
                    }
                    _setCashbackAmount(e) {
                        var t, r, s, n, o, i;
                        if (
                            void 0 !==
                                (null == e ? void 0 : e.cashbackPercent) &&
                            (null == e ? void 0 : e.cashbackPercent) > 0 &&
                            void 0 !==
                                (null == (t = e.selectedPrice)
                                    ? void 0
                                    : t.salePrice) &&
                            (null == (r = e.selectedPrice)
                                ? void 0
                                : r.salePrice) > 0
                        ) {
                            const t = WbSpaModel.prototype.$user.getCurrency(),
                                r =
                                    (null !=
                                    (s = null == e ? void 0 : e.premiumSale)
                                        ? s
                                        : 0) > 0 &&
                                    (null ==
                                    (n =
                                        WbSpaModel.prototype.$user.getUserGradeFromCache())
                                        ? void 0
                                        : n.isPremium)
                                        ? wb.priceHelper.calculateDiscount(
                                              (null == (o = e.selectedPrice)
                                                  ? void 0
                                                  : o.productPrice) || 0,
                                              e.premiumSale,
                                              t
                                          )
                                        : 0;
                            e.cashbackAmount = wb.priceHelper.calculateDiscount(
                                (null == (i = e.selectedPrice)
                                    ? void 0
                                    : i.productPrice) - r,
                                e.cashbackPercent,
                                t
                            );
                        }
                    }
                    setButtons(e) {
                        var t, r, s;
                        (e.addToBasketEnable = !(
                            (null == (t = e.selectedSize)
                                ? void 0
                                : t.isSoldOut) || e.allSizesSoldOut
                        )),
                            (e.addToPonedEnable = !(
                                (null == (r = e.selectedSize)
                                    ? void 0
                                    : r.isSoldOut) || e.allSizesSoldOut
                            )),
                            (e.addToWaitingListEnable =
                                (null == (s = e.selectedSize)
                                    ? void 0
                                    : s.isSoldOut) || e.allSizesSoldOut),
                            (e.addedToBasket = !1),
                            (e.addedToWl = !1);
                    }
                    setCanShowThermometer(e, t) {
                        !WbSpaModel.prototype.$auth.isAuth ||
                            !t.quantity ||
                            t.quantity > 1e3 ||
                            (WbSpaModel.prototype.$promotionsHelper.isThermometerNeeded(
                                e
                            ) &&
                                (t.showThermometer = !0));
                    }
                }
                var Kt = class {
                    constructor(e, t) {
                        (this.publicUrl =
                            "https://banners-website.wildberries.ru/public/v1/banners"),
                            (this.enums = e),
                            (this.helper = t);
                    }
                    async getBannersFromApi(e) {
                        var t;
                        const r =
                            null != (t = e.appType) ? t : this._getAppType();
                        let s = await this._getBannersFromApi(
                            e.urlType,
                            r,
                            e.menuId,
                            e.brandId
                        );
                        return (
                            (s = s
                                .filter((e) => null != e)
                                .map((e) =>
                                    this.helper.convertToBannerItem(e)
                                )),
                            s.sort((e, t) => {
                                var r, s;
                                return (
                                    (null != (r = e.placementOptions.sort)
                                        ? r
                                        : 0) -
                                    (null != (s = t.placementOptions.sort)
                                        ? s
                                        : 0)
                                );
                            }),
                            s
                        );
                    }
                    async _getBannersFromApi(e, t, r, s) {
                        let n =
                            await WbSpaModel.prototype.$user.getLocationData();
                        const o = WbSpaModel.prototype.$user.getUserInfo(),
                            i = this._getDisplayType(o),
                            a = this._getCountry(),
                            l =
                                "ka" === wb.currentLanguage
                                    ? "ge"
                                    : wb.currentLanguage,
                            c = new URLSearchParams({
                                urltype: e,
                                apptype: t,
                                displaytype: i,
                                longitude: n.longitude,
                                latitude: n.latitude,
                                country: a,
                                culture: l,
                            });
                        WbSpaModel.prototype.$analitic.appendSplitInfoV2(
                            c,
                            "banner"
                        ),
                            r && c.append("menuid", r),
                            s && c.append("brandId", s);
                        const u = `${this.publicUrl}?${new URLSearchParams(c)}`;
                        let d =
                            await WbSpaModel.prototype.$httpClient.fetchBasicJSON(
                                u,
                                {},
                                {
                                    timeout: 1e4,
                                    nullOnError: !0,
                                    addAuthHeader: !0,
                                }
                            );
                        if (
                            ((d && (null == d ? void 0 : d.length)) ||
                                (d = await this._getDefaultBannersFromStatic(
                                    e,
                                    t,
                                    r
                                )),
                            d && WbSpaModel.prototype.$apiSupport.webpImage)
                        )
                            for (const e of d)
                                e.Src &&
                                    (e.Src = e.Src.replace(".jpg", ".webp")),
                                    e.src &&
                                        (e.src = e.src.replace(
                                            ".jpg",
                                            ".webp"
                                        ));
                        return (null == d ? void 0 : d.length) > 0 ? d : [];
                    }
                    async _getDefaultBannersFromStatic(e, t, r) {
                        const s = this._getBannersTypeForStatic(e);
                        if (!s) return null;
                        const n = r
                            ? `banners-${s}-${wb.settings.currentLocale}-${r}-v1.json`
                            : `banners-${s}-${wb.settings.currentLocale}-v1.json`;
                        try {
                            let r =
                                await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(
                                    n,
                                    3e3
                                );
                            return (
                                t == this.enums.appType.desktop
                                    ? (r =
                                          null == r
                                              ? void 0
                                              : r.filter(
                                                    (e) =>
                                                        e.applicationType ==
                                                            this.enums.appType
                                                                .desktop ||
                                                        225 ==
                                                            e.applicationType ||
                                                        227 == e.applicationType
                                                ))
                                    : t == this.enums.appType.mobile &&
                                      (r =
                                          null == r
                                              ? void 0
                                              : r.filter(
                                                    (e) =>
                                                        e.applicationType ==
                                                            this.enums.appType
                                                                .mobile ||
                                                        227 == e.applicationType
                                                )),
                                e == this.enums.urlType.promotion &&
                                    t == this.enums.appType.desktop &&
                                    (null == r ||
                                        r.forEach((e) => {
                                            e.src =
                                                this.helper.createBannerPathByResolution(
                                                    e.src,
                                                    "c660x210"
                                                );
                                        })),
                                r
                            );
                        } catch (e) {
                            return null;
                        }
                    }
                    _getBannersTypeForStatic(e) {
                        switch (e) {
                            case this.enums.urlType.main:
                                return "main";
                            case this.enums.urlType.promotion:
                                return "promo";
                            case this.enums.urlType.cataloger:
                                return "catalog";
                        }
                    }
                    _getAppType() {
                        return "d" == wb.settings.displayMode
                            ? this.enums.appType.desktop
                            : this.enums.appType.mobile;
                    }
                    _getDisplayType(e) {
                        return e.isAuth
                            ? this.enums.bannerDisplayType.forAuth
                            : this.enums.bannerDisplayType.forNotAuth;
                    }
                    _getCountry() {
                        var e;
                        return (
                            1 <<
                            ((null !=
                            (e =
                                this.enums.country[
                                    WbSpaModel.prototype.$user.getLocale()
                                ])
                                ? e
                                : 0) -
                                1)
                        );
                    }
                };
                class Jt {
                    constructor(e, t, r, s) {
                        (this.urlType = e),
                            (this.menuId = r),
                            (this.brandId = s),
                            (this.appType = t);
                    }
                }
                var Xt = class {
                    constructor(e, t) {
                        (this.enums = e),
                            (this.helper = t),
                            (this.api = new Kt(this.enums, this.helper));
                    }
                    async getBannersForHomePageAsync() {
                        const e = await this.api.getBannersFromApi(
                                new Jt(
                                    this.enums.urlType.main,
                                    this.enums.appType.desktopAndMobile
                                )
                            ),
                            t = [
                                this.enums.locationType._215x168,
                                this.enums.locationType._705x394,
                                this.enums.locationType._460x394,
                                this.enums.locationType._364x668,
                            ],
                            r = [],
                            s = [],
                            n = [],
                            o = [];
                        let i = [];
                        const a = [];
                        let l = [];
                        return (
                            null == e ||
                                e.forEach((e) => {
                                    if ("wb travel" === e.alt) {
                                        if (
                                            !WbSpaModel.prototype.$isTravelEnabled()
                                        )
                                            return;
                                    }
                                    e.locationType ===
                                    this.enums.locationType._1440x168
                                        ? e.applicationType ===
                                          this.enums.appType.desktop
                                            ? r.push(e)
                                            : e.applicationType ===
                                                  this.enums.appType.mobile &&
                                              i.push(e)
                                        : e.locationType ===
                                          this.enums.locationType.mainInfo
                                        ? e.applicationType ===
                                          this.enums.appType.desktop
                                            ? n.push(e)
                                            : e.applicationType ===
                                                  this.enums.appType.mobile &&
                                              o.push(e)
                                        : -1 !== t.indexOf(e.locationType)
                                        ? s.push(e)
                                        : e.locationType ===
                                              this.enums.locationType
                                                  .footerSocial &&
                                          (e.applicationType ===
                                          this.enums.appType.desktop
                                              ? a.push(e)
                                              : e.applicationType ===
                                                    this.enums.appType.mobile &&
                                                l.push(e));
                                }),
                            i.length || (i = r),
                            l.length || (l = a),
                            {
                                mainBanners: r,
                                mainMobileBanners: i,
                                contentBanners: s,
                                mainInfoBanners: n,
                                mainInfoMobileBanners: o,
                                footerBanners: a,
                                footerMobileBanners: l,
                            }
                        );
                    }
                    getPromoBanners() {
                        return this._getPromotionBanners();
                    }
                    async _getPromotionBanners() {
                        const e = (
                            await this.api.getBannersFromApi(
                                new Jt(
                                    this.enums.urlType.promotion,
                                    this.enums.appType.desktop
                                )
                            )
                        ).filter(
                            (e) =>
                                e.locationType ==
                                this.enums.locationType._770x245
                        );
                        return this.helper.dividePromotionBanners(e);
                    }
                    async getPromoCatalogBanners(e, t = !1) {
                        return (
                            await this.api.getBannersFromApi(
                                new Jt(
                                    this.enums.urlType.promotionCatalog,
                                    t
                                        ? this.enums.appType.mobile
                                        : this.enums.appType.desktop,
                                    e
                                )
                            )
                        ).filter(
                            (e) =>
                                e.locationType ===
                                this.enums.locationType.promo_strip
                        );
                    }
                    async getPromotionSpecialBanners(e = !1) {
                        const t = await this.api.getBannersFromApi(
                                new Jt(
                                    this.enums.urlType.promotionCatalog,
                                    e
                                        ? this.enums.appType.mobile
                                        : this.enums.appType.desktop
                                )
                            ),
                            r = [],
                            s = [];
                        return (
                            t.forEach((e) => {
                                e.locationType ===
                                    this.enums.locationType.promo_strip &&
                                    r.push(e),
                                    e.locationType ===
                                        this.enums.locationType.special_promo &&
                                        s.push(e);
                            }),
                            [r, s]
                        );
                    }
                    async getTopMenuBanners() {
                        const e = await this.api.getBannersFromApi(
                                new Jt(
                                    this.enums.urlType.default,
                                    this.enums.appType.desktop
                                )
                            ),
                            t = this._menuSingleBanners(e),
                            r = await this._getMenuPromotionBanners(),
                            s = t;
                        return (
                            (null == r ? void 0 : r.length) > 0 &&
                                (s[2192] = r),
                            s
                        );
                    }
                    _menuSingleBanners(e) {
                        return e.reduce((e, t) => {
                            var r;
                            if (
                                t.locationType !=
                                this.enums.locationType.menu_banners
                            )
                                return e;
                            const s =
                                null != (r = t.placementOptions.menuID) ? r : 0;
                            return (
                                e.hasOwnProperty(s) || (e[s] = []),
                                e[s].push(t),
                                e
                            );
                        }, {});
                    }
                    async _getMenuPromotionBanners() {
                        const e = await this._getPromotionBanners(),
                            t = e.leftBanners
                                .slice(0, 5)
                                .concat(e.rightBanners.slice(0, 5));
                        return (
                            null == t ||
                                t.forEach((e) => {
                                    (e.src =
                                        this.helper.createBannerPathByResolution(
                                            e.src,
                                            "t305x245q"
                                        )),
                                        (e.absoluteUrl = e.getAbsoluteUrl()),
                                        (e.absoluteUrlPb = e.getAbsoluteUrl(
                                            !0
                                        ));
                                }),
                            t
                        );
                    }
                    async getCatalogBanners(e, t, r = !1) {
                        var s, n;
                        this.menuIdEnum || (this.menuIdEnum = t);
                        const o = await this.api.getBannersFromApi(
                                new Jt(
                                    this.enums.urlType.cataloger,
                                    this.enums.appType.desktop,
                                    e
                                )
                            ),
                            i = this._getBannersForCatalog(o, e);
                        let a = i.firstCarousel,
                            l = i.secondCarousel;
                        if (r) {
                            const t = await this.api.getBannersFromApi(
                                    new Jt(
                                        this.enums.urlType.cataloger,
                                        this.enums.appType.mobile,
                                        e
                                    )
                                ),
                                r = this._getCatalogBigBanners(t);
                            (a =
                                (null == (s = r.firstCarousel)
                                    ? void 0
                                    : s.length) > 0
                                    ? r.firstCarousel
                                    : i.firstCarousel),
                                (l =
                                    (null == (n = r.secondCarousel)
                                        ? void 0
                                        : n.length) > 0
                                        ? r.secondCarousel
                                        : i.secondCarousel);
                        }
                        return {
                            mainBannersFirst: a,
                            mainBannersSecond: l,
                            verticalBanners: i.verticalBanners,
                            smallBanners: i.commonBanners,
                            seasonBanners: i.seasonBanners,
                        };
                    }
                    _getBannersForCatalog(e, t) {
                        if (!e) return [];
                        const { firstCarousel: r, secondCarousel: s } =
                                this._getCatalogBigBanners(e),
                            n = this._getCatalogVerticalBanners(e),
                            o = e.filter(
                                (e) =>
                                    e.locationType ==
                                    this.enums.locationType.small
                            );
                        return {
                            firstCarousel: r,
                            secondCarousel: s,
                            verticalBanners: n,
                            commonBanners: this._getCommonBanners(o, t),
                            seasonBanners: this._getSeasonBanners(o, t),
                        };
                    }
                    _getCommonBanners(e, t) {
                        const r = this._getCatalogBannersSortParams(t, !0);
                        return this.helper
                            .getBannersBySort(e, r)
                            .reduce((e, t) => {
                                const r = t.placementOptions.sort;
                                return (e[r] = [...(e[r] || []), t]), e;
                            }, {});
                    }
                    _getSeasonBanners(e, t) {
                        const r = this._getCatalogBannersSortParams(t);
                        return this.helper.getBannersBySort(e, r);
                    }
                    _getCatalogVerticalBanners(e) {
                        return e
                            .filter(
                                (e) =>
                                    e.locationType ==
                                    this.enums.locationType.vertical
                            )
                            .reduce((e, t) => {
                                const r = t.placementOptions.sort;
                                return (e[r] = [...(e[r] || []), t]), e;
                            }, {});
                    }
                    _getCatalogBigBanners(e) {
                        const t = e.filter(
                                (e) =>
                                    e.locationType ==
                                    this.enums.locationType.big
                            ),
                            r = [],
                            s = [];
                        return (
                            t.forEach((e) => {
                                e.placementOptions.sort < 100 && r.push(e),
                                    e.placementOptions.sort > 100 &&
                                        e.placementOptions.sort < 110 &&
                                        s.push(e);
                            }),
                            {
                                firstCarousel: r,
                                secondCarousel: s,
                            }
                        );
                    }
                    _getCatalogBannersSortParams(e, t) {
                        const r = {
                                onlyMarketingSortStart: null,
                                onlyMarketingSortEnd: null,
                                suppliersSortStart: null,
                                suppliersSortCount: null,
                            },
                            s = [
                                this.menuIdEnum.sport,
                                this.menuIdEnum.monocity,
                            ];
                        return (
                            t
                                ? -1 != s.indexOf(e)
                                    ? ((r.suppliersSortStart = 0),
                                      (r.suppliersSortCount = 3))
                                    : ((r.onlyMarketingSortStart = 0),
                                      (r.onlyMarketingSortEnd = 100),
                                      (r.suppliersSortStart = 100),
                                      (r.suppliersSortCount = 3))
                                : ((r.onlyMarketingSortStart = 50),
                                  (r.onlyMarketingSortEnd = 99)),
                            r
                        );
                    }
                };
                var Yt = class {
                    constructor() {
                        (this.appType = this._getAppType()),
                            (this.locationType = this._getLocationType()),
                            (this.urlType = this._getUrlType()),
                            (this.bannerDisplayType =
                                this._getBannerDisplayType()),
                            (this.country = this._getCountry()),
                            (this.ownerType = this._getOwnerType());
                    }
                    _getAppType() {
                        return {
                            desktop: 1,
                            mobile: 2,
                            desktopAndMobile: 3,
                        };
                    }
                    _getLocationType() {
                        return {
                            main: 42,
                            small: 38,
                            strip: 39,
                            _352x428: 60,
                            _305x245: 57,
                            _770x245: 59,
                            big: 41,
                            vertical: 36,
                            promo_strip: 61,
                            _1440x168: 62,
                            _215x168: 63,
                            _705x394: 64,
                            _460x394: 65,
                            _364x668: 66,
                            menu_banners: 73,
                            footerSocial: 80,
                            mainInfo: 81,
                            special_promo: 88,
                        };
                    }
                    _getUrlType() {
                        return {
                            main: 1024,
                            default: 0,
                            promotion: 16384,
                            cataloger: 1 << 22,
                            promotionCatalog: 62,
                        };
                    }
                    _getBannerDisplayType() {
                        return {
                            forAuth: 2,
                            forNotAuth: 3,
                        };
                    }
                    _getCountry() {
                        return {
                            ru: 1,
                            by: 2,
                            kz: 3,
                            am: 4,
                            kg: 5,
                            ge: 10,
                            uz: 13,
                            tj: 24,
                        };
                    }
                    _getOwnerType() {
                        return {
                            marketing: 0,
                            supplier: 1,
                        };
                    }
                };
                class Zt {
                    constructor(e) {
                        var t,
                            r,
                            s,
                            n,
                            o,
                            i,
                            a,
                            l,
                            c,
                            u,
                            d,
                            p,
                            h,
                            m,
                            g,
                            b,
                            y,
                            v,
                            f,
                            w,
                            S;
                        (this.id = null != (t = e.UID) ? t : e.uID),
                            (this.href = null != (r = e.Href) ? r : e.href),
                            (this.applicationType =
                                null != (s = e.ApplicationType)
                                    ? s
                                    : e.applicationType),
                            (this.locationType =
                                null != (n = e.LocationType)
                                    ? n
                                    : e.locationType),
                            (this.placementOptions = {
                                sort:
                                    null !=
                                    (a =
                                        null == (o = e.PlacementOptions)
                                            ? void 0
                                            : o.Sort)
                                        ? a
                                        : null == (i = e.placementOptions)
                                        ? void 0
                                        : i.sort,
                                menuID:
                                    null !=
                                    (u =
                                        null == (l = e.PlacementOptions)
                                            ? void 0
                                            : l.MenuID)
                                        ? u
                                        : null == (c = e.placementOptions)
                                        ? void 0
                                        : c.menuID,
                            }),
                            (this.src = null != (d = e.Src) ? d : e.src),
                            (this.alt = null != (p = e.Alt) ? p : e.alt),
                            (this.noFollow =
                                null != (h = e.NoFollow) ? h : e.noFollow),
                            (this.noIndex =
                                null != (m = e.NoIndex) ? m : e.noIndex),
                            (this.target =
                                null != (g = e.Target) ? g : e.target),
                            (this.ordBannerMark =
                                null != (b = e.OrdBannerMark)
                                    ? b
                                    : e.ordBannerMark);
                        const _ =
                            null != (y = e.AdditionalSections)
                                ? y
                                : e.additionalSections;
                        (this.bannerSelections =
                            null !=
                            (v = null == _ ? void 0 : _.map((e) => new er(e)))
                                ? v
                                : []),
                            (this.promoText =
                                null != (f = e.PromoText) ? f : e.promoText),
                            (this.promoTextLines =
                                null != (w = e.PromoTextLines)
                                    ? w
                                    : e.promoTextLines),
                            (this.owner =
                                null != (S = e.Provider) ? S : e.provider),
                            (this.statisticFields = new tr(e)),
                            (this.absoluteUrl = this.getAbsoluteUrl()),
                            (this.absoluteUrlPb = this.getAbsoluteUrl(!0)),
                            (this.link = this.getLink()),
                            (this.pixelSrc = e.PixelSrc);
                    }
                    getLink() {
                        if (0 === this.href.indexOf("https:"))
                            return new URL(this.href).href;
                        const e = new URL(this.href, window.location);
                        return (
                            e.searchParams.append("bid", this.id),
                            `${e.pathname}${e.search}`
                        );
                    }
                    getAbsoluteUrl(e) {
                        return -1 !==
                            this.src.toLowerCase().indexOf("wildberries")
                            ? this.src
                            : wb.helpers.url.urlStaticBasket(
                                  `crm-bnrs${this.src}`,
                                  1,
                                  e
                              );
                    }
                }
                class er {
                    constructor(e) {
                        var t, r, s, n, o;
                        (this.href = null != (t = e.Href) ? t : e.href),
                            (this.relativeXPos =
                                null != (r = e.RelativeXPos)
                                    ? r
                                    : e.relativeXPos),
                            (this.relativeYPos =
                                null != (s = e.RelativeYPos)
                                    ? s
                                    : e.relativeYPos),
                            (this.relativeHeight =
                                null != (n = e.RelativeHeight)
                                    ? n
                                    : e.relativeHeight),
                            (this.relativeWidth =
                                null != (o = e.RelativeWidth)
                                    ? o
                                    : e.relativeWidth);
                    }
                }
                class tr {
                    constructor(e) {
                        var t, r, s, n, o, i;
                        (this.urlType =
                            null != (t = e.URLType) ? t : e.uRLType),
                            (this.displayType =
                                null != (r = e.DisplayType)
                                    ? r
                                    : e.displayType),
                            (this.locationType =
                                null != (s = e.LocationType)
                                    ? s
                                    : e.locationType),
                            (this.sort =
                                null !=
                                (i =
                                    null == (n = e.PlacementOptions)
                                        ? void 0
                                        : n.Sort)
                                    ? i
                                    : null == (o = e.placementOptions)
                                    ? void 0
                                    : o.sort);
                    }
                }
                var rr = class {
                    constructor(e) {
                        (this.enums = e), (this.fillingGapsSortStart = 300);
                    }
                    convertToBannerItem(e) {
                        return new Zt(e);
                    }
                    createBannerPathByResolution(e, t) {
                        const r = t,
                            s = e.split("/").slice(-1);
                        return `/poster/${
                            "ka" === wb.currentLanguage
                                ? "ge"
                                : wb.currentLanguage
                        }/action2/${r}/${s}`;
                    }
                    dividePromotionBanners(e) {
                        const t = this._getBannersSoldToSuppliers(e, 100, 20),
                            r =
                                null == e
                                    ? void 0
                                    : e.filter(
                                          (e) =>
                                              e.owner ==
                                              this.enums.ownerType.marketing
                                      ),
                            s = r.filter((e) => e.placementOptions.sort < 100);
                        let { leftBanners: n = [], rightBanners: o = [] } =
                            this._createTwoSidesWithTheSameSize(r, s, t);
                        return (
                            (n = n.map((e) => e)),
                            (o = o.map((e) => e)),
                            {
                                leftBanners: n,
                                rightBanners: o,
                            }
                        );
                    }
                    getBannersBySort(e, t) {
                        const r = e.filter(
                                (e) =>
                                    e.owner == this.enums.ownerType.marketing &&
                                    e.placementOptions.sort >
                                        t.onlyMarketingSortStart &&
                                    e.placementOptions.sort <
                                        t.onlyMarketingSortEnd
                            ),
                            s = this._getBannersSoldToSuppliers(
                                e,
                                t.suppliersSortStart,
                                t.suppliersSortCount
                            );
                        return r.concat(s);
                    }
                    _getBannersSoldToSuppliers(e, t, r) {
                        if (!WbSpaModel.prototype.$helper.isNumber(t) || !r)
                            return [];
                        const s = e.filter(
                                (e) => e.owner == this.enums.ownerType.supplier
                            ),
                            n = e
                                .filter(
                                    (e) =>
                                        e.owner ==
                                            this.enums.ownerType.marketing &&
                                        e.placementOptions.sort > 200 &&
                                        e.placementOptions.sort <
                                            this.fillingGapsSortStart
                                )
                                .reduce((e, t) => {
                                    const r = t.placementOptions.sort;
                                    return e.set(r, [...(e.get(r) || []), t]);
                                }, new Map()),
                            o = s.reduce(
                                (e, t) => e.add(t.placementOptions.sort),
                                new Set()
                            );
                        for (let e = 1; e <= r; e++) {
                            const r = t + e;
                            if (!o.has(r)) {
                                const t = n.get(200 + e);
                                if ((null == t ? void 0 : t.length) > 0) {
                                    const e = t[0];
                                    (e.placementOptions.sort = r), s.push(e);
                                }
                            }
                        }
                        return s;
                    }
                    _createTwoSidesWithTheSameSize(e, t, r) {
                        const s = e.filter(
                            (e) =>
                                e.placementOptions.sort >=
                                this.fillingGapsSortStart
                        );
                        if (0 == s.length) return r;
                        var n = Math.max(t.length, r.length);
                        return (
                            this._fillGapsIfNeeded(t, n, s),
                            this._fillGapsIfNeeded(r, n, s),
                            {
                                leftBanners: t,
                                rightBanners: r,
                            }
                        );
                    }
                    _fillGapsIfNeeded(e, t, r) {
                        let s = t - e.length;
                        for (; s > 0 && r.length > 0; ) {
                            {
                                const t = r[0];
                                r.splice(0, 1), e.push(t);
                            }
                            s--;
                        }
                        e.sort(
                            (e, t) =>
                                e.placementOptions.sort -
                                t.placementOptions.sort
                        );
                    }
                };
                const sr = "home-banners-cache-new",
                    nr = "menu-banners-cache-v2",
                    or = "main-catalog-banners-cache",
                    ir = "promotions-banners-cache",
                    ar = "footer-banners-cache",
                    lr = "promotion-special-banners-cache",
                    cr = 3e5;
                var ur = class {
                    constructor() {
                        WbSpaModel.prototype.$eventBus.addEventListener(
                            "GeoUpdated",
                            () => this._refreshCache()
                        ),
                            (this.cacheVers = 5);
                    }
                    get bannersCacheType() {
                        return {
                            main: 1,
                            menu: 2,
                            catalog: 3,
                            promotion: 4,
                            promotionCatalog: 5,
                            footer: 6,
                            promotionSpecial: 7,
                        };
                    }
                    async getCachedResults(e, t, r, s) {
                        const n = WbSpaModel.prototype.$user.getUserInfo().uid,
                            o = this._getCacheKey(e);
                        return o
                            ? (s || (s = 1),
                              await this._getCachedResultsWithLock(
                                  e,
                                  this._addLocaleToCacheKey(o),
                                  t,
                                  n,
                                  r,
                                  s
                              ))
                            : Promise.resolve(null);
                    }
                    async _getCachedResultsWithLock(e, t, r, s, n, o) {
                        const i = this._tryGetCachedData(t, s),
                            a = this._getResultsFromCachedData(i, n, o);
                        return (
                            a ||
                            navigator.locks.request(`lock-${t}`, async (e) => {
                                const i = this._tryGetCachedData(t, s),
                                    a = this._getResultsFromCachedData(i, n, o);
                                if (a) return a;
                                const l = await r();
                                if (!l) return null;
                                if (this._checkBannersExist(l)) {
                                    const e = this._toCacheResult(
                                        s,
                                        n,
                                        o,
                                        i,
                                        l
                                    );
                                    localStorage.putObject(t, e);
                                }
                                return l;
                            })
                        );
                    }
                    _tryGetCachedData(e, t) {
                        const r = localStorage.getObject(e);
                        return r &&
                            this.cacheVers === r.version &&
                            r.userId === t
                            ? r
                            : null;
                    }
                    _getResultsFromCachedData(e, t, r) {
                        var s;
                        const n = this._getDisplayName(t),
                            o =
                                null == (s = null == e ? void 0 : e[n])
                                    ? void 0
                                    : s[r];
                        return !o || Date.now() - o.updateTs > cr
                            ? null
                            : o.data;
                    }
                    _toCacheResult(e, t, r, s, n) {
                        s || (s = {}),
                            (s.version = this.cacheVers),
                            (s.userId = e),
                            (s.desktop = this._getCleanedCachedData(s.desktop)),
                            (s.mobile = this._getCleanedCachedData(s.mobile));
                        return (
                            (s[this._getDisplayName(t)][r] = {
                                updateTs: Date.now(),
                                data: n,
                            }),
                            s
                        );
                    }
                    _checkBannersExist(e) {
                        let t = !1;
                        if (Array.isArray(e)) return !0;
                        for (let r in e) {
                            const s = e[r];
                            if (
                                s &&
                                (Array.isArray(s)
                                    ? (t = s.length > 0)
                                    : "object" == typeof s &&
                                      (t = this._checkBannersExist(s)),
                                t)
                            )
                                break;
                        }
                        return t;
                    }
                    _getCleanedCachedData(e) {
                        const t = {};
                        for (let r in null != e ? e : {})
                            !r ||
                                Date.now() - e[r].updateTs > cr ||
                                (t[r] = e[r]);
                        return t;
                    }
                    _getDisplayName(e) {
                        return e ? "mobile" : "desktop";
                    }
                    _addLocaleToCacheKey(e) {
                        return "ru" === wb.currentLanguage
                            ? e
                            : `${e}-${wb.currentLanguage}`;
                    }
                    _getCacheKey(e) {
                        switch (e) {
                            case this.bannersCacheType.main:
                                return sr;
                            case this.bannersCacheType.menu:
                                return nr;
                            case this.bannersCacheType.catalog:
                                return or;
                            case this.bannersCacheType.promotion:
                                return ir;
                            case this.bannersCacheType.promotionCatalog:
                                return "promotions-catalog-banners-cache";
                            case this.bannersCacheType.footer:
                                return ar;
                            case this.bannersCacheType.promotionSpecial:
                                return lr;
                            default:
                                return null;
                        }
                    }
                    _refreshCache() {
                        [sr, nr, or, ir, ar, lr].forEach((e) => {
                            localStorage.removeItem(
                                this._addLocaleToCacheKey(e)
                            );
                        });
                    }
                };
                const dr = new Yt(),
                    pr = new rr(dr);
                var hr = class {
                    constructor() {
                        (this.service = new Xt(dr, pr)),
                            (this.cache = new ur());
                    }
                    async getBannersForHomePageAsync() {
                        return await this.cache.getCachedResults(
                            this.cache.bannersCacheType.main,
                            () => this.service.getBannersForHomePageAsync()
                        );
                    }
                    async getBannersForFooterAsync() {
                        var e, t;
                        const r = await this.getBannersForHomePageAsync(),
                            s =
                                null !=
                                (e = null == r ? void 0 : r.footerBanners)
                                    ? e
                                    : [];
                        return {
                            desktopBanners: s,
                            mobileBanners: (
                                null ==
                                (t = null == r ? void 0 : r.footerMobileBanners)
                                    ? void 0
                                    : t.length
                            )
                                ? null == r
                                    ? void 0
                                    : r.footerMobileBanners
                                : s,
                        };
                    }
                    async getMenuBanners() {
                        return await this.cache.getCachedResults(
                            this.cache.bannersCacheType.menu,
                            () => this.service.getTopMenuBanners()
                        );
                    }
                    async getCatalogBanners(e, t) {
                        this.menuIdEnum || (this.menuIdEnum = t);
                        const r = "m" == wb.settings.displayMode;
                        return await this.cache.getCachedResults(
                            this.cache.bannersCacheType.catalog,
                            () =>
                                this.service.getCatalogBanners(
                                    e,
                                    this.menuIdEnum,
                                    r
                                ),
                            r,
                            e
                        );
                    }
                    async getPromoBanners() {
                        return await this.cache.getCachedResults(
                            this.cache.bannersCacheType.promotion,
                            () => this.service.getPromoBanners()
                        );
                    }
                    async getPromoCatalogBanners(e) {
                        const t = "m" == wb.settings.displayMode;
                        return await this.cache.getCachedResults(
                            this.cache.bannersCacheType.promotionCatalog,
                            () => this.service.getPromoCatalogBanners(e, t),
                            t,
                            e
                        );
                    }
                    async getPromotionSpecialBanners() {
                        const e = "m" == wb.settings.displayMode;
                        return await this.cache.getCachedResults(
                            this.cache.bannersCacheType.promotionSpecial,
                            () => this.service.getPromotionSpecialBanners(e),
                            e
                        );
                    }
                };
                const mr = 24,
                    gr = 50,
                    br = 37,
                    yr = 0,
                    vr = -1,
                    fr = "_userstorage_h";
                const wr = {
                    1: "user-storage-01dl.wb.ru",
                    2: "userstorage-02axs.wb.ru",
                    3: "userstorage-02adm.wb.ru",
                    4: "userstorage-01adm.wb.ru",
                    5: "user-storage-01axc.wb.ru",
                    6: "userstorage-01axs.wb.ru",
                    7: "user-storage-01xc.wb.ru",
                    8: "user-storage-01dp.wb.ru",
                    9: "user-storage-01cxc.wb.ru",
                    10: "user-storage-01bxc.wb.ru",
                    11: "userstorage-03axs.wb.ru",
                    12: "user-storage-01bdl.wb.ru",
                    13: "user-storage-01adl.wb.ru",
                    14: "userstorage-02adm.wb.ru",
                    15: "userstorage-01adm.wb.ru",
                    16: "user-storage-01axc.wb.ru",
                    17: "userstorage-01axs.wb.ru",
                    18: "user-storage-01xc.wb.ru",
                    19: "user-storage-01dp.wb.ru",
                    20: "user-storage-01cxc.wb.ru",
                    21: "user-storage-01bxc.wb.ru",
                    22: "userstorage-03axs.wb.ru",
                    23: "user-storage-01bdl.wb.ru",
                    24: "user-storage-01adl.wb.ru",
                    25: "user-storage-02dp.wb.ru",
                    26: "user-storage-02el.wb.ru",
                    27: "user-storage-02dp.wb.ru",
                    28: "user-storage-02el.wb.ru",
                    29: "user-storage-02dp.wb.ru",
                    30: "user-storage-02el.wb.ru",
                    31: "user-storage-02dp.wb.ru",
                    32: "user-storage-02el.wb.ru",
                    33: "user-storage-02dp.wb.ru",
                    34: "user-storage-02el.wb.ru",
                    35: "user-storage-02dp.wb.ru",
                    36: "user-storage-02el.wb.ru",
                    37: "user-storage-02dp.wb.ru",
                    38: "user-storage-02el.wb.ru",
                    39: "user-storage-02dp.wb.ru",
                    40: "user-storage-02el.wb.ru",
                    41: "user-storage-02dp.wb.ru",
                    42: "user-storage-02el.wb.ru",
                };
                var Sr = class {
                    getSavedHost() {
                        return (
                            (this.savedHost = localStorage.getItem(fr)),
                            this.savedHost
                        );
                    }
                    saveHost(e) {
                        (this.savedHost = e),
                            this.savedHost
                                ? localStorage.setItem(fr, this.savedHost)
                                : localStorage.removeItem(fr);
                    }
                    constructor() {
                        (this.savedHost = null),
                            window.addEventListener("storage", (e) => {
                                e.key === fr && this.getSavedHost();
                            }),
                            this.$eventBus.addEventListener(
                                "onUserAuth",
                                () => {
                                    this.getSavedHost();
                                }
                            ),
                            this.$eventBus.addEventListener(
                                "onUserUnAuth",
                                () => {
                                    this.saveHost(null);
                                }
                            );
                    }
                    fetch(e, t, r) {
                        return this.$wbxHttpClient
                            .fetch(
                                e,
                                t,
                                null,
                                (e) => r || this._userStorageHost(e)
                            )
                            .then((e) => e.json());
                    }
                    async _get(e, t, r, s) {
                        var n, o;
                        try {
                            const o = await this.fetch(e, t, s);
                            if (o.state === yr) return o.body;
                            if (o.state === vr && o.reason === mr) return [];
                            if (o.state === vr && o.reason === gr)
                                return (null == r ? void 0 : r.replaceBroken) &&
                                    (null == (n = t.paths) ? void 0 : n.length)
                                    ? t.paths.map((e) => ({
                                          path: e.path,
                                          file: "W10=",
                                      }))
                                    : [];
                            if (o.state === vr && o.reason === br) {
                                this.saveHost(o.location);
                                const r = await this.fetch(e, t);
                                if (r.state === yr) return r.body;
                                if (r.state === vr && r.reason === mr)
                                    return [];
                            }
                            return null;
                        } catch (n) {
                            if (!s) {
                                const s = `https://${
                                    wr[
                                        Math.floor(
                                            Math.random() *
                                                Object.keys(wr).length
                                        ) + 1
                                    ]
                                }`;
                                if (
                                    !(null ==
                                    (o = null == t ? void 0 : t.signal)
                                        ? void 0
                                        : o.aborted)
                                )
                                    return await this._get(e, t, r, s);
                                (t.signal = null),
                                    this._fixLocation(
                                        e,
                                        {
                                            method: t.method,
                                            body: t.body,
                                        },
                                        s
                                    );
                            }
                            return null;
                        }
                    }
                    async _fixLocation(e, t, r) {
                        const s = await this.fetch(e, t, r);
                        (null == s ? void 0 : s.state) === vr &&
                            (null == s ? void 0 : s.reason) === br &&
                            this.saveHost(s.location);
                    }
                    getList(e, t) {
                        const r = {
                            method: "POST",
                            body: JSON.stringify({
                                path: e,
                            }),
                            signal: null == t ? void 0 : t.signal,
                            timeout: null == t ? void 0 : t.timeout,
                        };
                        return this._get("/api/v2/list", r, t);
                    }
                    getData(e, t) {
                        if (!e || 0 === e.length) return null;
                        const r = {
                            method: "POST",
                            body: JSON.stringify(e),
                            signal: null == t ? void 0 : t.signal,
                            paths: e,
                        };
                        return this._get("/api/v2/data/get", r, t);
                    }
                    async setData(e) {
                        try {
                            const t = {
                                    method: "POST",
                                    body: JSON.stringify(e),
                                },
                                r = await this.fetch("/api/v2/data/set", t);
                            if (r.state === yr)
                                return {
                                    success: !0,
                                };
                            if (r.state === vr && r.reason === br) {
                                this.saveHost(r.location);
                                const e = await this.fetch(
                                    "/api/v2/data/set",
                                    t
                                );
                                return e.state === yr
                                    ? {
                                          success: !0,
                                      }
                                    : {
                                          success: !1,
                                          error: new Error(`error - ${e}`),
                                      };
                            }
                            return {
                                success: !1,
                                error: new Error(`error - ${r}`),
                            };
                        } catch (e) {
                            return {
                                success: !1,
                                error: e,
                            };
                        }
                    }
                    _userStorageHost(e) {
                        return `https://${
                            this.savedHost || wr[e || 1] || wr[1]
                        }`;
                    }
                };
                const _r = "wbx__sessionID";
                var Cr = class {
                    constructor() {
                        (this.session = localStorage.getItem(_r)),
                            window.addEventListener("storage", (e) => {
                                e.key === _r &&
                                    (this.session = localStorage.getItem(_r));
                            });
                    }
                    getSession() {
                        return (
                            this.session ||
                                ((this.session = localStorage.getItem(_r)),
                                this.session ||
                                    ((this.session = `site_${wb.helpers.generateGuid()}`),
                                    localStorage.setItem(_r, this.session))),
                            this.session
                        );
                    }
                    getUserUid() {
                        return this.$auth.isAuth
                            ? this.$auth.um.userUid
                            : this.getBasketUid();
                    }
                    getBasketUid() {
                        let e = wb.cookieHelper.getCookie("BasketUID");
                        return e || (e = this.getSession()), e;
                    }
                };
                class Ir {
                    static createPagerModel(
                        e,
                        t,
                        r = 100,
                        s = window.location.href,
                        n = !1
                    ) {
                        let o = Math.ceil(e / r);
                        n && (o = o <= t ? t : t + 1);
                        let i = [];
                        if (o <= 8) i.push(...Ir.createRange(o, 1));
                        else {
                            let e = 5;
                            if (t < 7)
                                i.push(...Ir.createRange(7, 1)), i.push("");
                            else if (t >= o - e - 1)
                                i.push(1),
                                    i.push(""),
                                    i.push(...Ir.createRange(7, o - 7 + 1));
                            else {
                                i.push(1), i.push("");
                                let e = t,
                                    r = t,
                                    s = !1,
                                    n = 1;
                                for (; n < 7; )
                                    r < o && s && (r++, n++),
                                        e > 1 && !1 === s && (e--, n++),
                                        (s = !s);
                                (e = 1 === e ? 2 : e),
                                    i.push(...Ir.createRange(r - e + 1, e)),
                                    r < o - 1 && i.push("");
                            }
                        }
                        const a = new URL(s, window.location.origin);
                        return {
                            pageUrls: i.map(
                                (e) => (
                                    a.searchParams.set("page", e),
                                    {
                                        value: e,
                                        href: "" !== e ? a.toString() : null,
                                    }
                                )
                            ),
                            pagingInfo: {
                                currentPage: t,
                                totalPages: o,
                                totalItems: e,
                                hideTotal: n,
                            },
                        };
                    }
                    static createRange(e, t) {
                        return Array.from({
                            length: e,
                        }).map((e, r) => r + t);
                    }
                }
                var kr = Ir;
                const Mr = "[RETRY FETCH SERVICE]";
                var Pr = class {
                    constructor() {
                        (this.sendQueue = "queue"),
                            (this.storage = this.$storageHelper),
                            this.storage.supportIndexedDb()
                                ? setInterval(
                                      () =>
                                          this._sendJobChecker.call(
                                              this,
                                              this.sendQueue
                                          ),
                                      1e4
                                  )
                                : (this.dbPromise = Promise.reject());
                    }
                    saveRequest(e, t, { tryTill: r, timeout: s } = {}) {
                        try {
                            delete t.signal;
                            const n = {
                                url: e,
                                options: t,
                                retryCount: 1,
                                retryTime: Date.now(),
                            };
                            r > 0 && (n.tryTill = r),
                                s > 0 && (n.timeout = s),
                                this._openDb().then((e) =>
                                    e
                                        .transaction(
                                            this.sendQueue,
                                            "readwrite"
                                        )
                                        .objectStore(this.sendQueue)
                                        .add(n)
                                );
                        } catch (e) {
                            wb.spa.logError(
                                e,
                                `${Mr}: failed to save table=${this.sendQueue}`,
                                !0
                            );
                        }
                    }
                    _openDb() {
                        return (
                            this.dbPromise ||
                                (this.dbPromise = this.storage.openDb(
                                    "send-queue",
                                    {
                                        onupgradeneeded: (e) => {
                                            if (
                                                !e.objectStoreNames.contains(
                                                    this.sendQueue
                                                )
                                            ) {
                                                e.createObjectStore(
                                                    this.sendQueue,
                                                    {
                                                        autoIncrement: !0,
                                                    }
                                                ).createIndex(
                                                    "retryTime",
                                                    "retryTime",
                                                    {
                                                        unique: !1,
                                                    }
                                                );
                                            }
                                            e.objectStoreNames.contains(
                                                this.storage.metadataTableName(
                                                    this.sendQueue
                                                )
                                            ) ||
                                                e.createObjectStore(
                                                    this.storage.metadataTableName(
                                                        this.sendQueue
                                                    ),
                                                    {
                                                        keyPath: "name",
                                                    }
                                                );
                                        },
                                        version: 2,
                                    }
                                )),
                            this.dbPromise
                        );
                    }
                    _log(e) {
                        window._debug &&
                            console.debug(`%c${Mr}: ${e}`, "color:#4B6F44");
                    }
                    _sendJobChecker() {
                        const e = "job_in_progress",
                            t = this.storage.metadataTableName(this.sendQueue);
                        wb.settings.isOffline ||
                            this._openDb().then(async (r) => {
                                let s = !1;
                                try {
                                    const n = await this.storage.get(r, t, e);
                                    n &&
                                        Date.now() > n.value &&
                                        (await this.storage
                                            .removeItem(r, t, e)
                                            .then(() =>
                                                this._log("lock cleared")
                                            )),
                                        (s = await this.storage.addItem(
                                            r,
                                            t,
                                            {
                                                name: e,
                                                value: Date.now() + 3e5,
                                            },
                                            !0
                                        ));
                                    try {
                                        await this.storage.withCursor(
                                            r,
                                            this.sendQueue,
                                            "retryTime",
                                            async (e, t, s) => {
                                                var n;
                                                const o = Date.now();
                                                if (
                                                    (this._log(
                                                        `checking ${s.primaryKey} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`
                                                    ),
                                                    t.retryCount > 10 &&
                                                        0 < t.tryTill &&
                                                        t.tryTill > o &&
                                                        ((t.retryCount =
                                                            Math.max(2, 8)),
                                                        (t.retryTime =
                                                            o - 1e3)),
                                                    t.retryCount > 10)
                                                )
                                                    this.storage
                                                        .removeItem(
                                                            r,
                                                            this.sendQueue,
                                                            s.primaryKey
                                                        )
                                                        .then(() =>
                                                            this._log(
                                                                `cleared url: ${t.url}`
                                                            )
                                                        );
                                                else if (t.retryTime < o) {
                                                    const e = s.primaryKey;
                                                    try {
                                                        this._log(
                                                            `executing ${e} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`
                                                        );
                                                        const s = {
                                                            timeout: t.timeout,
                                                        };
                                                        if (
                                                            (await this.$httpClient.fetchText(
                                                                t.url,
                                                                t.options,
                                                                s
                                                            ),
                                                            null ==
                                                            (n = s.modified)
                                                                ? void 0
                                                                : n.timeout)
                                                        )
                                                            throw (
                                                                (this._log(
                                                                    `timeout for ${e} url: ${t.url}`
                                                                ),
                                                                new Error(
                                                                    "service timeout"
                                                                ))
                                                            );
                                                        this.storage
                                                            .removeItem(
                                                                r,
                                                                this.sendQueue,
                                                                e
                                                            )
                                                            .then(() =>
                                                                this._log(
                                                                    `cleared ${e} url: ${t.url}`
                                                                )
                                                            );
                                                    } catch (s) {
                                                        (t.retryTime =
                                                            Date.now() +
                                                            2 ** t.retryCount *
                                                                1e3),
                                                            t.retryCount++,
                                                            delete t.options
                                                                .signal,
                                                            this.storage
                                                                .updateItem(
                                                                    r,
                                                                    this
                                                                        .sendQueue,
                                                                    t,
                                                                    e
                                                                )
                                                                .then(() =>
                                                                    this._log(
                                                                        `extended ${e} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`
                                                                    )
                                                                );
                                                    }
                                                }
                                            }
                                        );
                                    } catch (e) {
                                        console.log(e);
                                    }
                                } catch (e) {
                                } finally {
                                    s && this.storage.removeItem(r, t, e);
                                }
                            });
                    }
                };
                const Tr = 36e5,
                    $r = "splitInfoV2",
                    Ar = {
                        splitId: "no_test",
                        title: "no_test",
                    },
                    Dr = {
                        default: [
                            {
                                key: "ab_testing",
                                value: !1,
                            },
                        ],
                    };
                var Br = class {
                    constructor() {
                        (this._setSplitInfo = this._setSplitInfo.bind(this)),
                            (this.splitInfo = Dr.default),
                            this._setSplitInfo();
                    }
                    removeCountInFilters() {
                        return "no_filters_count" === this.splitInfo.title;
                    }
                    getSplitInfo() {
                        return Ar;
                    }
                    getSplitInfoV2(e) {
                        return this.splitInfo[e] || Dr.default;
                    }
                    appendSplitInfoV2(e, t) {
                        const r = this.getSplitInfoV2(t);
                        r && r.forEach((t) => e.append(t.key, t.value));
                    }
                    _updSplitInfo() {
                        this.timerId && clearTimeout(this.timerId),
                            (this.timerId = setTimeout(this._setSplitInfo, Tr));
                    }
                    async _setSplitInfo() {
                        var e;
                        const t = this._getSplitInfoFromCache();
                        if (
                            ((this.splitInfo =
                                null != (e = null == t ? void 0 : t.splitInfo)
                                    ? e
                                    : Dr),
                            !(null == t ? void 0 : t.skipSplitRequest))
                        ) {
                            const e =
                                (await this._getSplitInfoFromService()) || Dr;
                            this._setSplitInfoToCache(e), (this.splitInfo = e);
                        }
                        wb.analitics.sendEvent(
                            "AB_Test_Splitter_Request",
                            this.splitInfo
                        ),
                            this._updSplitInfo();
                    }
                    async _getSplitInfoFromService() {
                        const e = wb.cookieHelper.getCookie("_wbauid");
                        if (!e) return null;
                        try {
                            const t = "https://splitter.wb.ru/v2/result",
                                r = {
                                    "X-API-KEY":
                                        "c8ab0248-284e-4fad-a8a2-d4dd258cbd6c",
                                    "X-USER-ID": e,
                                };
                            let s =
                                await WbSpaModel.prototype.$httpClient.fetchBasicJSON(
                                    t,
                                    {
                                        credentials: "omit",
                                        headers: r,
                                    },
                                    {
                                        saveToBlob: "splitter_response",
                                        timeout: 3e3,
                                        nullOnError: !0,
                                        return204: !0,
                                    }
                                );
                            return s && 204 !== s.status
                                ? this._convertToAssociativeArray(s)
                                : Dr;
                        } catch (e) {
                            return null;
                        }
                    }
                    _convertToAssociativeArray(e) {
                        let t = {};
                        return (
                            Array.isArray(e) &&
                                (t = e.reduce(
                                    (e, t) => ((e[t.type] = t.properties), e),
                                    {}
                                )),
                            t
                        );
                    }
                    _getSplitInfoFromCache() {
                        var e;
                        let t = localStorage.getObject($r);
                        return t
                            ? ((t.t = null != (e = t.t) ? e : 0),
                              Date.now() > t.t + 72e5
                                  ? null
                                  : {
                                        splitInfo: t.splitInfo,
                                        skipSplitRequest:
                                            Date.now() <= t.t + Tr,
                                    })
                            : null;
                    }
                    _setSplitInfoToCache(e) {
                        e &&
                            localStorage.putObject($r, {
                                splitInfo: e,
                                t: Date.now(),
                            });
                    }
                };
                var Or = class {
                    async onActionExecuting() {
                        const e = WbSpaModel.prototype.$user.getUid();
                        WbSpaModel.prototype.$services.userData.setKey(
                            "0" !== e,
                            e
                        ),
                            await WbSpaModel.prototype.$services.userData.getUserDataAsync();
                    }
                };
                var Er = class {
                        async onBeforeActionExecuting(e) {
                            var t;
                            const r =
                                await WbSpaModel.prototype.$user.getLocationData();
                            e.searchParams.set(
                                "country",
                                null != (t = r.locale) ? t : ""
                            );
                        }
                    },
                    xr = Object.defineProperty,
                    Lr = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? xr(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var jr = class {
                    constructor(e) {
                        Lr(this, "checkFunction"),
                            (this.checkFunction = null != e ? e : () => !0);
                    }
                    onBeforeActionExecuting(e, t, r) {
                        r.cancelRequest = this.checkFunction();
                    }
                };
                var Fr = class {
                        onBeforeActionExecuting(e, t, r) {
                            t.body || (t.body = new URLSearchParams()),
                                t.body.set(
                                    "changeEmail",
                                    "SpaChangeEmailEntrypoint" ==
                                        WbSpaModel.prototype.$router.targetRoute
                                );
                        }
                    },
                    Nr = Object.defineProperty,
                    Wr = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? Nr(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var Rr = class {
                    constructor() {
                        Wr(this, "bplOffers"),
                            Wr(this, "customsDutySigned"),
                            Wr(this, "getBalanceTask"),
                            Wr(this, "isBuyItNowMode"),
                            Wr(this, "pdlInstOptions"),
                            Wr(this, "userBalanceSigned"),
                            Wr(this, "userBrokerInstConfig"),
                            Wr(this, "userBrokerInstStatus"),
                            Wr(this, "userGradeSigned");
                    }
                    async onBeforeActionExecuting(e, t, r) {
                        var s, n, o, i;
                        const a = WbSpaModel.prototype;
                        a.$services.favsService.syncFromServerAsync();
                        const l = a.$services.cartService,
                            c = a.$auth.isAuth,
                            u = await a.$user.getCurrencyAsync();
                        await a.$moduleLoader.loadServiceAsync(
                            "installmentAggregatorService"
                        ),
                            (this.getBalanceTask = c
                                ? a.$user
                                      .getBalance({
                                          timeout: 1e3,
                                      })
                                      .catch((e) => Promise.resolve())
                                : Promise.resolve());
                        try {
                            await l.sync({
                                timeout: 3e3,
                            });
                        } catch (e) {
                            wb.spa.logError(
                                e,
                                {
                                    customMsg: "BasketDataPipeline sync",
                                },
                                !0
                            );
                        }
                        const d = l.publicBasketApiUrl;
                        t.credentials = "include";
                        const p = new URL(d, window.location.origin);
                        (e.port = p.port),
                            (e.pathname = (p.pathname + e.pathname).replace(
                                "//",
                                ""
                            )),
                            (e.host = p.host),
                            t.body || (t.body = new URLSearchParams());
                        const h = Object.fromEntries(e.searchParams);
                        this.isBuyItNowMode = h.includeInOrderStr || h.sellerId;
                        const m = l.getItems(h);
                        0 === m.length && (r.cancelRequest = () => !0);
                        const [g, b, y, v, f, w, S] = await Promise.all([
                            a.$user.getXinfoSignedV1(),
                            this.getBalanceTask,
                            a.$user.getUserGrade(u),
                            a.$services.installmentAggregatorService.getAvailableInstallment(),
                            a.$user.getBrokerInstallmentStatus(),
                            a.$user.getBrokerInstallmentConfig(),
                            a.$user.getCustomsDuty(u),
                        ]);
                        if (
                            ((this.userBalanceSigned = b),
                            (this.userGradeSigned = y),
                            (this.pdlInstOptions = null),
                            "pdl" === (null == v ? void 0 : v.type))
                        )
                            this.pdlInstOptions =
                                await a.$services.installmentAggregatorService.getLimit(
                                    "pdl"
                                );
                        else if ("cwb" === (null == v ? void 0 : v.type)) {
                            const [e, t] = await Promise.all([
                                a.$user.getBrokerInstallmentStatus(),
                                a.$user.getBrokerInstallmentConfig(),
                            ]);
                            (this.userBrokerInstStatus = e),
                                (this.userBrokerInstConfig = t);
                        }
                        let _;
                        if (
                            ((this.customsDutySigned = S),
                            a.$services.userAddressService.getByCoordinates(
                                g.latitude,
                                g.longitude,
                                g.address
                            ),
                            c)
                        ) {
                            const e = await a
                                .$getService("groupedDeliveriesService")
                                .then((e) => e.getPurchaseInfo());
                            _ = null == e ? void 0 : e.unpaid;
                        }
                        const C =
                            (null == (s = this.userBrokerInstConfig)
                                ? void 0
                                : s.productPlans) &&
                            this.userBrokerInstStatus &&
                            "completed" === this.userBrokerInstStatus.status
                                ? Math.floor(
                                      this.userBrokerInstStatus.availableSum /
                                          100
                                  )
                                : 0;
                        t.body = a.$helper.objectSerializer(
                            {
                                items: m,
                                currency: u,
                                xInfo: g.xinfo,
                                cityLatitude: g.latitude,
                                cityLongitude: g.longitude,
                                address: g.address,
                                userBalanceSigned: this.userBalanceSigned,
                                unpaidAmount: _,
                                userDataSigned: g.userDataSign,
                                addressDataSign: g.addressDataSign,
                                userGradeSigned: y,
                                customsDutySigned: S,
                                iwcNetLimit: (
                                    null ==
                                    (o =
                                        null == (n = this.pdlInstOptions)
                                            ? void 0
                                            : n.productTypes)
                                        ? void 0
                                        : o.length
                                )
                                    ? this.pdlInstOptions.limit
                                    : -1,
                                cwbLimit: C,
                                bplOffers: this.bplOffers,
                                instType: null == v ? void 0 : v.type,
                                b2bSellerId: wb.settings.b2bMode
                                    ? null == (i = wb.settings.selectedCompany)
                                        ? void 0
                                        : i.id
                                    : null,
                                isBuyItNowMode: !!this.isBuyItNowMode,
                                includeInOrderStr:
                                    m
                                        .filter((e) => e.includeInOrder)
                                        .map((e) => e.characteristicId)
                                        .join(";") || "1",
                                supportBooking:
                                    WbSpaModel.prototype.$isSupportBooking(),
                                currentLocale: wb.settings.currentLocale,
                            },
                            t.body,
                            !0,
                            !0
                        );
                    }
                    async onActionExecuted(e) {
                        var t, r, s;
                        const n = WbSpaModel.prototype;
                        e.responseData || (e.responseData = {}),
                            e.responseData.isNetworkError
                                ? await (null ==
                                  (t = n.$services.cartService.localBasket)
                                      ? void 0
                                      : t.enrichProductsIfNeedAsync())
                                : (null == (r = e.responseData.data)
                                      ? void 0
                                      : r.basket) &&
                                  (null ==
                                      (s =
                                          n.$services.cartService
                                              .localBasket) ||
                                      s.enrichItemsLocalInfo(
                                          e.responseData.data.basket.basketItems
                                      ),
                                  this.isBuyItNowMode ||
                                      n.$services.cartService.save(
                                          e.responseData.data.basket
                                      )),
                            (e.responseData.userBalanceSigned =
                                this.userBalanceSigned),
                            (e.responseData.pdlInstOptions =
                                this.pdlInstOptions),
                            (e.responseData.userGradeSigned =
                                this.userGradeSigned),
                            (e.responseData.customsDutySigned =
                                this.customsDutySigned);
                    }
                };
                var Ur = class {
                        async onBeforeActionExecuting(e) {
                            try {
                                if (!!e.searchParams.get("bc")) {
                                    WbSpaModel.prototype.$services.cartService.getBankCards(
                                        2e3,
                                        WbSpaModel.prototype.$user.getCurrency(),
                                        !0
                                    ),
                                        WbSpaModel.prototype.$moduleLoader.execModule(
                                            "bottomNotificationPanel",
                                            "showNotification",
                                            [
                                                0,
                                                wb.i18n.t(
                                                    "basket.cardIsSuccessfullyLinked"
                                                ),
                                            ]
                                        ),
                                        (wb.settings.cardBindSuccess = !0);
                                    const e = new URL(location.href);
                                    e.searchParams.delete("bc"),
                                        window.history.replaceState(
                                            {},
                                            document.title,
                                            e.href
                                        ),
                                        WbSpaModel.prototype.$analitic.sendEvent(
                                            "Checkout_PayMethod_AddCard_Ok",
                                            {
                                                name: "not_defined",
                                            }
                                        );
                                } else wb.settings.cardBindSuccess = !1;
                            } catch (e) {}
                        }
                    },
                    Hr = Object.defineProperty,
                    qr = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? Hr(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var zr = class {
                        constructor() {
                            qr(this, "data");
                        }
                        async onActionExecuting(e, t, r) {
                            var s;
                            const n = WbSpaModel.prototype.$router,
                                o = WbSpaModel.prototype.$getService,
                                i = WbSpaModel.prototype.$services;
                            await o("clientActionsHelper"),
                                i.clientActionsHelper.beforeAddAction();
                            const a = parseInt(n.routeParameters.cod1S),
                                l =
                                    ((null == (s = n.queryParams)
                                        ? void 0
                                        : s.has("size")) &&
                                        parseInt(
                                            n.queryParams.get("size") || ""
                                        )) ||
                                    null,
                                c =
                                    await WbSpaModel.prototype.$services.productCard.loadProductCardAsync(
                                        a,
                                        l
                                    );
                            if (null === c)
                                return (r.redirected = !0), n.moveTo404Async();
                            (this.data = c),
                                i.clientActionsHelper.addAction({
                                    nm: a,
                                    name: c.selectedNomenclature.goodsName,
                                });
                        }
                        async onActionExecuted(e) {
                            e.responseData
                                ? Object.assign(e.responseData, this.data)
                                : (e.responseData = this.data);
                        }
                    },
                    Vr = Object.defineProperty,
                    Gr = Object.defineProperties,
                    Qr = Object.getOwnPropertyDescriptors,
                    Kr = Object.getOwnPropertySymbols,
                    Jr = Object.prototype.hasOwnProperty,
                    Xr = Object.prototype.propertyIsEnumerable,
                    Yr = (e, t, r) =>
                        t in e
                            ? Vr(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r);
                var Zr = class {
                        constructor() {
                            var e, t;
                            Yr(
                                this,
                                "symbol" != typeof (e = "data") ? e + "" : e,
                                t
                            ),
                                (this.data = null);
                        }
                        get $services() {
                            return WbSpaModel.prototype.$services;
                        }
                        get $router() {
                            return WbSpaModel.prototype.$router;
                        }
                        onBeforeActionExecuting() {
                            this.data = null;
                        }
                        async onActionExecuting(e, t, r) {
                            var s;
                            const n =
                                await this.$services.favsService.getWlArrivedCatalogModelAsync();
                            if (
                                0 ==
                                (null != (s = null == n ? void 0 : n.goods)
                                    ? s
                                    : []
                                ).length
                            )
                                return (
                                    (r.redirected = !0),
                                    this.$router.moveTo404Async()
                                );
                            this.data = n;
                        }
                        onActionExecuted(e) {
                            var t;
                            if (null == this.data) return;
                            const r = this._adaptGoods(
                                null != (t = this.data.goods) ? t : []
                            );
                            e.responseData = {
                                goods: r,
                                goodsCount: r.length,
                            };
                        }
                        _adaptGoods(e) {
                            return e.map((e) => {
                                var t, r, s;
                                return (
                                    (r = ((e, t) => {
                                        for (var r in t || (t = {}))
                                            Jr.call(t, r) && Yr(e, r, t[r]);
                                        if (Kr)
                                            for (var r of Kr(t))
                                                Xr.call(t, r) && Yr(e, r, t[r]);
                                        return e;
                                    })({}, e)),
                                    (s = {
                                        pics: 1,
                                        brand: e.brandName,
                                        name: e.goodsName,
                                        canQuickOrder: !e.digitalGood,
                                        sale: Math.max(
                                            e.sale,
                                            null !=
                                                (t =
                                                    null == e
                                                        ? void 0
                                                        : e.personalSale)
                                                ? t
                                                : 0
                                        ),
                                    }),
                                    Gr(r, Qr(s))
                                );
                            });
                        }
                    },
                    es = Object.defineProperty,
                    ts = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? es(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var rs = class {
                        constructor() {
                            ts(this, "data"), (this.data = null);
                        }
                        async onActionExecuting(e) {
                            this.data =
                                await WbSpaModel.prototype.$services.favsService.getFavsDataAsync(
                                    e.searchParams
                                );
                        }
                        onActionExecuted(e) {
                            null != this.data &&
                                (e.responseData || (e.responseData = {}),
                                Object.assign(e.responseData, this.data));
                        }
                    },
                    ss = r(14685),
                    ns = r(70972);
                var os = class {
                        async getSeoTags(e) {
                            e = e.replace("/catalogdata/", "/catalog/");
                            const t = `seo-catalog-tags-by-url-${wb.settings.currentLocale}-${e}.json`,
                                r =
                                    await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(
                                        t,
                                        3e3
                                    );
                            return (
                                (null == r ? void 0 : r.link) &&
                                    (r.link = r.link.replace(
                                        "/catalog/",
                                        "/catalogdata/"
                                    )),
                                r
                            );
                        }
                    },
                    is = Object.defineProperty,
                    as = Object.getOwnPropertySymbols,
                    ls = Object.prototype.hasOwnProperty,
                    cs = Object.prototype.propertyIsEnumerable,
                    us = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? is(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var ds = class {
                        constructor() {
                            us(this, "cancelled"),
                                us(this, "catalogMenu"),
                                us(this, "currentMenuItem"),
                                us(this, "initialized"),
                                us(this, "modules"),
                                us(this, "products"),
                                us(this, "searchSeoTag"),
                                us(this, "seoTagsService"),
                                us(this, "sort"),
                                us(this, "xData"),
                                us(this, "xInfo"),
                                (this.initialized = !1),
                                (this.cancelled = !1),
                                (this.catalogMenu = null),
                                (this.currentMenuItem = null),
                                (this.modules = {});
                        }
                        get $router() {
                            return WbSpaModel.prototype.$router;
                        }
                        get $moduleLoader() {
                            return WbSpaModel.prototype.$moduleLoader;
                        }
                        get $services() {
                            return WbSpaModel.prototype.$services;
                        }
                        async onBeforeActionExecuting(e, t, r) {
                            var s, n;
                            (this.xData =
                                this.xInfo =
                                this.products =
                                this.sort =
                                    null),
                                (this.cancelled = !1),
                                (this.searchSeoTag = !1),
                                this.initialized || (await this._initAsync());
                            const o = new URL(e);
                            if (
                                ((o.pathname = o.pathname.replace(
                                    "/webapi",
                                    ""
                                )),
                                (this.currentMenuItem =
                                    this.catalogMenu.getCurrentMenuItem(o)),
                                (null == (s = this.currentMenuItem)
                                    ? void 0
                                    : s.landing) ||
                                    (null == (n = this.currentMenuItem)
                                        ? void 0
                                        : n.isDenyLink))
                            )
                                return void (this.cancelled = !0);
                            this.currentMenuItem
                                ? (this.currentMenuItem.seoTagInfo = null)
                                : (this.currentMenuItem =
                                      await this._tryGetMenuItemFromTags(o));
                            const [i, a] = await Promise.all([
                                this._getXDataAsync(),
                                WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),
                            ]);
                            (this.xData = i),
                                (this.xInfo = a),
                                (r.cancelRequest = null != this.xData),
                                r.cancelRequest || (t.body = this.xInfo);
                        }
                        async _tryGetMenuItemFromTags(e) {
                            var t;
                            const r = e.pathname,
                                s = await (null == (t = this.seoTagsService)
                                    ? void 0
                                    : t.getSeoTags(r));
                            if (!s) return null;
                            (this.searchSeoTag = !!s.searchQuery),
                                (e.pathname = s.link);
                            const n = this.searchSeoTag
                                ? this.catalogMenu.getCurrentMenuItem(e)
                                : this._selectedMenuItemFinder(e);
                            return n
                                ? (this.searchSeoTag ||
                                      (s.xQuery =
                                          0 === n.query.indexOf("preset")
                                              ? `${n.query}&${s.parameters}`
                                              : s.parameters),
                                  (n.seoTagInfo = s),
                                  n)
                                : null;
                        }
                        _selectedMenuItemFinder(e) {
                            let t,
                                r = null;
                            for (
                                ;
                                0 !== (t = e.pathname.lastIndexOf("/")) &&
                                null == r;

                            )
                                (r = this.catalogMenu.getCurrentMenuItem(e)),
                                    (e.pathname = e.pathname.substring(0, t));
                            return r;
                        }
                        async onActionExecuting() {
                            if (this.xData && this.xInfo && !this.cancelled) {
                                let e =
                                        this.modules.QueryHelper.getInitialParams(),
                                    {
                                        sort: t = this.modules.SorterModel
                                            .getSortFromCache,
                                        page: r = 1,
                                    } = e,
                                    s = ((e, t) => {
                                        var r = {};
                                        for (var s in e)
                                            ls.call(e, s) &&
                                                t.indexOf(s) < 0 &&
                                                (r[s] = e[s]);
                                        if (null != e && as)
                                            for (var s of as(e))
                                                t.indexOf(s) < 0 &&
                                                    cs.call(e, s) &&
                                                    (r[s] = e[s]);
                                        return r;
                                    })(e, ["sort", "page"]);
                                t !==
                                    this.modules.SorterModel.getSortFromCache &&
                                    ns.A.updateCatalogOptions("sort", t);
                                const n = new this.modules.QueryHelper({
                                        sort: t,
                                        page: r,
                                        filters:
                                            this.modules.QueryHelper.checkOnlyFilterParams(
                                                s
                                            ),
                                    }).getQueryStringForCatalog(),
                                    o =
                                        wb.global.settings.switches
                                            .enableInfiniteScroll ||
                                        WbSpaModel.prototype.$analitic.checkDataInSplitterServiceV2(
                                            "common",
                                            "ab_enableAutoNextPage",
                                            "yes"
                                        ),
                                    i = new URLSearchParams(n);
                                i.delete("page");
                                const a =
                                        this.modules.CatalogProvider.createGoodsProvider(
                                            this.xData
                                        ),
                                    { goods: l = [], resp: c } =
                                        await this._loadGoodsAsync(
                                            a,
                                            o ? i : n
                                        );
                                (this.products = l),
                                    (this.sort = t),
                                    this.searchSeoTag &&
                                        (this.xData =
                                            this._updateXDataIfSearchTag(
                                                this.xData,
                                                c
                                            ));
                            }
                        }
                        _updateXDataIfSearchTag(e, t) {
                            var r;
                            const s = (null == t ? void 0 : t.metadata)
                                ? null == t
                                    ? void 0
                                    : t.metadata
                                : t;
                            return (
                                (null == s ? void 0 : s.name) ||
                                    (e.gender = null),
                                (null == s ? void 0 : s.name) &&
                                    e.search !==
                                        (null == s ? void 0 : s.name) &&
                                    (e.search = s.name),
                                (null == s ? void 0 : s.catalog_value) &&
                                    (e.xcatalogQuery = s.catalog_value),
                                (null == s ? void 0 : s.catalog_type) &&
                                    (e.xcatalogShard = s.catalog_type),
                                (null == s ? void 0 : s.context) &&
                                    (e.xcatalogContext = s.context),
                                (e.originalSearch =
                                    null !=
                                    (r = null == s ? void 0 : s.original)
                                        ? r
                                        : null),
                                e
                            );
                        }
                        async _loadGoodsAsync(e, t) {
                            try {
                                const { goods: r = [], resp: s } =
                                    await e.loadGoodsAsync(t);
                                return {
                                    goods: r,
                                    resp: s,
                                };
                            } catch (e) {
                                return {
                                    goods: [],
                                    resp: null,
                                };
                            }
                        }
                        onActionExecuted(e) {
                            var t, r, s, n, o, i, a, l, c, u;
                            if (null == this.xData || this.cancelled) return;
                            e.responseData || (e.responseData = {});
                            const d = this.catalogMenu.getSitePathItems(
                                    this.currentMenuItem
                                ),
                                p = {
                                    xData: this.xData,
                                    menuId:
                                        null == (t = this.currentMenuItem)
                                            ? void 0
                                            : t.id,
                                    currentMenuItem: this.currentMenuItem,
                                    rootMenuItem: this.catalogMenu.getRootNode(
                                        this.currentMenuItem
                                    ),
                                    hasSelectedChild: !!(null ==
                                    (r = this.currentMenuItem)
                                        ? void 0
                                        : r.childs),
                                    sitePathItems: d,
                                    emptyCatalogLink:
                                        null == (s = this.currentMenuItem)
                                            ? void 0
                                            : s.url,
                                    tagsUrl:
                                        null == (n = this.currentMenuItem)
                                            ? void 0
                                            : n.url,
                                    products: this.products,
                                    targetUrl: "GP",
                                    title:
                                        null !=
                                        (a =
                                            null == (o = this.currentMenuItem)
                                                ? void 0
                                                : o.seo)
                                            ? a
                                            : null == (i = this.currentMenuItem)
                                            ? void 0
                                            : i.name,
                                    containerClass: "catalog-page",
                                    isAdultProtection: !wb.adult.isConfirmed,
                                    sorterModel: new this.modules.SorterModel(
                                        this.sort,
                                        null == (l = this.currentMenuItem)
                                            ? void 0
                                            : l.url
                                    ),
                                };
                            (null == (c = this.currentMenuItem)
                                ? void 0
                                : c.seoTagInfo) &&
                                this._updateModelIfSeoTagUrl(
                                    p,
                                    null == (u = this.currentMenuItem)
                                        ? void 0
                                        : u.seoTagInfo
                                );
                            const h = {
                                mainVersion: 0,
                                type: ss.A.goods,
                                model: p,
                            };
                            Object.assign(e.responseData, {
                                data: h,
                            });
                        }
                        async _updateModelIfSeoTagUrl(e, t) {
                            t.seo && (e.title = t.seo), (e.tagsUrl = t.url);
                        }
                        async _initAsync() {
                            const [e, t, r, s, n] = await Promise.all([
                                this.$moduleLoader.loadModuleAsync(
                                    "xCatalogData"
                                ),
                                this.$moduleLoader.loadModuleAsync(
                                    "queryHelper"
                                ),
                                this.$moduleLoader.loadModuleAsync(
                                    "xCatalogProvider"
                                ),
                                this.$moduleLoader.loadModuleAsync(
                                    "sorterModel"
                                ),
                                wb.spa.getCatalogMenu(),
                            ]);
                            (this.modules = {
                                XCatalogData: e.XCatalogData,
                                XSearchCatalogData: e.XSeachData,
                                QueryHelper: t,
                                CatalogProvider: r,
                                SorterModel: s.CatalogSorterModel,
                            }),
                                (this.catalogMenu = n),
                                (this.seoTagsService = new os());
                        }
                        async _getXDataAsync() {
                            var e;
                            const t =
                                null == (e = this.currentMenuItem)
                                    ? void 0
                                    : e.seoTagInfo;
                            if (this.searchSeoTag && t) {
                                const e =
                                    await WbSpaModel.prototype.$getUserGender();
                                return new this.modules.XSearchCatalogData(
                                    t.searchQuery,
                                    t.searchQuery,
                                    null,
                                    null,
                                    e,
                                    1
                                );
                            }
                            const r =
                                this.currentMenuItem &&
                                ((null == t ? void 0 : t.xQuery) ||
                                    this.currentMenuItem.query);
                            return this.currentMenuItem &&
                                this.currentMenuItem.shard
                                ? new this.modules.XCatalogData(
                                      r,
                                      this.currentMenuItem.shard
                                  )
                                : null;
                        }
                    },
                    ps = Object.defineProperty,
                    hs = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? ps(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var ms = class {
                        constructor() {
                            hs(this, "cancelled"),
                                hs(this, "catalogMenu"),
                                hs(this, "currentMenuItem"),
                                hs(this, "initialized"),
                                hs(this, "requestCancelled"),
                                (this.initialized = !1),
                                (this.requestCancelled = !1),
                                (this.cancelled = !1),
                                (this.catalogMenu = null),
                                (this.currentMenuItem = null);
                        }
                        get $services() {
                            return WbSpaModel.prototype.$services;
                        }
                        get $moduleLoader() {
                            return WbSpaModel.prototype.$moduleLoader;
                        }
                        get $isDesktop() {
                            return WbSpaModel.prototype.$isDesktop;
                        }
                        async onBeforeActionExecuting(e, t, r) {
                            var s;
                            (this.requestCancelled = this.cancelled = !1),
                                await this._initAsync();
                            const n = new URL(e);
                            (n.pathname = n.pathname.replace("/webapi", "")),
                                (this.currentMenuItem =
                                    this.catalogMenu.getCurrentMenuItem(n)),
                                (
                                    null == (s = this.currentMenuItem)
                                        ? void 0
                                        : s.isDenyLink
                                )
                                    ? (r.cancelRequest = this.requestCancelled =
                                          null != this.currentMenuItem)
                                    : (this.cancelled = !0);
                        }
                        async onActionExecuted(e) {
                            var t, r, s, n, o;
                            if (this.cancelled) return;
                            e.responseData || (e.responseData = {});
                            const i = this.catalogMenu.getSitePathItems(
                                    this.currentMenuItem
                                ),
                                a = {
                                    mainVersion: 0,
                                    type: ss.A.categoryDenyLink,
                                    model: {
                                        menuId:
                                            null == (t = this.currentMenuItem)
                                                ? void 0
                                                : t.id,
                                        currentMenuItem: this.currentMenuItem,
                                        rootMenuItem:
                                            this.catalogMenu.getRootNode(
                                                this.currentMenuItem
                                            ),
                                        children:
                                            null == (r = this.currentMenuItem)
                                                ? void 0
                                                : r.childs,
                                        sitePathItems: i,
                                        title:
                                            null !=
                                            (o =
                                                null ==
                                                (s = this.currentMenuItem)
                                                    ? void 0
                                                    : s.seo)
                                                ? o
                                                : null ==
                                                  (n = this.currentMenuItem)
                                                ? void 0
                                                : n.name,
                                        isAdultProtection:
                                            !wb.adult.isConfirmed,
                                        catalogMenu: this.catalogMenu,
                                        catalogPromoLeftMenu:
                                            this.catalogMenu.getCatalogDenyMenu(
                                                this.currentMenuItem,
                                                i
                                            ),
                                    },
                                };
                            Object.assign(e.responseData, {
                                data: a,
                            });
                        }
                        async _initAsync() {
                            (this.catalogMenu = await wb.spa.getCatalogMenu()),
                                (this.initialized = this.catalogMenu.isInited);
                        }
                    },
                    gs = Object.defineProperty,
                    bs = Object.getOwnPropertySymbols,
                    ys = Object.prototype.hasOwnProperty,
                    vs = Object.prototype.propertyIsEnumerable,
                    fs = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? gs(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var ws = class {
                    constructor() {
                        fs(this, "catalogMenu"),
                            fs(this, "emptySearch"),
                            fs(this, "emptySearchRecom"),
                            fs(this, "initialized"),
                            fs(this, "isEmpty"),
                            fs(this, "isNetworkError"),
                            fs(this, "modules"),
                            fs(this, "products"),
                            fs(this, "sort"),
                            fs(this, "targetUrl"),
                            fs(this, "xData"),
                            fs(this, "xInfo");
                    }
                    get $router() {
                        return WbSpaModel.prototype.$router;
                    }
                    get $moduleLoader() {
                        return WbSpaModel.prototype.$moduleLoader;
                    }
                    get $getService() {
                        return WbSpaModel.prototype.$getService;
                    }
                    get $services() {
                        return WbSpaModel.prototype.$services;
                    }
                    get $httpClient() {
                        return WbSpaModel.prototype.$httpClient;
                    }
                    get $helper() {
                        return WbSpaModel.prototype.$helper;
                    }
                    async onBeforeActionExecuting(e, t, r) {
                        (r.cancelRequest = !0),
                            this.initialized || (await this._initAsync()),
                            this.$services.clientActionsHelper.beforeAddAction();
                    }
                    async onActionExecuting(e, t, r) {
                        var s, n, o;
                        const i = this.modules.QueryHelper.getInitialParams();
                        (this.catalogMenu =
                            this.xData =
                            this.products =
                            this.targetUrl =
                            this.isEmpty =
                                null),
                            (this.isNetworkError = !1);
                        let a = i,
                            {
                                brand: l,
                                page: c = 1,
                                sort: u = "popular",
                                cardsize: d,
                                search: p,
                                targeturl: h,
                                nocorrection: m,
                                ssubject: g,
                            } = a,
                            b = ((e, t) => {
                                var r = {};
                                for (var s in e)
                                    ys.call(e, s) &&
                                        t.indexOf(s) < 0 &&
                                        (r[s] = e[s]);
                                if (null != e && bs)
                                    for (var s of bs(e))
                                        t.indexOf(s) < 0 &&
                                            vs.call(e, s) &&
                                            (r[s] = e[s]);
                                return r;
                            })(a, [
                                "brand",
                                "page",
                                "sort",
                                "cardsize",
                                "search",
                                "targeturl",
                                "nocorrection",
                                "ssubject",
                            ]);
                        const y = new this.modules.QueryHelper({
                                sort: u,
                                page: c,
                                ssubject: g,
                                filters:
                                    this.modules.QueryHelper.checkOnlyFilterParams(
                                        b
                                    ),
                            }),
                            v = y.getQueryStringForCatalog(),
                            f =
                                wb.global.settings.switches
                                    .enableInfiniteScroll ||
                                WbSpaModel.prototype.$analitic.checkDataInSplitterServiceV2(
                                    "common",
                                    "ab_enableAutoNextPage",
                                    "yes"
                                ),
                            w = new URLSearchParams(v);
                        w.delete("page");
                        const S = await this._getXDataAsync(i);
                        if (null == S.search || "" === S.search.toSafeString())
                            return (
                                this._sendSearchEventForNonSearchPages(S),
                                (r.redirected = !0),
                                this.$router.moveTo404Async()
                            );
                        const _ =
                                await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),
                            C =
                                this.modules.CatalogProvider.createGoodsProvider(
                                    S
                                ),
                            {
                                goods: I = [],
                                resp: k,
                                isNetworkError: M = !1,
                            } = await this._loadGoodsAsync(C, f ? w : v),
                            P = (null == k ? void 0 : k.metadata)
                                ? null == k
                                    ? void 0
                                    : k.metadata
                                : k;
                        if (
                            ((this.isEmpty =
                                void 0 !== (null == P ? void 0 : P.is_empty)
                                    ? P.is_empty
                                    : null),
                            (null == P ? void 0 : P.name) || (S.gender = null),
                            "redirect" ===
                                (null == P ? void 0 : P.catalog_type) &&
                                (null == P ? void 0 : P.catalog_value))
                        ) {
                            const e = await this._checkRedirectUrl(
                                P.catalog_value
                            );
                            if (e)
                                return (
                                    this._sendSearchEventForNonSearchPages(S),
                                    (r.redirected = !0),
                                    this.$router.moveTo(e, !0)
                                );
                        }
                        (null == P ? void 0 : P.title) && (S.title = P.title),
                            (null == P ? void 0 : P.name) &&
                                (null == P ? void 0 : P.change_input) &&
                                (S.search = P.name),
                            (null == P ? void 0 : P.catalog_value) &&
                                (S.xcatalogQuery = P.catalog_value),
                            (null == P ? void 0 : P.catalog_type) &&
                                (S.xcatalogShard = P.catalog_type),
                            (null == P ? void 0 : P.context) &&
                                (S.xcatalogContext = P.context),
                            (null == P ? void 0 : P.normquery) &&
                                (S.normQuery = P.normquery),
                            (null == P ? void 0 : P.rs) && (S.rs = P.rs),
                            (S.originalSearch =
                                null != (s = null == P ? void 0 : P.original)
                                    ? s
                                    : null),
                            (S.change_input =
                                null !=
                                    (n = null == P ? void 0 : P.change_input) &&
                                n),
                            (this.products = M ? [] : I),
                            (this.emptySearch =
                                0 ===
                                    (null == (o = this.products)
                                        ? void 0
                                        : o.length) &&
                                0 === y.getFiltersQuery().toString().length),
                            (this.isNetworkError = M);
                        const T = await this._checkPossibleCardRedirects(i, S);
                        if (T && this.emptySearch)
                            return (
                                this._sendSearchEventForNonSearchPages(S),
                                (r.redirected = !0),
                                this.$services.clientActionsHelper.onSearchRedirectToProduct(),
                                this.$router.moveTo(T, !0)
                            );
                        (this.emptySearchRecom = []),
                            this.emptySearch &&
                                (this.emptySearchRecom =
                                    await this._getEmptySearchRecommendations(
                                        S
                                    )),
                            this._needChangeEmptyUserSearch(this, S) &&
                                (S.userSearch = S.search),
                            (this.xData = S),
                            (this.targetUrl = h),
                            (this.xInfo = _),
                            (this.sort = u);
                    }
                    _sendSearchEventForNonSearchPages(e) {
                        const t =
                            WbSpaModel.prototype.$analitic.getLastSearchAnaliticsData();
                        t &&
                            e.search === t.text &&
                            WbSpaModel.prototype.$analitic.sendEvent(
                                "Search_Request_Send",
                                t
                            );
                    }
                    onActionExecuted(e) {
                        var t;
                        e.responseData || (e.responseData = {});
                        const r =
                                null != (t = this.xData.title)
                                    ? t
                                    : this.xData.search,
                            s = {
                                type: ss.A.search,
                                model: {
                                    title: r,
                                    xData: this.xData,
                                    tagsUrl:
                                        "" === this.xData.search.toSafeString()
                                            ? null
                                            : `${this.xData.search.toSafeString()}&lang=ru&${
                                                  this.xInfo
                                              }&locale=${WbSpaModel.prototype.$user.getLocale()}`,
                                    emptySearch: this.emptySearch,
                                    products: this.products,
                                    emptySearchRecom: this.emptySearchRecom,
                                    targetUrl: this.targetUrl,
                                    needAdultProtection: !wb.adult.isConfirmed,
                                    sorterModel: new this.modules.SorterModel(
                                        this.sort,
                                        window.location.href
                                    ),
                                    currentMenuItem: null,
                                    rootMenuItem: null,
                                    isNetworkError: this.isNetworkError,
                                    isEmpty: this.isEmpty,
                                    hasSelectedChild: !1,
                                },
                            };
                        Object.assign(e.responseData, {
                            data: s,
                        });
                    }
                    async _loadGoodsAsync(e, t) {
                        try {
                            const { goods: r = [], resp: s } =
                                await e.loadGoodsAsync(t);
                            return {
                                goods: r,
                                resp: s,
                            };
                        } catch (e) {
                            return {
                                goods: [],
                                resp: null,
                                isNetworkError: !0,
                            };
                        }
                    }
                    async _initAsync() {
                        const [e, t, r, s] = await Promise.all([
                            this.$moduleLoader.loadModuleAsync("xCatalogData"),
                            this.$moduleLoader.loadModuleAsync("queryHelper"),
                            this.$moduleLoader.loadModuleAsync(
                                "xCatalogProvider"
                            ),
                            this.$moduleLoader.loadModuleAsync("sorterModel"),
                            this.$getService("clientActionsHelper"),
                        ]);
                        (this.modules = {
                            XCatalogData: e.XSeachData,
                            QueryHelper: t,
                            CatalogProvider: r,
                            SorterModel: s.CatalogSorterModel,
                        }),
                            (this.initialized = !0);
                    }
                    async _getXDataAsync(e) {
                        const t = await WbSpaModel.prototype.$getUserGender();
                        return new this.modules.XCatalogData(
                            e.search,
                            e.search,
                            null,
                            null,
                            t,
                            e.nocorrection,
                            e.ssubject
                        );
                    }
                    async _checkPossibleCardRedirects(e, t) {
                        try {
                            return await this._tryGetUrlToProductCard(e, t);
                        } catch (e) {
                            return (
                                console.error(
                                    `Error checking redirect ${e.message}`
                                ),
                                null
                            );
                        }
                    }
                    async _checkRedirectUrl(e) {
                        var t;
                        try {
                            const r = new URL(
                                e.startsWith("http") ? e : "https://" + e
                            );
                            if (r.host.endsWith(".wildberries.ru")) {
                                const e =
                                    !r.pathname.startsWith("/recent") &&
                                    r.pathname.startsWith("/catalog");
                                if (
                                    (e &&
                                        (null ==
                                        (t = await wb.spa.getCatalogMenu())
                                            ? void 0
                                            : t.menuByUrl.get(r.pathname))) ||
                                    !e
                                )
                                    return r.toString();
                            }
                            return r.toString();
                        } catch (e) {
                            return null;
                        }
                    }
                    async _tryGetUrlToProductCard(e, t) {
                        var r;
                        if (!t.isValid || "merger" === t.shardKey) return null;
                        const s = Number(e.search);
                        if (!this.$helper.isNumber(s)) return null;
                        if (s <= 1e3 || s >= 1e9) return null;
                        try {
                            const e = await wb.xnm.getXnmProducts([s]);
                            if (
                                !(
                                    (null == (r = null == e ? void 0 : e[s])
                                        ? void 0
                                        : r.pics) > 0
                                )
                            )
                                return null;
                            const t = new URL(
                                `/catalog/${s}/detail.aspx`,
                                window.location.origin
                            );
                            return t.searchParams.set("targetUrl", "SP"), t;
                        } catch (e) {
                            return null;
                        }
                    }
                    async _getEmptySearchRecommendations(e) {
                        const t = `https://search-goods.wildberries.ru/search?query=${encodeURIComponent(
                            e.search
                        )}`;
                        try {
                            const e = await this.$httpClient.fetchBasicJSON(
                                t,
                                {},
                                {
                                    timeout: 2e3,
                                }
                            );
                            if (!(Array.isArray(e) && e.length > 0)) return [];
                            const r = await wb.xnm.getCatalogCards(e, !1, !1);
                            return Object.values(r).reduce(
                                (e, t) => (
                                    t.id &&
                                        e.push(
                                            wb.xnm.convertXProductToSpaCatalogProduct(
                                                t
                                            )
                                        ),
                                    e
                                ),
                                []
                            );
                        } catch (e) {
                            return console.error(e.message), [];
                        }
                    }
                    _notShowTecDoc(e) {
                        var t, r;
                        return (
                            !(null ==
                            (t = null == e ? void 0 : e.xcatalogContext)
                                ? void 0
                                : t.includes("autoproduct")) ||
                            wb.settings.isIE ||
                            !(null == (r = wb.global.settings.switches)
                                ? void 0
                                : r.tecDocEnable)
                        );
                    }
                    _needChangeEmptyUserSearch(e, t) {
                        var r;
                        if (!e.emptySearch) return !1;
                        if (this._notShowTecDoc(t)) return !1;
                        return (
                            -1 !==
                            (null == (r = t.userSearch)
                                ? void 0
                                : r.indexOf("automodel:"))
                        );
                    }
                };
                const Ss = ["wide", "mini"];
                var _s = class {
                        constructor() {
                            (this.fullMenu = null),
                                (this.menuByUrl = new Map()),
                                (this.menuById = new Map()),
                                (this.brandsMenuList = {
                                    items: null,
                                }),
                                (this.promoId = null),
                                (this.isSpecial = null),
                                (this.isTrend = !1);
                        }
                        async initMenu(e) {
                            var t, r, s, n;
                            if (!e) return;
                            const o =
                                null == (t = e.promo.shelves)
                                    ? void 0
                                    : t.reduce((e, t) => {
                                          const r = t.type;
                                          return (
                                              e[r] || (e[r] = []),
                                              e[r].push(t),
                                              e
                                          );
                                      }, {});
                            (this.promoId = null != (r = e.promo.id) ? r : 0),
                                (this.isSpecial = e.promo.isSpecial),
                                (this.isTrend = e.isTrend),
                                (this.promoShelf =
                                    null != (s = null == o ? void 0 : o.promo)
                                        ? s
                                        : null),
                                (this.brandShelves =
                                    null != (n = null == o ? void 0 : o.brand)
                                        ? n
                                        : null),
                                (this.shelves = e.promo.shelves),
                                (this.isExtended = e.promo.isExtended),
                                this._createMenuMap(e),
                                this._generateImg(e);
                        }
                        getCurrentMenuItem(e) {
                            if (!e) return null;
                            const t = e.pathname.replace(
                                "promotionscatalogdata",
                                "promotions"
                            );
                            return this.menuByUrl.get(t);
                        }
                        getSitePathItems(e) {
                            if (!e) return null;
                            const t = [];
                            t.push({
                                id: e.id,
                                name: e.name,
                                pageUrl: e.url,
                            });
                            let r = this.menuById.get(e.id).parentId;
                            for (; null != r; ) {
                                const e = this.menuById.get(r);
                                t.push({
                                    id: r,
                                    name: e.name,
                                    pageUrl: e.url,
                                }),
                                    (r = e.parentId);
                            }
                            return (
                                t.push({
                                    id: 2192,
                                    name: wb.i18n.t("catalog.promotions"),
                                    pageUrl: "/promotions",
                                }),
                                t.reverse()
                            );
                        }
                        getCatalogMenu(e, t) {
                            var r, s, n, o, i, a;
                            if (!e) return;
                            if (e.landing || 2 === t.length)
                                return {
                                    current: {
                                        name: e.name,
                                        link: e.url,
                                        isTop: e.isTop,
                                        lastSelected: !1,
                                    },
                                    sideMenu: [],
                                    parent: {},
                                    parents: [],
                                    tagsMenu:
                                        null !=
                                        (s =
                                            null == (r = e.childNodes)
                                                ? void 0
                                                : r.map((e) => ({
                                                      name: e.name,
                                                      link: e.url,
                                                  })))
                                            ? s
                                            : [],
                                };
                            const l = t[t.length - 2],
                                c = t.slice(1).map((e) => ({
                                    name: e.name,
                                    link: e.pageUrl,
                                }));
                            c[c.length - 1].lastSelected = !0;
                            const u =
                                null == (n = e.childNodes)
                                    ? void 0
                                    : n.map((e) => ({
                                          name: e.name,
                                          link: e.url,
                                          anc: !0,
                                      }));
                            if (
                                (null == (o = e.childNodes)
                                    ? void 0
                                    : o.length) > 0
                            )
                                return {
                                    current: {
                                        name: e.name,
                                        link: e.url,
                                        isTop: e.isTop,
                                        lastSelected: !1,
                                    },
                                    sideMenu: [...c, ...u],
                                    parent: {
                                        name: l.name,
                                        link: l.pageUrl,
                                    },
                                    parents: this.getParents(e.id),
                                    tagsMenu: null != u ? u : [],
                                };
                            const d = this.menuByUrl.get(l.pageUrl);
                            return {
                                current: {
                                    name: e.name,
                                    link: e.url,
                                    isTop: e.isTop,
                                    lastSelected: !0,
                                },
                                sideMenu: c,
                                parent: {
                                    name: l.name,
                                    link: l.pageUrl,
                                },
                                parents: this.getParents(e.id),
                                tagsMenu:
                                    null !=
                                    (a =
                                        null == (i = d.childNodes)
                                            ? void 0
                                            : i.map((e) => ({
                                                  name: e.name,
                                                  link: e.url,
                                              })))
                                        ? a
                                        : [],
                            };
                        }
                        hasItem(e) {
                            return !!e && this.menuById.has(e);
                        }
                        getCatalogLink(e) {
                            return this.menuById.get(e).url;
                        }
                        getParents(e) {
                            const t = [];
                            let r = this.menuById.get(e).parentId;
                            for (; null != r; ) {
                                const e = this.menuById.get(r);
                                t.push({
                                    name: e.name,
                                    link: e.url,
                                    isLanding: e.landing,
                                }),
                                    (r = e.parentId);
                            }
                            return t.reverse();
                        }
                        getRootNode(e) {
                            let t = this.menuById.get(e.id);
                            for (; null != t.parentId; )
                                t = this.menuById.get(t.parentId);
                            return this._adaptMenu(t);
                        }
                        _createMenuMap(e) {
                            (this.brandsMenuList.items = e.promo.brands),
                                (this.fullMenu = e.menu),
                                e.extraMenu &&
                                    this.fullMenu.unshift(...e.extraMenu),
                                this.fullMenu.forEach((t) => {
                                    var r;
                                    return this._setNode(
                                        t,
                                        null,
                                        1,
                                        null == (r = e.promo.categories)
                                            ? void 0
                                            : r.imgPath
                                    );
                                });
                        }
                        _setNode(e, t, r, s) {
                            var n;
                            2 === r && s && (e.imgPath = s),
                                this.menuByUrl.set(e.url, e),
                                this.menuById.set(e.id, {
                                    id: e.id,
                                    parentId: t,
                                    url: e.url,
                                    name: e.name,
                                    landing: e.landing,
                                    childs: e.childNodes,
                                    promoId: this.promoId,
                                }),
                                null == (n = e.childNodes) ||
                                    n.forEach((t) =>
                                        this._setNode(t, e.id, r + 1, s)
                                    );
                        }
                        _adaptMenu(e) {
                            var t;
                            const r = this.menuById.get(e.id);
                            return (
                                (r.childs =
                                    null == (t = r.childs)
                                        ? void 0
                                        : t.map((e) => this._adaptMenu(e))),
                                r
                            );
                        }
                        _generateImg(e) {
                            var t;
                            const r = e.promo;
                            r.poster &&
                                (this._generatePoster(r.poster),
                                (null == (t = r.categories)
                                    ? void 0
                                    : t.background) &&
                                    this._generateCategoryImgBackground(
                                        r.categories.background
                                    ));
                        }
                        _generatePoster(e) {
                            e &&
                                Ss.forEach((t) => {
                                    const r = `no-repeat url('${e[t]}'), ${e.background}`;
                                    document.documentElement.style.setProperty(
                                        `--custom-promo-poster-${t}`,
                                        r
                                    );
                                });
                        }
                        _generateCategoryImgBackground(e) {
                            document.documentElement.style.setProperty(
                                "--custom-promo-image-background",
                                e
                            );
                        }
                    },
                    Cs = Object.defineProperty,
                    Is = Object.getOwnPropertySymbols,
                    ks = Object.prototype.hasOwnProperty,
                    Ms = Object.prototype.propertyIsEnumerable,
                    Ps = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? Cs(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var Ts = class {
                        constructor() {
                            Ps(this, "bannersTask"),
                                Ps(this, "catalogMenu"),
                                Ps(this, "currentMenuItem"),
                                Ps(this, "enableEntryPromoPage"),
                                Ps(this, "initialized"),
                                Ps(this, "modules"),
                                Ps(this, "products"),
                                Ps(this, "promoKey"),
                                Ps(this, "promotionsService"),
                                Ps(this, "rewriteDestTo"),
                                Ps(this, "showCategories"),
                                Ps(this, "sort"),
                                Ps(this, "type"),
                                Ps(this, "xData"),
                                Ps(this, "xInfo"),
                                (this.initialized = !1),
                                (this.catalogMenu = null),
                                (this.modules = {});
                        }
                        async onBeforeActionExecuting(e, t, r) {
                            var s;
                            if (
                                ((this.xData =
                                    this.xInfo =
                                    this.currentMenuItem =
                                    this.products =
                                    this.type =
                                    this.sort =
                                        null),
                                r.cancelRequest)
                            )
                                return;
                            if (
                                ((this.promotionsService =
                                    await WbSpaModel.prototype.$getService(
                                        "promotionsService"
                                    )),
                                this.promotionsService.isTrendPathname(
                                    window.location.pathname
                                ) &&
                                    !this.promotionsService.isTrendPageEnabledForLocale())
                            )
                                return (
                                    this.promotionsService.leaveFromTrendPage(
                                        !1
                                    ),
                                    (r.redirected = !0),
                                    WbSpaModel.prototype.$router.moveTo404Async()
                                );
                            this.initialized || (await this._initAsync());
                            const n = new URL(e);
                            n.pathname = n.pathname.replace("/webapi", "");
                            const o = n.pathname.split("/")[2],
                                i = this._promoKey(
                                    o,
                                    WbSpaModel.prototype.$user.getLocale(),
                                    wb.currentLanguage
                                );
                            if (this.promoKey !== i) {
                                const e =
                                    await this.promotionsService.getPromoDataByUrl(
                                        o,
                                        WbSpaModel.prototype.$user.getLocale(),
                                        wb.currentLanguage
                                    );
                                await this._loadPromoMenu(e, o);
                            }
                            if (
                                !(
                                    this.catalogMenu.promoId > 0 &&
                                    (this.currentMenuItem =
                                        this.catalogMenu.getCurrentMenuItem(n))
                                )
                            )
                                return (
                                    (r.redirected = !0),
                                    WbSpaModel.prototype.$router.moveTo404Async()
                                );
                            (this.currentMenuItem =
                                this.catalogMenu.getCurrentMenuItem(n)),
                                (this.showCategories =
                                    null == (s = this.currentMenuItem)
                                        ? void 0
                                        : s.isTop),
                                (this.xData = this.currentMenuItem
                                    ? new this.modules.XCatalogData(
                                          this.currentMenuItem.query,
                                          this.currentMenuItem.shardKey
                                      )
                                    : null),
                                (this.xData.isPromo = !0),
                                (this.enableEntryPromoPage =
                                    this.showCategories),
                                (this.bannersTask = this.showCategories
                                    ? this._bannersTask(
                                          this.catalogMenu.promoId
                                      )
                                    : Promise.resolve(null)),
                                (this.xInfo =
                                    await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()),
                                (r.cancelRequest = null != this.xData);
                        }
                        async onActionExecuting() {
                            if (
                                this.xData &&
                                this.xInfo &&
                                !this.enableEntryPromoPage
                            ) {
                                let e =
                                        this.modules.QueryHelper.getInitialParams(),
                                    {
                                        sort: t = this.modules.SorterModel
                                            .getSortFromCache,
                                        page: r = 1,
                                    } = e,
                                    s = ((e, t) => {
                                        var r = {};
                                        for (var s in e)
                                            ks.call(e, s) &&
                                                t.indexOf(s) < 0 &&
                                                (r[s] = e[s]);
                                        if (null != e && Is)
                                            for (var s of Is(e))
                                                t.indexOf(s) < 0 &&
                                                    Ms.call(e, s) &&
                                                    (r[s] = e[s]);
                                        return r;
                                    })(e, ["sort", "page"]);
                                const n = new this.modules.QueryHelper({
                                        sort: t,
                                        page: r,
                                        filters:
                                            this.modules.QueryHelper.checkOnlyFilterParams(
                                                s
                                            ),
                                    }).getQueryStringForCatalog(),
                                    o =
                                        wb.global.settings.switches
                                            .enableInfiniteScroll ||
                                        WbSpaModel.prototype.$analitic.checkDataInSplitterServiceV2(
                                            "common",
                                            "ab_enableAutoNextPage",
                                            "yes"
                                        ),
                                    i = new URLSearchParams(n);
                                i.delete("page");
                                const a =
                                        this.modules.xCatalogProvider.createGoodsProvider(
                                            this.xData
                                        ),
                                    { goods: l = [] } = await a.loadGoodsAsync(
                                        o ? i : n
                                    );
                                (this.products = l), (this.sort = t);
                            }
                        }
                        onActionExecuted(e) {
                            var t;
                            if (null == this.xData) return;
                            e.responseData || (e.responseData = {});
                            const r =
                                    null == (t = this.catalogMenu)
                                        ? void 0
                                        : t.getSitePathItems(
                                              this.currentMenuItem
                                          ),
                                s = this.enableEntryPromoPage
                                    ? this._getEntryModel(r)
                                    : this._getCatalogModel(r);
                            Object.assign(e.responseData, {
                                data: s,
                            });
                        }
                        async _initAsync() {
                            const [e, t, r, s] = await Promise.all([
                                WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "xCatalogData"
                                ),
                                WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "queryHelper"
                                ),
                                WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "xCatalogProvider"
                                ),
                                WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "sorterModel"
                                ),
                            ]);
                            (this.modules = {
                                XCatalogData: e.XCatalogData,
                                QueryHelper: t,
                                xCatalogProvider: r,
                                SorterModel: s.CatalogSorterModel,
                            }),
                                (this.catalogMenu = new _s()),
                                (this.initialized = !0);
                        }
                        async _loadPromoMenu(e, t) {
                            await this.catalogMenu.initMenu(e),
                                (this.promoKey = this.catalogMenu
                                    ? this._promoKey(
                                          t,
                                          WbSpaModel.prototype.$user.getLocale(),
                                          wb.currentLanguage
                                      )
                                    : null);
                        }
                        _promoKey(e, t = "ru", r) {
                            return `${e}-${t}-${r}`;
                        }
                        _getEntryModel(e) {
                            var t, r, s, n, o, i;
                            if (this.catalogMenu.isTrend) {
                                const e = new URL(window.location.href);
                                (e.pathname = this.catalogMenu.getRootNode(
                                    this.catalogMenu.getCurrentMenuItem(e)
                                ).url),
                                    (this.currentMenuItem =
                                        this.catalogMenu.getCurrentMenuItem(e)),
                                    WbSpaModel.prototype.$router.replaceState(
                                        window.history.state,
                                        document.title,
                                        e
                                    );
                            }
                            return {
                                mainVersion: 0,
                                type: ss.A.promoEntry,
                                model: {
                                    xData: this.xData,
                                    menuId:
                                        null == (t = this.currentMenuItem)
                                            ? void 0
                                            : t.id,
                                    currentMenuItem:
                                        this.catalogMenu.menuById.get(
                                            null == (r = this.currentMenuItem)
                                                ? void 0
                                                : r.id
                                        ),
                                    rootMenuItem: this.catalogMenu.getRootNode(
                                        this.currentMenuItem
                                    ),
                                    children:
                                        null == (s = this.currentMenuItem)
                                            ? void 0
                                            : s.childNodes,
                                    sitePathItems: e,
                                    title:
                                        null !=
                                        (i =
                                            null == (n = this.currentMenuItem)
                                                ? void 0
                                                : n.seo)
                                            ? i
                                            : null == (o = this.currentMenuItem)
                                            ? void 0
                                            : o.name,
                                    needAdultProtection: !wb.adult.isConfirmed,
                                    catalogMenu: this.catalogMenu,
                                    promoId: this.catalogMenu.promoId,
                                    catalogPromoLeftMenu:
                                        this.catalogMenu.getCatalogMenu(
                                            this.currentMenuItem,
                                            e
                                        ),
                                    bannersTask: this.bannersTask,
                                    isSpecial: this.catalogMenu.isSpecial,
                                    catalogType: ss.A.promoEntry,
                                    promoShelf: this.catalogMenu.promoShelf,
                                    brandShelves: this.catalogMenu.brandShelves,
                                    isExtended: this.catalogMenu.isExtended,
                                },
                            };
                        }
                        _getCatalogModel(e) {
                            var t, r, s, n, o, i, a, l, c;
                            return {
                                mainVersion: 0,
                                type: ss.A.goods,
                                model: {
                                    xData: this.xData,
                                    menuId:
                                        null == (t = this.currentMenuItem)
                                            ? void 0
                                            : t.id,
                                    currentMenuItem:
                                        this.catalogMenu.menuById.get(
                                            null == (r = this.currentMenuItem)
                                                ? void 0
                                                : r.id
                                        ),
                                    rootMenuItem: this.catalogMenu.getRootNode(
                                        this.currentMenuItem
                                    ),
                                    hasSelectedChild: !!(null ==
                                    (s = this.currentMenuItem)
                                        ? void 0
                                        : s.childs),
                                    sitePathItems: e,
                                    promoMenuV2: !0,
                                    catalogPromoLeftMenu:
                                        this.catalogMenu.getCatalogMenu(
                                            this.currentMenuItem,
                                            e
                                        ),
                                    emptyCatalogLink:
                                        null == (n = this.currentMenuItem)
                                            ? void 0
                                            : n.url,
                                    tagsUrl:
                                        null == (o = this.currentMenuItem)
                                            ? void 0
                                            : o.url,
                                    products: this.products,
                                    targetUrl: "GP",
                                    title:
                                        null !=
                                        (l =
                                            null == (i = this.currentMenuItem)
                                                ? void 0
                                                : i.seo)
                                            ? l
                                            : null == (a = this.currentMenuItem)
                                            ? void 0
                                            : a.name,
                                    containerClass: "catalog-page",
                                    needAdultProtection: !wb.adult.isConfirmed,
                                    sorterModel: new this.modules.SorterModel(
                                        this.sort,
                                        null == (c = this.currentMenuItem)
                                            ? void 0
                                            : c.url
                                    ),
                                    promoId: this.catalogMenu.promoId,
                                    isSpecial: this.catalogMenu.isSpecial,
                                    shelves: this.catalogMenu.shelves,
                                    isExtended: this.catalogMenu.isExtended,
                                    isTrend: this.catalogMenu.isTrend,
                                },
                            };
                        }
                        async _bannersTask(e) {
                            return this.catalogMenu.isExtended
                                ? WbSpaModel.prototype.$services.bannersService.getPromotionSpecialBanners()
                                : WbSpaModel.prototype.$services.bannersService.getPromoCatalogBanners(
                                      e
                                  );
                        }
                    },
                    $s = Object.defineProperty,
                    As = Object.getOwnPropertySymbols,
                    Ds = Object.prototype.hasOwnProperty,
                    Bs = Object.prototype.propertyIsEnumerable,
                    Os = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? $s(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var Es = class {
                        constructor(e) {
                            Os(this, "brand"),
                                Os(this, "catalogMenu"),
                                Os(this, "currentMenuItem"),
                                Os(this, "modules"),
                                Os(this, "products"),
                                Os(this, "sort"),
                                Os(this, "xData"),
                                Os(this, "xInfo"),
                                Object.assign(this, e);
                        }
                        get $router() {
                            return WbSpaModel.prototype.$router;
                        }
                        async onBeforeActionExecuting(e, t, r) {
                            var s, n;
                            (this.xData =
                                this.modules &&
                                new this.modules.XCatalogData(
                                    null == (s = this.currentMenuItem)
                                        ? void 0
                                        : s.query,
                                    null == (n = this.currentMenuItem)
                                        ? void 0
                                        : n.shard,
                                    "Brand"
                                )),
                                (r.cancelRequest = null != this.xData);
                        }
                        async onActionExecuting(e, t, r) {
                            var s, n, o;
                            if (this.xData && this.xInfo) {
                                let e =
                                        null == (s = this.modules)
                                            ? void 0
                                            : s.QueryHelper.getInitialParams(),
                                    {
                                        sort: t = null == (n = this.modules)
                                            ? void 0
                                            : n.SorterModel.getSortFromCache,
                                        page: i = 1,
                                        sle: a,
                                    } = e,
                                    l = ((e, t) => {
                                        var r = {};
                                        for (var s in e)
                                            Ds.call(e, s) &&
                                                t.indexOf(s) < 0 &&
                                                (r[s] = e[s]);
                                        if (null != e && As)
                                            for (var s of As(e))
                                                t.indexOf(s) < 0 &&
                                                    Bs.call(e, s) &&
                                                    (r[s] = e[s]);
                                        return r;
                                    })(e, ["sort", "page", "sle"]);
                                if ("adidas" === this.brand && a)
                                    return (
                                        (r.redirected = !0),
                                        void this.$router.moveTo404Async()
                                    );
                                const c = (
                                        this.modules &&
                                        new this.modules.QueryHelper({
                                            sort: t,
                                            page: i,
                                            filters:
                                                this.modules.QueryHelper.checkOnlyFilterParams(
                                                    l
                                                ),
                                        })
                                    ).getQueryStringForCatalog(),
                                    u =
                                        wb.global.settings.switches
                                            .enableInfiniteScroll ||
                                        WbSpaModel.prototype.$analitic.checkDataInSplitterServiceV2(
                                            "common",
                                            "ab_enableAutoNextPage",
                                            "yes"
                                        ),
                                    d = new URLSearchParams(c);
                                d.delete("page");
                                const p =
                                        null == (o = this.modules)
                                            ? void 0
                                            : o.xCatalogProvider.createGoodsProvider(
                                                  this.xData
                                              ),
                                    { goods: h = [] } = await p.loadGoodsAsync(
                                        u ? d : c
                                    );
                                (this.products = h), (this.sort = t);
                            }
                        }
                        onActionExecuted(e) {
                            var t, r, s, n, o, i;
                            if (null == this.xData) return;
                            e.responseData || (e.responseData = {});
                            const a = this.catalogMenu.getSitePathItems(
                                    this.currentMenuItem
                                ),
                                l = {
                                    mainVersion: 0,
                                    type: ss.A.brand,
                                    model: {
                                        brandInfo:
                                            this.catalogMenu.getBrandInfo(),
                                        xData: this.xData,
                                        currentMenuItem: this.currentMenuItem,
                                        rootMenuItem:
                                            this.catalogMenu.getRootNode(
                                                this.currentMenuItem
                                            ),
                                        hasSelectedChild: !1,
                                        sitePathItems: a,
                                        catalogMenu:
                                            this.catalogMenu.getCatalogMenu(
                                                null == a ? void 0 : a.slice(1)
                                            ),
                                        emptyCatalogLink:
                                            null == (t = this.currentMenuItem)
                                                ? void 0
                                                : t.url,
                                        tagsUrl:
                                            null == (r = this.currentMenuItem)
                                                ? void 0
                                                : r.url,
                                        products: this.products,
                                        promoMenuV2: !1,
                                        targetUrl: "BP",
                                        title:
                                            null !=
                                            (o =
                                                null ==
                                                (s = this.currentMenuItem)
                                                    ? void 0
                                                    : s.seo)
                                                ? o
                                                : null ==
                                                  (n = this.currentMenuItem)
                                                ? void 0
                                                : n.name,
                                        containerClass: "catalog-page",
                                        needAdultProtection:
                                            !wb.adult.isConfirmed,
                                        sorterModel:
                                            this.modules &&
                                            new this.modules.SorterModel(
                                                this.sort,
                                                null ==
                                                (i = this.currentMenuItem)
                                                    ? void 0
                                                    : i.url
                                            ),
                                    },
                                };
                            Object.assign(e.responseData, {
                                data: l,
                            });
                        }
                    },
                    xs = Object.defineProperty,
                    Ls = Object.getOwnPropertySymbols,
                    js = Object.prototype.hasOwnProperty,
                    Fs = Object.prototype.propertyIsEnumerable,
                    Ns = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? xs(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var Ws = class {
                        constructor(e) {
                            Ns(this, "xData"),
                                Ns(this, "xInfo"),
                                Ns(this, "brand"),
                                Ns(this, "products"),
                                Ns(this, "sort"),
                                Ns(this, "currentMenuItem"),
                                Ns(this, "catalogMenu"),
                                Ns(this, "brandConstructorService"),
                                Ns(this, "modules"),
                                Ns(this, "brandScheme"),
                                Object.assign(this, e);
                        }
                        get $router() {
                            return WbSpaModel.prototype.$router;
                        }
                        async onBeforeActionExecuting(e, t, r) {
                            var s, n;
                            (this.xData =
                                this.modules &&
                                new this.modules.XCatalogData(
                                    null == (s = this.currentMenuItem)
                                        ? void 0
                                        : s.query,
                                    null == (n = this.currentMenuItem)
                                        ? void 0
                                        : n.shard,
                                    "Brand"
                                )),
                                (r.cancelRequest = null != this.xData);
                        }
                        async onActionExecuting(e, t, r) {
                            var s, n, o;
                            if (
                                this.xData &&
                                this.xData.xcatalogShard &&
                                this.xInfo
                            ) {
                                let e =
                                        null == (s = this.modules)
                                            ? void 0
                                            : s.QueryHelper.getInitialParams(),
                                    {
                                        sort: t = null == (n = this.modules)
                                            ? void 0
                                            : n.SorterModel.getSortFromCache,
                                        page: i = 1,
                                        sle: a,
                                    } = e,
                                    l = ((e, t) => {
                                        var r = {};
                                        for (var s in e)
                                            js.call(e, s) &&
                                                t.indexOf(s) < 0 &&
                                                (r[s] = e[s]);
                                        if (null != e && Ls)
                                            for (var s of Ls(e))
                                                t.indexOf(s) < 0 &&
                                                    Fs.call(e, s) &&
                                                    (r[s] = e[s]);
                                        return r;
                                    })(e, ["sort", "page", "sle"]);
                                if ("adidas" === this.brand && a)
                                    return (
                                        (r.redirected = !0),
                                        void this.$router.moveTo404Async()
                                    );
                                const c =
                                        this.modules &&
                                        new this.modules.QueryHelper({
                                            sort: t,
                                            page: i,
                                            filters:
                                                this.modules.QueryHelper.checkOnlyFilterParams(
                                                    l
                                                ),
                                        }),
                                    u = "sort";
                                this.xData.xcatalogQuery.includes(u) &&
                                    c.queryDictionary.hasOwnProperty(u) &&
                                    delete c.queryDictionary[u];
                                const d = c.getQueryStringForCatalog(),
                                    p =
                                        null == (o = this.modules)
                                            ? void 0
                                            : o.xCatalogProvider.createGoodsProvider(
                                                  this.xData
                                              ),
                                    { goods: h = [] } = await p.loadGoodsAsync(
                                        d
                                    );
                                (this.products = h), (this.sort = t);
                            }
                        }
                        async onActionExecuted(e) {
                            var t, r, s, n;
                            if (null == this.xData) return;
                            e.responseData || (e.responseData = {});
                            const o = this.catalogMenu.getSitePathItems(
                                    this.currentMenuItem
                                ),
                                i = this.catalogMenu.getCatalogMenu(
                                    null == o ? void 0 : o.slice(1)
                                ),
                                a =
                                    this.brandConstructorService.convertSchemeToViewModel(
                                        this.brandScheme,
                                        this.catalogMenu,
                                        this.currentMenuItem
                                    );
                            await WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                "brandConstructorConfig"
                            );
                            const l = await this._getMetaTags(
                                    this.currentMenuItem
                                ),
                                c = {
                                    mainVersion: 0,
                                    type: ss.A.brandConstructorCatalog,
                                    model: {
                                        brandInfo:
                                            this.catalogMenu.getBrandInfo(),
                                        currentMenuItem: this.currentMenuItem,
                                        rootMenuItem:
                                            this.catalogMenu.getRootNode(
                                                this.currentMenuItem
                                            ),
                                        containerClass:
                                            "brand-constructor-catalog",
                                        isCatalog: !0,
                                        needAdultProtection:
                                            !wb.adult.isConfirmed,
                                        sitePathItems: o,
                                        catalogMenu: i,
                                        brandScheme: a,
                                        title:
                                            null == (t = this.currentMenuItem)
                                                ? void 0
                                                : t.seo,
                                        metaTags: l,
                                        tagsUrl:
                                            null == (r = this.currentMenuItem)
                                                ? void 0
                                                : r.url,
                                        sorterModel:
                                            this.modules &&
                                            new this.modules.SorterModel(
                                                this.sort,
                                                null ==
                                                (s = this.currentMenuItem)
                                                    ? void 0
                                                    : s.url
                                            ),
                                        products: this.products,
                                        xData: this.xData,
                                        targetUrl: "BP",
                                        emptyCatalogLink:
                                            null == (n = this.currentMenuItem)
                                                ? void 0
                                                : n.url,
                                    },
                                };
                            Object.assign(e.responseData, {
                                data: c,
                            });
                        }
                        async _getMetaTags(e) {
                            var t;
                            try {
                                const r =
                                        null == e
                                            ? void 0
                                            : e.url
                                                  .split("?")[0]
                                                  .replace(
                                                      "brands/",
                                                      "brands/metatags/"
                                                  ),
                                    s =
                                        await WbSpaModel.prototype.$httpClient.fetchJSON(
                                            `/webapi/spa${r}?${new URLSearchParams(
                                                {
                                                    name:
                                                        (null == e
                                                            ? void 0
                                                            : e.name) || "",
                                                }
                                            )}`,
                                            {},
                                            {
                                                timeout: 3e3,
                                                nullOnError: !0,
                                            }
                                        );
                                return null !=
                                    (t = null == s ? void 0 : s.metaTags)
                                    ? t
                                    : [];
                            } catch (e) {
                                return [];
                            }
                        }
                    },
                    Rs = Object.defineProperty,
                    Us = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? Rs(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var Hs = class {
                    constructor(e) {
                        Us(this, "currentMenuItem"),
                            Us(this, "catalogMenu"),
                            Us(this, "brandConstructorService"),
                            Us(this, "brandScheme"),
                            Object.assign(this, e);
                    }
                    async onBeforeActionExecuting(e, t, r) {
                        r.cancelRequest = null != this.currentMenuItem;
                    }
                    async onActionExecuting() {}
                    async onActionExecuted(e) {
                        e.responseData || (e.responseData = {});
                        const t = this.catalogMenu.getSitePathItems(
                                this.currentMenuItem
                            ),
                            r = this.catalogMenu.getCatalogMenu(
                                null == t ? void 0 : t.slice(1)
                            ),
                            s =
                                this.brandConstructorService.convertSchemeToViewModel(
                                    this.brandScheme,
                                    this.catalogMenu,
                                    this.currentMenuItem
                                ),
                            n =
                                await this.brandConstructorService.getMainBanners(
                                    this.catalogMenu
                                );
                        await WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                            "brandConstructorConfig"
                        );
                        const o = {
                                brandInfo: this.catalogMenu.getBrandInfo(),
                                brandDirections: {},
                                containerClass: "brand-constructor-ordinary",
                                isCatalog: !1,
                                needAdultProtection: !wb.adult.isConfirmed,
                                sitePathItems: t,
                                catalogMenu: r,
                                brandScheme: s,
                                mainBanners: n,
                            },
                            i = {
                                mainVersion: 0,
                                type: ss.A.brandConstructor,
                                model: o,
                            };
                        Object.assign(e.responseData, {
                            data: i,
                        });
                    }
                };
                class qs {
                    get menuBase() {
                        return qs.prototype.menuBaseData;
                    }
                    set menuBase(e) {
                        qs.prototype.menuBaseData = e;
                    }
                    static get menuById() {
                        return qs.prototype.menuByIdData;
                    }
                    static async init() {
                        var e;
                        if (
                            qs.prototype.menuBaseData ||
                            qs.prototype.currentLanguage === wb.currentLanguage
                        )
                            return;
                        const t = wb.currentLanguage,
                            r =
                                "ru" === t
                                    ? "subject-base.json"
                                    : `subject-base-${t}.json`;
                        (qs.prototype.menuBaseData =
                            null !=
                            (e =
                                await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(
                                    r,
                                    1e4
                                ))
                                ? e
                                : []),
                            (qs.prototype.currentLanguage = t),
                            (qs.prototype.menuByIdData = new Map()),
                            qs.prototype._createMenuMap();
                    }
                    _createMenuMap() {
                        qs.prototype.menuBase.forEach((e) =>
                            qs.prototype._setNode(e, null)
                        );
                    }
                    _setNode(e, t) {
                        var r;
                        t && (e.parentId = t),
                            qs.prototype.menuByIdData.set(e.id, e),
                            null == (r = e.childs) ||
                                r.forEach((t) =>
                                    qs.prototype._setNode(t, e.id)
                                );
                    }
                }
                var zs = qs;
                var Vs = class extends zs {
                        constructor(e, t) {
                            super(),
                                (this.modules = e),
                                (this.brandConstructorService = t),
                                (this.brandData = null),
                                (this.fullMenu = null),
                                (this.menuByUrl = new Map()),
                                (this.menuById = new Map());
                        }
                        async initMenu(e, t, r, s) {
                            var n;
                            let o =
                                await WbSpaModel.prototype.$httpClient.fetchStaticV3(
                                    wb.helpers.url.urlStaticData,
                                    {},
                                    `brands/${e}.json`
                                );
                            if (!o) {
                                const t =
                                    null == (n = e.split("-")) ? void 0 : n[0];
                                t &&
                                    (o =
                                        await WbSpaModel.prototype.$httpClient.fetchStaticV3(
                                            wb.helpers.url.urlStaticData,
                                            {},
                                            `brands-by-id/${t}.json`
                                        )),
                                    o &&
                                        (location.href =
                                            $.views.helpers.brandUrl(o.url));
                            }
                            if (!o) return null;
                            super.menuBase || (await zs.init()),
                                (this.isConstructor = t.indexOf(o.id) >= 0),
                                (this.brandData = o);
                            const i = $.views.helpers.brandUrl(o.url),
                                a = await this._getMenuItems(o, r, i, s);
                            (this.fullMenu = this._getFullMenu(
                                o,
                                i,
                                a,
                                this.infoMenu
                            )),
                                this._createMenuMap(),
                                (this.isInited = !0);
                        }
                        _getFullMenu(e, t, r, s = []) {
                            return [
                                {
                                    id: e.id + "b",
                                    name: e.name,
                                    url: t,
                                    shard: this.isConstructor
                                        ? ""
                                        : this._brandToShard(e.name),
                                    query: this.isConstructor
                                        ? ""
                                        : this._brandToQuery(e.id),
                                    childs: r.concat(s),
                                },
                            ];
                        }
                        async _getMenuItems(e, t, r, s) {
                            var n, o, i;
                            if (!this.isConstructor)
                                return await this._getChildsFromSubjects(
                                    e,
                                    t,
                                    r
                                );
                            const a =
                                    this.brandConstructorService.getPageInfo(s),
                                l = await this.brandConstructorService.getMenus(
                                    e,
                                    a.pageType,
                                    a.infoUrl,
                                    a.previewMode
                                );
                            if (
                                ((this.previewMode = a.previewMode),
                                (this.hasCustomMenu =
                                    (null == (n = null == l ? void 0 : l.menu)
                                        ? void 0
                                        : n.length) > 0),
                                (null ==
                                (i =
                                    null ==
                                    (o = null == l ? void 0 : l.infoMenu)
                                        ? void 0
                                        : o.menuInfoItems)
                                    ? void 0
                                    : i.length) > 0 &&
                                    (this.infoMenu =
                                        l.infoMenu.menuInfoItems.map(
                                            (t) => (
                                                (t.id = `${t.id}info`),
                                                (t.url = `${r}/info/${t.href}`),
                                                (t.isInfo = !0),
                                                this._convertBrandScemeItemToMenuItemDTO(
                                                    t,
                                                    e
                                                )
                                            )
                                        )),
                                this.hasCustomMenu)
                            )
                                return await this._getChildsFromCustomMenu(
                                    e,
                                    l.menu
                                );
                            const c = await this._getChildsFromSubjects(
                                    e,
                                    t,
                                    r
                                ),
                                u = {
                                    id: e.id + "b-all",
                                    name: wb.i18n.t("catalog.wholeRange"),
                                    url: `${r}/all`,
                                    seo: wb.i18n.t(
                                        "catalog.wholeRangeOfBrand",
                                        {
                                            brandName: e.name,
                                        }
                                    ),
                                    shard: this._brandToShard(e.name),
                                    query: this._brandToQuery(e.id),
                                    childs: [],
                                };
                            return c.push(u), c;
                        }
                        async _getChildsFromCustomMenu(e, t) {
                            const r = t.map((t) =>
                                this._convertBrandScemeItemToMenuItemDTO(
                                    t,
                                    e,
                                    !0
                                )
                            );
                            return r.sort((e, t) => e - t), r;
                        }
                        async _getChildsFromSubjects(e, t, r) {
                            var s, n, o, i;
                            const a = this._brandToShard(e.name),
                                l = this._brandToQuery(e.id),
                                c = new this.modules.XCatalogData(
                                    l,
                                    a,
                                    "Brand"
                                ),
                                u =
                                    this.modules.xCatalogProvider.createGoodsProvider(
                                        c
                                    ),
                                d = await u.loadSubjectsAsync(t, c),
                                p =
                                    null !=
                                    (o =
                                        null ==
                                        (n =
                                            null ==
                                            (s = null == d ? void 0 : d.data)
                                                ? void 0
                                                : s.filters.find(
                                                      (e) =>
                                                          "xsubject" === e.key
                                                  ))
                                            ? void 0
                                            : n.items.map((e) => e.id))
                                        ? o
                                        : [],
                                h = [];
                            for (const t of this.menuBase) {
                                let s = !1;
                                const n = [];
                                for (const o of null !=
                                (i = null == t ? void 0 : t.childs)
                                    ? i
                                    : [])
                                    if (p.indexOf(o.id) >= 0) {
                                        s = !0;
                                        const t = Object.assign({}, o);
                                        (t.seo = `${e.name} ${o.name}`),
                                            (t.url = `${r}/${t.url}`),
                                            (t.shard = this._brandToShard(
                                                e.name
                                            )),
                                            (t.query = this._brandToQuery(
                                                e.id,
                                                t.id
                                            )),
                                            n.push(t);
                                    }
                                if (s) {
                                    const s = Object.assign({}, t);
                                    (s.seo = `${e.name} ${t.name}`),
                                        (s.url = `${r}/${t.url}`),
                                        (s.shard = this._brandToShard(e.name)),
                                        (s.query = this._brandToQuery(
                                            e.id,
                                            s.id
                                        )),
                                        (s.childs = n),
                                        (s.parent = e.id + "b"),
                                        h.push(s);
                                }
                            }
                            return h;
                        }
                        _convertBrandScemeItemToMenuItemDTO(e, t, r) {
                            const s = this._getXQueryForMenuItem(t, e.query),
                                n = {
                                    id: e.id,
                                    name: e.title,
                                    url: e.url.toLowerCase(),
                                    seo: `${t.name} ${e.title}`,
                                    sort: e.sort,
                                    shard: this._brandToShard(t.name),
                                    query: s,
                                };
                            return (
                                r &&
                                    ((n.isCustom = r),
                                    (n.parentId = t.id + "b")),
                                e.isInfo && (n.isInfo = !0),
                                n
                            );
                        }
                        _getXQueryForMenuItem(e, t) {
                            const r = new URLSearchParams(t);
                            return (
                                r.has("type") && r.delete("type"),
                                r.set("brand", e.id),
                                decodeURIComponent(r)
                            );
                        }
                        getBrandInfo() {
                            return {
                                id: this.brandData.siteId,
                                brandCod: this.brandData.id,
                                name: this.brandData.name,
                                brandLink: $.views.helpers.brandUrl(
                                    this.brandData.url
                                ),
                                hash: this.brandData.hash,
                            };
                        }
                        getCurrentMenuItem(e) {
                            var t;
                            if (
                                !(e =
                                    null !=
                                    (t = null == e ? void 0 : e.pathname)
                                        ? t
                                        : e)
                            )
                                return null;
                            const r = e
                                .replace("/data", "")
                                .replace("/preview", "");
                            let s = this.menuByUrl.get(r);
                            return (
                                !s &&
                                    this.hasCustomMenu &&
                                    this.menuByUrl.forEach((e) => {
                                        e.url.split("?")[0] == r && (s = e);
                                    }),
                                null != s
                                    ? s
                                    : this.menuByUrl.get(
                                          r.slice(0, r.lastIndexOf("/"))
                                      )
                            );
                        }
                        getSitePathItems(e) {
                            if (!e) return null;
                            const t = [];
                            t.push({
                                id: e.id,
                                name: e.name,
                                pageUrl: e.url,
                                isInfo: e.isInfo,
                                analytic: ["BCA", null, null, e.id],
                            });
                            let r = this.menuById.get(e.id).parentId;
                            for (; null != r; ) {
                                const e = this.menuById.get(r);
                                t.push({
                                    id: r,
                                    name: e.name,
                                    pageUrl: e.url,
                                    analytic: ["BCA", null, null, r],
                                }),
                                    (r = e.parentId);
                            }
                            const s = this._brandLetterToSitePathParam(
                                this.brandData.letter
                            );
                            return (
                                t.push({
                                    id: 0,
                                    name: wb.i18n.t("brands.brandByLetter", {
                                        currentLetterName: s.toUpperCase(),
                                    }),
                                    pageUrl: `/wildberries/brandlist.aspx?letter=${s}`,
                                }),
                                t.reverse()
                            );
                        }
                        getCatalogMenu(e) {
                            var t, r, s, n;
                            const o = [];
                            if (
                                (e =
                                    null == e
                                        ? void 0
                                        : e.filter((e) => !e.isInfo)) &&
                                0 !== e.length
                            )
                                if (1 === e.length) {
                                    const s = {
                                            name: "",
                                            link: "",
                                        },
                                        n =
                                            null !=
                                            (r =
                                                null ==
                                                (t = this.menuByUrl.get(
                                                    e[0].pageUrl
                                                ).childs)
                                                    ? void 0
                                                    : t
                                                          .filter(
                                                              (e) => !e.isInfo
                                                          )
                                                          .map((e) => ({
                                                              node: {
                                                                  id: e.id,
                                                                  name: e.name,
                                                                  link: e.url,
                                                              },
                                                              children: [],
                                                          })))
                                                ? r
                                                : [];
                                    o.push({
                                        node: s,
                                        children: n,
                                    });
                                } else {
                                    const t = this.menuByUrl.get(e[1].pageUrl),
                                        r = {
                                            id: t.id,
                                            isOpen: !0,
                                            lastSelected:
                                                e[e.length - 1].id === t.id,
                                            link: t.isDenyLink ? null : t.url,
                                            name: t.name,
                                        },
                                        i = r.lastSelected
                                            ? null !=
                                              (n =
                                                  null == (s = t.childs)
                                                      ? void 0
                                                      : s
                                                            .filter(
                                                                (e) => !e.isInfo
                                                            )
                                                            .map((e) => ({
                                                                node: {
                                                                    id: e.id,
                                                                    name: e.name,
                                                                    link: e.url,
                                                                },
                                                                children: [],
                                                            })))
                                                ? n
                                                : []
                                            : this.getCatalogMenu(e.slice(1));
                                    o.push({
                                        node: r,
                                        children: i,
                                    });
                                }
                            else
                                o.push({
                                    node: {
                                        name: "",
                                        link: "",
                                    },
                                    children: [],
                                });
                            return o;
                        }
                        hasItem(e) {
                            return !!e && this.menuById.has(e);
                        }
                        getCatalogLink(e) {
                            return this.menuById.get(e).url;
                        }
                        getParents(e) {
                            const t = [];
                            let r = this.menuById.get(e).parentId;
                            for (; null != r; ) {
                                const e = this.menuById.get(r);
                                t.push(e.name), (r = e.parentId);
                            }
                            return t.reverse();
                        }
                        getRootNode(e) {
                            let t = this.menuById.get(e.id);
                            for (; null != t.parentId; )
                                t = this.menuById.get(t.parentId);
                            return this._adaptMenu(t);
                        }
                        _createMenuMap() {
                            this.fullMenu.forEach((e) =>
                                this._setNode(e, null)
                            );
                        }
                        _setNode(e, t, r) {
                            var s;
                            (e.hasHardSort = e.query.includes("sort")),
                                this.menuByUrl.set(e.url, e),
                                this.menuById.set(e.id, {
                                    parentId: t,
                                    url: e.url,
                                    name: e.name,
                                    childs: e.childs,
                                    id: e.id,
                                    hasHardSort: e.hasHardSort,
                                }),
                                null == (s = e.childs) ||
                                    s.forEach((t) => this._setNode(t, e.id, r));
                        }
                        _brandToShard(e) {
                            const t = e ? e.toLowerCase() : " ",
                                r = t.charCodeAt(0);
                            return (48 <= r && r <= 57) ||
                                (97 <= r && r <= 122) ||
                                (1072 <= r && r <= 1105)
                                ? `brands/${t[0]}`
                                : "brands/special";
                        }
                        _brandToQuery(e, t) {
                            return t ? `brand=${e}&subject=${t}` : `brand=${e}`;
                        }
                        _brandLetterToSitePathParam(e) {
                            const t = e.charCodeAt(0);
                            return 1072 <= t && t <= 1105
                                ? "а-я"
                                : 97 <= t && t <= 122
                                ? e
                                : "123";
                        }
                        _adaptMenu(e) {
                            var t;
                            const r = this.menuById.get(e.id);
                            return (
                                (r.childs =
                                    null == (t = r.childs)
                                        ? void 0
                                        : t.map((e) => this._adaptMenu(e))),
                                r
                            );
                        }
                    },
                    Gs = Object.defineProperty,
                    Qs = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? Gs(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var Ks = class {
                    constructor(e) {
                        Qs(this, "brand"),
                            Qs(this, "brandConstructorService"),
                            Qs(this, "brandScheme"),
                            Qs(this, "catalogMenu"),
                            Qs(this, "currentMenuItem"),
                            Qs(this, "ids"),
                            Qs(this, "initialized"),
                            Qs(this, "modules"),
                            Qs(this, "pipeline"),
                            Qs(this, "preview"),
                            Qs(this, "products"),
                            Qs(this, "sort"),
                            Qs(this, "xData"),
                            Qs(this, "xInfo"),
                            (this.initialized = !1),
                            (this.catalogMenu = null),
                            (this.modules = {}),
                            (this.preview = e),
                            (this.pipeline = null);
                    }
                    async onBeforeActionExecuting(e, t, r) {
                        var s, n, o, i, a, l;
                        if (
                            ((this.xData =
                                this.xInfo =
                                this.currentMenuItem =
                                this.products =
                                this.sort =
                                this.pipeline =
                                this.brandScheme =
                                    null),
                            r.cancelRequest)
                        )
                            return;
                        let c = new URL(e);
                        c.pathname = c.pathname
                            .replace("/webapi", "")
                            .toLowerCase();
                        const u = c.pathname.split("/")[this.preview ? 4 : 3];
                        if (
                            (this.brand !== u &&
                                ((this.initialized = !1),
                                (this.brand = this.catalogMenu = null)),
                            (this.brand === u && this.initialized) ||
                                (await this._initAsync(this.preview)),
                            (this.xInfo =
                                await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()),
                            this.brand !== u &&
                                (await this._loadBrandMenu(u, c.pathname)),
                            this.brand)
                        ) {
                            if (
                                (this.preview &&
                                    !(null == (s = this.catalogMenu)
                                        ? void 0
                                        : s.isConstructor) &&
                                    ((c = new URL(
                                        e.href.replace("/preview", "")
                                    )),
                                    (c.pathname = c.pathname
                                        .replace("/webapi", "")
                                        .toLowerCase())),
                                (this.currentMenuItem =
                                    null == (n = this.catalogMenu)
                                        ? void 0
                                        : n.getCurrentMenuItem(c)),
                                !this.currentMenuItem)
                            )
                                return (
                                    (r.cancelRequest = !1),
                                    void (
                                        r.cancelRequest ||
                                        (t.body =
                                            await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync())
                                    )
                                );
                            if (
                                null == (o = this.catalogMenu)
                                    ? void 0
                                    : o.isConstructor
                            ) {
                                const e =
                                        this.brandConstructorService.getPageInfo(
                                            c.pathname
                                        ),
                                    t = null == e ? void 0 : e.pageType,
                                    r = null == e ? void 0 : e.infoUrl;
                                (this.brandScheme =
                                    await this.brandConstructorService.getBrandSchemeAsync(
                                        this.catalogMenu.brandData,
                                        t,
                                        r,
                                        e.previewMode
                                    )),
                                    this.brandScheme ||
                                        ((this.ids = []),
                                        await this._loadBrandMenu(
                                            u,
                                            c.pathname
                                        ));
                            }
                            return (
                                (
                                    null == (i = this.catalogMenu)
                                        ? void 0
                                        : i.isConstructor
                                )
                                    ? this.brandScheme.pageType ==
                                      this.brandConstructorService.enums
                                          .pageType.catalog
                                        ? (this.pipeline = new Ws(this))
                                        : (this.pipeline = new Hs(this))
                                    : (this.pipeline = new Es(this)),
                                null ==
                                (l = (a = this.pipeline)
                                    .onBeforeActionExecuting)
                                    ? void 0
                                    : l.call(a, e, t, r)
                            );
                        }
                        r.cancelRequest = !1;
                    }
                    async onActionExecuting(e, t, r) {
                        var s, n;
                        return null ==
                            (n =
                                null == (s = this.pipeline)
                                    ? void 0
                                    : s.onActionExecuting)
                            ? void 0
                            : n.call(s, e, t, r);
                    }
                    onActionExecuted(e) {
                        var t, r;
                        return null ==
                            (r =
                                null == (t = this.pipeline)
                                    ? void 0
                                    : t.onActionExecuted)
                            ? void 0
                            : r.call(t, e);
                    }
                    async _initAsync(e) {
                        const t = this._initConstructorServiceAndGetBrands(e),
                            [r, s, n, o, i] = await Promise.all([
                                WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "xCatalogData"
                                ),
                                WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "queryHelper"
                                ),
                                WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "xCatalogProvider"
                                ),
                                WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "sorterModel"
                                ),
                                WbSpaModel.prototype.$getService(
                                    "promotionsService"
                                ),
                            ]);
                        (this.modules = {
                            XCatalogData: r.XCatalogData,
                            QueryHelper: s,
                            xCatalogProvider: n,
                            SorterModel: o.CatalogSorterModel,
                        }),
                            (this.ids = await t),
                            (this.catalogMenu = new Vs(
                                this.modules,
                                this.brandConstructorService
                            )),
                            (this.initialized = !0);
                    }
                    async _initConstructorServiceAndGetBrands(e) {
                        var t;
                        return (
                            await WbSpaModel.prototype.$moduleLoader.loadServiceAsync(
                                "brandConstructorService"
                            ),
                            (this.brandConstructorService =
                                WbSpaModel.prototype.$services.brandConstructorService),
                            null !=
                            (t =
                                await this.brandConstructorService.getConstructorBrands(
                                    e
                                ))
                                ? t
                                : []
                        );
                    }
                    async _loadBrandMenu(e, t) {
                        var r, s;
                        await (null == (r = this.catalogMenu)
                            ? void 0
                            : r.initMenu(e, this.ids, this.xInfo, t)),
                            (this.brand = (
                                null == (s = this.catalogMenu)
                                    ? void 0
                                    : s.brandData
                            )
                                ? e
                                : null);
                    }
                };
                var Js = class extends zs {
                        constructor(e) {
                            super(),
                                (this.modules = e),
                                (this.sellerData = null),
                                (this.fullMenu = null),
                                (this.menuByUrl = new Map()),
                                (this.menuById = new Map()),
                                (this.shard = "sellers");
                        }
                        async initMenu(e, t) {
                            var r, s, n, o, i, a, l;
                            super.menuBase || (await zs.init());
                            const c = this.shard,
                                u = this._sellerToQuery(e, null),
                                d = new this.modules.XCatalogData(
                                    u,
                                    c,
                                    "Seller"
                                ),
                                p =
                                    this.modules.xCatalogProvider.createGoodsProvider(
                                        d
                                    ),
                                h = await p.loadSubjectsAsync(t, d),
                                m = await this._getSellerData(e);
                            (this.sellerData = m),
                                (this.fullMenu = [
                                    {
                                        id: m.id + "s",
                                        name: this._trimSellerOrgForms(
                                            null !=
                                                (s =
                                                    null != (r = m.trademark)
                                                        ? r
                                                        : m.fineName)
                                                ? s
                                                : m.name,
                                            m.orgForms
                                        ),
                                        url: "/seller/" + m.id,
                                        shard: this.shard,
                                        query: this._sellerToQuery(m.id, null),
                                        childs: [],
                                        title: wb.i18n.t("catalog.allProducts"),
                                    },
                                ]);
                            const g =
                                null !=
                                (i =
                                    null ==
                                    (o =
                                        null ==
                                        (n = null == h ? void 0 : h.data)
                                            ? void 0
                                            : n.filters.find(
                                                  (e) => "xsubject" === e.key
                                              ))
                                        ? void 0
                                        : o.items.toHashSet((e) => e.id))
                                    ? i
                                    : new Set();
                            for (const e of this.menuBase) {
                                let t = !1;
                                const r = [];
                                for (const s of null !=
                                (a = null == e ? void 0 : e.childs)
                                    ? a
                                    : [])
                                    if (g.has(s.id)) {
                                        t = !0;
                                        const e = Object.assign({}, s);
                                        (e.url = `/seller/${m.id}/${e.url}`),
                                            (e.shard = this.shard),
                                            (e.query = this._sellerToQuery(
                                                m.id,
                                                e.id
                                            )),
                                            (e.parentId =
                                                null != (l = e.parentId)
                                                    ? l
                                                    : m.id + "s"),
                                            (e.title = e.name),
                                            r.push(e);
                                    }
                                if (t) {
                                    const t = Object.assign({}, e);
                                    (t.url = `/seller/${m.id}/${e.url}`),
                                        (t.shard = this.shard),
                                        (t.query = this._sellerToQuery(
                                            m.id,
                                            t.id
                                        )),
                                        (t.childs = r),
                                        (t.parentId = m.id + "s"),
                                        (t.title = t.name),
                                        this.fullMenu[0].childs.push(t);
                                }
                            }
                            this._createMenuMap(), (this.isInited = !0);
                        }
                        getSellerInfo() {
                            return this.sellerData;
                        }
                        getCurrentMenuItem(e) {
                            var t;
                            if (!e) return null;
                            const r = e.pathname.replace("/data", "");
                            return null != (t = this.menuByUrl.get(r))
                                ? t
                                : this.menuByUrl.get(
                                      r.slice(0, r.lastIndexOf("/"))
                                  );
                        }
                        getSitePathItems(e) {
                            if (!e) return null;
                            const t = [];
                            t.push({
                                id: e.id,
                                name: e.name,
                                pageUrl: e.url,
                            });
                            let r = this.menuById.get(e.id).parentId;
                            for (; null != r; ) {
                                const e = this.menuById.get(r);
                                t.push({
                                    id: r,
                                    name: e.name,
                                    pageUrl: e.url,
                                }),
                                    (r = e.parentId);
                            }
                            return t.reverse();
                        }
                        getCatalogMenu(e) {
                            var t, r, s, n;
                            const o = [];
                            if (e && 0 !== e.length)
                                if (1 === e.length) {
                                    const s = {
                                            name: "",
                                            link: "",
                                        },
                                        n =
                                            null !=
                                            (r =
                                                null ==
                                                (t = this.menuByUrl.get(
                                                    e[0].pageUrl
                                                ).childs)
                                                    ? void 0
                                                    : t.map((e) => ({
                                                          node: {
                                                              id: e.id,
                                                              name: e.name,
                                                              link: e.url,
                                                          },
                                                          children: [],
                                                      })))
                                                ? r
                                                : [];
                                    o.push({
                                        node: s,
                                        children: n,
                                    });
                                } else {
                                    const t = this.menuByUrl.get(e[1].pageUrl),
                                        r = {
                                            id: t.id,
                                            isOpen: !0,
                                            lastSelected:
                                                e[e.length - 1].id === t.id,
                                            link: t.url,
                                            name: t.name,
                                        },
                                        i = r.lastSelected
                                            ? null !=
                                              (n =
                                                  null == (s = t.childs)
                                                      ? void 0
                                                      : s.map((e) => ({
                                                            node: {
                                                                id: e.id,
                                                                name: e.name,
                                                                link: e.url,
                                                            },
                                                            children: [],
                                                        })))
                                                ? n
                                                : []
                                            : this.getCatalogMenu(e.slice(1));
                                    o.push({
                                        node: r,
                                        children: i,
                                    });
                                }
                            else
                                o.push({
                                    node: {
                                        name: "",
                                        link: "",
                                    },
                                    children: [],
                                });
                            return o;
                        }
                        hasItem(e) {
                            return !!e && this.menuById.has(e);
                        }
                        getCatalogLink(e) {
                            return this.menuById.get(e).url;
                        }
                        getParents(e) {
                            const t = [];
                            let r = this.menuById.get(e).parentId;
                            for (; null != r; ) {
                                const e = this.menuById.get(r);
                                t.push(e.name), (r = e.parentId);
                            }
                            return t.reverse();
                        }
                        getRootNode(e) {
                            let t = this.menuById.get(e.id);
                            for (; null != t.parentId; )
                                t = this.menuById.get(t.parentId);
                            return this._adaptMenu(t);
                        }
                        async _getSellerData(e) {
                            var t;
                            const r = {
                                    id: e,
                                    isUnknown: !0,
                                    name: wb.i18n.t("common.seller"),
                                },
                                s =
                                    await WbSpaModel.prototype.$httpClient.fetchStaticV3(
                                        wb.helpers.url.urlStaticData,
                                        {},
                                        `supplier-by-id/${e}.json`
                                    );
                            if (!s) return r;
                            const n =
                                WbSpaModel.prototype.$services.suppliersService.setSupplierInfo(
                                    s
                                );
                            return {
                                id: n.supplierId,
                                name:
                                    null != (t = n.supplierFullName)
                                        ? t
                                        : n.supplierName,
                                fineName: this._trimSellerOrgForms(
                                    n.supplierName,
                                    n.orgForms
                                ),
                                ogrn: n.ogrn,
                                ogrnip: n.ogrnip,
                                taxpayerCode: n.taxpayerCode,
                                inn: n.inn,
                                kpp: n.kpp,
                                unp: n.unp,
                                bin: n.bin,
                                unn: n.unn,
                                trademark: n.trademark,
                                legalAddress: n.legalAddress,
                                isUnknown: !1,
                                orgForms: n.orgForms,
                            };
                        }
                        _trimSellerOrgForms(e, t = []) {
                            return $.views.converters.trimWord(e, t);
                        }
                        _createMenuMap() {
                            this.fullMenu.forEach((e) =>
                                this._setNode(e, null)
                            );
                        }
                        _setNode(e, t) {
                            var r;
                            this.menuByUrl.set(e.url, e),
                                this.menuById.set(e.id, {
                                    parentId: t,
                                    url: e.url,
                                    name: e.name,
                                    id: e.id,
                                    childs: e.childs,
                                }),
                                null == (r = e.childs) ||
                                    r.forEach((t) => this._setNode(t, e.id));
                        }
                        _sellerToQuery(e, t) {
                            return t
                                ? `supplier=${e}&subject=${t}`
                                : `supplier=${e}`;
                        }
                        _adaptMenu(e) {
                            var t;
                            const r = this.menuById.get(e.id);
                            return (
                                (r.childs =
                                    null == (t = r.childs)
                                        ? void 0
                                        : t.map((e) => this._adaptMenu(e))),
                                r
                            );
                        }
                    },
                    Xs = Object.defineProperty,
                    Ys = Object.getOwnPropertySymbols,
                    Zs = Object.prototype.hasOwnProperty,
                    en = Object.prototype.propertyIsEnumerable,
                    tn = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? Xs(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var rn = class {
                        constructor() {
                            tn(this, "catalogMenu"),
                                tn(this, "constructorData"),
                                tn(this, "currentMenuItem"),
                                tn(this, "initialized"),
                                tn(this, "isPreview"),
                                tn(this, "modules"),
                                tn(this, "products"),
                                tn(this, "seller"),
                                tn(this, "sort"),
                                tn(this, "type"),
                                tn(this, "xData"),
                                tn(this, "xInfo"),
                                (this.initialized = !1),
                                (this.catalogMenu = null),
                                (this.modules = {});
                        }
                        async onBeforeActionExecuting(e, t, r) {
                            var s, n, o, i;
                            if (
                                ((this.xData =
                                    this.xInfo =
                                    this.currentMenuItem =
                                    this.products =
                                    this.type =
                                    this.sort =
                                        null),
                                r.cancelRequest)
                            )
                                return;
                            this.initialized || (await this._initAsync());
                            let a = new URL(e);
                            a.pathname = a.pathname.replace("/webapi", "");
                            let l = a.pathname.split("/")[3];
                            if (
                                wb.global.settings.switches.enableNewShopWindow
                            ) {
                                let e = function () {
                                    return wb.helpers.url.urlStaticBasket(
                                        `constructor-api/shops/${l}.json`,
                                        0
                                    );
                                };
                                if (
                                    ((this.constructorData =
                                        await WbSpaModel.prototype.$httpClient.fetchStaticV3(
                                            e
                                        )),
                                    this.constructorData && isNaN(Number(l)))
                                )
                                    (a.pathname = `/seller/data/${this.constructorData.supplierID}`),
                                        (l = this.constructorData.supplierID);
                                else if (
                                    this.constructorData &&
                                    !isNaN(Number(l)) &&
                                    (null == (s = this.constructorData.urlPath)
                                        ? void 0
                                        : s.length) > 0
                                ) {
                                    const e =
                                        window.location.pathname
                                            .replace(
                                                l,
                                                this.constructorData.urlPath
                                            )
                                            .replace("/data", "") + a.search;
                                    WbSpaModel.prototype.$router.replaceState(
                                        window.history.state,
                                        document.title,
                                        e
                                    );
                                }
                                const t = new URLSearchParams(a.search);
                                if (
                                    ((this.isPreview = t.get("preview")),
                                    this.isPreview)
                                ) {
                                    let e = function () {
                                        return wb.helpers.url.urlStaticBasket(
                                            `constructor-api/shops/moderation/${l}.json`,
                                            0
                                        );
                                    };
                                    document.body.classList.add(
                                        "body--no-click"
                                    );
                                    const t =
                                        await WbSpaModel.prototype.$httpClient.fetchStaticV3(
                                            e
                                        );
                                    this.constructorData = t;
                                }
                            }
                            (this.xInfo =
                                await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()),
                                this.seller !== l &&
                                    (await this._loadBrandMenu(l)),
                                this.seller &&
                                    ((this.currentMenuItem =
                                        null == (n = this.catalogMenu)
                                            ? void 0
                                            : n.getCurrentMenuItem(a)),
                                    (this.xData = new this.modules.XCatalogData(
                                        null == (o = this.currentMenuItem)
                                            ? void 0
                                            : o.query,
                                        null == (i = this.currentMenuItem)
                                            ? void 0
                                            : i.shard,
                                        "Seller"
                                    ))),
                                (r.cancelRequest = null != this.xData);
                        }
                        async onActionExecuting() {
                            if (this.xData && this.xInfo) {
                                let e =
                                        this.modules.QueryHelper.getInitialParams(),
                                    {
                                        sort: t = this.modules.SorterModel
                                            .getSortFromCache,
                                        page: r = 1,
                                    } = e,
                                    s = ((e, t) => {
                                        var r = {};
                                        for (var s in e)
                                            Zs.call(e, s) &&
                                                t.indexOf(s) < 0 &&
                                                (r[s] = e[s]);
                                        if (null != e && Ys)
                                            for (var s of Ys(e))
                                                t.indexOf(s) < 0 &&
                                                    en.call(e, s) &&
                                                    (r[s] = e[s]);
                                        return r;
                                    })(e, ["sort", "page"]);
                                const n = new this.modules.QueryHelper({
                                        sort: t,
                                        page: r,
                                        filters:
                                            this.modules.QueryHelper.checkOnlyFilterParams(
                                                s
                                            ),
                                    }).getQueryStringForCatalog(),
                                    o =
                                        this.modules.xCatalogProvider.createGoodsProvider(
                                            this.xData
                                        ),
                                    { goods: i } = await o.loadGoodsAsync(n);
                                (this.products = i), (this.sort = t);
                            }
                        }
                        async onActionExecuted(e) {
                            var t, r, s, n, o, i, a, l, c, u;
                            if (null == this.xData) return;
                            e.responseData || (e.responseData = {});
                            const d =
                                    null == (t = this.catalogMenu)
                                        ? void 0
                                        : t.getSitePathItems(
                                              this.currentMenuItem
                                          ),
                                p = {
                                    mainVersion: 0,
                                    type: ss.A.seller,
                                    model: {
                                        sellerId:
                                            null ==
                                            (s =
                                                null == (r = this.catalogMenu)
                                                    ? void 0
                                                    : r.sellerData)
                                                ? void 0
                                                : s.id,
                                        sellerInfo:
                                            null == (n = this.catalogMenu)
                                                ? void 0
                                                : n.getSellerInfo(),
                                        xData: this.xData,
                                        rootMenuItem:
                                            null == (o = this.catalogMenu)
                                                ? void 0
                                                : o.getRootNode(
                                                      this.currentMenuItem
                                                  ),
                                        currentMenuItem: this.currentMenuItem,
                                        hasSelectedChild: !1,
                                        sitePathItems: d,
                                        catalogMenu:
                                            null == (i = this.catalogMenu)
                                                ? void 0
                                                : i.getCatalogMenu(d),
                                        emptyCatalogLink:
                                            null == (a = this.currentMenuItem)
                                                ? void 0
                                                : a.url,
                                        tagsUrl:
                                            null == (l = this.currentMenuItem)
                                                ? void 0
                                                : l.url,
                                        products: this.products,
                                        promoMenuV2: !1,
                                        title:
                                            null == (c = this.currentMenuItem)
                                                ? void 0
                                                : c.title,
                                        containerClass:
                                            "catalog-page catalog-page--brand",
                                        needAdultProtection:
                                            !wb.adult.isConfirmed,
                                        sorterModel:
                                            new this.modules.SorterModel(
                                                this.sort,
                                                null ==
                                                (u = this.currentMenuItem)
                                                    ? void 0
                                                    : u.url
                                            ),
                                        constructorData: this.constructorData,
                                        isPreview: this.isPreview,
                                    },
                                };
                            console.log("data", p),
                                Object.assign(e.responseData, {
                                    data: p,
                                });
                        }
                        async _initAsync() {
                            const [e, t, r, s, n] = await Promise.all([
                                WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "xCatalogData"
                                ),
                                WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "queryHelper"
                                ),
                                WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "xCatalogProvider"
                                ),
                                WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                    "sorterModel"
                                ),
                                WbSpaModel.prototype.$moduleLoader.loadServiceAsync(
                                    "suppliersService"
                                ),
                            ]);
                            (this.modules = {
                                XCatalogData: e.XCatalogData,
                                QueryHelper: t,
                                xCatalogProvider: r,
                                SorterModel: s.CatalogSorterModel,
                            }),
                                (this.catalogMenu = new Js(this.modules)),
                                (this.initialized = !0);
                        }
                        async _loadBrandMenu(e) {
                            var t, r;
                            await (null == (t = this.catalogMenu)
                                ? void 0
                                : t.initMenu(e, this.xInfo)),
                                (this.seller = (
                                    null == (r = this.catalogMenu)
                                        ? void 0
                                        : r.sellerData
                                )
                                    ? e
                                    : null);
                        }
                    },
                    sn = Object.defineProperty,
                    nn = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? sn(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var on = class {
                        constructor(e) {
                            nn(this, "timeout"), (this.timeout = e);
                        }
                        onBeforeActionExecuting(e, t, r) {
                            r.timeout = this.timeout;
                        }
                    },
                    an = Object.defineProperty,
                    ln = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? an(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var cn = class {
                        constructor() {
                            ln(this, "data"),
                                ln(this, "productSelectionManager");
                        }
                        async onBeforeActionExecuting() {
                            (this.data = null),
                                await WbSpaModel.prototype.$moduleLoader.loadServiceAsync(
                                    "multipleSellersService"
                                );
                        }
                        async onActionExecuting() {
                            const e = WbSpaModel.prototype,
                                t = parseInt(e.$router.routeParameters.cod1S),
                                { nmIds: r } =
                                    await this._getNmsForOtherSellers(t);
                            if (null == r ? void 0 : r.length)
                                try {
                                    const t =
                                        await e.$services.multipleSellersService.loadSellersInfoAsync(
                                            r
                                        );
                                    this.data = t.filter(
                                        (e) =>
                                            Number(e.salePrice) > 0 &&
                                            e.deliveryModel
                                    );
                                } catch (e) {
                                    console.error(e);
                                }
                        }
                        async _getNmsForOtherSellers(e) {
                            var t;
                            const [r, s] = await Promise.all([
                                    wb.xnm.getGoodsForRecommendAndCatalog(
                                        [e],
                                        !0
                                    ),
                                    WbSpaModel.prototype.$services.productCard.fetchProductCard(
                                        e,
                                        {
                                            timeout: 2e3,
                                        }
                                    ),
                                ]),
                                n = r.filter((e) => void 0 !== e.imtId),
                                o = null == n ? void 0 : n[0],
                                [i, a] = await Promise.all([
                                    WbSpaModel.prototype.$services.productCard.getMetaCardInfo(
                                        o,
                                        s
                                    ),
                                    WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                        "productSelectionManager"
                                    ),
                                ]);
                            (o.metacard = i),
                                (this.productSelectionManager = new a(
                                    null,
                                    {
                                        nmId: e,
                                    },
                                    o
                                ));
                            const l = await (null ==
                            (t = this.productSelectionManager)
                                ? void 0
                                : t.getNmsForOtherSellers(e));
                            return (null == l ? void 0 : l.isMetaCard)
                                ? {
                                      nmIds: l.nms,
                                  }
                                : await WbSpaModel.prototype.$services.multipleSellersService.loadOtherSellersNmIds(
                                      e
                                  );
                        }
                        onActionExecuted(e) {
                            var t;
                            e.responseData || (e.responseData = {});
                            const r = {
                                otherSellers: null != (t = this.data) ? t : [],
                            };
                            Object.assign(e.responseData, r);
                        }
                    },
                    un = Object.defineProperty,
                    dn = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? un(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var pn = class {
                        constructor() {
                            dn(this, "data");
                        }
                        get $router() {
                            return WbSpaModel.prototype.$router;
                        }
                        onBeforeActionExecuting() {
                            this.data = null;
                        }
                        async onActionExecuting(e, t, r) {
                            const s = WbSpaModel.prototype,
                                n = parseInt(s.$router.routeParameters.cod1S);
                            try {
                                if (
                                    ((this.data =
                                        await wb.xnm.getMiniProductCard(n)),
                                    null == this.data)
                                )
                                    return (
                                        (r.redirected = !0),
                                        void this.$router.moveTo404Async()
                                    );
                            } catch (e) {
                                console.error(e);
                            }
                        }
                        onActionExecuted(e) {
                            var t, r, s, n;
                            e.responseData || (e.responseData = {});
                            let o = parseInt(
                                (null ==
                                (t = WbSpaModel.prototype.$router.queryParams)
                                    ? void 0
                                    : t.get("size")) || ""
                            );
                            const i = this.data;
                            if (
                                !isNaN(o) &&
                                (null == (r = null == i ? void 0 : i.sizes)
                                    ? void 0
                                    : r.some((e) => e.ch == o))
                            )
                                (i.characteristicId = o),
                                    (i.sizeName =
                                        (null ==
                                        (s = i.sizes.find((e) => e.ch == o))
                                            ? void 0
                                            : s.nm) || null);
                            else if (
                                1 ==
                                (null == (n = null == i ? void 0 : i.sizes)
                                    ? void 0
                                    : n.length)
                            ) {
                                const e = i.sizes[0];
                                (i.characteristicId = e.ch),
                                    (i.sizeName = null == e ? void 0 : e.nm);
                            }
                            e.responseData.miniCard = i;
                        }
                    },
                    hn = Object.defineProperty,
                    mn = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? hn(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var gn = class {
                    constructor() {
                        mn(this, "imageId"), mn(this, "model");
                    }
                    get $moduleLoader() {
                        return WbSpaModel.prototype.$moduleLoader;
                    }
                    get $services() {
                        return WbSpaModel.prototype.$services;
                    }
                    get $router() {
                        return WbSpaModel.prototype.$router;
                    }
                    onBeforeActionExecuting() {
                        this.model = this.imageId = null;
                    }
                    async onActionExecuting() {
                        var e;
                        await this.$moduleLoader.loadServiceAsync(
                            "searchByImageService"
                        );
                        const t = this.$router.routeParameters.imageId,
                            r =
                                this.$services.searchByImageService.getSearchResult(
                                    t
                                );
                        !r.invalidPhoto &&
                            !r.error &&
                            (null == (e = r.recommendationsNms)
                                ? void 0
                                : e.length) > 0 &&
                            ((r.products = await this._loadGoods(
                                r.recommendationsNms
                            )),
                            r.statistic &&
                                (r.statistic.foundByImageOnStock =
                                    r.products.length)),
                            (r.imageId = t),
                            (this.model = r),
                            (this.imageId = t);
                    }
                    onActionExecuted(e) {
                        e.responseData || (e.responseData = {}),
                            Object.assign(e.responseData, this.model);
                    }
                    async _loadGoods(e) {
                        try {
                            const t = await wb.xnm.getCatalogCards(e, !1, !1),
                                r = e.reduce((e, r) => {
                                    var s;
                                    return (
                                        (null == (s = t[r]) ? void 0 : s.id) &&
                                            e.push(
                                                wb.xnm.convertXProductToSpaCatalogProduct(
                                                    t[r]
                                                )
                                            ),
                                        e
                                    );
                                }, []);
                            return r;
                        } catch (e) {
                            return [];
                        }
                    }
                };
                var bn = class {
                        get $httpClient() {
                            return WbSpaModel.prototype.$httpClient;
                        }
                        get $router() {
                            return WbSpaModel.prototype.$router;
                        }
                        get $user() {
                            return WbSpaModel.prototype.$user;
                        }
                        async onActionExecuted(e) {
                            var t;
                            e.responseData || (e.responseData = {});
                            const r =
                                null ==
                                (t = WbSpaModel.prototype.$router.queryParams)
                                    ? void 0
                                    : t.get("searchQuery");
                            if (r) {
                                const t = this._getSearchCatalogLink(r),
                                    s = `/recommendationssearch?searchQuery=${new URLSearchParams(
                                        {
                                            searchQuery: r,
                                        }
                                    )}`,
                                    n = await this._loadGoods(r);
                                if (!Array.isArray(n) || 0 == n.length)
                                    return this.$router.moveTo404Async();
                                const o = {
                                    type: ss.A.recommendationsSearch,
                                    searchQuery: r,
                                    targetUrl: "IM",
                                    linkToSearchCatalog: t,
                                    originalUrl: s,
                                    products: n,
                                };
                                Object.assign(e.responseData, o);
                            }
                        }
                        _getSearchCatalogLink(e) {
                            let t =
                                (e &&
                                    encodeURIComponent(
                                        e.replace(/<\/?[^>]+>/gi, "").trim()
                                    )) ||
                                "";
                            return `${wb.urlHelper.xSearchBase}?search=${t}`;
                        }
                        async _loadGoods(e) {
                            try {
                                const t = `https://search-goods.wildberries.ru/search?query=${encodeURIComponent(
                                        e
                                    )}`,
                                    r =
                                        WbSpaModel.prototype.$analitic.getRecommendationsSplitterHeaders(),
                                    s = await this.$httpClient.fetchBasicJSON(
                                        t,
                                        {
                                            credentials: "omit",
                                            headers: r,
                                        },
                                        {
                                            timeout: 5e3,
                                        }
                                    );
                                if (!((null == s ? void 0 : s.length) > 0))
                                    return null;
                                const n = await wb.xnm.getCatalogCards(
                                        s,
                                        !1,
                                        !1
                                    ),
                                    o = s.reduce((e, t) => {
                                        var r;
                                        return (
                                            (null == (r = n[t])
                                                ? void 0
                                                : r.id) &&
                                                e.push(
                                                    wb.xnm.convertXProductToSpaCatalogProduct(
                                                        n[t]
                                                    )
                                                ),
                                            e
                                        );
                                    }, []);
                                return o;
                            } catch (e) {
                                return null;
                            }
                        }
                    },
                    yn = Object.defineProperty,
                    vn = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? yn(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var fn = class {
                    constructor() {
                        vn(this, "goods"),
                            vn(this, "type"),
                            vn(this, "forproduct"),
                            vn(this, "result");
                    }
                    get $router() {
                        return WbSpaModel.prototype.$router;
                    }
                    async onActionExecuting(e, t, r) {
                        var s, n, o, i, a, l;
                        this.goods =
                            this.type =
                            this.forproduct =
                            this.result =
                                void 0;
                        const c = await WbSpaModel.prototype.$getServiceOf(
                                "recommendationsCatalogService"
                            ),
                            u =
                                null == (s = this.$router.queryParams)
                                    ? void 0
                                    : s.get("type"),
                            d =
                                null !=
                                (i =
                                    null ==
                                    (o =
                                        null == (n = this.$router.queryParams)
                                            ? void 0
                                            : n.get("forproduct"))
                                        ? void 0
                                        : o.parseIntOrDefault())
                                    ? i
                                    : 0,
                            p = c.getType(u);
                        if (p) {
                            const e = await c.getRecommendations(p.id, d);
                            if (e) {
                                let t;
                                if (
                                    ((null == (a = e.goods) ? void 0 : a.length)
                                        ? (t = e.goods)
                                        : (null == (l = e.nms)
                                              ? void 0
                                              : l.length) &&
                                          (t = await this._loadGoods(e.nms)),
                                    Array.isArray(t) && t.length > 0)
                                )
                                    return (
                                        (this.type = p),
                                        (this.goods = t),
                                        (this.result = e),
                                        void (this.forproduct = d)
                                    );
                            }
                        }
                        (r.redirected = !0), this.$router.moveTo404Async();
                    }
                    async onActionExecuted(e) {
                        var t, r, s, n;
                        e.responseData || (e.responseData = {});
                        const {
                                type: o,
                                goods: i,
                                result: a,
                                forproduct: l,
                            } = this,
                            c = (null == o ? void 0 : o.id) || 0,
                            u = {
                                type: c,
                                targetInfo: {
                                    targetUrl:
                                        (null == o ? void 0 : o.targetUrl) ||
                                        "",
                                },
                                products: i,
                                statistic: {
                                    type: c,
                                    source: null == a ? void 0 : a.source,
                                    recommendationsCount:
                                        null !=
                                        (n =
                                            null !=
                                            (s =
                                                null ==
                                                (t =
                                                    null == a
                                                        ? void 0
                                                        : a.goods)
                                                    ? void 0
                                                    : t.length)
                                                ? s
                                                : null ==
                                                  (r =
                                                      null == a
                                                          ? void 0
                                                          : a.nms)
                                                ? void 0
                                                : r.length)
                                            ? n
                                            : 0,
                                    productsCount:
                                        (null == i ? void 0 : i.length) || 0,
                                    parentProduct: Number(l),
                                    isVisualSimilarFromRecService:
                                        null == a
                                            ? void 0
                                            : a.isVisualSimilarFromRecService,
                                },
                                nmId: Number(l),
                                title: (null == o ? void 0 : o.title) || "",
                            };
                        Object.assign(e.responseData, u);
                    }
                    async _loadGoods(e) {
                        try {
                            const t = await wb.xnm.getCatalogCards(e, !1, !1);
                            return e.reduce((e, r) => {
                                var s;
                                return (
                                    (null == (s = t[r]) ? void 0 : s.id) &&
                                        e.push(
                                            wb.xnm.convertXProductToSpaCatalogProduct(
                                                t[r]
                                            )
                                        ),
                                    e
                                );
                            }, []);
                        } catch (e) {
                            return [];
                        }
                    }
                };
                var wn = class {
                        get $recentViews() {
                            return WbSpaModel.prototype.$recentViews;
                        }
                        get $httpClient() {
                            return WbSpaModel.prototype.$httpClient;
                        }
                        get $router() {
                            return WbSpaModel.prototype.$router;
                        }
                        get $auth() {
                            return WbSpaModel.prototype.$auth;
                        }
                        async onActionExecuted(e) {
                            e.responseData || (e.responseData = {});
                            const t = await this._loadNms();
                            if (0 == t.length)
                                return this.$router.moveTo404Async();
                            const r = await this._loadGoods(t);
                            if (0 == r.length)
                                return this.$router.moveTo404Async();
                            const s = {
                                title: wb.i18n.t("recommendations.viewed"),
                                products: r,
                                type: "recent",
                                targetInfo: {
                                    targetUrl: "RG",
                                },
                                statistic: {
                                    recommendationsCount: t.length,
                                    productsCount: r.length,
                                },
                            };
                            Object.assign(e.responseData, s);
                        }
                        async _loadNms() {
                            var e, t, r, s;
                            let n =
                                null !=
                                (t =
                                    null == (e = this.$recentViews.get())
                                        ? void 0
                                        : e.nm)
                                    ? t
                                    : [];
                            if (this.$auth.isAuth)
                                try {
                                    const e =
                                        await this.$httpClient.fetchBasicJSON(
                                            "/webapi/goods/visited-nm",
                                            {
                                                method: "POST",
                                                body: null,
                                            },
                                            {
                                                timeout: 2e3,
                                            }
                                        );
                                    (null ==
                                    (s =
                                        null ==
                                        (r = null == e ? void 0 : e.value)
                                            ? void 0
                                            : r.nmsArr)
                                        ? void 0
                                        : s.length) > 0 && (n = e.value.nmsArr);
                                } catch (e) {
                                    console.error(e);
                                }
                            return n;
                        }
                        async _loadGoods(e) {
                            try {
                                const t = await wb.xnm.getCatalogCards(
                                        e,
                                        !0,
                                        !0
                                    ),
                                    r = e.reduce((e, r) => {
                                        var s;
                                        return (
                                            (null == (s = t[r])
                                                ? void 0
                                                : s.id) &&
                                                e.push(
                                                    wb.xnm.convertXProductToSpaCatalogProduct(
                                                        t[r]
                                                    )
                                                ),
                                            e
                                        );
                                    }, []);
                                return r;
                            } catch (e) {
                                return [];
                            }
                        }
                    },
                    Sn = Object.defineProperty,
                    _n = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? Sn(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var Cn = class {
                    constructor(e) {
                        _n(this, "defaultValue"), (this.defaultValue = e);
                    }
                    onBeforeActionExecuting(e, t, r) {
                        r.defaultValue = this.defaultValue;
                    }
                };
                var In = class {
                        get $router() {
                            return WbSpaModel.prototype.$router;
                        }
                        get $services() {
                            return WbSpaModel.prototype.$services;
                        }
                        async onActionExecuting(e, t, r) {
                            const { userInfo: s } =
                                await this.$services.userData.getUserDataAsync();
                            s.isAuthenticated ||
                                ((r.redirected = !0),
                                this.$router.moveToSignIn(
                                    {
                                        query: {
                                            returnUrl: window.location.href,
                                        },
                                    },
                                    !0
                                ));
                        }
                    },
                    kn = Object.defineProperty,
                    Mn = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? kn(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var Pn = class {
                        constructor(e = [], t = !1) {
                            Mn(this, "exceptionLocales"),
                                Mn(this, "checkBalance"),
                                (this.exceptionLocales = e),
                                (this.checkBalance = t);
                        }
                        async onActionExecuting() {
                            const e = wb.settings.currentLocale;
                            if (
                                window.location.pathname.includes("b2b") &&
                                "ru" !== e
                            )
                                throw new NotFoundError();
                            if (this.exceptionLocales.includes(e)) {
                                if (this.checkBalance) {
                                    const e = await WbSpaModel.prototype.$user
                                        .getBalance({
                                            timeout: 2e3,
                                        })
                                        .catch((e) => null);
                                    if (!e || 0 === e.totalBalance)
                                        throw new NotFoundError();
                                    return;
                                }
                                throw new NotFoundError();
                            }
                        }
                    },
                    Tn = Object.defineProperty,
                    $n = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? Tn(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var An = class {
                    constructor() {
                        $n(this, "bannersTask"), (this.bannersTask = null);
                    }
                    async onBeforeActionExecuting(e, t, r) {
                        (this.bannersTask = null), (r.cancelRequest = !0);
                    }
                    async onActionExecuting(e) {
                        this.bannersTask =
                            WbSpaModel.prototype.$services.bannersService.getPromoBanners();
                    }
                    onActionExecuted(e) {
                        e.responseData || (e.responseData = {}),
                            Object.assign(e.responseData, {
                                bannersTask: this.bannersTask,
                            });
                    }
                };
                var Dn = class {
                    async onBeforeActionExecuting(e, t) {
                        const r =
                            WbSpaModel.prototype.$services.cartService
                                .publicBasketApiUrl;
                        t.credentials = "include";
                        const s = new URL(r, window.location.origin);
                        (e.port = s.port),
                            (e.pathname = (s.pathname + e.pathname).replace(
                                "//",
                                ""
                            )),
                            (e.host = s.host);
                    }
                };
                var Bn = class {
                    onBeforeActionExecuting(e, t) {
                        t.body || (t.body = new URLSearchParams()),
                            t.body.append(
                                "currency",
                                WbSpaModel.prototype.$user.getCurrency()
                            );
                    }
                };
                var On = class {
                        get $router() {
                            return WbSpaModel.prototype.$router;
                        }
                        get $services() {
                            return WbSpaModel.prototype.$services;
                        }
                        async onActionExecuting(e, t, r) {
                            var s, n, o;
                            if (
                                WbSpaModel.prototype.$auth.isAuth &&
                                WbSpaModel.prototype.$auth.jwt
                            ) {
                                let e,
                                    t =
                                        null !=
                                        (o =
                                            (null ==
                                            (s = this.$router.queryParams)
                                                ? void 0
                                                : s.get("ReturnUrl")) ||
                                            (null ==
                                            (n = this.$router.queryParams)
                                                ? void 0
                                                : n.get("returnUrl")))
                                            ? o
                                            : "/lk";
                                try {
                                    e = new URL(t, window.location.origin);
                                } catch (e) {}
                                (null == e ? void 0 : e.hostname) !==
                                    window.location.hostname && (t = "/lk"),
                                    (r.redirected = !0),
                                    this.$router.moveTo(t);
                            }
                        }
                    },
                    En = Object.defineProperty,
                    xn = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? En(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var Ln = class {
                    constructor() {
                        xn(this, "getSavedOptionsTask");
                    }
                    async onActionExecuting(e) {
                        if (
                            !(
                                e.searchParams.get("redirect_uri") &&
                                e.searchParams.get("client_id") &&
                                e.searchParams.get("scope") &&
                                e.searchParams.get("code_challenge") &&
                                ((e) => {
                                    const t =
                                        e.searchParams.get("redirect_uri");
                                    return /^((http|https):\/\/)/.test(
                                        null != t ? t : ""
                                    );
                                })(e)
                            )
                        )
                            throw new NotFoundError();
                        this.toggleHideClass(!0),
                            WbSpaModel.prototype.$auth.isAuth
                                ? (this.getSavedOptionsTask =
                                      WbSpaModel.prototype.$services.apiUserStorage.getData(
                                          [
                                              {
                                                  path: "wb_oauth_saved_options",
                                              },
                                          ],
                                          {
                                              timeout: 1200,
                                          }
                                      ))
                                : WbSpaModel.prototype.$router.moveToSignIn(
                                      {
                                          query: {
                                              returnUrl: window.location.href,
                                          },
                                      },
                                      !1
                                  );
                    }
                    async onActionExecuted(e) {
                        var t;
                        if (!WbSpaModel.prototype.$auth.isAuth) return;
                        const r = await this.getSavedOptionsTask;
                        if (r) {
                            if (null == r ? void 0 : r.length)
                                try {
                                    return void (e.responseData = JSON.parse(
                                        null !=
                                            (t =
                                                WbSpaModel.prototype.$helper.base64.decode(
                                                    r[0].file
                                                ))
                                            ? t
                                            : "[]"
                                    ));
                                } catch (e) {}
                            e.responseData = [];
                        }
                    }
                    toggleHideClass(e) {
                        const t = document.querySelector("header"),
                            r = document.querySelector("footer"),
                            s = document.querySelector(".j-navbar-mobile"),
                            n = document.querySelector(".j-fixed-block"),
                            o = document.querySelector("body");
                        t &&
                            r &&
                            s &&
                            (e
                                ? t.classList.add("hide")
                                : t.classList.remove("hide"),
                            e
                                ? r.classList.add("hide")
                                : r.classList.remove("hide"),
                            e
                                ? s.classList.add("hide")
                                : s.classList.remove("hide"),
                            window.self !== window.top &&
                                (null == n || n.classList.toggle("hide", e),
                                null == o ||
                                    o.classList.toggle(
                                        "body--empty-center",
                                        e
                                    )));
                    }
                };
                var jn = class {
                    async onBeforeActionExecuting(e, t, r) {
                        (r.redirected = !0),
                            WbSpaModel.prototype.$router.moveTo(
                                "/lk#notifications"
                            );
                    }
                };
                var Fn = class {
                        async onBeforeActionExecuting(e) {
                            e.searchParams.set("cultureUI", wb.currentLanguage);
                        }
                    },
                    Nn = Object.defineProperty,
                    Wn = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? Nn(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                const Rn = Object.freeze({
                        "/webapi/servicesdata/pravila-prodazhi":
                            "/rules-for-selling-goods/",
                        "/webapi/servicesdata/pravila-polzovaniya-torgovoy-ploshchadkoy":
                            "/consumers-offer/",
                        "/webapi/servicesdata/politika-obrabotki-personalnyh-dannyh":
                            "/privacypolicy/",
                        "/webapi/servicesdata/pravila-primeneniya-rekomendatelnyh-tehnologiy":
                            "/rules-for-the-use-of-recommendation-technologies/",
                        "/webapi/servicesdata/politika-videonablyudeniya":
                            "/video-surveillance-policy/",
                        "/webapi/servicesdata/politika-konfidentsialnosti":
                            "/privacypolicy/",
                    }),
                    Un = "https://legal.wildberries.";
                var Hn = class {
                        constructor() {
                            Wn(this, "path"), (this.path = "");
                        }
                        async onBeforeActionExecuting(e) {
                            this.path = e.pathname;
                            const t = wb.currentLanguage,
                                r = wb.settings.currentDomain,
                                s =
                                    WbSpaModel.prototype.$user.getLocale() ||
                                    wb.settings.currentLocale;
                            Rn[this.path] && this._standartRedirect(r, s, t);
                        }
                        _standartRedirect(e, t, r) {
                            switch (e) {
                                case "ru":
                                case "by":
                                case "am":
                                case "kg":
                                case "uz":
                                    wb.spa.redirect(
                                        Un +
                                            e +
                                            Rn[this.path] +
                                            "country/" +
                                            t +
                                            "/lang/ru/"
                                    );
                                    break;
                                case "kz":
                                    wb.spa.redirect(
                                        Un +
                                            "ru" +
                                            Rn[this.path] +
                                            "country/" +
                                            t +
                                            "/lang/" +
                                            r +
                                            "/"
                                    );
                            }
                        }
                    },
                    qn = Object.defineProperty,
                    zn = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? qn(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                const Vn = {
                    ge: [
                        "pravila-polzovaniya-torgovoy-ploshchadkoy",
                        "politika-konfidentsialnosti",
                        "user-agreement-for-wb-services",
                    ],
                    tj: [
                        "pravila-polzovaniya-torgovoy-ploshchadkoy",
                        "politika-konfidentsialnosti",
                        "account-linking-terms",
                    ],
                    tm: ["politika-konfidentsialnosti"],
                };
                var Gn = class {
                        constructor() {
                            zn(this, "pageName"),
                                zn(this, "includeUrl"),
                                (this.pageName = "");
                        }
                        async onBeforeActionExecuting(e, t, r) {
                            (this.includeUrl = !1),
                                this._checkCurrentPage(e),
                                this.includeUrl && (r.cancelRequest = () => !0);
                        }
                        async onActionExecuted(e) {
                            this.includeUrl &&
                                (e.responseData = {
                                    useLegalApi: !0,
                                    servicePage: this.pageName,
                                });
                        }
                        _checkCurrentPage(e) {
                            for (const t of Vn[wb.settings.currentLocale] || [])
                                if (-1 !== e.pathname.indexOf(t)) {
                                    (this.includeUrl = !0), (this.pageName = t);
                                    break;
                                }
                        }
                    },
                    Qn = Object.defineProperty,
                    Kn = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? Qn(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                const Jn = new Or(),
                    Xn = new jr(),
                    Yn = new pn(),
                    Zn = new Cn({
                        isNetworkError: !0,
                    }),
                    eo = new In();
                var to = class {
                    constructor() {
                        Kn(this, "globalPipelines"), Kn(this, "map");
                        const e = new Map();
                        (this.globalPipelines = [new Ur()]),
                            e.set("SpaHomeData", {
                                pipelines: [Xn],
                            }),
                            e.set("SpaPromotionsData", {
                                pipelines: [new An()],
                            }),
                            e.set("SpaSignInData", {
                                pipelines: [Xn, new On()],
                            }),
                            e.set("SpaRefundData", {
                                pipelines: [eo, Zn],
                            }),
                            e.set("SpaProductCardData", {
                                pipelines: [Xn, new zr()],
                            }),
                            e.set("SpaGetGroupedDeliveries", {
                                pipelines: [eo, Xn, new on(1e3)],
                                fallback: () => ({
                                    options: {},
                                }),
                            }),
                            e.set("SpaHeadArchivePositions", {
                                pipelines: [eo, Zn],
                                fallback: () => ({
                                    limit: 150,
                                    filters: {
                                        type: "all",
                                        status: 0,
                                    },
                                }),
                            }),
                            e.set("SpaBasketData", {
                                maxTriesCount: 0,
                                pipelines: [Zn, Jn, new Rr(), new on(4e3)],
                            }),
                            e.set("SpaEmailedConfirmData", {
                                pipelines: [
                                    new Fr(),
                                    new jr(() => {
                                        const { targetRoute: e } =
                                            WbSpaModel.prototype.$router;
                                        return (
                                            "SpaConfirmEmailedEntrypoint" !=
                                                e &&
                                            "SpaChangeEmailEntrypoint" != e
                                        );
                                    }),
                                ],
                            }),
                            e.set("SpaWalletPurchaseData", {
                                pipelines: [
                                    eo,
                                    Jn,
                                    new Pn(["ge"], !0),
                                    Zn,
                                    new Bn(),
                                ],
                            }),
                            e.set("SpaCustomerReceiptData", {
                                pipelines: [Xn, Jn, new Pn(["ge"]), Zn],
                            }),
                            e.set("SpaPersonalCabinetData", {
                                pipelines: [Zn, Jn, eo],
                            }),
                            e.set("SpaTravelLkData", {
                                pipelines: [Xn],
                            }),
                            e.set("SpaProfileData", {
                                pipelines: [Jn],
                            }),
                            e.set("SpaBasketBuyItNowData", {
                                maxTriesCount: 0,
                                pipelines: [Jn, new Rr(), Zn, new on(3e3)],
                            }),
                            e.set("SpaSearchData", {
                                pipelines: [new ws()],
                            }),
                            e.set("SpaRecommendationsSearchCatalogData", {
                                pipelines: [Xn, new bn()],
                            }),
                            e.set("SpaRecommendationsCatalogData", {
                                pipelines: [Xn, new fn()],
                            }),
                            e.set("SpaRecentCatalogData", {
                                pipelines: [Xn, new wn()],
                            }),
                            e.set("SpaWlArrivedData", {
                                pipelines: [Xn, new Zr(), eo],
                            }),
                            e.set("SpaCatalogData", {
                                pipelines: [new ds(), new ms()],
                            }),
                            e.set("SpaPromotionsCatalogData", {
                                pipelines: [new Ts()],
                            }),
                            e.set("SpaMyCommunicationsData", {
                                pipelines: [
                                    Zn,
                                    Xn,
                                    {
                                        onActionExecuting: () => {
                                            console.log("as"),
                                                yo.prototype.$router.moveToSignIn(
                                                    {
                                                        query: {
                                                            returnUrl:
                                                                window.location
                                                                    .href,
                                                        },
                                                    },
                                                    !0
                                                );
                                        },
                                    },
                                ],
                            }),
                            e.set("SpaSellerCatalogData", {
                                pipelines: [new rn()],
                            }),
                            e.set("SpaBrandsData", {
                                pipelines: [new Ks()],
                            }),
                            e.set("SpaBrandsPreviewData", {
                                pipelines: [new Ks(!0)],
                            }),
                            e.set("SpaFavoritesData", {
                                pipelines: [Xn, new rs(), eo],
                            }),
                            e.set("SpaProductCardOtherSellersData", {
                                pipelines: [Xn, Jn, Yn, new cn()],
                            }),
                            e.set("SpaSearchByImageData", {
                                pipelines: [Xn, new gn()],
                            }),
                            e.set("SpaOrderConfirmedData", {
                                fallback: (e) => {
                                    if (e) {
                                        const t =
                                            e.url.searchParams.get("orderId");
                                        if (t) {
                                            const e = sessionStorage.getItem(
                                                `confirmed_order_${t}`
                                            );
                                            if (e)
                                                return {
                                                    data: JSON.parse(e),
                                                };
                                        }
                                    }
                                    return {
                                        data: {
                                            broken: !0,
                                            order: {},
                                        },
                                    };
                                },
                                pipelines: [Jn, new Dn()],
                            }),
                            e.set("SpaOrderThankYouEntrypoint", {
                                fallback: () => ({}),
                            }),
                            e.set("SpaPaymentFailData", {
                                fallback: () => ({}),
                            }),
                            e.set("SpaFavoriteBrandsData", {
                                pipelines: [eo, Zn],
                            }),
                            e.set("SpaHistoryRefundsData", {
                                pipelines: [eo, Zn],
                            }),
                            e.set("SpaMyCommunicationsData", {
                                pipelines: [eo, Zn],
                            }),
                            e.set("SpaMyClaimsData", {
                                pipelines: [eo, Zn],
                            }),
                            e.set("SpaMyFeedbacksData", {
                                pipelines: [eo, Zn],
                            }),
                            e.set("SpaNotificationsData", {
                                pipelines: [eo, new jn(), Zn],
                            }),
                            e.set("SpaOAuthSignInData", {
                                pipelines: [Xn, new Ln(), Jn],
                            }),
                            e.set("SubscriptionPageData", {
                                pipelines: [Xn, Jn, new Pn(["ge"])],
                            }),
                            e.set("ServicePagesData", {
                                pipelines: [
                                    new Pn(),
                                    new Gn(),
                                    new Er(),
                                    new Fn(),
                                    new Hn(),
                                ],
                            }),
                            e.set("PressCenterData", {
                                pipelines: [new Er(), new Fn()],
                            }),
                            (this.map = e);
                    }
                    extend(e) {
                        var t;
                        const r = (e && this.map.get(e)) || {};
                        return (
                            (r.pipelines = (
                                null != (t = r.pipelines) ? t : []
                            ).concat(this.globalPipelines)),
                            r
                        );
                    }
                };
                let ro = new o.A();
                ro.initTask = new C.Deferred();
                const so = new to(),
                    no = new le();
                let oo = null,
                    io = null,
                    ao = null;
                const lo = Object.freeze({
                        mobile: "m",
                        desktop: "d",
                    }),
                    co = m.factory();
                (0, n.O)(co);
                class uo {
                    get $userEnv() {
                        return vo;
                    }
                    get $router() {
                        return ro;
                    }
                    get $helper() {
                        return C;
                    }
                    get $moduleLoader() {
                        return po;
                    }
                    get $verificationTokenHelper() {
                        return V;
                    }
                    async menuLk(e) {
                        return (
                            null == io && ((io = new i(e)), await io.init()), io
                        );
                    }
                    get $httpClient() {
                        return co;
                    }
                    get $auth() {
                        return _;
                    }
                    get $wbxHttpClient() {
                        return g;
                    }
                    get $observable() {
                        return $.observable(this);
                    }
                    asObservable(e) {
                        return $.observable(e);
                    }
                    toggleProperty(e) {
                        this.asObservable(this).setProperty(e, !this[e]);
                    }
                    get $storageHelper() {
                        return se;
                    }
                    get $seoHelper() {
                        return z;
                    }
                    get $stat() {
                        return wb.stat;
                    }
                    get $user() {
                        return mo;
                    }
                    get $geoLocation() {
                        return go;
                    }
                    get $adult() {
                        return ho;
                    }
                    get $observerHelper() {
                        return bo;
                    }
                    get $analitic() {
                        return wb.analitics;
                    }
                    get $productCardPopup() {
                        return (oo = null != oo ? oo : new N()), oo;
                    }
                    get $isDesktop() {
                        return lo.desktop == wb.settings.displayMode;
                    }
                    get $eventBus() {
                        return U;
                    }
                    get $services() {
                        return fo;
                    }
                    get $routeExtensions() {
                        return so;
                    }
                    get $apiSupport() {
                        return no;
                    }
                    get $recentViews() {
                        return ue;
                    }
                    get $promotionsHelper() {
                        return ye;
                    }
                    $moveToAnchor(...e) {
                        const t = arguments[0],
                            r = e.find(
                                (e) =>
                                    e instanceof Event ||
                                    e instanceof jQuery.Event
                            ),
                            s =
                                arguments[1] instanceof Event ||
                                arguments[1] instanceof jQuery.Event ||
                                arguments[1],
                            n =
                                !(
                                    arguments[2] instanceof Event ||
                                    arguments[2] instanceof jQuery.Event
                                ) && arguments[2],
                            o =
                                arguments[3] instanceof Event ||
                                arguments[3] instanceof jQuery.Event ||
                                !arguments[3]
                                    ? 0
                                    : arguments[3];
                        null == r || r.preventDefault(),
                            null == r || r.stopPropagation(),
                            null == r || r.stopImmediatePropagation();
                        const i = document.getElementById(t);
                        if (null == i)
                            return void console.warn(
                                "anchor element doesnt exist"
                            );
                        const a = {
                            top: 0 + o,
                        };
                        let l = this.$helper.isElementInViewport(i, !0, a);
                        function c() {
                            "scrollBehavior" in document.documentElement.style
                                ? window.scrollTo({
                                      top:
                                          window.pageYOffset +
                                          i.getBoundingClientRect().top -
                                          o,
                                      left: 0,
                                      behavior: s ? "smooth" : "auto",
                                  })
                                : window.scrollTo(
                                      0,
                                      window.pageYOffset +
                                          i.getBoundingClientRect().top -
                                          o
                                  );
                        }
                        if ((c(), n)) {
                            const e = setInterval(() => {
                                (l = this.$helper.isElementInViewport(
                                    i,
                                    !0,
                                    a
                                )),
                                    l ? clearInterval(e) : c();
                            }, 500);
                        }
                    }
                    $void() {}
                    $getCurrentXInfoAsync() {
                        return mo.getXinfo();
                    }
                    $getCurrentXInfoWithClustersAndVectorsAsync(e) {
                        return mo.getXinfoWithClustersAndVectors(e);
                    }
                    async $getUserGender() {
                        const { userInfo: e } =
                            await this.$services.userData.getUserDataAsync();
                        return e.genderE;
                    }
                    $generateGuid() {
                        const e = () =>
                            Math.floor(65536 * (1 + Math.random()))
                                .toString(16)
                                .substring(1);
                        return (
                            e() +
                            e() +
                            "-" +
                            e() +
                            "-" +
                            e() +
                            "-" +
                            e() +
                            "-" +
                            e() +
                            e() +
                            e()
                        );
                    }
                    async $getLoadingError() {
                        if (ao) return ao;
                        try {
                            const e = await po.loadModuleAsync("loadingError");
                            return (ao = new e()), ao;
                        } catch (e) {
                            return null;
                        }
                    }
                    $isWbxOrderEnabled(e) {
                        var t, r, s;
                        return (
                            !!(null == (t = this.$auth.jwtData)
                                ? void 0
                                : t.user) &&
                            ("ru" !== wb.settings.currentLocale ||
                                !!e.isWbxOrderEnabled ||
                                (!!(null ==
                                (s =
                                    null == (r = wb.global.settings)
                                        ? void 0
                                        : r.variables)
                                    ? void 0
                                    : s.wbxOrderUsersRange) &&
                                    this._checkByRange(
                                        wb.global.settings.variables
                                            .wbxOrderUsersRange
                                    )))
                        );
                    }
                    $isSupportBooking() {
                        return (
                            "RUB" === wb.user.getCurrency() &&
                            !wb.settings.b2bMode &&
                            wb.global.settings.switches.enableSupportBooking
                        );
                    }
                    $isUserPremiumEnabled() {
                        var e, t, r;
                        if (
                            !(null == (e = this.$auth.jwtData)
                                ? void 0
                                : e.user) ||
                            "ru" !== wb.settings.currentLocale
                        )
                            return !1;
                        const s = this.$services.userData.getMaskedInfo();
                        return (
                            (null == (t = this.$user.getUserGradeFromCache())
                                ? void 0
                                : t.premiumIsAvailable) &&
                            ((null == s ? void 0 : s.phone.startsWith("79")) ||
                                (null ==
                                (r =
                                    this.$user.getUserGradeFromCache()
                                        .subscription_features)
                                    ? void 0
                                    : r.length) > 0)
                        );
                    }
                    $isTravelEnabled() {
                        return "ru" === wb.settings.currentLocale;
                    }
                    $isTravelEnabledMenu() {
                        return (
                            "ru" === wb.settings.currentLocale &&
                            "ru" === this.$user.getLocale()
                        );
                    }
                    _checkByRange(e) {
                        var t;
                        const r = (
                            null != (t = null == e ? void 0 : e.split(";"))
                                ? t
                                : []
                        ).map((e) => parseInt(e));
                        if (r.length < 2) return !1;
                        const s = isNaN(this.$auth.jwtData.user)
                            ? Math.abs(this.$auth.jwtData.user.hashCode())
                            : parseInt(this.$auth.jwtData.user);
                        return r.length > 2
                            ? !!r.find((e) => e === s)
                            : s > r[0] && s <= r[1];
                    }
                    $isRangeEnabledFor(e) {
                        var t;
                        return (
                            !(
                                !(null == (t = this.$auth.jwtData)
                                    ? void 0
                                    : t.user) || !e
                            ) && this._checkByRange(e)
                        );
                    }
                    $useCatalogReturnCost() {
                        var e, t, r, s;
                        return (
                            !!(null ==
                            (t =
                                null == (e = wb.global.settings)
                                    ? void 0
                                    : e.variables)
                                ? void 0
                                : t.catalogReturnCostLocales) &&
                            (null ==
                            (s =
                                null == (r = wb.global.settings)
                                    ? void 0
                                    : r.variables)
                                ? void 0
                                : s.catalogReturnCostLocales.includes(
                                      this.$user.getLocale()
                                  ))
                        );
                    }
                    $isReceiptsFromAstroEnabled() {
                        var e, t, r;
                        return (
                            !!(null == (e = this.$auth.jwtData)
                                ? void 0
                                : e.user) &&
                            (null ==
                            (r =
                                null == (t = wb.global.settings)
                                    ? void 0
                                    : t.switches)
                                ? void 0
                                : r.enableAstroReceipts)
                        );
                    }
                    $getService(e) {
                        return po
                            .loadServiceAsSingletonAsync(e)
                            .then(() => fo[e]);
                    }
                    $getServiceOf(e) {
                        return po.loadServiceAsSingletonAsync(e).then((e) => e);
                    }
                    $loadModule(e, ...t) {
                        return po.loadModuleAsync(e).then((e) => new e(...t));
                    }
                }
                Object.defineProperties(window, {
                    WbSpaModel: {
                        value: uo,
                    },
                }),
                    Object.setPrototypeOf(o.A.prototype, uo.prototype),
                    Object.setPrototypeOf(ne.A.prototype, uo.prototype),
                    Object.setPrototypeOf(oe.prototype, uo.prototype),
                    Object.setPrototypeOf(P.prototype, uo.prototype),
                    Object.setPrototypeOf(D.prototype, uo.prototype),
                    Object.setPrototypeOf(E.prototype, uo.prototype),
                    Object.setPrototypeOf(N.prototype, uo.prototype),
                    Object.setPrototypeOf(
                        Object.getPrototypeOf(z),
                        uo.prototype
                    ),
                    Object.setPrototypeOf(i.prototype, uo.prototype),
                    Object.setPrototypeOf(to.prototype, uo.prototype),
                    Object.setPrototypeOf(ye.prototype, uo.prototype),
                    Object.setPrototypeOf(St.prototype, uo.prototype),
                    Object.setPrototypeOf(_t.A.prototype, uo.prototype),
                    Object.setPrototypeOf(Dt.prototype, uo.prototype),
                    Object.setPrototypeOf(Ne.prototype, uo.prototype),
                    Object.setPrototypeOf(Ue.prototype, uo.prototype),
                    Object.setPrototypeOf(et.prototype, uo.prototype),
                    Object.setPrototypeOf(hr.prototype, uo.prototype),
                    Object.setPrototypeOf(Sr.prototype, uo.prototype),
                    Object.setPrototypeOf(Cr.prototype, uo.prototype),
                    Object.setPrototypeOf(Qt.prototype, uo.prototype),
                    Object.setPrototypeOf(Pr.prototype, uo.prototype),
                    Object.setPrototypeOf(Br.prototype, uo.prototype);
                const po = new P().init(),
                    ho = new D(),
                    mo = new ne.A(),
                    go = new oe(),
                    bo = new E();
                var yo = uo;
                (wb.utils = Object.assign(
                    (null == wb ? void 0 : wb.utils) || {},
                    C
                )),
                    (wb.user = mo),
                    (wb.adult = ho);
                const vo = {
                        currency: wb.user.getCurrency(),
                        activePositions: [],
                        activePositionsTask: new C.Deferred(),
                    },
                    fo = {
                        storeService: new Dt(),
                        userAddressService: new _t.A(),
                        cartService: new St(),
                        favsService: new Ne(),
                        userData: new Ue(),
                        notifications: new et(),
                        productCard: new Qt(),
                        bannersService: new hr(),
                        apiUserStorage: new Sr(),
                        sessionService: new Cr(),
                        pager: kr,
                        retryFetchService: new Pr(),
                        splitterService: new Br(),
                    };
                Object.keys(fo).forEach((e) => {
                    const t = fo[e];
                    "init" in t && t.init && t.init();
                });
                var wo = r(13542),
                    So = Object.defineProperty,
                    _o = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? So(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                var Co = class {
                        constructor() {
                            _o(this, "isInited"),
                                _o(this, "menuById"),
                                _o(this, "menuByUrl"),
                                _o(this, "menuIdEnum"),
                                _o(this, "fullMenu"),
                                (this.fullMenu = null),
                                (this.menuByUrl = new Map()),
                                (this.menuById = new Map()),
                                (this.isInited = !1),
                                (this.menuIdEnum = this._menuIdEnum());
                        }
                        async initMenu() {
                            var e;
                            const t = wb.currentLanguage || "ru",
                                r = `main-menu-${WbSpaModel.prototype.$user.getLocale()}-${t}-v3.json`;
                            if (
                                ((this.fullMenu =
                                    await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(
                                        r,
                                        1e4
                                    )),
                                this.fullMenu)
                            ) {
                                const t =
                                        null ==
                                        (e =
                                            WbSpaModel.prototype.$user.getUserGradeFromCache())
                                            ? void 0
                                            : e.wbClub,
                                    r = this.fullMenu.findIndex(
                                        (e) => 1234 === e.id
                                    );
                                if (
                                    !wb.settings.b2bMode &&
                                    WbSpaModel.prototype.$isUserPremiumEnabled()
                                ) {
                                    const e = {
                                        id: 1122,
                                        name: wb.i18n.t("wbClub.discounts"),
                                        url:
                                            t && "subscribed" === t
                                                ? "/promotions/klubnye-skidki"
                                                : "/subscription",
                                        locked: !t || "subscribed" !== t,
                                    };
                                    (t && "subscribed" === t) ||
                                        (e.target = "_blank"),
                                        this.fullMenu.splice(
                                            r >= 0 ? r : 0,
                                            0,
                                            e
                                        );
                                }
                                "ru" !== wb.settings.currentLocale &&
                                    r >= 0 &&
                                    this.fullMenu.splice(r, 1),
                                    WbSpaModel.prototype.$isTravelEnabledMenu() &&
                                        (this.fullMenu.splice(
                                            this.fullMenu.findIndex(
                                                (e) => 1235 === e.id
                                            ) + 1,
                                            0,
                                            {
                                                id: 1236,
                                                name: "WB Travel",
                                                url: "https://www.wildberries.ru/travel",
                                                target: "_blank",
                                            }
                                        ),
                                        this.fullMenu.splice(
                                            this.fullMenu.findIndex(
                                                (e) => 61037 === e.id
                                            ),
                                            1
                                        )),
                                    this._createMenuMap();
                                const s = this.fullMenu
                                    .filter((e) => e.dynamic)
                                    .map((e) => this.loadDynamicBranch(e));
                                await Promise.all(s), (this.isInited = !0);
                            }
                            return this;
                        }
                        setEntryPointWBClub() {
                            window.localStorage.setItem(
                                "entryPointWBClub",
                                "Catalog"
                            );
                        }
                        async loadDynamicBranch(e) {
                            const t = WbSpaModel.prototype.$user.getDest(),
                                r = `${
                                    b.g2
                                }menu/v11/api?locale=${WbSpaModel.prototype.$user.getLocale()}&lang=${
                                    wb.currentLanguage
                                }&id=${e.id}&collapse&dest=${t}`,
                                s =
                                    await WbSpaModel.prototype.$httpClient.fetchBasicJSON(
                                        r,
                                        {},
                                        {
                                            timeout: 1e4,
                                        }
                                    );
                            if (null == s ? void 0 : s.data) {
                                const r = this._fromDynamicMenu(s.data, e);
                                r.forEach((t) => this._setNode(t, e.id)),
                                    (e.childs = r),
                                    (e.isDenyLink = !0),
                                    (e.loadedForDest = t);
                            }
                        }
                        getCurrentMenuItem(e) {
                            if (!e) return null;
                            const t = e.pathname.replace(
                                "catalogdata",
                                "catalog"
                            );
                            return this.menuByUrl.get(t);
                        }
                        getSitePathItems(e) {
                            var t;
                            if (!e) return null;
                            const r = [];
                            r.push({
                                id: e.id,
                                name: e.name,
                                pageUrl: e.url,
                                analytic: ["CCC", null, null, e.id],
                            });
                            let s =
                                null == (t = this.menuById.get(e.id))
                                    ? void 0
                                    : t.parentId;
                            for (; null != s; ) {
                                const e = this.menuById.get(s);
                                if (!e) return r.reverse();
                                r.push({
                                    id: s,
                                    name: e.name,
                                    pageUrl: e.url,
                                    analytic: ["CCC", null, null, s],
                                }),
                                    (s = e.parentId);
                            }
                            return r.reverse();
                        }
                        getCatalogDenyMenu(e, t) {
                            var r, s, n, o, i, a, l;
                            if (!e) return;
                            if (e.landing || 1 === t.length)
                                return {
                                    current: {
                                        name: e.name,
                                        link: e.url,
                                        isTop: e.isTop,
                                        lastSelected: !1,
                                    },
                                    sideMenu: [],
                                    parent: {},
                                    parents: [],
                                    tagsMenu:
                                        null !=
                                        (s =
                                            null == (r = e.childs)
                                                ? void 0
                                                : r.map((e) => ({
                                                      name: e.name,
                                                      link: e.url,
                                                  })))
                                            ? s
                                            : [],
                                };
                            const c = t[t.length - 2],
                                u = t.slice(1).map((e) => ({
                                    name: e.name,
                                    link: e.pageUrl,
                                }));
                            u[u.length - 1].lastSelected = !0;
                            const d =
                                null !=
                                (o =
                                    null == (n = e.childs)
                                        ? void 0
                                        : n.map((e) => ({
                                              name: e.name,
                                              link: e.url,
                                              anc: !0,
                                          })))
                                    ? o
                                    : [];
                            if ((null != (i = e.childs) ? i : []).length > 0)
                                return {
                                    current: {
                                        name: e.name,
                                        link: e.url,
                                        isTop: e.isTop,
                                        lastSelected: !1,
                                    },
                                    sideMenu: [...u, ...d],
                                    parent: {
                                        name: c.name,
                                        link: c.pageUrl,
                                    },
                                    parents: this.getParentsForDeny(e.id),
                                    tagsMenu: null != d ? d : [],
                                };
                            const p = this.menuByUrl.get(c.pageUrl);
                            return {
                                current: {
                                    name: e.name,
                                    link: e.url,
                                    isTop: e.isTop,
                                    lastSelected: !0,
                                },
                                sideMenu: u,
                                parent: {
                                    name: c.name,
                                    link: c.pageUrl,
                                },
                                parents: this.getParentsForDeny(e.id),
                                tagsMenu:
                                    null !=
                                    (l =
                                        null ==
                                        (a = null == p ? void 0 : p.childs)
                                            ? void 0
                                            : a.map((e) => ({
                                                  name: e.name,
                                                  link: e.url,
                                              })))
                                        ? l
                                        : [],
                            };
                        }
                        getRootNode(e) {
                            let t = e;
                            for (; null != t.parentId; )
                                t = this.menuById.get(t.parentId);
                            return t;
                        }
                        hasItem(e) {
                            return !!e && this.menuById.has(e);
                        }
                        getCatalogLink(e) {
                            var t;
                            return null == (t = this.menuById.get(e))
                                ? void 0
                                : t.url;
                        }
                        getParents(e) {
                            var t;
                            const r = [];
                            let s =
                                null == (t = this.menuById.get(e))
                                    ? void 0
                                    : t.parentId;
                            for (; null != s; ) {
                                const e = this.menuById.get(s);
                                if (!e) return r.reverse();
                                r.push(e.name), (s = e.parentId);
                            }
                            return r.reverse();
                        }
                        getParentsForDeny(e) {
                            var t;
                            const r = [];
                            let s =
                                null == (t = this.menuById.get(e))
                                    ? void 0
                                    : t.parentId;
                            for (; null != s; ) {
                                const e = this.menuById.get(s);
                                r.push({
                                    name: null == e ? void 0 : e.name,
                                    link: null == e ? void 0 : e.url,
                                }),
                                    (s = null == e ? void 0 : e.parentId);
                            }
                            return r.reverse();
                        }
                        _menuIdEnum() {
                            return {
                                sport: 784,
                                monocity: 61042,
                                forAdults: 62057,
                                promotion: 2192,
                            };
                        }
                        _createMenuMap() {
                            var e;
                            null == (e = this.fullMenu) ||
                                e.forEach((e) => this._setNode(e, null));
                        }
                        _setNode(e, t) {
                            var r;
                            t && (e.parentId = t),
                                (this.menuByUrl.has(e.url) && !e.shard) ||
                                    (this.menuByUrl.set(e.url, e),
                                    this.menuById.set(e.id, e)),
                                null == (r = e.childs) ||
                                    r.forEach((t) => this._setNode(t, e.id));
                        }
                        _fromDynamicMenu(e, t) {
                            return e.map((e) => r(e, t.id, t));
                            function r(e, t, s) {
                                const n = {
                                    id: 1e6 * s.id + e.id,
                                    parent: null != t ? t : 1e6 * s.id + t,
                                    name: e.name,
                                    url: s.url + e.url.replace("/catalog", ""),
                                    shard: e.shardKey,
                                    query: e.query,
                                    isDenyLink:
                                        e.childrenOnly ||
                                        "blackhole" == e.shardKey,
                                };
                                return (
                                    e.nodes &&
                                        (n.childs = e.nodes.map((e) =>
                                            r(e, n.id, s)
                                        )),
                                    n
                                );
                            }
                        }
                    },
                    Io = r(61326),
                    ko = (r(40369), r(60138));
                ($.observable.Object.prototype.setAllProperty = function (
                    e,
                    t
                ) {
                    $.each(e, (e, r) => {
                        let s = e;
                        t && (s = `${t}.${s}`),
                            $.isPlainObject(r)
                                ? this.setAllProperty(r, s)
                                : !$.isArray(r) && this.setProperty(s, r);
                    });
                }),
                    ($.observable.Array.prototype.refreshArray = function (e) {
                        for (let t = 0; t < e.length; t++)
                            this._data.length === t
                                ? this.insert(e[t])
                                : $.observable(this._data[t]).setProperty(e[t]);
                        for (; e.length < this._data.length; )
                            this.remove(this._data.length - 1);
                    });
                const Mo = {};
                $.views.helpers({
                    loadTemplateAsync: async function (e, t = "") {
                        var r;
                        if ($.templates[e]) return $.templates[e];
                        if (!Mo[e]) {
                            let s;
                            const { $router: n, $httpClient: o } =
                                WbSpaModel.prototype;
                            if (window._debug) s = `${e}.json`;
                            else {
                                const t = `${e}.json`,
                                    o =
                                        null == (r = n.tmplHashes)
                                            ? void 0
                                            : r[t];
                                s = t.replace(".json", `.${o}.json`);
                            }
                            Mo[e] = o.fetchStaticV3(
                                (e, r) =>
                                    t
                                        ? `${t}${s}`
                                        : wb.helpers.url.urlForJsTmpl(s),
                                {},
                                s
                            );
                        }
                        try {
                            const t = await Mo[e],
                                r = Object.keys(t);
                            return 1 === r.length
                                ? ($.templates(e, t[r[0]]),
                                  (Mo[e] = null),
                                  $.templates[e])
                                : ($.templates(t), Mo[e]);
                        } catch (t) {
                            throw ((Mo[e] = null), t);
                        }
                    },
                    loadWebApiTemplateAsync: async function (e) {
                        const t = `webapi_tmpl_${e}`,
                            r = WbSpaModel.prototype;
                        if ($.templates[t]) return $.templates[t];
                        Mo[t] ||
                            (Mo[t] = r.$httpClient.fetchText(
                                `/webapi/htmltemplate/${e}`
                            ));
                        try {
                            const e = await Mo[t];
                            try {
                                const t = JSON.parse(e);
                                $.templates(t);
                            } catch (r) {
                                $.templates(t, e);
                            }
                            return (Mo[t] = null), $.templates[t];
                        } catch (e) {
                            throw ((Mo[t] = null), e);
                        }
                    },
                    suppliersOrgForms: ko._.suppliersOrgForms,
                    isDefaultSupplier: ko._.isDefaultSupplier,
                    supplierFineName: ko._.supplierFineName,
                    ImageUrl: wb.helpers.url.imageUrl,
                    ImageUrlPb: ko._.ImageUrlPb,
                    urlFeedbackPhoto: wb.helpers.url.urlFeedbackPhoto,
                    urlProductVideo: wb.helpers.url.urlVideoProduct,
                    urlFeedbackVideo: wb.helpers.url.urlFeedbackVideo,
                    productCardUrl: ko._.productCardUrl,
                    forBrandLogoFromId: ko._.forBrandLogoFromId,
                    forSellerLogo: ko._.forSellerLogo,
                    forSellerLogoPb: ko._.forSellerLogoPb,
                    isEmptyObject: ko._.isEmptyObject,
                    Declension: ko._.Declension,
                    pluralize: ko._.pluralize,
                    debug: ko._.debug,
                    dateFormat: ko._.formatDate,
                    toDateFormat: ko._.toDateFormat,
                    formatDate: ko._.formatDate,
                    toJson: ko._.toJson,
                    fromJson: ko._.fromJson,
                    encode: ko._.encode,
                    isLazyImgInCarousel: ko._.isLazyImgInCarousel,
                    timeLeft: ko._.timeLeft,
                    parseFromDotNet: ko._.parseFromDotNet,
                    timeLeftSpa: ko._.timeLeftSpa,
                    isPriceEqual: ko._.isPriceEqual,
                    isNullOrWhiteSpace: ko._.isNullOrWhiteSpace,
                    HasFlag: ko._.HasFlag,
                    blurAdult: ko._.blurAdult,
                    nonBreakingSpaceFormatted: ko._.nonBreakingSpaceFormatted,
                    pickupType: ko._.pickupType,
                    pickupPhotos: ko._.pickupPhotos,
                    priceFromRub: ko._.priceFromRub,
                    priceToRub: ko._.priceToRub,
                    toLocalPrice: ko._.toLocalPrice,
                    max: ko._.max,
                    abs: ko._.abs,
                    trimWord: ko._.trimWord,
                    trimSupplierName: ko._.trimSupplierName,
                    brandUrl: ko._.brandUrl,
                    brandUrlById: ko._.brandUrlById,
                    formatPrice: ko._.formatPrice,
                    isDateToday: ko._.isDateToday,
                    isClosedByUser: ko._.isClosedByUser,
                    getCurrentCurrency: ko._.getCurrentCurrency,
                    fillFeedbackPhotosAndVideo: ko._.fillFeedbackPhotosAndVideo,
                    fillFeedbackPhotos: ko._.fillFeedbackPhotos,
                    fillFeedbackVideos: ko._.fillFeedbackVideos,
                    stripHtml: ko._.stripHtml,
                    isIosDevice: ko._.isIosDevice,
                    isHuaweiDevice: ko._.isHuaweiDevice,
                    sumBy: ko._.sumBy,
                    minFiscalPriceInCurrency: ko._.minFiscalPriceInCurrency,
                    stopPropagation: ko._.stopPropagation,
                    subtract: ko._.subtract,
                    addLogisticsCost: ko._.addLogisticsCost,
                    isExpressDeliveryToday: ko._.isExpressDeliveryToday,
                    formatNumberWithDot: ko._.formatNumberWithDot,
                    getVatAmount: ko._.getVatAmount,
                    onPreventDefault: ko._.onPreventDefault,
                    checkProductOpenSameWindowAb:
                        ko._.checkProductOpenSameWindowAb,
                    applyConverter: ko._.applyConverter,
                    getFilteredAllowedServicePages:
                        ko._.getFilteredAllowedServicePages,
                }),
                    $.views.converters({
                        not: ko.m.not,
                        formatPhone: ko.m.formatPhone,
                        toOrdinalDigitByFemaleGender:
                            ko.m.toOrdinalDigitByFemaleGender,
                        spaceFormatted: ko.m.spaceFormatted,
                        convertQuantity: ko.m.convertQuantity,
                        plusMinus: ko.m.plusMinus,
                        toInt: ko.m.toInt,
                        toFixed: ko.m.toFixed,
                        leadZero: ko.m.leadZero,
                        basketDeliveryDate: ko.m.basketDeliveryDate,
                        priceWithCoins: ko.m.priceWithCoins,
                        priceWithCurrencyOld: ko.m.priceWithCurrencyOld,
                        priceWithCurrencyV2: function (e, t, r) {
                            var s, n;
                            return ko.m.priceWithCurrencyV2.call(this, e, {
                                showEmpty: t,
                                currency: r,
                                iso:
                                    null ==
                                    (n =
                                        null == (s = this.tagCtx)
                                            ? void 0
                                            : s.props)
                                        ? void 0
                                        : n.iso,
                            });
                        },
                        priceUsdRaw: ko.m.priceUsdRaw,
                        priceUsd: ko.m.priceUsd,
                        urlForGood: ko.m.urlForGood,
                        urlSiteStatic: ko.m.urlSiteStatic,
                        urlSiteStaticPb: ko.m.urlSiteStaticPb,
                        urlStaticBasket: ko.m.urlStaticBasket,
                        toLower: ko.m.toLower,
                        dateFromTimestamp: ko.m.dateFromTimestamp,
                        formatDate: ko.m.formatDate,
                        humanDate: ko.m.humanDate,
                        humanTime: function (e) {
                            var t, r, s, n, o, i;
                            const a =
                                    null ==
                                    (r =
                                        null == (t = this.tagCtx)
                                            ? void 0
                                            : t.props)
                                        ? void 0
                                        : r.genitive,
                                l =
                                    null ==
                                    (n =
                                        null == (s = this.tagCtx)
                                            ? void 0
                                            : s.props)
                                        ? void 0
                                        : n.withDays,
                                c =
                                    null ==
                                    (i =
                                        null == (o = this.tagCtx)
                                            ? void 0
                                            : o.props)
                                        ? void 0
                                        : i.withSeconds;
                            return ko.m.humanTime(e, a, l, c);
                        },
                        differenceDatesInSeconds: ko.m.differenceDatesInSeconds,
                        humanTimerFormat: ko.m.humanTimerFormat,
                        humanTimerFormatSimple: ko.m.humanTimerFormatSimple,
                        humanTimerFormatSaleTimer:
                            ko.m.humanTimerFormatSaleTimer,
                        getDaysFromOrder: ko.m.getDaysFromOrder,
                        dateStringToFormat: ko.m.dateStringToFormat,
                        localize: ko.m.localize,
                        pluralize: ko.m.pluralize,
                        customDateTimeFormat: ko.m.customDateTimeFormat,
                        divideNumberBySeparator: ko.m.divideNumberBySeparator,
                        trimWord: ko.m.trimWord,
                        trimSupplierName: ko.m.trimSupplierName,
                        join: ko.m.join,
                        humanBytes: ko.m.humanBytes,
                        deliveryDateTxt: ko.m.deliveryDateTxt,
                        fastDeliveryText: ko.m.fastDeliveryText,
                        minutesToTime: ko.m.minutesToTime,
                        formatTimeStr: ko.m.formatTimeStr,
                        dayNameFromDate: ko.m.dayNameFromDate,
                        getWorkSchedule: ko.m.getWorkSchedule,
                        deliveryType: ko.m.deliveryType,
                        formatString: ko.m.formatString,
                        trim: ko.m.trim,
                        imgForPromoCategory: ko.m.imgForPromoCategory,
                        fileName: ko.m.fileName,
                        convertToText: ko.m.convertToText,
                        toHttps: ko.m.toHttps,
                        onlyDigits: ko.m.onlyDigits,
                        toWebp: ko.m.toWebp,
                        useWebp: ko.m.useWebp,
                        toNumber: ko.m.toNumber,
                        fixHtml: ko.m.fixHtml,
                    }),
                    $.views.tags({
                        range: {
                            boundProps: ["start", "end"],
                            baseTag: "for",
                            render: function (e) {
                                let t = e;
                                const r = this.tagCtx,
                                    s = r.props.start || 0;
                                let n = r.props.end;
                                const o = r.params.props;
                                if (s || n)
                                    if (r.args.length)
                                        $.isArray(t) && (t = t.slice(s, n));
                                    else {
                                        (t = []), (n = n || 0);
                                        for (let e = s; e <= n; e++) t.push(e);
                                    }
                                return arguments.length ||
                                    (o && (o.start || o.end))
                                    ? this.base && this.base(t)
                                    : this.base && this.base();
                            },
                            onArrayChange: function (e, t) {
                                this.refresh();
                            },
                        },
                        calendarV2: {
                            dataBoundOnly: !0,
                            onUpdate: !1,
                            bindTo: ["selected", "limitTo", "limitFrom"],
                            linkedCtxParam: [
                                "selected",
                                "limitTo",
                                "limitFrom",
                            ],
                            format: "dd.MM.yyyy",
                            init: function (e) {
                                (null == e ? void 0 : e.props.format) &&
                                    (this.format = e.props.format),
                                    (null == e ? void 0 : e.props.appendTo) &&
                                        (this.appendTo = e.props.appendTo);
                            },
                            onBind: function (e) {
                                const t = {
                                    x: 0,
                                    y: 1,
                                };
                                e.props.offsetX && (t.x = e.props.offsetX),
                                    (this.datePicker = $(e.props.target)
                                        .glDatePicker({
                                            selectedDate: this.ctxPrm(
                                                "selected"
                                            )
                                                ? this.ctxPrm("selected")
                                                : e.props.limitTo,
                                            customWidth: e.props.width,
                                            zIndex: e.props.zIndex,
                                            appendTo: this.appendTo,
                                            overlay:
                                                "m" === wb.settings.displayMode,
                                            useClick: !0,
                                            calendarOffset: t,
                                            onClick: (t, r, s) => {
                                                this.ctxPrm("selected", s),
                                                    "function" ==
                                                        typeof e.props
                                                            .onSelect &&
                                                        e.props.onSelect(
                                                            s.format(
                                                                this.format
                                                            )
                                                        );
                                            },
                                        })
                                        .glDatePicker(!0));
                            },
                            onAfterLink: function (e) {
                                const t = {
                                        from: e.props.defaultFrom
                                            ? e.props.defaultFrom
                                            : new Date(2001, 1, 1),
                                        to: new Date(),
                                    },
                                    r = [];
                                e.props.limitFrom &&
                                    (t.from = e.props.limitFrom),
                                    e.props.limitTo && (t.to = e.props.limitTo),
                                    (this.datePicker.options.selectableDateRange =
                                        [t]);
                                for (
                                    let e = t.from.getFullYear();
                                    e <= t.to.getFullYear();
                                    e++
                                )
                                    r.push(e);
                                (this.datePicker.options.selectableYears = r),
                                    this.datePicker.render();
                            },
                        },
                        swiper: {
                            dataBoundOnly: !0,
                            mainElement: ".custom-slider",
                            boundProps: ["total", "needRefresh", "activeSlide"],
                            template:
                                '\n                <div class="custom-slider{{if ~tag.sliderClass}} {{: ~tag.sliderClass}}{{/if}}">\n                    <div class="custom-slider__list"  data-lk-header-wba="All">\n                        {{include tmpl=#content/}}\n                    </div>\n                    {{if ~tag.showArrows}}\n                    <button type="button" aria-label="{{:~t(\'common.goBack\')}}" class="custom-slider__arrow custom-slider__arrow--prev" data-link="{on ~tag.scroll \'left\'}disabled{:~leftArrowDisabled}" data-lk-header-wba="See_more"></button>\n                    <button type="button" aria-label="{{:~t(\'common.goForward\')}}" class="custom-slider__arrow custom-slider__arrow--next" data-link="{on ~tag.scroll \'right\'}disabled{:~rightArrowDisabled}" data-lk-header-wba="See_more"></button>\n                    {{/if}}\n                    {{if ~tag.showArrows && ~tag.showFade}}\n                    <div class="custom-slider__fade custom-slider__fade--prev" data-link="disabled{:~leftArrowDisabled}"></div>\n                    <div class="custom-slider__fade custom-slider__fade--next" data-link="disabled{:~rightArrowDisabled}"></div>\n                    {{/if}}\n                </div>\n            ',
                            init: function () {
                                var e, t, r, s, n;
                                const o = this.tagCtx.props.slidesPerView;
                                (this.slidesPerView =
                                    "auto" === o || "number" == typeof o
                                        ? o
                                        : 1),
                                    (this.showArrows =
                                        null !=
                                            (e =
                                                this.tagCtx.props.showArrows) &&
                                        e),
                                    (this.showFade =
                                        null !=
                                            (t = this.tagCtx.props.showFade) &&
                                        t),
                                    (this.sliderClass =
                                        null !=
                                            (r =
                                                this.tagCtx.props
                                                    .sliderClass) && r),
                                    (this.slideSelector =
                                        null !=
                                        (s = this.tagCtx.props.slideSelector)
                                            ? s
                                            : ".custom-slider__item"),
                                    (this.arrowStopPropagation =
                                        null !=
                                            (n =
                                                this.tagCtx.props
                                                    .arrowStopPropagation) &&
                                        n),
                                    (this.checkArrows =
                                        this.checkArrows.bind(this)),
                                    (this.doOnScroll =
                                        WbSpaModel.prototype.$helper.throttle(
                                            this.doOnScroll.bind(this),
                                            300
                                        )),
                                    (this.scrollToSlide =
                                        this.scrollToSlide.bind(this));
                            },
                            onAfterLink: function () {
                                this.checkArrows();
                                const e = this.tagCtx.props.activeSlide;
                                void 0 !== e && this.scrollToSlide(e);
                            },
                            onBind: function () {
                                var e;
                                (this.containerList =
                                    this.mainElem[0].querySelector(
                                        ".custom-slider__list"
                                    )),
                                    null == (e = this.containerList) ||
                                        e.addEventListener(
                                            "scroll",
                                            this.doOnScroll
                                        );
                            },
                            onUpdate: function (e, t) {
                                return (
                                    "propertyChange" === e.type &&
                                        "needRefresh" === t.path &&
                                        ((this.containerList.scrollLeft = 0),
                                        this.checkArrows()),
                                    !1
                                );
                            },
                            scroll: function (e, t) {
                                var r;
                                this.arrowStopPropagation &&
                                    t.stopPropagation();
                                const s =
                                    Number(
                                        null ==
                                            (r =
                                                this.containerList.querySelector(
                                                    this.slideSelector
                                                ))
                                            ? void 0
                                            : r.clientWidth
                                    ) +
                                    parseInt(
                                        getComputedStyle(this.containerList).gap
                                    );
                                let n = this.slidesPerView;
                                if ("auto" === this.slidesPerView) {
                                    const e =
                                        this.mainElem[0].getBoundingClientRect();
                                    n = Math.floor(e.width / s);
                                }
                                const o = s * Number(n),
                                    i =
                                        Math.round(
                                            this.containerList.scrollLeft
                                        ) + ("left" === e ? -o : o);
                                this.containerList.scrollLeft =
                                    Math.round(i / s) * s;
                            },
                            scrollToSlide: function (e) {
                                var t;
                                const r =
                                    e *
                                    (Number(
                                        null ==
                                            (t =
                                                this.containerList.querySelector(
                                                    this.slideSelector
                                                ))
                                            ? void 0
                                            : t.clientWidth
                                    ) +
                                        parseInt(
                                            getComputedStyle(this.containerList)
                                                .gap
                                        ));
                                this.containerList.scrollLeft = r;
                            },
                            doOnScroll: async function (e) {
                                this.checkArrows();
                            },
                            checkArrows: async function () {
                                window.requestAnimationFrame(() => {
                                    const e =
                                        this.containerList.querySelectorAll(
                                            this.slideSelector
                                        );
                                    if (e.length > 0) {
                                        const t =
                                                this.mainElem[0].getBoundingClientRect(),
                                            r =
                                                e[
                                                    e.length - 1
                                                ].getBoundingClientRect();
                                        this.ctxPrm(
                                            "leftArrowDisabled",
                                            this.containerList.scrollLeft <= 0
                                        ),
                                            this.ctxPrm(
                                                "rightArrowDisabled",
                                                t.right + 5 >= r.right
                                            );
                                    } else
                                        this.ctxPrm("leftArrowDisabled", !0),
                                            this.ctxPrm(
                                                "rightArrowDisabled",
                                                !0
                                            );
                                });
                            },
                        },
                        btnAdvertising: {
                            template:
                                "\n            {{if ordBannerMark}}<button \n                                    type=\"button\" \n                                    class=\"btn-advertising\" \n                                    title=\"\" \n                                    data-link=\"{on ~onPreventDefault}\n                                    {tooltip classes='tooltip-advertising j-tooltip-advertising tooltip--dark' pos='alignright bottom' trigger='hover' distance=0 tmplName='advertisingTooltipTmpl' tmplData=ordBannerMark}\">\n                                    <span>{{:~t('promo.advertisement')}}</span>\n                                </button>{{/if}}\n        ",
                        },
                        infiniteScroll: {
                            mainElement: "div",
                            template: '<div class="scroll-loader"></div>',
                            onAfterLink() {
                                (this.scrollObserver = new IntersectionObserver(
                                    (e, t) => {
                                        e.forEach((e) => {
                                            e.isIntersecting &&
                                                this.tagCtx.props.callback();
                                        });
                                    },
                                    {
                                        threshold: 0,
                                        rootMargin: "0px 0px 50% 0px",
                                    }
                                )),
                                    this.scrollObserver.observe(
                                        this.mainElem[0]
                                    );
                            },
                            onDispose() {
                                this.scrollObserver.disconnect();
                            },
                        },
                        onSwipe: {
                            init: function (e) {
                                var t;
                                (this.threshold = 10),
                                    1 ==
                                        (null ==
                                        (t = null == e ? void 0 : e.args)
                                            ? void 0
                                            : t.length) &&
                                        "function" == typeof e.args[0] &&
                                        (this.onSwiped = e.args[0]),
                                    (this.onTouchStart =
                                        this.onTouchStart.bind(this)),
                                    (this.onTouchMove =
                                        this.onTouchMove.bind(this)),
                                    (this.onTouchEnd =
                                        this.onTouchEnd.bind(this));
                            },
                            onBind: function () {
                                var e, t, r;
                                this.onSwiped &&
                                    (null == (e = this.linkCtx) ||
                                        e.elem.addEventListener(
                                            "touchstart",
                                            this.onTouchStart,
                                            !1
                                        ),
                                    null == (t = this.linkCtx) ||
                                        t.elem.addEventListener(
                                            "touchmove",
                                            this.onTouchMove,
                                            !1
                                        ),
                                    null == (r = this.linkCtx) ||
                                        r.elem.addEventListener(
                                            "touchend",
                                            this.onTouchEnd,
                                            !1
                                        ));
                            },
                            onUnbind: function () {
                                var e, t, r;
                                null == (e = this.linkCtx) ||
                                    e.elem.removeEventListener(
                                        "touchstart",
                                        this.onTouchStart,
                                        !1
                                    ),
                                    null == (t = this.linkCtx) ||
                                        t.elem.removeEventListener(
                                            "touchmove",
                                            this.onTouchMove,
                                            !1
                                        ),
                                    null == (r = this.linkCtx) ||
                                        r.elem.removeEventListener(
                                            "touchend",
                                            this.onTouchEnd,
                                            !1
                                        );
                            },
                            onTouchStart: function (e) {
                                const t = e.changedTouches[0];
                                (this.startX = t.pageX),
                                    (this.startY = t.pageY),
                                    e.cancelable && e.preventDefault();
                            },
                            onTouchMove: function (e) {
                                const t = e.changedTouches[0];
                                (this.deltaX = t.pageX - this.startX),
                                    (this.deltaY = t.pageY - this.startY),
                                    e.cancelable && e.preventDefault();
                            },
                            onTouchEnd: function (e) {
                                const t = Math.atan2(
                                        -this.deltaY,
                                        -this.deltaX
                                    ),
                                    r = (3 * Math.PI) / 4,
                                    s = Math.PI / 4;
                                let n;
                                (n =
                                    s <= t && t <= r
                                        ? "up"
                                        : -r <= t && t <= -s
                                        ? "down"
                                        : -r < t && t < r
                                        ? "left"
                                        : "right"),
                                    (Math.abs(this.deltaX) >= this.threshold ||
                                        Math.abs(this.deltaY) >=
                                            this.threshold) &&
                                        this.onSwiped(n),
                                    e.cancelable && e.preventDefault();
                            },
                        },
                    });
                var Po = Object.defineProperty,
                    To = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? Po(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                wb.xnm = (function () {
                    let e = [],
                        t = {};
                    const r = 864e5,
                        s = "adultSubjectIds",
                        n = 36e5,
                        o = "no-return-subjects.json",
                        i = "product_colors",
                        a = [
                            7031, 7032, 3382, 3392, 8332, 5020, 8411, 7018,
                            8251, 6217, 7019, 6296, 6304, 6302, 5783, 5519,
                            5948, 5814, 5784, 5789, 5813, 5553, 7015, 5779,
                            5780, 5292, 5293, 5294, 5297, 5478, 8588, 5132,
                            5129, 5150, 5121, 5126, 8590, 5361, 5127, 5128,
                            5158, 5193, 5194, 5159, 5019, 5186, 5021, 5023,
                            5119, 5122, 5125, 5156, 5065, 5050, 5084, 5025,
                            5037, 5026, 5086, 5040, 5043, 5045, 5046, 5052,
                            5064, 5066, 5068, 5070, 5073, 5076, 5085, 5087,
                            5088, 5091, 8589, 5051, 5090, 7014, 5117, 5118,
                            7025, 7733, 5069, 5071, 5120, 4256, 3489, 5075,
                            5080, 5197, 5534, 5482, 5288, 53, 5289, 5039, 2909,
                            5273, 2603, 2604, 2606, 2611, 3490, 2610, 2612,
                            7710, 2616, 2609, 2613, 2618, 5360, 2602, 2605,
                            5630, 7540, 5074, 5067, 2617, 2607, 7571, 6998,
                            5116, 5042, 5668, 2608, 5083, 2614, 5082, 5047,
                            8145, 5044, 7016, 5328, 7731, 8256, 5332, 5925,
                            5340, 5355, 7666, 7655, 5576, 7106, 5593, 5356,
                            7020, 5812, 400, 5049, 7755, 8110, 7012, 5072, 5048,
                            3517, 2615, 5325, 6303, 5153, 5359, 7770, 8111,
                            6315, 8248, 5326, 6246, 880, 5324, 5513, 5624, 5295,
                            8243, 2596, 5296, 5327, 1354, 7017, 5354, 5406,
                            6062, 6976, 7013, 7438, 5497, 5353, 5041, 5298,
                            7732, 5880, 6412, 5484, 5357, 3415, 3452, 3451,
                            3410, 6975, 6986, 6939, 6972, 6980, 6990, 7030,
                            6981, 6989, 6974, 6977, 6983, 6979, 6984, 6978,
                            6987, 6982, 6973, 6985, 5089, 5772,
                        ],
                        l = [6967],
                        c = (e, t) =>
                            e.rank > t.rank ? 1 : e.rank === t.rank ? 0 : -1;
                    async function u() {
                        if (e.length > 0) return Promise.resolve();
                        const t = JSON.parse(localStorage.getItem(s));
                        if ((null == t ? void 0 : t.expired) > Date.now() - r)
                            return (e = t.info), Promise.resolve();
                        try {
                            const t = "adult-subjects.json",
                                n =
                                    await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(
                                        t,
                                        5e3
                                    );
                            return n && 0 !== n.length
                                ? ((e = n),
                                  null == localStorage ||
                                      localStorage.putObject(s, {
                                          info: n,
                                          expired: Date.now() + r,
                                      }),
                                  Promise.resolve())
                                : (console.warn(
                                      "Getting adult subjects has failed"
                                  ),
                                  Promise.reject());
                        } catch (e) {
                            return (
                                console.warn(
                                    "Getting adult subjects has failed"
                                ),
                                console.error(e.message),
                                Promise.resolve()
                            );
                        }
                    }
                    function d(t, r) {
                        const s = e.length > 0 ? e : a;
                        return (
                            -1 !== s.indexOf(t) || (!!r && -1 !== s.indexOf(r))
                        );
                    }
                    function p(e, t) {
                        const r = l;
                        return (
                            -1 !== r.indexOf(e) || (!!t && -1 !== r.indexOf(t))
                        );
                    }
                    class h {
                        constructor(e) {
                            To(this, "width", 0),
                                To(this, "weight", 0),
                                To(this, "length", 0),
                                To(this, "depth", 0),
                                To(this, "v"),
                                To(this, "sum3d"),
                                null == e ||
                                    e.forEach((e) => {
                                        "Вес с упаковкой (кг)" === e.name &&
                                            (this.weight =
                                                parseFloat(e.value) || 0),
                                            "Ширина упаковки (мм)" === e.name &&
                                                (this.width =
                                                    parseInt(e.value, 10) || 0),
                                            "Длина упаковки (мм)" === e.name &&
                                                (this.length =
                                                    parseInt(e.value, 10) || 0),
                                            "Высота упаковки (мм)" === e.name &&
                                                (this.depth =
                                                    parseInt(e.value, 10) || 0);
                                    }),
                                (this.v =
                                    (this.width / 1e3) *
                                    (this.length / 1e3) *
                                    (this.depth / 1e3)),
                                (this.sum3d =
                                    this.width + this.length + this.depth);
                        }
                    }
                    const m = (e, t) => {
                        if (e) {
                            if (
                                !wb.currencies.localeWithCoins.includes(
                                    String(t)
                                )
                            )
                                return e.toString().slice(0, -2);
                            const r = e.toString();
                            return `${r.slice(0, -2) || "0"}.${r.slice(-2)}`;
                        }
                        return "";
                    };
                    function g(e, t) {
                        if (t && e.pics > 0) return !0;
                        if (!e.price) return !1;
                        if (0 === e.pics || !e.sizes || 0 === e.sizes.length)
                            return !1;
                        for (let t = 0; t < e.sizes.length; t++) {
                            const r = e.sizes[t];
                            if (r.stocks && r.stocks.length > 0) return !0;
                        }
                        return !1;
                    }
                    function y(e) {
                        return Boolean(e.sizes && e.sizes.length > 0);
                    }
                    function v(e, t) {
                        return !t || !e.isAdult;
                    }
                    async function f(e, t, r) {
                        const s = `${((e) => (e ? b.XX : b.Aj))(
                            r
                        )}?${e}&nm=${t.join(";")}`;
                        return WbSpaModel.prototype.$httpClient.fetchBasicJSON(
                            s,
                            {
                                xhrFields: {
                                    withCredentials: !1,
                                },
                                processData: !1,
                                dataType: "json",
                            },
                            {
                                addAuthHeader: !0,
                                addCatalogCaptcha: !0,
                                retry: 2,
                                nullOnError: !0,
                            }
                        );
                    }
                    function w(e, t = !1, r = null, s = null) {
                        return new Promise((n, o) => {
                            Promise.all([wb.user.getXinfo(), u()]).then(
                                ([i]) => {
                                    var a;
                                    ~~Number(r) &&
                                        (i =
                                            WbSpaModel.prototype.$user._changeXDest(
                                                i,
                                                Number(r)
                                            )),
                                        s &&
                                            (i =
                                                WbSpaModel.prototype.$user._changeXCurrency(
                                                    i,
                                                    s
                                                ));
                                    const l = [];
                                    let c = [];
                                    const u = new URLSearchParams();
                                    WbSpaModel.prototype.$analitic.appendSplitInfoV2(
                                        u,
                                        "catalog"
                                    ),
                                        u.size > 0 && (i += `&${u}`);
                                    const h = wb.currentLanguage;
                                    (i += `&lang=${h}`),
                                        e.forEach((e) => {
                                            100 === c.length &&
                                                (l.push(f(i, c, t)), (c = [])),
                                                c.push(e);
                                        }),
                                        c.length > 0 && l.push(f(i, c, t));
                                    const m = {},
                                        g = new URLSearchParams(i),
                                        b =
                                            null == (a = g.get("curr"))
                                                ? void 0
                                                : a.toUpperCase(),
                                        y = Number(g.get("spp")),
                                        v = Number(g.get("dest")),
                                        w =
                                            !wb.global.settings.switches
                                                .showLogisticsInPrice ||
                                            "ru" !==
                                                WbSpaModel.prototype.$user.getLocale(),
                                        C = wb.xnm.show2025Logistics();
                                    Promise.all(l)
                                        .then((e) => {
                                            e.forEach((e) => {
                                                var t;
                                                0 === (t = e).state &&
                                                    t.data.products &&
                                                    t.data.products.forEach(
                                                        (e) => {
                                                            var t;
                                                            (e.name =
                                                                (null ==
                                                                (t = e.name)
                                                                    ? void 0
                                                                    : t.length) >
                                                                0
                                                                    ? e.name
                                                                    : wb.i18n.t(
                                                                          "productCard.noNameSpecified"
                                                                      )),
                                                                (e.isAdult =
                                                                    e.isAdult ||
                                                                    d(
                                                                        e.subjectId,
                                                                        e.subjectParentId
                                                                    )),
                                                                (e.isAlcohol =
                                                                    e.isAlcohol ||
                                                                    p(
                                                                        e.subjectId,
                                                                        e.subjectParentId
                                                                    )),
                                                                (e.currency =
                                                                    b),
                                                                (e.spp = y),
                                                                (e.dest = v),
                                                                _(e),
                                                                S(e, w, C),
                                                                (e.is2025LogisticCost =
                                                                    e.price
                                                                        .logistics >
                                                                        0 && C),
                                                                (m[e.id] = e);
                                                        }
                                                    );
                                            }),
                                                n(m);
                                        })
                                        .catch((e) => {
                                            console.log(
                                                `${e.statusText} ${e.responseText}`
                                            ),
                                                o();
                                        });
                                }
                            );
                        });
                    }
                    function S(e, t = !0, r = !1) {
                        var s, n, o, i;
                        if (!e || !e.sizes) return;
                        let a,
                            l = !1;
                        const c =
                                e.premiumSale > 0 &&
                                ((null ==
                                (s =
                                    WbSpaModel.prototype.$user.getUserGradeFromCache())
                                    ? void 0
                                    : s.isPremium) ||
                                    (null == e ? void 0 : e.showPremium)),
                            u =
                                null !=
                                (o =
                                    null ==
                                    (n =
                                        WbSpaModel.prototype.$user.getUserGradeFromCache())
                                        ? void 0
                                        : n.priceAdjustmentPercent)
                                    ? o
                                    : 0,
                            d =
                                wb.settings.b2bMode ||
                                (e.isPriceAdjustmentDisabled && u < 0)
                                    ? 0
                                    : u,
                            p = Math.abs(d);
                        (e.premiumSalePercent =
                            WbSpaModel.prototype.$auth.isAuth &&
                            null != (i = e.premiumSale)
                                ? i
                                : 0),
                            c || (e.premiumSale = 0),
                            e.sizes.forEach((s) => {
                                if (!s.price) return;
                                let n = t ? s.price.total : s.price.product;
                                s.price.priceForBasket = n;
                                let o = 0;
                                10 != (15 & e.dtype) &&
                                    0 !== d &&
                                    ((o =
                                        100 *
                                        wb.priceHelper.calculateDiscount(
                                            s.price.product / 100,
                                            p,
                                            e.currency
                                        )),
                                    (n -= d > 0 ? o : -o)),
                                    c &&
                                        (n -=
                                            100 *
                                            wb.priceHelper.calculateDiscount(
                                                (s.price.product -
                                                    (d > 0 ? o : -o)) /
                                                    100,
                                                e.premiumSale,
                                                e.currency
                                            )),
                                    (s.price.paymentDiscountAmount = wb.settings
                                        .b2bMode
                                        ? 0
                                        : wb.priceHelper.calcWalletDiscount(
                                              n / 100,
                                              e.currency,
                                              s.saleConditions
                                          )),
                                    r && (n += s.price.logistics);
                                const i = ~~(
                                    (100 * (s.price.basic - n)) /
                                    s.price.basic
                                );
                                (s.price.sale = i > 0 ? i : 0),
                                    (s.price.priceToShow = n),
                                    (s.price.basic < n ||
                                        (s.price.basic === n &&
                                            Number(s.sale) > 0) ||
                                        s.price.sale <=
                                            wb.global.settings.variables
                                                .pricesDeltaToShowSale) &&
                                        ((s.price.basic = n),
                                        (s.price.sale = 0)),
                                    a || (a = s),
                                    a.price.priceToShow !==
                                        s.price.priceToShow && (l = !0),
                                    (a.price.priceToShow >
                                        s.price.priceToShow ||
                                        (a.price.priceToShow ==
                                            s.price.priceToShow &&
                                            s.time1 + s.time2 <
                                                a.time1 + a.time2)) &&
                                        (a = s);
                            }),
                            a
                                ? ((e.price = a.price),
                                  (e.time1 = a.time1),
                                  (e.time2 = a.time2))
                                : (e.price = {}),
                            l && (e.diffPrice = !0);
                    }
                    function _(e, t, r) {
                        var s, n, o, i, a;
                        return e
                            ? (t ||
                                  (t =
                                      null !=
                                      (a =
                                          null !=
                                          (i =
                                              null ==
                                              (n =
                                                  null == (s = e.sizes)
                                                      ? void 0
                                                      : s.filter(
                                                            (e) => e.payload
                                                        ))
                                                  ? void 0
                                                  : n[0])
                                              ? i
                                              : null == (o = e.sizes)
                                              ? void 0
                                              : o[0])
                                          ? a
                                          : e),
                              t && t.saleConditions
                                  ? (1 & t.saleConditions &&
                                        (e.isUnrefusable = !0),
                                    2 & t.saleConditions &&
                                        (e[
                                            1 === r ? "needPrepay" : "isPrepaid"
                                        ] = !0),
                                    4 & t.saleConditions &&
                                        (e.isUnreturnable = !0),
                                    8 & t.saleConditions &&
                                        (e.isVerificationReturn = !0),
                                    128 & t.saleConditions &&
                                        (e.isWbInstCompliant = !0),
                                    1048576 & t.saleConditions &&
                                        (e.wltSaleBan = !0),
                                    536870912 & t.saleConditions &&
                                        (e.isPostpaidBooking = !0),
                                    t.saleConditions >= 4096 &&
                                    wb.global.settings.switches
                                        .enableCashback &&
                                    "ru" ==
                                        WbSpaModel.prototype.$user.getLocale() &&
                                    "RUB" ==
                                        WbSpaModel.prototype.$user.getCurrency()
                                        ? (e.cashbackPercent =
                                              (t.saleConditions >> 13) & 31)
                                        : (e.cashbackPercent = 0),
                                    (e.premiumSale =
                                        (t.saleConditions >> 22) & 31),
                                    (e.isPriceAdjustmentDisabled = !!(
                                        (t.saleConditions >> 30) &
                                        1
                                    )),
                                    e)
                                  : e)
                            : e;
                    }
                    function C() {
                        try {
                            return localStorage.getObject(i) || {};
                        } catch (e) {
                            return (
                                console.warn(
                                    "[ProductColorsCache]: failed to read from local storage",
                                    e
                                ),
                                {}
                            );
                        }
                    }
                    function I(e) {
                        var t;
                        const r = {
                                isOnlyColor: !1,
                                value: "",
                            },
                            s = (e || [])
                                .map((e) => {
                                    var t;
                                    if (e.is_variable) {
                                        const r = /^[\d.,]+$/,
                                            s =
                                                null == (t = e.variable_values)
                                                    ? void 0
                                                    : t
                                                          .filter(
                                                              (e) =>
                                                                  !r.test(e) &&
                                                                  Boolean(e)
                                                          )
                                                          .join(", ");
                                        if (
                                            !(
                                                (4 !== e.charc_type &&
                                                    5 !== e.charc_type) ||
                                                r.test(e.value)
                                            )
                                        )
                                            return {
                                                value: e.value,
                                                name: e.name,
                                            };
                                        if (s)
                                            return {
                                                value: s,
                                                name: e.name,
                                            };
                                    }
                                    return null;
                                })
                                .filter((e) => Boolean(e))
                                .splice(0, 3);
                        return 1 == (null == s ? void 0 : s.length) &&
                            "Цвет" == (null == (t = s[0]) ? void 0 : t.name)
                            ? ((r.isOnlyColor = !0),
                              (r.value =
                                  null == s
                                      ? void 0
                                      : s.map((e) => e.value).toString()),
                              r)
                            : (null == s ? void 0 : s.length) >= 1
                            ? ((r.isOnlyColor = !1),
                              (r.value =
                                  null == s
                                      ? void 0
                                      : s.map((e) => e.value).join(" • ")),
                              r)
                            : null;
                    }
                    function k(e, t = !1, r = !1) {
                        var s, n, o, i, a, l, c, u, h;
                        const g =
                                !wb.global.settings.switches
                                    .showLogisticsInPrice ||
                                "ru" !== WbSpaModel.prototype.$user.getLocale(),
                            b = wb.xnm.show2025Logistics(),
                            y =
                                null !=
                                (i =
                                    null ==
                                    (n =
                                        null == (s = e.sizes)
                                            ? void 0
                                            : s.filter((e) => e.payload))
                                        ? void 0
                                        : n[0])
                                    ? i
                                    : null == (o = e.sizes)
                                    ? void 0
                                    : o[0];
                        _(e, y), S(e, g, b);
                        const v = null != (a = e.price) ? a : {},
                            f = 20624 === e.brandId || 30624 === e.siteBrandId,
                            w =
                                null !=
                                (c =
                                    null ==
                                    (l =
                                        WbSpaModel.prototype.$user.getUserGradeFromCache())
                                        ? void 0
                                        : l.priceAdjustmentPercent)
                                    ? c
                                    : 0,
                            C =
                                wb.settings.b2bMode ||
                                (e.isPriceAdjustmentDisabled && w < 0)
                                    ? 0
                                    : w,
                            I = Math.abs(C),
                            k =
                                0 !== C && 10 != (15 & e.dtype)
                                    ? wb.priceHelper.calculateDiscount(
                                          v.product / 100,
                                          I,
                                          e.currency
                                      )
                                    : 0,
                            D =
                                e.premiumSale > 0 &&
                                ((null ==
                                (u =
                                    WbSpaModel.prototype.$user.getUserGradeFromCache())
                                    ? void 0
                                    : u.isPremium) ||
                                    (null == e ? void 0 : e.showPremium))
                                    ? wb.priceHelper.calculateDiscount(
                                          v.product / 100 - (C > 0 ? k : -k),
                                          e.premiumSale,
                                          e.currency
                                      )
                                    : 0,
                            B =
                                wb.global.settings.switches.enableCashback &&
                                e.cashbackPercent > 0 &&
                                !e.soldOut
                                    ? wb.priceHelper.calculateDiscount(
                                          v.product / 100 - k - D,
                                          e.cashbackPercent,
                                          e.currency
                                      )
                                    : 0,
                            O = m(v.priceToShow, e.currency),
                            E = m(v.product, e.currency),
                            x = 15 & (null == y ? void 0 : y.dtype),
                            L = 2 === x || 7 === x || !1,
                            j =
                                !e.soldOut &&
                                "RUB" == e.currency &&
                                "ru" == WbSpaModel.prototype.$user.getLocale(),
                            F = {
                                rcId: e.rcId,
                                nmId: e.id,
                                cod1S: e.id,
                                imtId: e.root,
                                name: e.name,
                                pics: e.pics,
                                subjectId: e.subjectId,
                                subjectParentId: e.subjectParentId,
                                kindId: e.kindId,
                                brand: e.brand,
                                brandId: e.siteBrandId,
                                brandCod: e.brandId,
                                price: m(v.basic, e.currency),
                                salePrice: O,
                                productSalePrice: E,
                                priceForBasket: m(v.priceForBasket, e.currency),
                                logisticsCost: v.logistics,
                                colorCodes: e.colors.map((e) => e.id),
                                sale: v.sale,
                                priceDiff: e.diffPrice,
                                star: e.rating,
                                reviewRating: e.reviewRating,
                                feedbacks: e.feedbacks,
                                feedbackPoints: j ? e.feedbackPoints : void 0,
                                adult:
                                    e.isAdult ||
                                    d(e.subjectId, e.subjectParentId) ||
                                    !1,
                                isPostpaidBooking: e.isPostpaidBooking || !1,
                                isBooking:
                                    10 ==
                                        (15 & (null == y ? void 0 : y.dtype)) ||
                                    !1,
                                isAlcohol:
                                    e.isAlcohol ||
                                    p(e.subjectId, e.subjectParentId) ||
                                    !1,
                                isDigitalGood: e.isDigital || !1,
                                sizes: M(e.sizes, t, r, e.currency),
                                panelPromoId: e.panelPromoId,
                                promoTxt: e.promoTextCat,
                                promoTextCard: e.promoTextCard,
                                color: e.colors.map((e) => e.name).join(","),
                                woSize:
                                    1 ===
                                        (null == (h = e.sizes)
                                            ? void 0
                                            : h.length) && "" === y.name,
                                canQuickOrder: !e.isDigital,
                                soldOut: e.soldOut || !1,
                                deliveryHours: (e.time1 || 0) + (e.time2 || 0),
                                fastestStore: e.wh,
                                isPreorder:
                                    5772 === e.brandId &&
                                    wb.settings.preOrderList.includes(e.id),
                                currency: e.currency,
                                spp: e.spp,
                                dest: e.dest,
                                saleConditions:
                                    null == y ? void 0 : y.saleConditions,
                                isUnrefusable: e.isUnrefusable,
                                isPrepaid: e.isPrepaid,
                                isUnreturnable: e.isUnreturnable,
                                isVerificationReturn: e.isVerificationReturn,
                                dist: e.dist,
                                time1: e.time1,
                                time2: e.time2,
                                totalQuantity: e.totalQuantity,
                                payloadV2: null == y ? void 0 : y.payload,
                                optionId: null == y ? void 0 : y.optionId,
                                whDtype: null == y ? void 0 : y.dtype,
                                log: e.log,
                                logs: e.logs,
                                supplierId: e.supplierId,
                                supplier: $.views.helpers.supplierFineName(
                                    e.supplier,
                                    e.brandId
                                ),
                                supplierRating: e.supplierRating,
                                sort: e.sort || 0,
                                viewFlags: e.viewFlags,
                                shouldShowOriginalMark:
                                    !f && !!(8 & e.viewFlags),
                                paymentDiscountAmount: v.paymentDiscountAmount,
                                catalogPrice: v,
                                supplierFlags: e.supplierFlags,
                                normQuery: e.normQuery,
                                rs: e.rs,
                                isAdv: e.isAdv,
                                isDbs: L,
                                extraAnaliticsCode: e.extraAnaliticsCode,
                                preset_type: e.preset_type,
                                premiumSale: e.premiumSale,
                                premiumSalePercent: e.premiumSalePercent,
                                isAccentSnippet:
                                    wb.global.settings.switches
                                        .enablePremiumSellerAccent &&
                                    !!(8 & e.supplierFlags),
                                isPremiumSeller: !!(1 & e.supplierFlags),
                                cashbackPercent: e.cashbackPercent,
                                cashbackAmount: B,
                                hideMultipleSellers:
                                    !!(2 & e.supplierFlags) &&
                                    Boolean(
                                        wb.global.settings.switches
                                            .hideMultipleSellersLever
                                    ),
                                priceWithCouponAndDiscount: String(O),
                                productPriceWithCouponAndDiscount: E,
                                is2025LogisticCost: v.logistics > 0 && b,
                                isWbInstCompliant: e.isWbInstCompliant || !1,
                                siteBrandId: e.siteBrandId,
                                wbaMeta: e.meta,
                            };
                        return (
                            wb.settings.b2bMode &&
                                T(F.viewFlags) &&
                                ((F.isVatRefundable = !0),
                                (F.vatPercent = A(F.viewFlags))),
                            P(F.panelPromoId) && (F.showRedPrice = !0),
                            (function (e) {
                                if (
                                    !WbSpaModel.prototype.$auth.isAuth ||
                                    !e.totalQuantity ||
                                    e.totalQuantity > 1e3
                                )
                                    return;
                                WbSpaModel.prototype.$promotionsHelper.isThermometerNeeded(
                                    Number(e.panelPromoId)
                                ) && (e.showThermometer = !0);
                            })(F),
                            F
                        );
                    }
                    const M = (e, t = !1, r = !1, s = null) => {
                        if (null == e) return;
                        e.sort((e, t) => e.rank - t.rank);
                        let n = e;
                        return (
                            t &&
                                (n = e.filter((e) => {
                                    var t;
                                    return (
                                        (null == (t = e.stocks)
                                            ? void 0
                                            : t.length) > 0
                                    );
                                })),
                            n.map((e) => {
                                var t, n;
                                const o = {
                                    ch: e.optionId,
                                    s: 1,
                                    nm: e.origName,
                                    rusNm: e.name,
                                    stocks:
                                        null != (t = e.stocks)
                                            ? t
                                            : [
                                                  {
                                                      wh: e.wh,
                                                      dtype: e.dtype,
                                                      qty: 1,
                                                      time1: e.time1,
                                                      time2: e.time2,
                                                  },
                                              ],
                                    unavailable:
                                        (null == (n = e.stocks)
                                            ? void 0
                                            : n.length) <= 0,
                                    payloadV2: e.payload,
                                    saleConditions: e.saleConditions,
                                    whDtype: e.dtype,
                                    deliveryHours:
                                        (e.time1 || 0) + (e.time2 || 0),
                                };
                                return (
                                    r &&
                                        e.price &&
                                        ((o.price = m(
                                            e.price.basic,
                                            e.currency || s
                                        )),
                                        (o.salePrice = m(
                                            e.price.priceToShow,
                                            e.currency || s
                                        )),
                                        (o.priceForBasket = m(
                                            e.price.priceForBasket,
                                            e.currency || s
                                        )),
                                        (o.catalogPrice = e.price),
                                        (o.returnCost = e.price.return),
                                        (o.logisticsCost = e.price.logistics)),
                                    o
                                );
                            })
                        );
                    };
                    function P(e) {
                        return Boolean(
                            WbSpaModel.prototype.$promotionsHelper.isRedPriceNeeded(
                                Number(e)
                            )
                        );
                    }
                    function T(e) {
                        return Boolean((Number(e) >> 14) & 1);
                    }
                    function A(e) {
                        switch ((Number(e) >> 18) & 15) {
                            case 0:
                            case 1:
                            case 6:
                                return null;
                            case 2:
                                return 5;
                            case 3:
                                return 7;
                            case 4:
                                return 10;
                            case 5:
                                return 20;
                            default:
                                return;
                        }
                    }
                    return {
                        getGoodsForRecommendAndCatalog: function (e, t, r, s) {
                            return new Promise((n, o) => {
                                const i = [];
                                if (!e) return void n(i);
                                const a = !t;
                                w(e, a)
                                    .then((o) => {
                                        e.forEach((e) => {
                                            if (o[e]) {
                                                const n = o[e];
                                                if (a) {
                                                    if (n && y(n) && v(n, r)) {
                                                        const e = k(n, !1, !0);
                                                        (e.soldOut =
                                                            !n.sizes ||
                                                            0 ===
                                                                n.sizes.length),
                                                            i.push(e);
                                                    }
                                                } else if (
                                                    n &&
                                                    g(n, t) &&
                                                    v(n, r)
                                                ) {
                                                    const e = k(n, !s, !0);
                                                    (e.soldOut = !g(n, !1)),
                                                        i.push(e);
                                                }
                                            }
                                        }),
                                            n(i);
                                    })
                                    .catch(() => {
                                        e.forEach((e) => {
                                            i.push({
                                                nmId: e,
                                                cod1S: e,
                                                isFail: !0,
                                            });
                                        }),
                                            n(i);
                                    });
                            });
                        },
                        getXnmProducts: w,
                        getInfoForWbaStat: async function (e, t) {
                            try {
                                const r = e.map((e) => e.nmId),
                                    s = t ? await t : await w(r);
                                return e.reduce((e, t) => {
                                    var r, n, o;
                                    const { nmId: i, size: a } = t;
                                    let l = null;
                                    if (
                                        null == s
                                            ? void 0
                                            : s.hasOwnProperty(t.nmId)
                                    ) {
                                        const e = s[i],
                                            t =
                                                null ==
                                                (n =
                                                    null ==
                                                    (r = e.sizes.find(
                                                        (e) => e.optionId === a
                                                    ))
                                                        ? void 0
                                                        : r.price)
                                                    ? void 0
                                                    : n.total,
                                            c = a
                                                ? e.sizes.find(
                                                      (e) => e.optionId === a
                                                  )
                                                : null == (o = M(e.sizes))
                                                ? void 0
                                                : o.filter((e) => {
                                                      var t;
                                                      return (
                                                          (null ==
                                                          (t = e.stocks)
                                                              ? void 0
                                                              : t.length) > 0
                                                      );
                                                  })[0];
                                        l = {
                                            salePrice: Number(t) / 100,
                                            stores:
                                                null == c ? void 0 : c.stocks,
                                        };
                                    }
                                    return e.set(i, l), e;
                                }, new Map());
                            } catch (e) {
                                return console.error(e), new Map();
                            }
                        },
                        getCatalogCards: function (e, t, r, s = !1) {
                            return new Promise((n, o) => {
                                const i = {};
                                e.forEach((e) => {
                                    i[e] = {};
                                });
                                const a = !r;
                                w(e, a)
                                    .then((e) => {
                                        Object.values(e).forEach((e) => {
                                            const n = i[e.id];
                                            if (a)
                                                Boolean(n) &&
                                                    y(e) &&
                                                    v(e, t) &&
                                                    ((i[e.id] = e),
                                                    i[e.id].sizes.sort(c),
                                                    (e.soldOut = !1));
                                            else if (
                                                Boolean(n) &&
                                                g(e, r) &&
                                                v(e, t)
                                            ) {
                                                if (
                                                    ((i[e.id] = e),
                                                    e.sizes &&
                                                        e.sizes.length > 0)
                                                ) {
                                                    const t = s
                                                        ? e.sizes
                                                        : e.sizes.filter(
                                                              (e) =>
                                                                  e.stocks &&
                                                                  e.stocks
                                                                      .length >
                                                                      0
                                                          );
                                                    t.sort(c),
                                                        (i[e.id].sizes = t);
                                                }
                                                e.soldOut = !g(e, !1);
                                            }
                                        });
                                    })
                                    .then(
                                        () => n(i),
                                        () => o()
                                    );
                            });
                        },
                        convertXProductToSpaCatalogProduct: k,
                        getProductNamesMap: C,
                        getProductColorsByNmIdsAsync: function (e) {
                            return new Promise((t, r) => {
                                let s = C(),
                                    n = {},
                                    o = [];
                                const a = wb.currentLanguage;
                                if (
                                    (e.forEach((e) => {
                                        const t = s[e];
                                        !t ||
                                        !t.dims ||
                                        ("default" !== t.lang &&
                                            (t.lang || "ru") !== a)
                                            ? o.push(e)
                                            : (n[e] = t);
                                    }),
                                    !o.length)
                                )
                                    return void t(n);
                                const l = o.map((e) =>
                                    WbSpaModel.prototype.$services.productCard
                                        .fetchProductCard(e)
                                        .then((t) =>
                                            t
                                                ? Promise.resolve({
                                                      lang: t.lang,
                                                      options: t.options,
                                                      nmId: t.nm_id,
                                                      color: t.nm_colors_names,
                                                      name: t.imt_name,
                                                      dims: new h(t.options),
                                                      specs: I(t.options),
                                                  })
                                                : Promise.resolve({
                                                      nmId: e,
                                                      color: "",
                                                  })
                                        )
                                        .catch(() =>
                                            Promise.resolve({
                                                nmId: e,
                                                color: "",
                                            })
                                        )
                                );
                                return Promise.all(l).then((e) => {
                                    !(function (e, t) {
                                        try {
                                            const r = 255;
                                            (t = null != t ? t : C()),
                                                e.forEach((e) => {
                                                    t[e.nmId] = {
                                                        nmId: e.nmId,
                                                        c: e.color,
                                                        n: e.name,
                                                        lang: e.lang,
                                                        dims: e.dims,
                                                        specs: e.specs,
                                                        ts: Date.now(),
                                                    };
                                                });
                                            let s = Object.values(t);
                                            return (
                                                s.length > r &&
                                                    (s.sort(
                                                        (e, t) => t.ts - e.ts
                                                    ),
                                                    s.splice(r),
                                                    (t = s.reduce(
                                                        (e, t) => (
                                                            (e[t.nmId] = t), e
                                                        ),
                                                        {}
                                                    ))),
                                                localStorage.putObject(i, t),
                                                t
                                            );
                                        } catch (e) {
                                            return (
                                                console.warn(
                                                    "[ProductColorsCache]: failed to update colors map",
                                                    e
                                                ),
                                                {}
                                            );
                                        }
                                    })(e, s),
                                        t(s);
                                });
                            });
                        },
                        fillOtherSellersProducts: function (e) {
                            return new Promise((t) => {
                                w(e.map((e) => e.nmId)).then((r) => {
                                    e.forEach((e) => {
                                        const t = r[e.nmId];
                                        var s;
                                        null != t &&
                                            g(t) &&
                                            (Object.assign(e, k(t, !0)),
                                            (e.stocks =
                                                ((s = t),
                                                Object.keys(
                                                    s.sizes.reduce((e, t) => {
                                                        var r;
                                                        return (
                                                            (null ==
                                                            (r = t.stocks)
                                                                ? void 0
                                                                : r.length) >
                                                                0 &&
                                                                t.stocks.forEach(
                                                                    (t) =>
                                                                        (e[
                                                                            t.wh
                                                                        ] = !0)
                                                                ),
                                                            e
                                                        );
                                                    }, {})
                                                ))),
                                            (e.isAvailable = !0));
                                    }),
                                        t(null);
                                });
                            });
                        },
                        getMiniProductCard: async function (e) {
                            if (isNaN(e))
                                throw new TypeError(
                                    "nmId at getMiniProductCard is not a number"
                                );
                            const t = await w([e]);
                            return t[e] ? k(t[e], !1, !0) : null;
                        },
                        proceedPrices: S,
                        waitNoReturnSubjectsInitialized: async function () {
                            if (Object.keys(t).length > 0)
                                return Promise.resolve();
                            const e = JSON.parse(localStorage.getItem(o));
                            if (
                                (null == e ? void 0 : e.expired) >
                                Date.now() - n
                            )
                                return (t = e.info), Promise.resolve();
                            try {
                                const e = "no-return-subjects.json",
                                    r =
                                        await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(
                                            e,
                                            5e3
                                        );
                                return r && 0 !== r.length
                                    ? ((t = r),
                                      null == localStorage ||
                                          localStorage.putObject(o, {
                                              info: r,
                                              expired: Date.now() + n,
                                          }),
                                      Promise.resolve())
                                    : (console.warn(
                                          "Getting subjects has failed"
                                      ),
                                      Promise.reject());
                            } catch (e) {
                                return (
                                    console.warn(
                                        "Getting adult subjects has failed"
                                    ),
                                    console.error(e.message),
                                    Promise.resolve()
                                );
                            }
                        },
                        setNoRefund: function (e) {
                            const r = t[e];
                            if (!r) return !1;
                            let s;
                            switch (WbSpaModel.prototype.$user.getLocale()) {
                                case "by":
                                    s = 2;
                                    break;
                                case "kz":
                                    s = 3;
                                    break;
                                case "kg":
                                    s = 4;
                                    break;
                                case "am":
                                    s = 5;
                                    break;
                                case "uz":
                                    s = 13;
                                    break;
                                default:
                                    s = 1;
                            }
                            return !!(r & (1 << (s - 1)));
                        },
                        expandSaleConditions: _,
                        fillFeedbacksPayment: async function (e) {
                            if (
                                !wb.global.settings.switches
                                    .enableFeedbacksForPoints ||
                                !(null == e ? void 0 : e.length)
                            )
                                return null;
                            await WbSpaModel.prototype.$moduleLoader.loadServiceAsync(
                                "feedbacksPaymentService"
                            ),
                                await WbSpaModel.prototype.$services.feedbacksPaymentService.fillFeedbacksPayments(
                                    e
                                );
                        },
                        fillFeedbacksPaymentByUser: async function (e) {
                            if (
                                !wb.global.settings.switches
                                    .enableFeedbacksForPoints ||
                                !(null == e ? void 0 : e.length)
                            )
                                return null;
                            await WbSpaModel.prototype.$moduleLoader.loadServiceAsync(
                                "feedbacksPaymentService"
                            ),
                                await WbSpaModel.prototype.$services.feedbacksPaymentService.fillFeedbacksPaymentsByUser(
                                    e
                                );
                        },
                        getFeedbacksPaymentByUser: async function () {
                            return wb.global.settings.switches
                                .enableFeedbacksForPoints
                                ? (await WbSpaModel.prototype.$moduleLoader.loadServiceAsync(
                                      "feedbacksPaymentService"
                                  ),
                                  await WbSpaModel.prototype.$services.feedbacksPaymentService.getFeedbacksPaymentByUser())
                                : null;
                        },
                        getFeedbacksPaymentByNms: async function (e) {
                            return wb.global.settings.switches
                                .enableFeedbacksForPoints
                                ? (await WbSpaModel.prototype.$moduleLoader.loadServiceAsync(
                                      "feedbacksPaymentService"
                                  ),
                                  await WbSpaModel.prototype.$services.feedbacksPaymentService.getFeedbacksPaymentByNms(
                                      e
                                  ))
                                : null;
                        },
                        convertOptionsToSpecs: I,
                        isRedPrice: P,
                        isAdvert: function (e) {
                            return e && !!(64 & e.viewFlags);
                        },
                        isB2BProduct: function (e) {
                            return Boolean((e >> 13) & 1);
                        },
                        isVatRefundable: T,
                        getVatPercent: A,
                        show2025Logistics: function () {
                            return (
                                "ru" ===
                                    WbSpaModel.prototype.$user.getLocale() &&
                                (wb.global.settings.switches
                                    .priceWithLogistics ||
                                    (wb.global.settings.switches
                                        .priceWithLogisticsOnSplitter &&
                                        WbSpaModel.prototype.$analitic.checkDataInSplitterServiceV2(
                                            "common",
                                            "ab_new_item_price_with_delivery",
                                            "enable"
                                        )))
                            );
                        },
                        isAlcohol: p,
                    };
                })();
                r(55085), r(41476), r(21048);
                const $o = new RegExp(
                    [
                        "www.wildberries.ru",
                        "www.wildberries.by",
                        "www.wildberries.kz",
                        "www.wildberries.kg",
                        "www.wildberries.am",
                        "www.wildberries.tj",
                        "www.wildberries.ge",
                        "www.wildberries.uz",
                        "localhost",
                        "webapp-*.wbx-site.k8s.dev-el",
                        "webapp-*.wbx-site.k8s.stage-dm",
                        "webapp-*.wbx-site.k8s.prod-el",
                        "webapp-*.wbx-site.k8s.prod-xc",
                        "kg.wildberries.ru",
                        "uz.wildberries.ru",
                        "*.wb.ru",
                        "stage.wildberries.ru",
                        "napi.wildberries.ru",
                        "*-napi.wildberries.ru",
                    ]
                        .map((e) =>
                            e.replace(/\./g, "\\.").replace(/\*/g, ".*")
                        )
                        .join("|")
                );
                wb.namespace(
                    "spa",
                    (function () {
                        let e = {},
                            t = new wo.A();
                        const r = new yo();
                        async function s() {
                            var e, t, r;
                            if (
                                !(
                                    (null ==
                                    (t =
                                        null == (e = wb.global.settings)
                                            ? void 0
                                            : e.variables)
                                        ? void 0
                                        : t.resourseStatSettings) &&
                                    "PerformanceObserver" in window &&
                                    (null ==
                                    (r =
                                        null == PerformanceObserver
                                            ? void 0
                                            : PerformanceObserver.supportedEntryTypes)
                                        ? void 0
                                        : r.includes("resource"))
                                )
                            )
                                return;
                            const s = await wb.user.getShardAsync();
                            for (const e in wb.global.settings.variables
                                .resourseStatSettings) {
                                const [t, r] =
                                        wb.global.settings.variables.resourseStatSettings[
                                            e
                                        ].split(";"),
                                    o = parseInt(r),
                                    [i, a] = t.split("-"),
                                    l = parseInt(i),
                                    c = parseInt(a);
                                if (s >= l && s <= c && o > 0) {
                                    let t = 0;
                                    new PerformanceObserver(async (r) => {
                                        var s, i, a, l, c;
                                        if (r.getEntries) {
                                            const u = r.getEntries();
                                            for (const r of u.filter(
                                                (t) => t.initiatorType === e
                                            )) {
                                                if (t % o == 0 && !n(r)) {
                                                    const e = {
                                                        url: r.name,
                                                        ok:
                                                            r.responseStatus >
                                                            300
                                                                ? 1
                                                                : 0,
                                                        error:
                                                            r.responseStatus >=
                                                            300
                                                                ? r.responseStatus
                                                                : 0,
                                                        dns: parseInt(
                                                            r.domainLookupEnd -
                                                                r.domainLookupStart
                                                        ),
                                                        connect: parseInt(
                                                            r.connectEnd -
                                                                r.connectStart
                                                        ),
                                                        ttfb: parseInt(
                                                            r.responseStart -
                                                                r.requestStart
                                                        ),
                                                        load:
                                                            r.responseStart > 0
                                                                ? parseInt(
                                                                      r.responseEnd -
                                                                          r.fetchStart
                                                                  )
                                                                : 0,
                                                        full: parseInt(
                                                            r.duration
                                                        ),
                                                        cache:
                                                            "HIT" ===
                                                            (null ==
                                                            (i =
                                                                null ==
                                                                (s =
                                                                    r.serverTiming)
                                                                    ? void 0
                                                                    : s.find(
                                                                          (e) =>
                                                                              "cache" ===
                                                                              e.name
                                                                      ))
                                                                ? void 0
                                                                : i.description)
                                                                ? 1
                                                                : 0,
                                                        srv:
                                                            null !=
                                                            (c =
                                                                null ==
                                                                (l =
                                                                    null ==
                                                                    (a =
                                                                        r.serverTiming)
                                                                        ? void 0
                                                                        : a.find(
                                                                              (
                                                                                  e
                                                                              ) =>
                                                                                  "srv" ===
                                                                                  e.name
                                                                          ))
                                                                    ? void 0
                                                                    : l.description)
                                                                ? c
                                                                : "",
                                                        size: r.transferSize,
                                                    };
                                                    wb.analitics.sendEvent(
                                                        "performance_static_download",
                                                        e
                                                    );
                                                }
                                                t++;
                                            }
                                        }
                                    }).observe({
                                        type: "resource",
                                        buffered: !0,
                                    });
                                    let r = 0;
                                    new PerformanceObserver((e) => {
                                        if (e.getEntries) {
                                            const t = e.getEntries();
                                            for (const e of t.filter(
                                                (e) =>
                                                    "img-load-error" === e.name
                                            ))
                                                r % o == 0 &&
                                                    wb.analitics.sendEvent(
                                                        "performance_static_download",
                                                        {
                                                            url: e.detail.url,
                                                            ok: 0,
                                                        }
                                                    ),
                                                    r++;
                                        }
                                    }).observe({
                                        type: "mark",
                                        buffered: !0,
                                    });
                                }
                            }
                        }
                        function n(e) {
                            return (
                                !(e.transferSize > 0) &&
                                (e.decodedBodySize > 0 || e.duration < 3)
                            );
                        }
                        return (
                            ($.views.loadTemplateDictionaryAsync =
                                $.views.loadTemplateAsync =
                                    $.views.helpers.loadTemplateAsync),
                            ($.views.loadWebApiTemplateAsync =
                                $.views.helpers.loadWebApiTemplateAsync),
                            {
                                init: async function (e) {
                                    const {
                                        router: n,
                                        seoHelper: o,
                                        menuLkHelper: i,
                                    } = e;
                                    Object.defineProperty(yo, "appVersion", {
                                        value: n.appVersion,
                                        writable: !1,
                                    }),
                                        r.$router.setData(
                                            n.routesDictionary,
                                            n.tmplHashes
                                        ),
                                        await Io.A.init(),
                                        r.$moduleLoader.setModules(n.modules),
                                        r.$moduleLoader.setServices(n.services);
                                    const a = [];
                                    if (
                                        ("AbortController" in window ||
                                            a.push(
                                                r.$moduleLoader.loadModuleAsync(
                                                    "abortControllerPolyfill",
                                                    !0
                                                )
                                            ),
                                        ("FormData" in window &&
                                            "get" in
                                                (null == FormData
                                                    ? void 0
                                                    : FormData.prototype)) ||
                                            a.push(
                                                r.$moduleLoader.loadModuleAsync(
                                                    "formDataPolyfill",
                                                    !0
                                                )
                                            ),
                                        "undefined" == typeof navigator ||
                                            navigator.locks ||
                                            a.push(
                                                r.$moduleLoader.loadModuleAsync(
                                                    "navigatorLocksPolyfill",
                                                    !0
                                                )
                                            ),
                                        a.length > 0 && (await Promise.all(a)),
                                        wb.displayModeSettings.init(),
                                        t.preInit(),
                                        r.$user.initUser(),
                                        wb.global.loadSettingAsync(),
                                        wb.global.periodicBasketConfigUpdate(),
                                        r.$seoHelper.init(),
                                        r.menuLk(i),
                                        t.init(),
                                        wb.network.init(),
                                        (function () {
                                            const { isEnabled: e, company: t } =
                                                localStorage.getObject(
                                                    "b2bMode"
                                                ) || {
                                                    isEnabled: !1,
                                                    company: {},
                                                };
                                            e &&
                                                r.$moduleLoader
                                                    .loadModuleAsync(
                                                        "userCompaniesManager"
                                                    )
                                                    .then((e) => {
                                                        const r = new e();
                                                        wb.user.userInfo.isAuth
                                                            ? r.restoreState(t)
                                                            : r.resetB2B();
                                                    });
                                        })(),
                                        wb.analitics.getSplitInfo(),
                                        await r.$router.init(n.ssrModel),
                                        !$o.test(window.location.hostname))
                                    )
                                        return (
                                            wb.spa.logError(
                                                {
                                                    message: `fishing from ${document.location}`,
                                                },
                                                {
                                                    referrer:
                                                        wb.spa.getReferrer(),
                                                    cookie: document.cookie,
                                                }
                                            ),
                                            wb.popup.renderModalError(
                                                wb.i18n.t(
                                                    "common.errors.phishingSite"
                                                )
                                            ),
                                            void (wb.spa = null)
                                        );
                                    document.body.addEventListener(
                                        "load",
                                        (e) => {
                                            var t;
                                            "IMG" === e.target.tagName &&
                                                e.target.complete &&
                                                (null ==
                                                    (t =
                                                        e.target.closest(
                                                            ".img-plug"
                                                        )) ||
                                                    t.classList.remove(
                                                        "img-plug--error"
                                                    ));
                                        },
                                        !0
                                    ),
                                        navigator.userAgent.indexOf("MSIE ") >
                                            0 ||
                                            navigator.userAgent.indexOf(
                                                "Trident/"
                                            ) > 0 ||
                                            document.body.addEventListener(
                                                "error",
                                                (e) => {
                                                    var t, r;
                                                    const s =
                                                            e.target.closest(
                                                                ".img-plug"
                                                            ),
                                                        n = e.target.src;
                                                    return e.target.dataset
                                                        .srcPb &&
                                                        e.target.dataset
                                                            .srcPb !== n
                                                        ? ((e.target.src =
                                                              e.target.dataset.srcPb),
                                                          e.target.dataset
                                                              .src &&
                                                              (e.target.dataset.src =
                                                                  e.target.dataset.srcPb),
                                                          delete e.target
                                                              .dataset.srcPb,
                                                          void (
                                                              null == s ||
                                                              s.classList.remove(
                                                                  "load"
                                                              )
                                                          ))
                                                        : e.target.dataset
                                                              .srcPc &&
                                                          e.target.dataset
                                                              .srcPc !== n
                                                        ? ((e.target.src =
                                                              e.target.dataset.srcPc),
                                                          void delete e.target
                                                              .dataset.srcPc)
                                                        : void (
                                                              (null ==
                                                              (r =
                                                                  null ==
                                                                  (t =
                                                                      wb.global
                                                                          .settings)
                                                                      ? void 0
                                                                      : t.switches)
                                                                  ? void 0
                                                                  : r.enableErrorImagePlug) &&
                                                              "IMG" ===
                                                                  e.target
                                                                      .tagName &&
                                                              -1 ===
                                                                  e.target.src.indexOf(
                                                                      "/i/blank.gif"
                                                                  ) &&
                                                              (null == s ||
                                                                  s.classList.add(
                                                                      "img-plug--error"
                                                                  ),
                                                              null == s ||
                                                                  s.classList.remove(
                                                                      "load"
                                                                  ),
                                                              null ==
                                                                  performance ||
                                                                  performance.mark(
                                                                      "img-load-error",
                                                                      {
                                                                          detail: {
                                                                              url: e
                                                                                  .target
                                                                                  .src,
                                                                          },
                                                                      }
                                                                  ))
                                                          );
                                                },
                                                !0
                                            ),
                                        setTimeout(s, 2e3),
                                        setTimeout(function () {
                                            WbSpaModel.prototype.$helper.loadJsAsync(
                                                wb.settings.scripts.performance
                                            );
                                        }, 5e3);
                                },
                                registerViewModel: function (t) {
                                    const s = Object.getPrototypeOf(
                                        t.prototype
                                    );
                                    s === Object.prototype
                                        ? Object.setPrototypeOf(
                                              t.prototype,
                                              yo.prototype
                                          )
                                        : s !== yo.prototype &&
                                          Object.setPrototypeOf(
                                              s,
                                              yo.prototype
                                          ),
                                        r.$router
                                            .getAppliedEntries()
                                            .forEach((r) => {
                                                e[r] = t;
                                            });
                                },
                                getViewModelByName: function (t) {
                                    return e[t];
                                },
                                redirect: function (e, t, s = !1) {
                                    r.$router.moveTo(e, t, !1, s);
                                },
                                setUserStatus: function ({
                                    userIsAuth: e,
                                    userUid: t,
                                    userId: s,
                                }) {
                                    $.observable(r.$router).setProperty({
                                        userIsAuth: e,
                                        userUid: t,
                                        userId: s,
                                    }),
                                        r.$eventBus.dispatchEvent(
                                            new CustomEvent(
                                                e
                                                    ? "onUserAuth"
                                                    : "onUserUnAuth"
                                            )
                                        ),
                                        r.$services.favsService.setKey(e, t),
                                        r.$services.userData.setKey(e, t),
                                        r
                                            .$getService("orderService")
                                            .then((e) =>
                                                e.startSync(
                                                    r.$services.cartService
                                                        .publicBasketApiUrl
                                                )
                                            ),
                                        r
                                            .$getService("wbxOrderService")
                                            .then((e) =>
                                                e.startSync(
                                                    r.$services.cartService
                                                        .publicBasketApiUrl
                                                )
                                            ),
                                        e &&
                                            (r
                                                .$getService(
                                                    "groupedDeliveriesService"
                                                )
                                                .then((e) => e.init()),
                                            "ge" ===
                                                wb.settings.currentLocale &&
                                                r.$services.userData.migrateProfileFromGlobal());
                                },
                                refresh: function () {
                                    r.$router.refresh();
                                },
                                getMainLayout: function () {
                                    return t;
                                },
                                getCatalogMenu: async function () {
                                    return (
                                        this._catalogMenuTask ||
                                            (this._catalogMenuTask =
                                                new Promise(async (e, t) => {
                                                    const r = new Co();
                                                    await r.initMenu(),
                                                        r.isInited
                                                            ? e(r)
                                                            : (t(),
                                                              (this._catalogMenuTask =
                                                                  null));
                                                })),
                                        this._catalogMenuTask
                                    );
                                },
                                clearCatalogMenu: function () {
                                    this._catalogMenuTask = null;
                                },
                                getReferrer: function () {
                                    return r.$router.referrer;
                                },
                                logError: function (e, t = null, r = !1) {
                                    if (!window._debug)
                                        try {
                                            const s = {
                                                msg: e.message,
                                            };
                                            r && (s.stk = e.stack),
                                                t && (s.data = t);
                                            const n = "/webapi/logging/jserror",
                                                o = {
                                                    method: "POST",
                                                    headers: {
                                                        "Content-Type":
                                                            "application/json",
                                                    },
                                                    body: JSON.stringify(s),
                                                };
                                            WbSpaModel.prototype.$httpClient
                                                .fetch(n, o)
                                                .catch(() => {
                                                    WbSpaModel.prototype.$services.retryFetchService.saveRequest(
                                                        n,
                                                        o
                                                    );
                                                });
                                        } catch (e) {}
                                },
                                orderMetrics: function (e) {
                                    try {
                                        WbSpaModel.prototype.$httpClient.fetch(
                                            `/webapi/logging/orders/metrics?status=${e}`,
                                            {
                                                method: "POST",
                                            }
                                        );
                                    } catch (e) {}
                                },
                                signIn: function (e, t) {
                                    r.$router.moveToSignIn(e, t);
                                },
                                afterSignOut: function () {
                                    wb.spa.signIn({
                                        query: {
                                            returnUrl: window.location.href,
                                        },
                                    }),
                                        t.updateAfterLogin();
                                },
                            }
                        );
                    })()
                ),
                    wb.namespace(
                        "global",
                        (function () {
                            const e = "user-settings",
                                t = "global-settings-v2",
                                r = "cdn-config-v2",
                                n = 18e4,
                                o = s;
                            let i,
                                a,
                                l,
                                c,
                                u = [],
                                d = !0,
                                p = 200,
                                h = 0;
                            function m(e) {
                                if (!e || !WbSpaModel.appVersion) return;
                                const t = e.split("."),
                                    r = WbSpaModel.appVersion.split(".");
                                if (t.length < 3 || r.length < 3) return;
                                +(
                                    (parseInt(r[0]) || 0) +
                                    ("000" + (parseInt(r[1]) || 0)).slice(-3) +
                                    ("000" + (parseInt(r[2]) || 0)).slice(-3)
                                ) <
                                    +(
                                        t[0] +
                                        ("000" + t[1]).slice(-3) +
                                        ("000" + t[2]).slice(-3)
                                    ) && window.location.reload();
                            }
                            function g() {
                                return (
                                    a ||
                                    ((a = localStorage.getObject(e)),
                                    a || (a = {}),
                                    a.closed || (a.closed = []),
                                    a.colorsHitory || (a.colorsHitory = []),
                                    a.confirmed || (a.confirmed = []),
                                    a)
                                );
                            }
                            function b(e) {
                                var t;
                                if ("ge" !== wb.settings.currentLocale)
                                    for (const r of [
                                        "mediabasket_route_map",
                                        "feedback_route_map",
                                        "videonme_route_map",
                                        "staticbasket_route_map",
                                    ]) {
                                        const s = e.origin[r],
                                            n =
                                                null != (t = e.recommend[r])
                                                    ? t
                                                    : s;
                                        if (!n || !s) continue;
                                        let o =
                                            "if (!reserve) {" +
                                            y(n[0], r) +
                                            "} else {" +
                                            y(s[0], r) +
                                            "}";
                                        const i = new Function(
                                            "number",
                                            "reserve",
                                            o
                                        );
                                        i(0), wb.helpers.setImgFunc(r, i);
                                    }
                            }
                            function y(e, t, r) {
                                const s = (e) => {
                                    switch (e) {
                                        case "staticbasket_route_map":
                                            return "number";
                                        case "videonme_route_map":
                                            return "number%144";
                                        default:
                                            return "~~(number/100000)";
                                    }
                                };
                                let n = "";
                                if ("range" === e.method) {
                                    n += `const volId = ${s(
                                        t
                                    )}; switch (true) {`;
                                    for (const t of e.hosts)
                                        n += `case volId >= ${
                                            t.vol_range_from
                                        } && volId <= ${
                                            t.vol_range_to
                                        }: return \`${t.host}${
                                            r ? "fail" : ""
                                        }/vol\${volId}\`;`;
                                    n += "}";
                                } else if ("mod" === e.method) {
                                    const r = e.hosts.length;
                                    n += `const volId = ${s(
                                        t
                                    )}; switch (number % ${r}) {`;
                                    for (let t = 0; t < r; t++)
                                        n += `case ${t}: return \`${e.hosts[t].host}/vol\${volId}\`;`;
                                    n += "}";
                                }
                                return n;
                            }
                            return (
                                window.addEventListener("storage", (e) => {
                                    if (e.key === t)
                                        try {
                                            const { data: t } = JSON.parse(
                                                e.newValue
                                            );
                                            (i = t),
                                                m(i.variables.siteMinVersion),
                                                u.forEach((e) => e(i)),
                                                window._debug &&
                                                    console.log(
                                                        "[globalsettings] changed external"
                                                    );
                                        } catch (e) {
                                            console.error(
                                                "[globalsettings] changed external failed"
                                            );
                                        }
                                    else if (e.key === r) {
                                        const t = JSON.parse(e.newValue);
                                        t && b(t);
                                    }
                                }),
                                {
                                    get settings() {
                                        const e = (function () {
                                            var e, r;
                                            return (
                                                i ||
                                                ((i =
                                                    null !=
                                                    (r =
                                                        null ==
                                                        (e =
                                                            localStorage.getObject(
                                                                t
                                                            ))
                                                            ? void 0
                                                            : e.data)
                                                        ? r
                                                        : o),
                                                i)
                                            );
                                        })();
                                        return (
                                            (e.switches.enableWbxOrder = !0),
                                            (e.variables.enableLanguageSwitcher =
                                                ["ge"]),
                                            (e.switches.enableSendPersonalDataGe =
                                                !0),
                                            e
                                        );
                                    },
                                    get userSettings() {
                                        return g();
                                    },
                                    saveUserSettings: function () {
                                        localStorage.putObject(e, g()),
                                            yo.prototype.$eventBus.dispatchEvent(
                                                new CustomEvent(
                                                    "UserSettingsSaved"
                                                )
                                            );
                                    },
                                    subscribe(e) {
                                        u.push(e);
                                    },
                                    loadSettingAsync: function e() {
                                        return (
                                            l || (l = setInterval(e, 12e4)),
                                            d ? (d = !1) : (p = 2e3),
                                            (h >= 2
                                                ? yo.prototype.$httpClient.fetchText(
                                                      "/webapi/settings/global/hash",
                                                      {
                                                          method: "GET",
                                                          cache: "no-cache",
                                                      },
                                                      {
                                                          noProcessResponse: !0,
                                                          timeout: p,
                                                      }
                                                  )
                                                : yo.prototype.$httpClient.fetchStaticV3(
                                                      wb.helpers.url
                                                          .urlStaticData,
                                                      {
                                                          fetchType: "text",
                                                          noCache: !0,
                                                          timeout: p,
                                                      },
                                                      "settings-front.json.hash"
                                                  )
                                            )
                                                .then((e) => {
                                                    var r;
                                                    if (null == e)
                                                        throw new Error();
                                                    if (
                                                        e !==
                                                        (null ==
                                                        (r =
                                                            localStorage.getObject(
                                                                t
                                                            ))
                                                            ? void 0
                                                            : r.hash)
                                                    ) {
                                                        return (
                                                            h >= 2
                                                                ? yo.prototype.$httpClient.fetchJSON(
                                                                      "/webapi/settings/global/get",
                                                                      {
                                                                          method: "GET",
                                                                          cache: "no-cache",
                                                                          headers:
                                                                              {
                                                                                  "Content-Type":
                                                                                      "application/json",
                                                                              },
                                                                      },
                                                                      {
                                                                          noProcessResponse:
                                                                              !0,
                                                                          timeout:
                                                                              p,
                                                                      }
                                                                  )
                                                                : yo.prototype.$httpClient.fetchStaticV3(
                                                                      wb.helpers
                                                                          .url
                                                                          .urlStaticData,
                                                                      {
                                                                          noCache:
                                                                              !0,
                                                                          timeout:
                                                                              p,
                                                                      },
                                                                      "settings-front.json"
                                                                  )
                                                        )
                                                            .then((r) => {
                                                                if (!r)
                                                                    throw new Error();
                                                                return (
                                                                    (i = r),
                                                                    localStorage.putObject(
                                                                        t,
                                                                        {
                                                                            hash: e,
                                                                            data: i,
                                                                        }
                                                                    ),
                                                                    (h = 0),
                                                                    window._debug &&
                                                                        console.log(
                                                                            "[globalsettings] changed"
                                                                        ),
                                                                    u.forEach(
                                                                        (e) =>
                                                                            e(i)
                                                                    ),
                                                                    m(
                                                                        i
                                                                            .variables
                                                                            .siteMinVersion
                                                                    ),
                                                                    Promise.resolve()
                                                                );
                                                            })
                                                            .catch(() =>
                                                                Promise.resolve()
                                                            );
                                                    }
                                                    return Promise.resolve();
                                                })
                                                .catch(
                                                    () => (
                                                        h++, Promise.resolve()
                                                    )
                                                )
                                        );
                                    },
                                    periodicBasketConfigUpdate:
                                        async function e() {
                                            if (
                                                "ge" !==
                                                    wb.settings.currentLocale &&
                                                WbSpaModel.prototype.$isRangeEnabledFor(
                                                    wb.global.settings.variables
                                                        .usersRangeCdnConfigV2
                                                )
                                            )
                                                if (c)
                                                    try {
                                                        await navigator.locks.request(
                                                            `lock-${r}`,
                                                            async (e) => {
                                                                const t =
                                                                    localStorage.getObject(
                                                                        r
                                                                    );
                                                                if (
                                                                    t &&
                                                                    t.timestamp +
                                                                        n >
                                                                        Date.now()
                                                                )
                                                                    return;
                                                                const s =
                                                                    await yo.prototype.$httpClient.fetchBasicJSON(
                                                                        `https://cdn.wbbasket.ru/api/v3/upstreams?t=${Date.now()}`,
                                                                        {
                                                                            cache: "no-cache",
                                                                        },
                                                                        {
                                                                            nullOnError:
                                                                                !0,
                                                                        }
                                                                    );
                                                                (null == s
                                                                    ? void 0
                                                                    : s.recommend) &&
                                                                    (null == s
                                                                        ? void 0
                                                                        : s.origin) &&
                                                                    (b(s),
                                                                    Object.assign(
                                                                        s,
                                                                        {
                                                                            timestamp:
                                                                                Date.now(),
                                                                            hash: s.hash,
                                                                        }
                                                                    ),
                                                                    localStorage.putObject(
                                                                        r,
                                                                        s
                                                                    ),
                                                                    localStorage.removeItem(
                                                                        "cdn-config"
                                                                    ));
                                                            }
                                                        );
                                                    } catch (e) {
                                                        wb.spa.logError(e);
                                                    }
                                                else {
                                                    c = setInterval(e, n);
                                                    const t =
                                                        localStorage.getObject(
                                                            r
                                                        );
                                                    t &&
                                                    t.timestamp + n > Date.now()
                                                        ? b(t)
                                                        : setTimeout(e, 5e3);
                                                }
                                        },
                                }
                            );
                        })()
                    );
            },
            13542: function (e, t, r) {
                "use strict";
                r.d(t, {
                    A: function () {
                        return W;
                    },
                });
                var s = {};
                r.r(s),
                    r.d(s, {
                        dataProceeder: function () {
                            return c;
                        },
                        urlCreator: function () {
                            return l;
                        },
                    });
                var n = class {
                        constructor(e) {
                            var t;
                            (this.layoutModel = e.layoutModel),
                                (this.tmpl = "shortBasketInfoTmpl"),
                                (this.control =
                                    document.querySelector("#basketContent")),
                                (this.addressesInfo = null),
                                (this.eventsModels =
                                    this.layoutModel.$services.notifications.eventsModel),
                                (this.profileMenu = null),
                                (this.lkMenuMouseEnterHandler =
                                    this.lkMenuMouseEnterHandler.bind(this)),
                                (this.deliveriesPreviewEnterHandler =
                                    this.deliveriesPreviewEnterHandler.bind(
                                        this
                                    )),
                                (this.toggleControl =
                                    this.toggleControl.bind(this)),
                                (this.authHandler =
                                    this.authHandler.bind(this)),
                                (this.controlState = {
                                    hide: !1,
                                }),
                                (this.basketInfo = {
                                    IsAuthenticated:
                                        this.layoutModel.$auth.isAuth,
                                    BasketQuantity:
                                        this.layoutModel.$services.cartService
                                            .localCount,
                                    UserIsPremium:
                                        !!this.layoutModel.$auth.isAuth &&
                                        (null ==
                                        (t =
                                            this.layoutModel.$user.getUserGradeFromCache())
                                            ? void 0
                                            : t.isPremium),
                                }),
                                $.templates[this.tmpl].link(
                                    this.control,
                                    this,
                                    {
                                        controlState: this.controlState,
                                    }
                                );
                        }
                        init() {
                            var e, t, r;
                            this.layoutModel.$eventBus.addEventListener(
                                "LocalBasketUpdateCount",
                                this._updateLocalBasketCount.bind(this)
                            ),
                                this.layoutModel.$eventBus.addEventListener(
                                    "UserReset",
                                    this.update.bind(this)
                                ),
                                this.layoutModel.$eventBus.addEventListener(
                                    "UserGradeUpdated",
                                    this.updatePremiumState.bind(this)
                                );
                            const s =
                                this.layoutModel.$services.cartService
                                    .currentDeliveryType;
                            s &&
                                this.layoutModel.$analitic.setCurrentAddress(
                                    s.deliveryType,
                                    null != (e = s.officeId) ? e : s.addressId
                                ),
                                (null ==
                                (r =
                                    null == (t = this.layoutModel)
                                        ? void 0
                                        : t.menuTop)
                                    ? void 0
                                    : r.mobileMenu) &&
                                    this.layoutModel.menuTop.mobileMenu.updateBasket(
                                        this.basketInfo.BasketQuantity
                                    ),
                                window.addEventListener(
                                    "spaTransition",
                                    (e) => {
                                        e.detail.isFinished &&
                                            this.toggleControl(!1);
                                    }
                                ),
                                this.basketInfo.IsAuthenticated &&
                                    this.layoutModel.$services.notifications
                                        .checkNotificationCountAsync()
                                        .then((e) => {
                                            var t, r;
                                            (null ==
                                            (r =
                                                null == (t = this.layoutModel)
                                                    ? void 0
                                                    : t.menuTop)
                                                ? void 0
                                                : r.mobileMenu) &&
                                                this.layoutModel.menuTop.mobileMenu.updateEvents(
                                                    e
                                                ),
                                                $.observable(
                                                    this.eventsModel
                                                ).setAllProperty(e);
                                        });
                        }
                        update() {
                            var e;
                            const t = {
                                IsAuthenticated: this.layoutModel.$auth.isAuth,
                                BasketQuantity:
                                    this.layoutModel.$services.cartService
                                        .localCount,
                                UserIsPremium:
                                    null ==
                                    (e =
                                        this.layoutModel.$user.getUserGradeFromCache())
                                        ? void 0
                                        : e.isPremium,
                            };
                            $.observable(this.basketInfo).setAllProperty(t),
                                (t.IsAuthenticated
                                    ? this.layoutModel.$services.notifications.checkNotificationCountAsync()
                                    : Promise.resolve({
                                          eventsCount: 0,
                                      })
                                ).then((e) => {
                                    var t, r;
                                    (null ==
                                    (r =
                                        null == (t = this.layoutModel)
                                            ? void 0
                                            : t.menuTop)
                                        ? void 0
                                        : r.mobileMenu) &&
                                        this.layoutModel.menuTop.mobileMenu.updateEvents(
                                            e
                                        ),
                                        $.observable(
                                            this.eventsModel
                                        ).setAllProperty(e);
                                });
                        }
                        updatePremiumState() {
                            var e;
                            $.observable(this.basketInfo).setProperty({
                                UserIsPremium:
                                    null ==
                                    (e =
                                        this.layoutModel.$user.getUserGradeFromCache())
                                        ? void 0
                                        : e.isPremium,
                            });
                        }
                        _updateLocalBasketCount(e) {
                            var t, r, s, n;
                            const o =
                                null !=
                                (r = null == (t = e.detail) ? void 0 : t.count)
                                    ? r
                                    : 0;
                            $.observable(this.basketInfo).setProperty({
                                BasketQuantity: o,
                            }),
                                (null ==
                                (n =
                                    null == (s = this.layoutModel)
                                        ? void 0
                                        : s.menuTop)
                                    ? void 0
                                    : n.mobileMenu) &&
                                    this.layoutModel.menuTop.mobileMenu.updateBasket(
                                        o
                                    );
                        }
                        deliveriesPreviewEnterHandler() {
                            if (this.deliveriesPreview)
                                return this.toggleControl(!0);
                            this.layoutModel.$moduleLoader
                                .loadModuleAsync("deliveriesPreview")
                                .then((e) => {
                                    const t = this.control.querySelector(
                                        ".j-tooltip-delivery"
                                    );
                                    (this.deliveriesPreview = new e()),
                                        e.template.link(
                                            t,
                                            this.deliveriesPreview,
                                            {
                                                controlState: this.controlState,
                                            }
                                        ),
                                        this.toggleControl(!0);
                                });
                        }
                        lkMenuMouseEnterHandler() {
                            if (this.lkMenuPreview)
                                return this.toggleControl(!0);
                            const e = WbSpaModel.prototype;
                            Promise.all([
                                e.$moduleLoader.loadModuleAsync(
                                    "cabinetMenuPreview"
                                ),
                                e.$user.getBalance().catch((e) =>
                                    Promise.resolve({
                                        isNetworkError: !0,
                                    })
                                ),
                                e.$services.userData.getUserDataAsync(!0),
                            ]).then(([e, t]) => {
                                const r =
                                    this.control.querySelector(
                                        ".j-tooltip-profile"
                                    );
                                (this.lkMenuPreview = new e(t)),
                                    this.lkMenuPreview.template.link(
                                        r,
                                        this.lkMenuPreview,
                                        {
                                            controlState: this.controlState,
                                        }
                                    ),
                                    this.lkMenuPreview.onAfterRender(),
                                    this.toggleControl(!0);
                            });
                        }
                        toggleControl(e) {
                            $.observable(this.controlState).setProperty({
                                hide: !e,
                            });
                        }
                        async authHandler(e) {
                            e.preventDefault(),
                                WbSpaModel.prototype.$auth.loginPopup();
                        }
                    },
                    o = Object.freeze({
                        history: 0,
                        catalog: 1,
                        brands: 2,
                        subjects: 3,
                        goods: 4,
                        grouped: 5,
                        tags: 6,
                        supplier: 7,
                        redirect: 8,
                    });
                const i = new (class {
                        constructor() {
                            this.isInited = !1;
                        }
                        async initMenu() {
                            (this.menu = await wb.spa.getCatalogMenu()),
                                (this.isInited = this.menu.isInited);
                        }
                        hasItem(e) {
                            return !!e && this.menu.menuById.has(e);
                        }
                        getCatalogLink(e) {
                            return this.menu.menuById.get(e).url;
                        }
                        getParents(e) {
                            const t = [];
                            let r = this.menu.menuById.get(e).parentId;
                            for (; null != r; ) {
                                const e = this.menu.menuById.get(r);
                                t.push(e.name), (r = e.parentId);
                            }
                            return t.reverse();
                        }
                    })(),
                    a = Object.freeze(
                        new Map([
                            ["home", "/"],
                            ["faq", "/services/voprosy-i-otvety"],
                            ["lk", "/lk"],
                            ["notifications", "/lk#notifications"],
                            ["basket", "/lk/basket"],
                            ["delivery", "/lk/myorders/delivery"],
                            ["orders", "/lk/myorders/archive"],
                            ["favorites", "/lk/favorites"],
                            ["favorite_brands", "/lk/favoritebrands"],
                            ["communications", "/lk/communications"],
                            ["claims", "/lk/claims"],
                            ["feedback", "/lk/discussion/feedback"],
                            ["cards", "/lk#bankCard"],
                            ["sessions", "/lk#personal-safety"],
                            ["balance", "/lk/mywallet/purchases"],
                            ["refunds", "/lk/myrefunds"],
                            ["receipts", "/lk/receipts/get"],
                            ["pickups", "/services/besplatnaya-dostavka"],
                            ["make_refund", "/lk/refund"],
                            ["make_order", "/services/kak-sdelat-zakaz"],
                            ["payment_options", "/services/sposoby-oplaty"],
                            ["goods_refund", "/services/vozvrat-tovara"],
                            [
                                "money_refund",
                                "/services/vozvrat-denezhnyh-sredstv",
                            ],
                            ["sale_rules", "/services/pravila-prodazhi"],
                            [
                                "market_rules",
                                "/services/pravila-polzovaniya-torgovoy-ploshchadkoy",
                            ],
                            ["about_us", "/services/o-nas"],
                            ["requisites", "/services/rekvizity"],
                            ["press", "/presservice"],
                            ["contacts", "/services/kontakty"],
                            ["bug_bounty", "/services/bug-bounty"],
                        ])
                    ),
                    l = async () =>
                        "https://suggests.wb.ru/suggests/api/v7/hint",
                    c = async (e, t) => {
                        const r = e.suggests,
                            s = e.max_tags_rows,
                            n = [];
                        if (!Array.isArray(r) && !t) return n;
                        if (
                            (!Array.isArray(r) ||
                                (Array.isArray(r) && 0 === r.length)) &&
                            t.trim()
                        )
                            return [
                                {
                                    type: o.catalog,
                                    suggestions: [
                                        {
                                            name: t,
                                            search: t,
                                            type: 1,
                                            typedText: t,
                                        },
                                    ],
                                },
                            ];
                        if (!i.isInited)
                            try {
                                await i.initMenu();
                            } catch (e) {
                                console.error("Loading menu error");
                            }
                        if (0 !== s) {
                            const e = r
                                .filter((e) => "tag" === e.type)
                                .map((e) => ({
                                    name: e.name,
                                    type: o.catalog,
                                    typeStr: e.type,
                                    pos: e.pos,
                                    maxTagsRows: s,
                                }));
                            n.push({
                                type: o.tags,
                                suggestions: e,
                            });
                        }
                        const l = r
                            .filter(
                                (e) =>
                                    "category" === e.type ||
                                    "brand" === e.type ||
                                    "supplier" === e.type ||
                                    "redirect" === e.type ||
                                    "external_redirect" === e.type
                            )
                            .map((e) => {
                                switch (e.type) {
                                    case "category":
                                        const r = parseInt(e.menu_id);
                                        if (i.hasItem(r)) {
                                            const s = i.menu.menuById.get(r);
                                            return {
                                                typeStr: e.type,
                                                name: s.name,
                                                search: s.name,
                                                typedText: t,
                                                type: o.subjects,
                                                xParams: s.query,
                                                xShard: s.shard,
                                                url: i.getCatalogLink(r),
                                                breadCrumbs: i.getParents(r),
                                                src: $.views.converters.imgForPromoCategory(
                                                    r,
                                                    !0
                                                ),
                                                imgWidth: 36,
                                                imgHeight: 48,
                                            };
                                        }
                                        break;
                                    case "brand":
                                        return {
                                            typeStr: e.type,
                                            typeName: wb.i18n.t("common.brand"),
                                            name: e.brand_name,
                                            search: e.brand_name,
                                            brandId: e.brand_id,
                                            brandHash: e.brand_hash,
                                            typedText: t,
                                            type: o.brands,
                                            src: $.views.helpers.forBrandLogoFromId(
                                                e.brand_hash
                                            ),
                                            srcReserve:
                                                $.views.helpers.forBrandLogoFromId(
                                                    e.brand_hash,
                                                    !0
                                                ),
                                            imgOnError:
                                                wb.helpers.url.urlSiteStatic(
                                                    "i/v3/broken-img/brands.jpg"
                                                ),
                                            imgWidth: 32,
                                            imgHeight: 13,
                                        };
                                    case "supplier":
                                        return {
                                            typeStr: e.type,
                                            typeName: wb.i18n.t("common.shop"),
                                            name: $.views.converters.trimWord(
                                                e.supplier_name,
                                                $.views.helpers
                                                    .suppliersOrgForms
                                            ),
                                            search: e.supplier_name,
                                            supplierId: e.supplier_id,
                                            typedText: t,
                                            type: o.supplier,
                                            url: `/seller/${e.supplier_id}`,
                                            src: $.views.helpers.forSellerLogo(
                                                e.supplier_id
                                            ),
                                            svrReserve:
                                                $.views.helpers.forSellerLogoPb(
                                                    e.supplier_id
                                                ),
                                            imgOnError:
                                                wb.helpers.url.urlSiteStatic(
                                                    "i/v3/catalog/seller-logo-new.jpg"
                                                ),
                                            imgWidth: 67,
                                            imgHeight: 28,
                                        };
                                    case "redirect":
                                    case "external_redirect":
                                        return {
                                            typeStr: e.type,
                                            typeName: wb.i18n.t(
                                                "communications.chapter"
                                            ),
                                            name: e.name,
                                            search: e.name,
                                            id: e.id,
                                            typedText: t,
                                            type: o.redirect,
                                            url:
                                                "external_redirect" === e.type
                                                    ? e.url
                                                    : a.get(e.id),
                                            src: wb.helpers.url.urlSiteStatic(
                                                "i/v3/shops/wb.webp"
                                            ),
                                            imgWidth: 67,
                                            imgHeight: 28,
                                        };
                                }
                            })
                            .filter((e) => e);
                        n.push({
                            type: o.grouped,
                            suggestions: l,
                        });
                        const c = r
                            .filter((e) => "suggest" === e.type)
                            .map((e) => ({
                                name: e.name,
                                search: e.name,
                                type: o.catalog,
                                typedText: t,
                                typeStr: e.type,
                                xParams: e.query,
                                xShard: e.shard_key,
                            }))
                            .slice(0, 7);
                        return (
                            0 === c.length &&
                                0 === tagsSuggests.length &&
                                t.trim() &&
                                c.push({
                                    name: t,
                                    search: t,
                                    type: o.catalog,
                                    typedText: t,
                                    typeStr: "self",
                                }),
                            n.push({
                                type: o.catalog,
                                suggestions: c,
                            }),
                            n
                        );
                    },
                    u = [34, 42],
                    d = [38, 40],
                    p = Object.freeze({
                        6: 0,
                        0: 1,
                        1: 2,
                        5: 3,
                    });
                class h extends WbSpaModel {
                    constructor() {
                        super(),
                            (this.searchText = ""),
                            (this.searchQueryText = ""),
                            (this.showImageSearch = !1),
                            (this.uploadingPhoto = !1),
                            (this.suggestions = []),
                            (this.allSuggestions = []),
                            (this.suggestionsQueue = []),
                            (this.prohibitSuggestions = !0),
                            (this.searchTagClick = !1),
                            (this.onlyTags = !1),
                            (this.isNewSearchByImage = !0),
                            (this.showSuggestionsDebouncer =
                                this.showSuggestionsDebouncer()),
                            (this.showSuggestionsDebounced =
                                this.showSuggestionsDebouncer.debounce(
                                    this.showSuggestionsOuter.bind(this),
                                    100
                                )),
                            (this._hideSuggestionsByClick =
                                this._hideSuggestionsByClick.bind(this));
                    }
                    get allSuggestionsAnalitics() {
                        return this.allSuggestions.map((e) => e.name).join("|");
                    }
                    get suggestionsJsonString() {
                        const e = {},
                            t = this.allSuggestions.map((t) => {
                                t.typeStr in e || (e[t.typeStr] = 0);
                                const r = e[t.typeStr];
                                return (
                                    (e[t.typeStr] += 1),
                                    {
                                        type:
                                            "history" === t.typeStr
                                                ? "hist"
                                                : t.typeStr,
                                        value: t.name,
                                        index: r,
                                    }
                                );
                            });
                        return (
                            this.$analitic.saveLastSearchAnalyticsDataForSuggest(
                                JSON.stringify(t)
                            ),
                            JSON.stringify(t)
                        );
                    }
                    get location() {
                        return {
                            SpaActiveOrdersEntrypoint: "Delivery",
                            SpaCatalogEntrypoint: "Catalog",
                            SpaSearchEntrypoint: "Catalog",
                            SpaBrandsEntrypoint: "Brand",
                            SpaSellerCatalogEntrypoint: "Supplier",
                            SpaArchivePositionsEntrypoint: "Purchases",
                            SpaFavoritesEntrypoint: "Favorites",
                            SpaBasketEntrypoint: "Cart",
                            SpaPersonalCabinetEntrypoint: "LK",
                            SpaHomeEntrypoint: "Main",
                        }[WbSpaModel.prototype.$router.currentRoute.name];
                    }
                    get lastSuggestShowedText() {
                        var e, t;
                        if (this.allSuggestions.length)
                            return null !=
                                (t =
                                    null ==
                                    (e = this.allSuggestions.filter(
                                        (e) => e.typedText
                                    )[0])
                                        ? void 0
                                        : e.typedText)
                                ? t
                                : "";
                    }
                    clearSearch() {
                        (this.searchTagClick = !1),
                            (this.onlyTags = !1),
                            $.observable(this).setProperty({
                                searchText: "",
                            }),
                            this.inputEl.focus();
                    }
                    onSearchInputKeypress(e) {
                        var t, r;
                        if (u.indexOf(e.which) > -1) return !1;
                        if (
                            13 === e.which &&
                            "brand" ===
                                (null == (t = this.targetSuggestion)
                                    ? void 0
                                    : t.typeStr)
                        )
                            return (
                                this._followSuggest(this.targetSuggestion),
                                (this.targetSuggestion = null),
                                this._hideSuggestionsByClick(),
                                !1
                            );
                        if (13 === e.which)
                            return (
                                this.showSuggestionsDebouncer.stop(),
                                this.applySearch(),
                                !1
                            );
                        if (((this.isSearchByKeyboard = !1), this.onlyTags)) {
                            this.allSuggestionsAnalitics;
                            this.onlyTags = !1;
                        }
                        if (
                            this.$isDesktop &&
                            d.indexOf(e.which) > -1 &&
                            this.allSuggestions.length
                        ) {
                            e.preventDefault();
                            const t = 38 === e.which,
                                s = this.allSuggestions.filter(
                                    (e) =>
                                        1 !== e.type ||
                                        (1 === e.type &&
                                            !e.hasOwnProperty("pos"))
                                );
                            let n = s.findIndex((e) => e.selected);
                            if (
                                (t && -1 === n && (n = 0),
                                (n += t ? -1 : 1),
                                (n %= s.length),
                                n < 0 && (n += s.length),
                                (this.targetSuggestion = s[n]),
                                null != this.targetSuggestion)
                            ) {
                                $.observable(this).setProperty({
                                    searchText: this.targetSuggestion.name,
                                }),
                                    null == (r = this._markSuggestAsSelected) ||
                                        r.call(this, this.targetSuggestion),
                                    (this.isSearchByKeyboard = !0);
                                const e =
                                    0 === this.targetSuggestion.type
                                        ? "SNH"
                                        : 1 === this.targetSuggestion.type
                                        ? "SNS"
                                        : "STB";
                                this.infoByKeyboardSearch = {
                                    tail: e,
                                    type:
                                        "SNS" === e
                                            ? "Suggest"
                                            : "SNH" === e
                                            ? "Hist"
                                            : "Brand",
                                    typedText: this.targetSuggestion.typedText,
                                };
                            }
                        }
                    }
                    onSearchSubmit(e) {
                        e.preventDefault();
                    }
                    applySearch() {
                        this.searchText.length &&
                            (this.inputEl.blur(),
                            this.$analitic.saveLastSearchAnaliticsData(
                                "Text",
                                this.searchText,
                                this.allSuggestionsAnalitics
                            ),
                            this._hideSuggestionsByClick(),
                            this._loadSearchPage());
                    }
                    async searchByImage(e) {
                        var t;
                        if (
                            (await this.$moduleLoader.loadServiceAsync(
                                "searchByImageService"
                            ),
                            this.isNewSearchByImage)
                        )
                            window.innerWidth < 1024
                                ? (await this.$moduleLoader.loadModuleAsync(
                                      "cropSearchImagePopup"
                                  ),
                                  this.$services.searchByImageService.uploadImageOnMobile(
                                      e
                                  ))
                                : null ==
                                      (t =
                                          this
                                              .uploadImageForSearchByImagePopUp) ||
                                  t.setVisible();
                        else {
                            const t =
                                new (await this.$moduleLoader.loadModuleAsync(
                                    "imageChip"
                                ))();
                            (t.uploading = !0),
                                $.observable(this).setProperty({
                                    imageChipData: t,
                                });
                            try {
                                this.$analitic.saveState({
                                    l: "SPA",
                                });
                                const t = e.currentTarget.files[0],
                                    r =
                                        await this.$services.searchByImageService.searchByImage(
                                            {
                                                file: t,
                                            }
                                        ),
                                    s = this.$analitic.getTermByTermName("qid");
                                this.$analitic.saveQueryIdForSearch(s),
                                    this.$analitic.saveLastSearchAnaliticsData({
                                        type: "Photo",
                                        query_id: s,
                                    }),
                                    this.$router.moveTo(r),
                                    (e.currentTarget.value = "");
                            } catch (e) {
                                console.error(e);
                            } finally {
                                $.observable(this).setProperty({
                                    showImageSearch: !1,
                                });
                            }
                        }
                    }
                    _isMobileInput(e) {
                        return !1;
                    }
                    enableSuggestions(e) {
                        if (this.imageChipData) e.preventDefault();
                        else if (
                            this.$isDesktop ||
                            this._isMobileInput(this.inputEl)
                        )
                            return (
                                "focus" !== e.type ||
                                    this.searchTagClick ||
                                    ((this.focusSearchTime =
                                        Date.now().toString()),
                                    (this.focusSearchText = this.searchText)),
                                $.observable(this).setProperty({
                                    prohibitSuggestions: !1,
                                }),
                                this.showSuggestions(e)
                            );
                    }
                    showSuggestionsDebouncer() {
                        let e = null;
                        function t() {
                            e && clearTimeout(e);
                        }
                        return {
                            debounce:
                                (r, s) =>
                                (...n) => {
                                    t(),
                                        (e = setTimeout(() => {
                                            r.apply(this, n), (e = null);
                                        }, s));
                                },
                            stop: t,
                        };
                    }
                    showSuggestionsOuter(e) {
                        return this.prohibitSuggestions
                            ? this.enableSuggestions(e)
                            : this.showSuggestions(e);
                    }
                    showSuggestions(e) {
                        if (this.imageChipData)
                            return void (null == e || e.preventDefault());
                        clearTimeout(this._hideSuggestionsTimer);
                        const t = this.suggestionsHelper.loadSuggestionsAsync(
                                this.searchText,
                                null
                            ),
                            r = this.$isDesktop
                                ? $.views.loadTemplateDictionaryAsync(
                                      "searchSuggestionsTmpl"
                                  )
                                : Promise.resolve();
                        this.suggestionsQueue.push(t),
                            Promise.all([t, r])
                                .then(([e]) => {
                                    var r;
                                    if (this.prohibitSuggestions)
                                        return void $.observable(
                                            this.suggestions
                                        ).refresh([]);
                                    const s = this.suggestionsQueue.findIndex(
                                        (e) => e == t
                                    );
                                    if (s < 0) return;
                                    this.suggestionsQueue =
                                        this.suggestionsQueue.slice(s + 1);
                                    const n = JSON.parse(JSON.stringify(e));
                                    this._removeRepeats(n),
                                        this._sortSuggests(n),
                                        $.observable(this.suggestions).refresh(
                                            n
                                        );
                                    const o =
                                        null ==
                                        (r = n.find((e) => 6 === e.type))
                                            ? void 0
                                            : r.suggestions;
                                    if (o) {
                                        const e = o[0].maxTagsRows;
                                        if (e > 0) {
                                            const t =
                                                document.querySelector(
                                                    ".j-unmark-suggests"
                                                );
                                            document.documentElement.style.setProperty(
                                                "--row-on-tags",
                                                e
                                            ),
                                                null == t ||
                                                    t.classList.add(
                                                        "autocomplete__list--row"
                                                    );
                                        }
                                    }
                                    (this.allSuggestions = n.reduce(
                                        (e, t) => e.concat(t.suggestions),
                                        []
                                    )),
                                        document.removeEventListener(
                                            "click",
                                            this._hideSuggestionsByClick
                                        ),
                                        document.addEventListener(
                                            "click",
                                            this._hideSuggestionsByClick
                                        ),
                                        this.toggleBackgroundBlur(!0);
                                })
                                .catch((e) => {
                                    console.error(e);
                                });
                    }
                    toggleBackgroundBlur(e) {
                        var t;
                        if (e && this.$isDesktop) {
                            if (!document.querySelector(".overlay--search")) {
                                const e = document.createElement("div");
                                e.classList.add(
                                    "overlay",
                                    "overlay--search",
                                    "hide-mobile"
                                ),
                                    document
                                        .querySelector("body")
                                        .appendChild(e);
                            }
                        } else
                            null ==
                                (t =
                                    document.querySelector(
                                        ".overlay--search"
                                    )) || t.remove();
                    }
                    _hideSuggestionsByClick(e) {
                        if (
                            "m" == wb.settings.displayMode ||
                            (null == e
                                ? void 0
                                : e.target.closest(
                                      ".search-catalog__btn--clear"
                                  ))
                        )
                            return;
                        (
                            e
                                ? (!e.target.closest(".j-menu-burger-btn") &&
                                      this.inputEl == document.activeElement) ||
                                  e.target.closest(".j-clear-history") ||
                                  e.target.closest(".j-clear-history-all") ||
                                  e.target.closest(".j-suggest-tag")
                                : null
                        )
                            ? this.inputEl.focus()
                            : (document.activeElement === this.inputEl &&
                                  this.inputEl.blur(),
                              clearTimeout(this._hideSuggestionsTimer),
                              $.observable(this).setProperty({
                                  prohibitSuggestions: !0,
                              }),
                              (this._hideSuggestionsTimer = setTimeout(() => {
                                  $.observable(this.suggestions).refresh([]),
                                      document.removeEventListener(
                                          "click",
                                          this._hideSuggestionsByClick
                                      ),
                                      this.toggleBackgroundBlur(!1);
                              }, 150)));
                    }
                    clearAllSearchHistories(e) {
                        this._clearSearchHistory(null, !0),
                            this.$analitic.sendEvent("Search_History_Delete");
                    }
                    clearSearchHistory(e) {
                        const { data: t } = $.view(e.currentTarget);
                        this._clearSearchHistory(t.name);
                    }
                    _clearSearchHistory(e, t) {
                        this.suggestionsHelper.removeFromHistorySearch(e, t),
                            "m" === wb.settings.displayMode &&
                                this.showSuggestions(),
                            this.inputEl.focus();
                    }
                    fillWithTag(e) {
                        var t, r, s;
                        if (
                            ((this.searchTagClick = !0),
                            e.target.closest(".j-clear-history"))
                        )
                            return;
                        const { data: n } = $.view(e.currentTarget);
                        if (!n) return;
                        const o = null != (t = n.name) ? t : "",
                            i = this.searchText,
                            a = this.searchText.trimStart().split(/\s+/);
                        (a[n.pos] = o),
                            (this.onlyTags = !0),
                            (this.tagsTypedText = i),
                            this.$analitic.sendEvent("Search_Tag_Suggest_T", {
                                text: o,
                                text_typed:
                                    null != (r = this.searchText) ? r : "",
                            }),
                            $.observable(this).setProperty({
                                searchText: a.join(" ") + " ",
                            }),
                            null == (s = this.inputEl) || s.focus();
                    }
                    _setTextInSearchInput(e) {
                        $.observable(this).setProperty({
                            searchText: e,
                        }),
                            !this.$isDesktop &&
                                this.parentBlock &&
                                $.observable(this.parentBlock).setProperty({
                                    searchText: e,
                                });
                    }
                    onFollowSuggest(e) {
                        if (e.target.closest(".j-clear-history")) return;
                        this.onlyTags = !1;
                        const { data: t } = $.view(e.currentTarget);
                        null != t && this._followSuggest(t);
                    }
                    _followSuggest(e) {
                        var t, r, s;
                        const n = this.allSuggestionsAnalitics;
                        this._setTextInSearchInput(e.name),
                            this.suggestionsHelper.saveHistorySearch(e.name);
                        const o = this._getAnalyticsFromSuggest(e),
                            i = {
                                type: o.type,
                                l: o.location,
                                t: this.searchText,
                                t1:
                                    null == (t = e.searchParams)
                                        ? void 0
                                        : t.get("xParams"),
                                t2:
                                    null == (r = e.searchParams)
                                        ? void 0
                                        : r.get("xShard"),
                                t3: e.typedText,
                                t4: this.searchTagClick,
                            },
                            a = o.type,
                            l = this.$analitic.getTermByTermName("qid");
                        this.$analitic.saveQueryIdForSearch(l),
                            this.$analitic.updateTailObjectData({
                                search_text: this.searchText,
                                query_id: l,
                            }),
                            this.$analitic.saveState(i);
                        const c = {
                            type: a,
                            text: e.search,
                            text_typed: e.typedText,
                            text_suggest: n,
                            query_id: l,
                            suggests: this.suggestionsJsonString,
                            start_inputed_at: this.focusSearchTime,
                            start_inputed_text: this.focusSearchText,
                            location: null != (s = this.location) ? s : "",
                            last_suggests_showed_text:
                                this.lastSuggestShowedText,
                        };
                        e.isBrand || e.isHistory || (c.group = "new"),
                            this.$analitic.saveLastSearchAnaliticsData(c),
                            this._getUrlToFollow(e).then((e) => {
                                if (
                                    (this._checkIsRedirectToSearchCatalog(e)
                                        ? this.$analitic.saveLastSearchAnaliticsData(
                                              c
                                          )
                                        : this.$analitic.sendEvent(
                                              "Search_Request_Send",
                                              c
                                          ),
                                    null != wb.spa)
                                )
                                    return wb.spa.redirect(e);
                                window.location.href = e;
                            });
                    }
                    _checkIsRedirectToSearchCatalog(e) {
                        return -1 !== e.indexOf(wb.urlHelper.xSearchBase);
                    }
                    removeImageChip() {
                        $.observable(this).setProperty({
                            imageChipData: null,
                        });
                    }
                    _loadSearchPage() {
                        var e, t, r, s;
                        if (/^\s+$/.test(this.searchText)) {
                            switch (wb.analitics.getState().l) {
                                case "SNT":
                                case "STA":
                                    this.typeSearch = "Text";
                                    break;
                                case "SNS":
                                    this.typeSearch = "Suggest";
                                    break;
                                case "SNH":
                                case "SHS":
                                    this.typeSearch = "Hist";
                                    break;
                                case "STC":
                                    this.typeSearch = "Category";
                                    break;
                                case "STB":
                                    this.typeSearch = "Brand";
                                    break;
                                case "SPA":
                                    this.typeSearch = "Photo";
                                    break;
                                case "AST":
                                case "SST":
                                case "SIS":
                                    this.typeSearch = "Tag_Suggest";
                            }
                            (e = this.typeSearch),
                                this.searchText,
                                this.searchText,
                                this.suggestionsJsonString,
                                wb.analitics.retrieveQueryIdForSearch();
                        }
                        this.suggestionsHelper.saveHistorySearch(
                            this.searchText
                        );
                        const n = this.allSuggestionsAnalitics,
                            o = this.isSearchByKeyboard
                                ? this.infoByKeyboardSearch.typedText
                                : this.searchText;
                        this.$analitic.saveState({
                            l: this.isSearchByKeyboard
                                ? this.infoByKeyboardSearch.tail
                                : this.onlyTags
                                ? "SST"
                                : "SNT",
                            t: this.searchText,
                            t1:
                                null == (t = this.xData)
                                    ? void 0
                                    : t.xcatalogQuery,
                            t2:
                                null == (r = this.xData)
                                    ? void 0
                                    : r.xcatalogShard,
                            t3: o,
                            t4: this.searchTagClick,
                        });
                        const i = this.$analitic.getTermByTermName("qid");
                        this.$analitic.saveQueryIdForSearch(i),
                            this.$analitic.updateTailObjectData({
                                search_text: this.searchText,
                                query_id: i,
                            }),
                            this.$analitic.saveLastSearchAnaliticsData({
                                text: this.searchText,
                                type: this.isSearchByKeyboard
                                    ? this.infoByKeyboardSearch.type
                                    : this.onlyTags
                                    ? "Tag_Suggest"
                                    : "Text",
                                group: "new",
                                text_typed: o,
                                text_suggest: n,
                                query_id: i,
                                suggests: this.suggestionsJsonString,
                                start_inputed_at: this.focusSearchTime,
                                start_inputed_text: this.focusSearchText,
                                location: null != (s = this.location) ? s : "",
                                last_suggests_showed_text:
                                    this.lastSuggestShowedText,
                            }),
                            $.observable(this).setProperty({
                                searchQueryText: this.searchText,
                            });
                        let a = this._makeSafeString(this.searchText);
                        const l = `${wb.urlHelper.xSearchBase}?search=${a}`;
                        if (null != wb.spa) return wb.spa.redirect(l);
                        window.location.href = l;
                    }
                    _makeSafeString(e) {
                        return e.toSafeString();
                    }
                    async _getUrlToFollow(e) {
                        if (e.url) return Promise.resolve(e.url);
                        if (2 === e.type) {
                            const t = await $.views.helpers.brandUrlById(
                                e.brandId
                            );
                            if (t) return t;
                        }
                        return Promise.resolve(
                            `${
                                wb.urlHelper.xSearchBase
                            }?search=${this._makeSafeString(e.search)}`
                        );
                    }
                    markSelected(e, t) {
                        let r = e.trim();
                        if (t) {
                            const e = t
                                    .trim()
                                    .replace(
                                        wb.settings.regexp.escapingRegExp,
                                        "\\$&"
                                    ),
                                s = $.views.converters
                                    .encode(r.replace(new RegExp(e, "i"), ""))
                                    .replace(
                                        wb.settings.regexp.escapingRegExp,
                                        "\\$&"
                                    );
                            return (
                                (r = $.views.converters.encode(
                                    r.replace(
                                        new RegExp(`(${s})$`, "i"),
                                        "[b]$&[/b]"
                                    )
                                )),
                                r.replace(
                                    new RegExp(
                                        "\\[b\\](" +
                                            $.views.converters.encode(s) +
                                            ")\\[\\/b\\]",
                                        "gi"
                                    ),
                                    "<b>$1</b>"
                                )
                            );
                        }
                        return $.views.converters.encode(r);
                    }
                    _removeRepeats(e) {
                        const { history: t, common: r } = e.reduce(
                            (e, t) => {
                                switch (t.type) {
                                    case 0:
                                        e.history = t;
                                        break;
                                    case 1:
                                        e.common = t;
                                }
                                return e;
                            },
                            {
                                history: null,
                                common: null,
                            }
                        );
                        if (!t || !r) return;
                        const s = t.suggestions.reduce(
                            (e, t) => (e.add(t.name), e),
                            new Set()
                        );
                        r.suggestions = r.suggestions.filter(
                            (e) => !s.has(e.name)
                        );
                    }
                    _sortSuggests(e) {
                        e.sort((e, t) => p[e.type] - p[t.type]);
                    }
                    _getAnalyticsFromSuggest(e) {
                        switch (e.type) {
                            case 0:
                                return {
                                    location: "SNH",
                                    type: "Hist",
                                };
                            case 1:
                                return {
                                    location: "SNS",
                                    type: "Suggest",
                                };
                            case 2:
                                return {
                                    location: "STB",
                                    type: "Brand",
                                };
                            case 3:
                                return {
                                    location: "STC",
                                    type: "Category",
                                };
                            case 4:
                                return {
                                    location: "SIS",
                                    type: "Item",
                                };
                            case 7:
                                return {
                                    location: "STS",
                                    type: "Supplier",
                                };
                            default:
                                return {
                                    location: "",
                                    type: "Unknown",
                                };
                        }
                    }
                }
                class m extends h {
                    constructor(e) {
                        super(),
                            (this.suggestionsHelper = e.suggestionsHelper),
                            (this.searchText = e.searchText),
                            (this.parentBlock = e),
                            (this.inputElIdSelector = "mobileSearchInput");
                    }
                    _isMobileInput(e) {
                        return (
                            e ===
                            document.getElementById(this.inputElIdSelector)
                        );
                    }
                    onAfterShown() {
                        (this.inputEl = document.getElementById(
                            this.inputElIdSelector
                        )),
                            (this.inputElFullPage =
                                document.getElementById("searchInput")),
                            this.inputEl.focus();
                    }
                }
                var g = class extends h {
                    constructor() {
                        super(),
                            (this.isNewSearchByImage = !0),
                            (this._hideSuggestionsTimer = null),
                            (this.uploadImageForSearchByImagePopUp = null),
                            (this.searchByImageFormAbOld =
                                document.getElementById(
                                    "searchByImageFormAbOld"
                                )),
                            (this.searchByImageFormAbNew =
                                document.getElementById(
                                    "searchByImageFormAbNew"
                                )),
                            (this.inputEl =
                                document.getElementById("searchInput")),
                            (this.applySearchEl =
                                document.getElementById("applySearchBtn")),
                            (this.searchByImageBtnEl =
                                document.getElementById("searchByImageBtn")),
                            (this.searchByImageContainerEl =
                                document.getElementById(
                                    "searchByImageContainer"
                                )),
                            (this.searchInputMobileEl = document.querySelector(
                                ".j-search-input-mobile"
                            )),
                            (this._checkImageFormClick =
                                this._checkImageFormClick.bind(this)),
                            (this.hasAnySuggestions.depends = ["suggestions"]);
                    }
                    async init() {
                        await this._prepareSuggestionsHelper(),
                            this._observeProperties(),
                            this._bindEvents(),
                            $.link(!0, "#searchBlock", this),
                            this.isNewSearchByImage &&
                                null ===
                                    this.uploadImageForSearchByImagePopUp &&
                                this.$moduleLoader
                                    .loadModuleAsync(
                                        "uploadImageForSearchByImagePopUp"
                                    )
                                    .then((e) => {
                                        (this.uploadImageForSearchByImagePopUp =
                                            new e()),
                                            this.uploadImageForSearchByImagePopUp.init();
                                    }),
                            this._toggleActiveSearchByImageButton();
                    }
                    _toggleActiveSearchByImageButton() {
                        !this.isNewSearchByImage ||
                        (this.isNewSearchByImage && window.innerWidth < 1024)
                            ? (this.searchByImageFormAbNew.classList.add(
                                  "hide"
                              ),
                              this.searchByImageFormAbOld.classList.remove(
                                  "hide"
                              ))
                            : (this.searchByImageFormAbOld.classList.add(
                                  "hide"
                              ),
                              this.searchByImageFormAbNew.classList.remove(
                                  "hide"
                              ));
                    }
                    hasAnySuggestions() {
                        return this.suggestions.some(
                            (e) => e.suggestions.length > 0
                        );
                    }
                    toggleImageSearch() {
                        this.toggleProperty("showImageSearch");
                    }
                    markSuggest(e) {
                        const { data: t } = $.view(e.currentTarget);
                        null != t && this._markSuggestAsSelected(t);
                    }
                    unmarkSuggests() {
                        this.allSuggestions.forEach((e) => {
                            $.observable(e).setProperty({
                                selected: !1,
                            });
                        });
                    }
                    _markSuggestAsSelected(e) {
                        this.allSuggestions.forEach((t) => {
                            $.observable(t).setProperty({
                                selected: t == e,
                            });
                        });
                    }
                    _observeProperties() {
                        $.observe(
                            this,
                            "showImageSearch",
                            (e, { value: t }) => {
                                t
                                    ? this._addImageSearchHandlers()
                                    : this._removeImageSearchHandlers();
                            }
                        );
                    }
                    _bindEvents() {
                        window.addEventListener("spaTransition", (e) => {
                            var t;
                            "SpaSearchEntrypoint" !==
                                (null == (t = e.detail.dest)
                                    ? void 0
                                    : t.name) &&
                                ($.observable(this).setProperty({
                                    searchText: "",
                                }),
                                $.observable(this).setProperty({
                                    searchQueryText: "",
                                }));
                        }),
                            this.inputEl.addEventListener("focus", () => {
                                this.$isDesktop ||
                                    this._showMobileSearchPopup();
                            }),
                            this.$eventBus.addEventListener(
                                "NeedSearchUpdate",
                                (e) => {
                                    const { searchText: t } = e.detail;
                                    $.observable(this).setProperty({
                                        searchText: t,
                                    }),
                                        $.observable(this).setProperty({
                                            searchQueryText: t,
                                        });
                                }
                            ),
                            this.isNewSearchByImage ||
                                this.$eventBus.addEventListener(
                                    "RenderImageChip",
                                    (e) => {
                                        const { imageChipData: t } = e.detail;
                                        $.observable(this).setProperty({
                                            imageChipData: t,
                                        });
                                    }
                                ),
                            this._bindDisplayEvents();
                    }
                    _bindDisplayEvents() {
                        var e;
                        const t = this,
                            r = this._showMobileSearchPopup.bind(this);
                        function s() {
                            var e, s;
                            "m" == wb.settings.displayMode
                                ? null == (e = t.searchInputMobileEl) ||
                                  e.addEventListener("click", r)
                                : null == (s = t.searchInputMobileEl) ||
                                  s.removeEventListener("click", r);
                        }
                        s(),
                            null == (e = wb.displayModeSettings) ||
                                e.addObserver(() => {
                                    s(),
                                        this._toggleActiveSearchByImageButton();
                                });
                    }
                    _addImageSearchHandlers() {
                        document.documentElement.addEventListener(
                            "click",
                            this._checkImageFormClick
                        );
                    }
                    _removeImageSearchHandlers() {
                        document.documentElement.removeEventListener(
                            "click",
                            this._checkImageFormClick
                        );
                    }
                    _checkImageFormClick(e) {
                        e.target === this.searchByImageBtnEl ||
                            this.searchByImageContainerEl.contains(e.target) ||
                            $.observable(this).setProperty({
                                showImageSearch: !1,
                            });
                    }
                    async _showMobileSearchPopup() {
                        await $.views.loadTemplateDictionaryAsync(
                            "searchSuggestionsTmpl"
                        );
                        const e = wb.popup.showCustomPopup({
                            showCross: !1,
                            useCenteredFunction: !0,
                            useHtml: !0,
                            lockScroll: !0,
                            popupClassesList: ["popup-search", "shown"],
                            contentClasses: [
                                "popup__content",
                                "popup-search__content",
                            ],
                            onShow: async (t, r) => {
                                const s = new m(this);
                                (s.searchByImage = (t) => {
                                    this.searchByImage(t), e.close();
                                }),
                                    $.templates.searchMobilePopupTmpl.link(
                                        t.querySelector(".popup__content"),
                                        s,
                                        {
                                            close: () => e.close(),
                                        }
                                    ),
                                    await r,
                                    s.onAfterShown();
                            },
                        });
                    }
                    async _prepareSuggestionsHelper() {
                        const e = await this.$moduleLoader.loadModuleAsync(
                            "suggestionsHelper"
                        );
                        let t = [
                            [
                                {
                                    cacheKey: "historySearch",
                                    historiesLimit: 20,
                                },
                                e.suggestionsTypes.history,
                            ],
                        ];
                        t.push([s, e.suggestionsTypes.grouped]),
                            (this.suggestionsHelper =
                                e.createSuggestionsHelper(t));
                    }
                };
                var b = class {
                        constructor(e) {
                            var t;
                            (this.layoutModel = e),
                                (this.container =
                                    document.getElementById("balanceBlock")),
                                (this.updateBalance =
                                    this.updateBalance.bind(this)),
                                (this.updateGeo = this.updateGeo.bind(this)),
                                (this.model = {
                                    balance: 0,
                                    cashbackBalance: 0,
                                    showCashbackInfoPopup:
                                        this.showCashbackInfoPopup.bind(this),
                                }),
                                this._setWalletInfo(
                                    null == (t = e.$user.balance)
                                        ? void 0
                                        : t.walletTypeCode
                                ),
                                (this.enableCashback =
                                    wb.global.settings.switches
                                        .enableCashback &&
                                    "ge" !== wb.settings.currentLocale),
                                (this.enableCashbackWidgetHide =
                                    wb.global.settings.switches.enableCashbackWidgetHide);
                        }
                        async init(e) {
                            e &&
                                (await this._fetchBalanceAndLink().catch((e) =>
                                    Promise.resolve()
                                )),
                                this.layoutModel.$eventBus.addEventListener(
                                    "BalanceReset",
                                    this._fetchBalanceAndLink.bind(this)
                                ),
                                this.layoutModel.$eventBus.addEventListener(
                                    "CurrencyChanged",
                                    this._fetchBalanceAndLink.bind(this)
                                ),
                                this.layoutModel.$eventBus.addEventListener(
                                    "BalanceUpdated",
                                    this.updateBalance.bind(this)
                                ),
                                this.layoutModel.$eventBus.addEventListener(
                                    "GeoUpdated",
                                    this.updateGeo.bind(this)
                                );
                        }
                        async _fetchBalanceAndLink() {
                            if (!this.layoutModel.$auth.isAuth) return;
                            let e = await this.layoutModel.$user.getBalance();
                            e &&
                                this._link(
                                    e.totalBalance || 0,
                                    e.cashbackBalance || 0,
                                    (null == e ? void 0 : e.balanceCurrency) ||
                                        "RUB",
                                    e.totalBalanceRub || 0
                                );
                        }
                        _link(e, t, r, s) {
                            void 0 !== e &&
                                null != e &&
                                this.layoutModel.$router.userIsAuth &&
                                !this._isLinked &&
                                ((this._isLinked = !0),
                                (this.model.balance = e),
                                (this.model.cashbackBalance = t),
                                (this.model.enableCashback =
                                    this.enableCashback),
                                (this.model.enableCashbackWidgetHide =
                                    this.enableCashbackWidgetHide),
                                (this.model.balanceCurrency = r),
                                (this.model.totalBalanceRub = s),
                                (this.model.locale =
                                    WbSpaModel.prototype.$user.getLocale()),
                                (this.model.isGeLocale =
                                    "ge" === wb.settings.currentLocale),
                                $.link(!0, this.container, this.model),
                                $.observable(
                                    this.layoutModel.$userEnv
                                ).setProperty({
                                    balance: e,
                                    balanceCurrency: r,
                                    totalBalanceRub: s,
                                }));
                        }
                        updateBalance(e) {
                            const {
                                totalBalance: t,
                                balanceCurrency: r,
                                walletTypeCode: s,
                                totalBalanceRub: n,
                                cashbackBalance: o,
                            } = e.detail;
                            this._isLinked
                                ? ($.observable(this.model).setProperty({
                                      balance: t,
                                      balanceCurrency: r,
                                      totalBalanceRub: n,
                                      cashbackBalance: o,
                                  }),
                                  $.observable(
                                      this.layoutModel.$userEnv
                                  ).setProperty({
                                      balance: t,
                                      balanceCurrency: r,
                                      totalBalanceRub: n,
                                      cashbackBalance: o,
                                  }))
                                : this._link(t, o, r, n),
                                this._setWalletInfo(s);
                        }
                        updateGeo() {
                            const e = WbSpaModel.prototype.$user.getLocale();
                            $.observable(this.model).setProperty({
                                locale: e,
                            });
                        }
                        _setWalletInfo(e) {
                            $.observable(wb.settings).setProperty({
                                balanceTitle: this._getBalanceTitle(e),
                                walletTypeCode: e,
                            });
                        }
                        async showCashbackInfoPopup() {
                            this.enableCashback &&
                                (0 === wb.settings.walletTypeCode
                                    ? this.showCashbackPopup()
                                    : await this.showCashbackDetailsPopup());
                        }
                        showCashbackPopup() {
                            WbSpaModel.prototype.$moduleLoader
                                .loadModuleAsync("cashbackPopup")
                                .then((e) => {
                                    (this.cashbackPopup = new e(
                                        e.template,
                                        !0
                                    )),
                                        this.cashbackPopup.showCashbackPopup(
                                            "header"
                                        );
                                });
                        }
                        async showCashbackDetailsPopup() {
                            WbSpaModel.prototype.$moduleLoader
                                .loadModuleAsync("cashbackDetailsPopup")
                                .then(async (e) => {
                                    (this.model.cashbackDetailsPopup = new e({
                                        template: e.template,
                                        cashbackBalance:
                                            this.model.cashbackBalance,
                                    })),
                                        await this.model.cashbackDetailsPopup.init(),
                                        this.model.cashbackDetailsPopup.showCashbackDetailsPopup();
                                });
                        }
                        _getBalanceTitle(e = 0) {
                            return e > 0
                                ? wb.i18n.t("pageTitles.wbWallet")
                                : wb.i18n.t("pageTitles.balance");
                        }
                    },
                    y = JSON.parse(
                        '{"ru":{"languageCode":"RU","name":"Русский"},"en":{"languageCode":"EN","name":"English"},"ka":{"languageCode":"KA","name":"ქართული"}}'
                    );
                var v = class {
                    constructor(e) {
                        var t, r;
                        this.mainLayout = e;
                        const s = document.querySelector(".j-b-header-country"),
                            n = s.querySelector(".j-b-change-settings");
                        (this.tooltip =
                            document.querySelector(".j-tooltip-country")),
                            $.observable(e.$userEnv).setProperty({
                                currency: e.$user.getCurrency(),
                            }),
                            (this.currentCurrency = e.$user.getCurrency()),
                            (this.changeCurrency =
                                this.changeCurrency.bind(this)),
                            (this.currentLang = wb.currentLanguage),
                            (this.changeLang = this.changeLang.bind(this));
                        const o = {
                                ge: ["ru", "ka"],
                            },
                            i = {};
                        (null ==
                        (r =
                            null == (t = wb.global.settings.variables)
                                ? void 0
                                : t.enableLanguageSwitcher)
                            ? void 0
                            : r.includes(wb.settings.currentLocale)) &&
                        o[wb.settings.currentLocale]
                            ? (o[wb.settings.currentLocale].forEach((e) => {
                                  i[e] = y[e];
                              }),
                              $.views.helpers({
                                  wbLanguages: i,
                              }),
                              $.templates({
                                  changeSettingsTmpl:
                                      '\n                    <h2 class="popup__header">{{:~t(\'common.language\')}}</h2>\n                    <div class="country">\n                        <div class="country__wrap" data-link="{on \'click\' \'.j-lang-item\' changeLang}">\n                        {^{radiogroup currentLang}}\n                            {^{props ~wbLanguages sort=sortLang ^~current=currentLang}}\n                                <label class="radio-with-text{{if key == ~current}} radio-with-text--current{{/if}}">\n                                    <input class="j-lang-item" type="radio" name="language" value=\'{{:key}}\'>\n                                    <span class="radio-with-text__text radio-with-text__text--flag">\n                                        <span class="radio-with-text__language-code">{{:prop.languageCode}}</span>\n                                        <span class="radio-with-text__name">{{:prop.name}}</span>\n                                    </span>\n                                </label>\n                            {{/props}}\n                        {{/radiogroup}}\n                        </div>\n                    </div>\n                    {{if ~wbSettings.currentLocale !== \'ge\'}}\n                    <h2 class="popup__header popup__header-second">{{:~t(\'common.currency\')}}</h2>\n                    <div class="country">\n                        <div class="country__wrap" data-link="{on \'click\' \'.j-currency-item\' changeCurrency}">\n                        {^{radiogroup currentCurrency}}\n                            {^{props ~wbCurrencies sort=sortCurrency ^~current=currentCurrency}}\n                                <label class="radio-with-text{{if key == ~current}} radio-with-text--current{{/if}}">\n                                    <input class="j-currency-item" type="radio" name="currency" value=\'{{:key}}\' ">\n                                    <span class="radio-with-text__text radio-with-text__text--flag">\n                                        <span class="radio-with-text__language"><span class="radio-with-text__flag flag-{{:prop.locale}}"></span>{{:key}}</span>\n                                        <span class="radio-with-text__name">{{:~t(`currenciesName.${key}`)}}</span>\n                                    </span>\n                                </label>\n                            {{/props}}\n                        {{/radiogroup}}\n                        </div>\n                    </div>\n                    {{/if}}     \n            ',
                              }))
                            : $.templates({
                                  changeSettingsTmpl:
                                      '\n                   <h2 class="popup__header">{{:~t(\'common.currency\')}}</h2>\n                    <div class="country">\n                        <div class="country__wrap" data-link="{on \'click\' \'.j-currency-item\' changeCurrency}">\n                        {^{radiogroup currentCurrency}}\n                            {^{props ~wbCurrencies sort=sortCurrency ^~current=currentCurrency}}\n                                <label class="radio-with-text{{if key == ~current}} radio-with-text--current{{/if}}">\n                                    <input class="j-currency-item" type="radio" name="currency" value=\'{{:key}}\' ">\n                                    <span class="radio-with-text__text radio-with-text__text--flag">\n                                        <span class="radio-with-text__language"><span class="radio-with-text__flag flag-{{:prop.locale}}"></span>{{:key}}</span>\n                                        <span class="radio-with-text__name">{{:~t(`currenciesName.${key}`)}}</span>\n                                    </span>\n                                </label>\n                            {{/props}}\n                        {{/radiogroup}}\n                        </div>\n                    </div>\n            ',
                              }),
                            $.templates.changeSettingsTmpl.link(n, this),
                            $.link(!0, s, this),
                            $.link(
                                !0,
                                document.querySelector(
                                    ".nav-element__currency"
                                ),
                                this
                            ),
                            document.addEventListener(
                                "click",
                                e.$helper.delegator(
                                    ".j-settings-show-popup",
                                    (e, t) => this.showPopup()
                                )
                            );
                    }
                    showPopup() {
                        this.currentPopup = wb.popup.showCustomPopup({
                            useHtml: !0,
                            popupClassesList: [
                                "popup-country",
                                "j-popup-country",
                                "shown",
                            ],
                            contentClasses: ["popup__content"],
                            useCenteredFunction: !0,
                            modal: !0,
                            closeClass: ["j-close", "popup__close"],
                            closeSelector: ".j-close",
                            onShow: (e) =>
                                $.templates.changeSettingsTmpl.link(
                                    e.querySelector(".popup__content"),
                                    this
                                ),
                        });
                    }
                    needShowCurrencies() {
                        return !(
                            "GEL" === this.currentCurrency &&
                            "ge" === this.mainLayout.$user.getLocale()
                        );
                    }
                    sortLang(e, t) {
                        return e.key === this.view.data.currentLang
                            ? -1
                            : t.key === this.view.data.currentLang
                            ? 1
                            : 0;
                    }
                    sortCurrency(e, t) {
                        return e.key === this.view.data.currentCurrency
                            ? -1
                            : t.key === this.view.data.currentCurrency
                            ? 1
                            : 0;
                    }
                    changeLang(e) {
                        const t = e.target.value;
                        wb.i18n.changeLang(t), this._closeTooltip();
                    }
                    changeCurrency(e) {
                        const t = e.target.value;
                        this.mainLayout.$user.setCurrency(t).then(() => {
                            var e;
                            $.observable(this.mainLayout.$userEnv).setProperty({
                                currency: t,
                            }),
                                this.mainLayout.$eventBus.dispatchEvent(
                                    new CustomEvent("CurrencyChanged", {
                                        detail: {
                                            currency: t,
                                        },
                                    })
                                ),
                                null == (e = this.currentPopup) || e.close();
                        }),
                            this.tooltip ||
                                (this.tooltip =
                                    document.querySelector(
                                        ".j-tooltip-country"
                                    )),
                            this._closeTooltip();
                    }
                    refresh(e) {
                        wb.currencies.info[e] &&
                            $.observable(this).setProperty(
                                "currentCurrency",
                                e
                            );
                    }
                    _closeTooltip() {
                        if (this.tooltip)
                            return (
                                (this.tooltip.style.pointerEvents = "none"),
                                setTimeout(
                                    () =>
                                        (this.tooltip.style.pointerEvents =
                                            "auto"),
                                    100
                                )
                            );
                    }
                };
                var f = class {
                        constructor(e) {
                            (this.layoutModel = e.layoutModel),
                                (this.shortBasketInfo = new n(e)),
                                (this.search = new g()),
                                (this.chatStartedRefunds =
                                    new this.layoutModel.$helper.Deferred());
                        }
                        _initOnlineChat(e) {
                            setTimeout(() => {
                                this.layoutModel.$moduleLoader
                                    .loadModuleAsync("onlineChatPopup")
                                    .then((t) => {
                                        var r, s;
                                        (this.onlineChat = new t({
                                            auth: e.isAuth,
                                            uid: e.isAuth ? e.uid : e.basketUid,
                                            startedRefunds:
                                                this.chatStartedRefunds,
                                        }).init()),
                                            wb.displayModeSettings.removeObserver(
                                                this.onlineChat.onBreakpoint
                                            ),
                                            (
                                                null ==
                                                (s =
                                                    null ==
                                                    (r = wb.global.settings)
                                                        ? void 0
                                                        : r.switches)
                                                    ? void 0
                                                    : s.enableOnlineChat
                                            )
                                                ? (wb.displayModeSettings.addObserver(
                                                      this.onlineChat
                                                          .onBreakpoint,
                                                      !0
                                                  ),
                                                  this.layoutModel.$eventBus.dispatchEvent(
                                                      new CustomEvent(
                                                          "OnlineChatInited"
                                                      )
                                                  ))
                                                : wb.global.subscribe(() => {
                                                      !this.onlineChat.inited &&
                                                          wb.global.settings
                                                              .switches
                                                              .enableOnlineChat &&
                                                          (wb.displayModeSettings.addObserver(
                                                              this.onlineChat
                                                                  .onBreakpoint,
                                                              !0
                                                          ),
                                                          this.layoutModel.$eventBus.dispatchEvent(
                                                              new CustomEvent(
                                                                  "OnlineChatInited"
                                                              )
                                                          ));
                                                  }),
                                            wb.global.subscribe((e) => {
                                                const t =
                                                    e.switches
                                                        .enableSellersChat;
                                                this.layoutModel.$eventBus.dispatchEvent(
                                                    new CustomEvent(
                                                        "SellersChatSwitched",
                                                        {
                                                            detail: t,
                                                        }
                                                    )
                                                );
                                            });
                                    });
                            }, 5e3);
                        }
                        async init() {
                            (this.userBalance = new b(this.layoutModel)),
                                (this.changeSettings = new v(this.layoutModel)),
                                this.shortBasketInfo.init();
                            const e =
                                    WbSpaModel.prototype.$geoLocation.initPreferredLocation(),
                                t = this.search.init();
                            this.bindSignOut(), this.bindStat();
                            const r = this.layoutModel.$user.getUserInfo();
                            return (
                                this._initOnlineChat(r),
                                this.userBalance.init(r.isAuth),
                                this.updateSwitcher(),
                                Promise.all([e, t])
                            );
                        }
                        updateSwitcher() {
                            var e;
                            const t = WbSpaModel.prototype.$isTravelEnabled();
                            "ru" == wb.settings.currentLocale &&
                                (null ==
                                    (e =
                                        document.querySelector(
                                            "#travelSwitcher"
                                        )) ||
                                    e.classList.toggle("hide", !t));
                        }
                        bindSignOut() {
                            document.addEventListener("click", (e) => {
                                const t = e.target.closest("a");
                                null != t &&
                                    t.href.endsWith("/security/exit") &&
                                    (e.preventDefault(), this.signOut());
                            });
                        }
                        signOut(e) {
                            this.layoutModel.$eventBus.dispatchEvent(
                                new CustomEvent("onBeforeSignOut")
                            ),
                                this.layoutModel.$user.clearLocalUserData(),
                                this.layoutModel.$auth.signOut(e);
                        }
                        bindStat() {
                            const e = this.layoutModel.$analitic;
                            const t = document.querySelector(".j-header");
                            null == t ||
                                t.addEventListener(
                                    "click",
                                    this.layoutModel.$helper.delegator(
                                        ".j-wba-header-item",
                                        function (t) {
                                            const r =
                                                t.target.closest(
                                                    ".j-wba-header-item"
                                                );
                                            r &&
                                                e.sendEvent("Header_T", {
                                                    name: r.dataset
                                                        .wbaHeaderName,
                                                });
                                        }
                                    )
                                );
                            const r = document.querySelector(".j-country");
                            null == r ||
                                r.addEventListener(
                                    "click",
                                    this.layoutModel.$helper.delegator(
                                        ".j-country-item input",
                                        function (t) {
                                            const r = t.target.closest(
                                                ".j-country-item input"
                                            );
                                            r &&
                                                e.sendEvent(
                                                    "Header_Country_Apl",
                                                    {
                                                        name: r.value,
                                                    }
                                                );
                                        }
                                    )
                                );
                        }
                    },
                    w = Object.defineProperty,
                    S = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? w(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                class _ extends WbSpaModel {
                    constructor() {
                        super(),
                            S(this, "bannersLoaded", !1),
                            S(this, "footerBanners", []),
                            S(this, "showFooterObserver", null),
                            S(this, "userLocale", null),
                            S(this, "banners", {
                                mobileBanners: [],
                                desktopBanners: [],
                            }),
                            S(this, "footerWrapper"),
                            (this._onChangeDisplayMode =
                                this._onChangeDisplayMode.bind(this)),
                            (this._loadBanners = this._loadBanners.bind(this)),
                            this.$eventBus.addEventListener(
                                "GeoUpdated",
                                () => {
                                    "ru" !== wb.settings.currentLocale &&
                                        this.$observable.setProperty({
                                            userLocale: this.$user.getLocale(),
                                        }),
                                        this._loadBanners(!0);
                                }
                            ),
                            (this.footerWrapper =
                                document.querySelector("#footer"));
                    }
                    async init() {
                        this.footerWrapper &&
                            (await $.views.helpers.loadTemplateAsync("footer"),
                            await this.$helper.loadJsAsync(
                                wb.settings.scripts.bannersTag
                            ),
                            (this.userLocale =
                                ("ru" !== wb.settings.currentLocale &&
                                    this.$user.getLocale()) ||
                                "ru"),
                            $.templates.footer.link(this.footerWrapper, this),
                            $.link(!0, this.footerWrapper, this),
                            (this.showFooterObserver =
                                WbSpaModel.prototype.$observerHelper.getVerticalObserver(
                                    this.footerWrapper
                                )),
                            this.footerWrapper.addEventListener(
                                this.showFooterObserver
                                    .elementInViewportEventName,
                                () => {
                                    this._loadBanners(),
                                        WbSpaModel.prototype.$analitic.sendEvent(
                                            "Footer_S"
                                        );
                                }
                            ),
                            this.showFooterObserver.observe());
                    }
                    onMenuSelected(e) {
                        if ("m" !== wb.settings.displayMode) return;
                        e.currentTarget.parentNode.classList.toggle(
                            "dropdown-open"
                        );
                    }
                    sendStatEvent(e) {
                        const t = e.currentTarget;
                        t &&
                            WbSpaModel.prototype.$analitic.sendEvent(
                                "Footer_T",
                                {
                                    name: t.dataset.wbaFooterName,
                                }
                            );
                    }
                    _onChangeDisplayMode() {
                        this._setBanners();
                    }
                    _setBanners() {
                        if (!this.banners) return;
                        const e = "phone" == wb.settings.displayType;
                        $.observable(this).setProperty({
                            footerBanners: e
                                ? this.banners.mobileBanners
                                : this.banners.desktopBanners,
                        });
                    }
                    async _loadBanners(e) {
                        if (this.bannersLoaded && !e) return;
                        this.bannersLoaded = !0;
                        const [t] = await Promise.all([
                            this.$services.bannersService.getBannersForFooterAsync(),
                            this.$helper.loadJsAsync(
                                wb.settings.scripts.swiper
                            ),
                        ]);
                        (this.banners = t),
                            this._onChangeDisplayMode(),
                            !e &&
                                $.observe(
                                    wb.settings,
                                    "displayType",
                                    this._onChangeDisplayMode
                                );
                    }
                }
                var C = _;
                const I = Object.freeze({
                    UNKNOWN: "unknown",
                    HOME: "home",
                    CATALOG: "catalog",
                    PRODUCTCARD: "product-card",
                    SECURITY: "security",
                    BASKET: "basket",
                    PONED: "poned",
                    PROFILE: "profile",
                    ARCHIVE: "archive",
                    ORDERS: "orders",
                    SERVICES: "services",
                    CLAIMS: "claims",
                    COMMUNICATIONS: "communications",
                    SUBSCRIPTION: "subscription",
                    CONTACTS: "contacts",
                });
                var k = class {
                    static get types() {
                        return I;
                    }
                    static getType() {
                        const e = location.pathname.toLowerCase();
                        return "/" == e
                            ? I.HOME
                            : /\/catalog\/\d+\/detail\.aspx/.test(e)
                            ? I.PRODUCTCARD
                            : e.startsWith("/catalog")
                            ? I.CATALOG
                            : e.startsWith("/subscription")
                            ? I.SUBSCRIPTION
                            : e.startsWith("/security")
                            ? I.SECURITY
                            : e.startsWith("/lk/basket")
                            ? I.BASKET
                            : e.startsWith("/lk/favorites")
                            ? I.PONED
                            : e.startsWith("/lk/myorders/archive")
                            ? I.ARCHIVE
                            : e.startsWith("/lk/myorders/delivery")
                            ? I.ORDERS
                            : e.startsWith("/lk/claims") ||
                              e.startsWith("/lk/refund")
                            ? I.CLAIMS
                            : e.startsWith("/lk/communications")
                            ? I.COMMUNICATIONS
                            : e.startsWith("/lk")
                            ? I.PROFILE
                            : e.startsWith("/services/kontakty")
                            ? I.CONTACTS
                            : e.startsWith("/services/") ||
                              e.startsWith("/promo/") ||
                              e.startsWith("/presservice")
                            ? I.SERVICES
                            : I.UNKNOWN;
                    }
                };
                class M extends WbSpaModel {
                    constructor() {
                        var e;
                        super(),
                            (this.navbarContainer =
                                document.querySelector(".j-navbar-mobile")),
                            (this.currentType = k.getType()),
                            (this.menuModel = {
                                type: this.currentType,
                                catalogState: !1,
                                router: this.$router,
                                isPremium:
                                    !!this.$auth.isAuth &&
                                    (null ==
                                    (e = this.$user.getUserGradeFromCache())
                                        ? void 0
                                        : e.isPremium),
                            }),
                            (this.catalogState = !1);
                    }
                    get menuLink() {
                        return this.navbarMenuLink;
                    }
                    get types() {
                        return k.types;
                    }
                    async init() {
                        await $.views.helpers.loadTemplateAsync(
                            "mobileMenuTemp"
                        ),
                            this._init(),
                            (this.navbarMenuLink =
                                document.querySelector("#catalogNavbarLink"));
                    }
                    _init() {
                        this._bindEvents(),
                            $.templates.mobileMenuTemp.link(
                                this.navbarContainer,
                                this
                            ),
                            $.link(!0, this.navbarContainer, this);
                    }
                    sendAnalytics(e) {
                        const t = e.target.closest(".navbar-mobile__link");
                        t &&
                            this.$analitic.sendEvent("Header_T", {
                                name: t.dataset.wbaHeaderName,
                            });
                    }
                    showPopupLoginMobile(e) {
                        !1 === this.$auth.isAuth &&
                            (e.preventDefault(), this.$auth.loginPopup());
                    }
                    setType(e) {
                        (this.catalogState = e == this.types.CATALOG),
                            this.catalogState
                                ? (e = null)
                                : (this.currentType = e),
                            $.observable(this.menuModel).setProperty({
                                catalogState: this.catalogState,
                                type: e,
                            });
                    }
                    setCatalog() {
                        this.setType("catalog");
                    }
                    isCatalog() {
                        return this.catalogState;
                    }
                    isNavbarLink(e) {
                        return !!e.closest(".navbar-mobile__link");
                    }
                    revertActive() {
                        this.setType(this.currentType);
                    }
                    updatePremiumState() {
                        var e;
                        $.observable(this.menuModel).setProperty({
                            isPremium:
                                null == (e = this.$user.getUserGradeFromCache())
                                    ? void 0
                                    : e.isPremium,
                        });
                    }
                    updateBasket(e) {
                        $.observable(this.menuModel).setProperty({
                            basketCount: e,
                        });
                    }
                    updateEvents(e) {
                        $.observable(this.menuModel).setProperty({
                            eventsModel: e,
                        });
                    }
                    _bindEvents() {
                        window.addEventListener("spaTransition", (e) => {
                            e.detail.isFinished ||
                                ((this.currentType = k.getType()),
                                this.$eventBus.dispatchEvent(
                                    new CustomEvent("MobileMenuTypeChange", {
                                        detail: {
                                            currentType: this.currentType,
                                        },
                                    })
                                ));
                        }),
                            this.$eventBus.addEventListener(
                                "OnlineChatInited",
                                (e) => {
                                    this.$eventBus.dispatchEvent(
                                        new CustomEvent(
                                            "MobileMenuTypeChange",
                                            {
                                                detail: {
                                                    currentType:
                                                        this.currentType,
                                                    isInit: !0,
                                                },
                                            }
                                        )
                                    );
                                }
                            ),
                            this.$eventBus.addEventListener(
                                "MobileMenuTypeChange",
                                (e) => {
                                    const { currentType: t } = e.detail;
                                    let r = "";
                                    switch (t) {
                                        case k.types.HOME:
                                        case k.types.BASKET:
                                        case k.types.PONED:
                                        case k.types.ARCHIVE:
                                        case k.types.ORDERS:
                                        case k.types.PROFILE:
                                        case k.types.SUBSCRIPTION:
                                        case k.types.CONTACTS:
                                            r = t;
                                            break;
                                        case k.types.SECURITY:
                                            r = k.types.PROFILE;
                                    }
                                    this.setType(r);
                                }
                            ),
                            this.$eventBus.addEventListener(
                                "UserGradeUpdated",
                                this.updatePremiumState.bind(this)
                            );
                    }
                }
                var P = M;
                var T = class {
                    constructor(e) {
                        (this.delay = e.delay),
                            (this.menuContainer = e.menuContainer),
                            (this.timerId = null),
                            (this.updateFirstLvlMenuTask = null),
                            (this.success = !1),
                            (this.menuItemsUpdated = null),
                            (this.getFullEcomInfo = e.getFullEcomInfo);
                    }
                    lazyUpdateMenu() {
                        this.timerId = setTimeout(
                            this._setUpdateFirstLvlMenuTask.bind(this),
                            this.delay
                        );
                    }
                    async forceUpdateMenu() {
                        this._setUpdateFirstLvlMenuTask();
                        try {
                            const e = await this.updateFirstLvlMenuTask;
                            return Promise.resolve(e);
                        } catch (e) {
                            return Promise.reject(null);
                        }
                    }
                    reloadMenu() {
                        (this.updateFirstLvlMenuTask = null),
                            this.forceUpdateMenu();
                    }
                    _stopUpdatingMenu() {
                        this.timerId && clearTimeout(this.timerId);
                    }
                    _setUpdateFirstLvlMenuTask() {
                        (this.updateFirstLvlMenuTask && this.success) ||
                            (this.updateFirstLvlMenuTask =
                                this._updateFirstLvlMenu()),
                            this._stopUpdatingMenu();
                    }
                    async _updateFirstLvlMenu() {
                        const [e] = await Promise.all([
                                wb.spa.getCatalogMenu(),
                                $.views.loadTemplateDictionaryAsync(
                                    "menuTopTmpl"
                                ),
                            ]),
                            t = e.fullMenu;
                        return (
                            (this.menuItemsUpdated =
                                await this._addMenuItemsFirstLvl(
                                    t,
                                    this.menuContainer
                                )),
                            this.menuContainer.addEventListener(
                                "click",
                                (e) => {
                                    e.target.closest(
                                        'a[href="/subscription"]'
                                    ) && this.setEntryPointWBClub();
                                }
                            ),
                            (this.success = !0),
                            Promise.resolve(e)
                        );
                    }
                    setEntryPointWBClub() {
                        window.localStorage.setItem(
                            "entryPointWBClub",
                            "Catalog"
                        );
                    }
                    async _addMenuItemsFirstLvl(e, t) {
                        var r;
                        const s = t.querySelector(".menu-burger__main-list");
                        let n = s.querySelectorAll(".j-menu-main-item"),
                            o = null,
                            i = !0,
                            a = 0;
                        const l = s.getAttribute("lang");
                        for (let t = 0; t < e.length; t++) {
                            const c = e[t];
                            if (
                                (i && (o = null == n ? void 0 : n[a]),
                                c.id ==
                                    (null ==
                                    (r = null == o ? void 0 : o.dataset)
                                        ? void 0
                                        : r.menuId) && l === wb.currentLanguage)
                            ) {
                                (i = !0), a++;
                                continue;
                            }
                            i = !1;
                            const u = $.templates.menuFirstLvlTmpl.render(c);
                            o
                                ? o.insertAdjacentHTML("beforebegin", u)
                                : s.insertAdjacentHTML("beforeend", u);
                        }
                        if (
                            ((n = t.querySelectorAll(".j-menu-main-item")),
                            e.length < n.length)
                        )
                            for (let t = e.length; t < n.length; t++)
                                n[t].remove();
                        return Promise.resolve(n);
                    }
                };
                class A extends WbSpaModel {
                    constructor(e) {
                        super(),
                            (this.mobileMenu = new P()),
                            (this.layoutModel = e.layoutModel),
                            (this.menuBtn =
                                document.querySelector(".j-menu-burger-btn")),
                            (this.menuContainer =
                                document.querySelector(".j-menu-burger")),
                            (this.mainMenuContainer =
                                this.menuContainer.querySelector(
                                    ".j-menu-burger-main"
                                )),
                            (this.header = document.querySelector(".j-header")),
                            (this.wrapper =
                                document.querySelector(".j-wrapper")),
                            (this.fixedBlock =
                                document.querySelector(".j-fixed-block")),
                            (this.widthScrollbar = Math.abs(
                                window.innerWidth -
                                    document.documentElement.clientWidth
                            )),
                            (this.bodyOverflowClass = "body--overflow"),
                            (this.menuContainerActiveClass =
                                "menu-burger--active"),
                            (this.innerMenuContainerActiveClass =
                                "menu-burger__drop--active"),
                            (this.innerMenuItemActiveClass =
                                "menu-burger__drop-list-item--active"),
                            (this.menuActiveClass = "j-menu-active"),
                            (this.mainMenuItemActiveClass =
                                "menu-burger__main-list-item--active"),
                            (this.headerFixedClass = "header--fixed"),
                            (this.headerFixedAnimateClass =
                                "header--fixed-animate"),
                            (this.menuItemActiveClass =
                                "menu-burger__drop-list-item--active"),
                            (this.menuBtnCloseClass =
                                "nav-element__burger--close"),
                            (this.menuOverlay = this._getMenuOverlay(
                                document.body.querySelector(".j-menu-burger")
                            )),
                            (this._menuOpenHandler =
                                this._menuOpenHandler.bind(this)),
                            (this._menuCloseHandler =
                                this._menuCloseHandler.bind(this)),
                            (this.firstLvlMenuUpdater = new T({
                                menuContainer: this.menuContainer,
                                delay: 12e3,
                            })),
                            this.firstLvlMenuUpdater.lazyUpdateMenu();
                    }
                    get headerFixedScrollTop() {
                        return this.$isDesktop ? 24 : 400;
                    }
                    get mainMenuItems() {
                        var e;
                        return (
                            null == (e = this.firstLvlMenuUpdater)
                                ? void 0
                                : e.menuItemsUpdated
                        )
                            ? this.firstLvlMenuUpdater.menuItemsUpdated
                            : this.menuContainer.querySelectorAll(
                                  ".menu-burger__main-list-item"
                              );
                    }
                    isMenuOpened() {
                        return this.menuContainer.classList.contains(
                            this.menuContainerActiveClass
                        );
                    }
                    async init() {
                        this._bindB2BEvent(),
                            await this.mobileMenu.init(),
                            this._bindEvents(),
                            this._initMobileSearchbar(!this.$isDesktop);
                    }
                    _initMobileSearchbar(e) {
                        const t = this.mobileMenu.types;
                        let r = 0,
                            s = !1,
                            n = "";
                        function o() {
                            s ||
                                (window.requestAnimationFrame(a.bind(this)),
                                (s = !0));
                        }
                        o = o.bind(this);
                        const i = (e, t) => {
                            e
                                ? (this.header.classList.add(
                                      this.headerFixedClass
                                  ),
                                  window.requestAnimationFrame(() =>
                                      this.header.classList.add(
                                          this.headerFixedAnimateClass
                                      )
                                  ))
                                : (t &&
                                      this.header.classList.remove(
                                          this.headerFixedClass
                                      ),
                                  window.requestAnimationFrame(() =>
                                      this.header.classList.remove(
                                          this.headerFixedAnimateClass
                                      )
                                  ));
                        };
                        function a() {
                            const e = window.scrollY;
                            if (Math.abs(e - r) < 0) return void (s = !1);
                            if (e <= this.headerFixedScrollTop)
                                return i(!1, !0), void (s = !1);
                            const t = e > r;
                            t && "down" != n
                                ? (this.$isDesktop ? i(!0) : i(!1),
                                  (n = "down"))
                                : t || "up" == n || (i(!0), (n = "up")),
                                (r = e > 0 ? e : 0),
                                (s = !1);
                        }
                        const l = (e) => {
                            const { currentType: r } = e.detail;
                            r == t.PRODUCTCARD
                                ? this.header.classList.add("hide-mobile")
                                : this.header.classList.remove("hide-mobile"),
                                r == t.HOME || r == t.SERVICES
                                    ? window.addEventListener("scroll", o)
                                    : (this.header.classList.remove(
                                          this.headerFixedClass,
                                          this.headerFixedAnimateClass
                                      ),
                                      window.removeEventListener("scroll", o));
                        };
                        this.$eventBus.addEventListener(
                            "MobileMenuTypeChange",
                            l
                        );
                        l({
                            detail: {
                                currentType: k.getType(),
                            },
                        });
                    }
                    async _renderInnerMenu() {
                        var e, t;
                        const [r, s] = await Promise.all([
                                this.layoutModel.$moduleLoader.loadModuleAsync(
                                    "sideMenu"
                                ),
                                this.firstLvlMenuUpdater.forceUpdateMenu(),
                            ]),
                            n =
                                this.layoutModel.$services.bannersService.getMenuBanners(),
                            o = new r(this.menuContainer, s, n);
                        return (
                            o.checkMenuItemForHide(
                                o.menuItems,
                                null ==
                                    (t =
                                        null == (e = this.$geoLocation)
                                            ? void 0
                                            : e.location)
                                    ? void 0
                                    : t.destinations
                            ),
                            o.relinkModel(),
                            (o.onSearchImage = () => this._onMenuHide()),
                            o
                        );
                    }
                    _bindEvents() {
                        var e, t, r;
                        this.menuBtn.addEventListener(
                            "mousedown",
                            this._menuOpenHandler
                        ),
                            null ==
                                (t =
                                    null == (e = this.mobileMenu)
                                        ? void 0
                                        : e.menuLink) ||
                                t.addEventListener(
                                    "mousedown",
                                    this._menuOpenHandler
                                ),
                            null == (r = wb.displayModeSettings) ||
                                r.addObserver(() => {
                                    this._onMenuHide(),
                                        this._initMobileSearchbar(
                                            !this.$isDesktop
                                        );
                                }),
                            window.addEventListener("spaTransition", (e) => {
                                e.detail.isFinished && this._onMenuHide();
                            }),
                            this.$eventBus.addEventListener(
                                "HideSideMenu",
                                () => {
                                    this.isMenuOpened() &&
                                        (document.body.classList.remove(
                                            this.bodyOverflowClass
                                        ),
                                        (document.body.style.paddingRight =
                                            ""));
                                }
                            ),
                            this.$eventBus.addEventListener(
                                "SelectedSideMenuItemUpdated",
                                (e) => {
                                    const { menuId: t } = e.detail;
                                    this.mainMenuItems.forEach((e) =>
                                        e.classList.toggle(
                                            this.mainMenuItemActiveClass,
                                            e.dataset.menuId == t
                                        )
                                    );
                                }
                            );
                    }
                    _bindB2BEvent() {
                        this.$eventBus.addEventListener(
                            "B2BModeToggled",
                            () => {
                                const e = document.querySelector(".j-logo");
                                e &&
                                    (e.dataset.business =
                                        wb.i18n.t("header.forBusiness")),
                                    this.header.classList.toggle(
                                        "is-b2b-mode",
                                        wb.settings.b2bMode
                                    );
                            }
                        );
                    }
                    _bindMenuCloseHandlers() {
                        document.addEventListener(
                            "mousedown",
                            this._menuCloseHandler
                        );
                    }
                    _unbindMenuCloseHandlers() {
                        document.removeEventListener(
                            "mousedown",
                            this._menuCloseHandler
                        );
                    }
                    _menuOpenHandler(e) {
                        if (
                            this.isMenuOpened() ||
                            (!this.$isDesktop && this.mobileMenu.isCatalog())
                        )
                            return;
                        e.stopPropagation(), e.preventDefault();
                        const t = e.currentTarget;
                        let r =
                            "touchstart" === e.type ? "touchend" : "mouseup";
                        const s = () => {
                            t.removeEventListener(r, s),
                                this.layoutModel.$helper
                                    .loadCssAsync(wb.settings.styles.menuBurger)
                                    .then(() => this._onMenuShow());
                        };
                        t.addEventListener(r, s),
                            this.visibleCertItemMenu &&
                                wb.analitics.sendEvent("Certificate_S", {
                                    location: "Catalog",
                                });
                    }
                    _menuCloseHandler(e) {
                        var t;
                        const r = e.target,
                            s = this;
                        if (
                            !(
                                (this.$isDesktop &&
                                    r.closest(`.${this.menuActiveClass}`)) ||
                                (!this.$isDesktop &&
                                    !this.mobileMenu.isNavbarLink(r) &&
                                    !this.menuBtn.contains(r))
                            )
                        )
                            if (this.$isDesktop) {
                                let t = function () {
                                    r.removeEventListener(s, t), n();
                                };
                                const r = e.currentTarget,
                                    s =
                                        "touchstart" === e.type
                                            ? "touchend"
                                            : "mouseup";
                                r.addEventListener(s, t);
                            } else
                                null == (t = this.sideMenu) ||
                                    t.touchHandlerHelper(e, n);
                        function n() {
                            s._onMenuHide();
                        }
                    }
                    refreshMenu(e) {
                        e &&
                            (wb.spa.clearCatalogMenu(),
                            this.firstLvlMenuUpdater.reloadMenu()),
                            (this.isSubMenuShowerActivated = !1),
                            (this.menuRendered = !1),
                            !this.$isDesktop &&
                                this.isMenuOpened() &&
                                this._onMenuShow();
                    }
                    async _onMenuShow() {
                        var e;
                        if (
                            (document.body.classList.add(
                                this.bodyOverflowClass
                            ),
                            (this.wrapper.style.paddingRight = `${this.widthScrollbar}px`),
                            (this.header.style.paddingRight = `${this.widthScrollbar}px`),
                            (this.header.style.marginRight = `-${this.widthScrollbar}px`),
                            (this.fixedBlock.style.marginRight = `${this.widthScrollbar}px`),
                            "d" === wb.settings.displayMode &&
                                scrollY <= this.header.offsetHeight &&
                                document.documentElement.style.setProperty(
                                    "--scroll-top",
                                    window.scrollY + "px"
                                ),
                            this.menuContainer.classList.add(
                                this.menuContainerActiveClass
                            ),
                            this.mainMenuContainer.classList.add(
                                this.menuActiveClass
                            ),
                            this.menuBtn.classList.add(this.menuBtnCloseClass),
                            this.menuOverlay.show(),
                            !this.$isDesktop && this.mobileMenu.setCatalog(),
                            this._bindMenuCloseHandlers(),
                            this.menuRendered)
                        )
                            null == (e = this.sideMenu) ||
                                e.clearShownBanners();
                        else {
                            const e = await this._renderInnerMenu();
                            (this.sideMenu = e),
                                this.mainMenuItems.forEach((e) => {
                                    var t, r, s;
                                    if (
                                        !this.$isDesktop &&
                                        ("2192" === e.dataset.id ||
                                            "4853" === e.dataset.id)
                                    )
                                        return;
                                    const n = this.sideMenu.findItem(
                                        e.dataset.menuId
                                    );
                                    n &&
                                        (((null == (t = n.childs)
                                            ? void 0
                                            : t.length) > 0 ||
                                            (null == (r = n.banners)
                                                ? void 0
                                                : r.length) > 0) &&
                                            e.classList.add(
                                                "menu-burger__main-list-item--subcategory"
                                            ),
                                        e.classList.toggle(
                                            "hide",
                                            null != (s = n.hide) && s
                                        ),
                                        1234 === n.id &&
                                            ((this.visibleCertItemMenu = !0),
                                            wb.analitics.sendEvent(
                                                "Certificate_S",
                                                {
                                                    location: "Catalog",
                                                }
                                            )));
                                }),
                                (this.menuRendered = !0);
                        }
                        this._menuMainHoverHandler();
                    }
                    _onMenuHide() {
                        var e, t;
                        null == (e = this.sideMenu) ||
                            e.changeSelectedMenuItem(null),
                            null == (t = this.sideMenu) || t.innerMenuHide(),
                            (this.wrapper.style.paddingRight = ""),
                            (this.header.style.marginRight = ""),
                            (this.header.style.paddingRight = ""),
                            (this.fixedBlock.style.marginRight = ""),
                            document.body.classList.remove(
                                this.bodyOverflowClass
                            ),
                            this.menuContainer.classList.remove(
                                this.menuContainerActiveClass
                            ),
                            this.mainMenuContainer.classList.remove(
                                this.menuActiveClass
                            ),
                            this.menuBtn.classList.remove(
                                this.menuBtnCloseClass
                            ),
                            this.menuOverlay.hide(),
                            !this.$isDesktop && this.mobileMenu.revertActive(),
                            this._unbindMenuCloseHandlers();
                    }
                    _menuMainHoverHandler() {
                        !this.isSubMenuShowerActivated &&
                            this.$isDesktop &&
                            (this.layoutModel.$moduleLoader
                                .loadModuleAsync("subMenuShower")
                                .then(
                                    (e) =>
                                        new e(this.mainMenuItems, {
                                            over: (e) => {
                                                this.$isDesktop &&
                                                    this.sideMenu.onMenuSelected(
                                                        e
                                                    );
                                            },
                                            out: () => {},
                                            timeout: 30,
                                            interval: 40,
                                            sensitivity: 4,
                                        })
                                ),
                            (this.isSubMenuShowerActivated = !0));
                    }
                    _getMenuOverlay(e) {
                        const t = e;
                        let r;
                        function s() {
                            r && r.remove(), (r = null);
                        }
                        return {
                            show: function () {
                                "m" != wb.settings.displayMode
                                    ? r ||
                                      (t.insertAdjacentHTML(
                                          "beforebegin",
                                          '<div class="overlay overlay--menu-burger j-overlay"></div>'
                                      ),
                                      (r =
                                          e.parentElement.querySelector(
                                              ".j-overlay"
                                          )))
                                    : s();
                            },
                            hide: s,
                        };
                    }
                }
                var D = A,
                    B = Object.defineProperty,
                    O = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? B(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                const E = "cookie_accepted",
                    x = "_cp";
                var L = class {
                        constructor(e) {
                            O(this, "layoutModel"),
                                O(this, "cookiesWrapper"),
                                O(this, "channel"),
                                O(this, "href"),
                                (this.layoutModel = e.layoutModel),
                                (this.cookiesWrapper = document.querySelector(
                                    ".j-fixed-block .fixed-block__cookies"
                                )),
                                (this.href =
                                    "/services/politika-obrabotki-personalnyh-dannyh"),
                                "ge" === wb.settings.currentLocale &&
                                    (this.href =
                                        "/services/politika-konfidentsialnosti"),
                                "by" === wb.settings.currentLocale &&
                                    (this.href = "/services/cookies-policy"),
                                this.check();
                        }
                        disable() {
                            wb.cookieHelper.deleteCookie(x),
                                window.location.reload();
                        }
                        async _show() {
                            var e;
                            (null == (e = this.cookiesWrapper)
                                ? void 0
                                : e.classList.contains("hide")) &&
                                (await $.views.helpers.loadTemplateAsync(
                                    "cookies"
                                ),
                                $.templates.cookies.link(
                                    this.cookiesWrapper,
                                    this
                                ),
                                $.link(!0, this.cookiesWrapper, this),
                                this.cookiesWrapper.classList.remove("hide"),
                                this.layoutModel.$analitic.sendEvent(
                                    "Alert_S",
                                    {
                                        name: "cookies_alert",
                                    }
                                ),
                                window.BroadcastChannel &&
                                    ((this.channel = new BroadcastChannel(
                                        "_cookiePolicy"
                                    )),
                                    this.channel.addEventListener(
                                        "message",
                                        this._hide.bind(this)
                                    )));
                        }
                        _hide() {
                            var e, t, r;
                            (null == (e = this.cookiesWrapper)
                                ? void 0
                                : e.classList.contains("hide")) ||
                                (null == (t = this.cookiesWrapper) ||
                                    t.classList.add("hide"),
                                $.unlink(this.cookiesWrapper),
                                null == (r = this.channel) || r.close(),
                                (this.channel = null),
                                this.layoutModel.$eventBus.dispatchEvent(
                                    new CustomEvent("CookiePolicyHide")
                                ));
                        }
                        check() {
                            const e =
                                "1" === wb.cookieHelper.getCookie(x) ||
                                "true" ===
                                    localStorage.getItem("wbx__cookieAccepted");
                            return (
                                e
                                    ? this._hide()
                                    : "false" !== sessionStorage.getItem(E) &&
                                      this._show(),
                                e
                            );
                        }
                        ok() {
                            var e;
                            const t = this.check();
                            t ||
                                wb.cookieHelper.setCookie(x, "1", {
                                    "max-age": 7776e3,
                                }),
                                this.cookiesWrapper &&
                                    (null == (e = this.channel) ||
                                        e.postMessage("hide"),
                                    this._hide(),
                                    t ||
                                        this.layoutModel.$analitic.sendEvent(
                                            "Alert_T",
                                            {
                                                name: "cookies_alert",
                                                type: "ok",
                                            }
                                        ));
                        }
                        no() {
                            sessionStorage.setItem(E, "false"),
                                this._hide(),
                                this.layoutModel.$analitic.sendEvent(
                                    "Alert_T",
                                    {
                                        name: "cookies_alert",
                                        type: "no",
                                    }
                                );
                        }
                        cookies() {
                            this.layoutModel.$analitic.sendEvent("Alert_T", {
                                name: "cookies_alert",
                                type: "cookies",
                            });
                        }
                    },
                    j = Object.defineProperty,
                    F = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? j(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                class N extends WbSpaModel {
                    constructor() {
                        super(),
                            F(this, "initTask", null),
                            F(this, "header", null),
                            F(this, "cookiePolicy", null),
                            F(this, "footer", null),
                            F(this, "menuTop", null),
                            (this.initTask = new this.$helper.Deferred()),
                            (this._initWba = this._initWba.bind(this));
                    }
                    preInit() {
                        const e = {
                            layoutModel: this,
                        };
                        (this.header = new f(e)),
                            (this.cookiePolicy = new L(e)),
                            ["by", "ge"].includes(wb.settings.currentLocale)
                                ? this.cookiePolicy.check()
                                    ? this._initWba()
                                    : (this._initWba(!0),
                                      this.$eventBus.addEventListener(
                                          "CookiePolicyHide",
                                          () => {
                                              var e;
                                              (
                                                  null ==
                                                  (e = this.cookiePolicy)
                                                      ? void 0
                                                      : e.check()
                                              )
                                                  ? this._initWba()
                                                  : (window.wba =
                                                        function () {});
                                          },
                                          {
                                              once: !0,
                                          }
                                      ))
                                : this._initWba();
                    }
                    init() {
                        var e;
                        const t = {
                            layoutModel: this,
                        };
                        (this.footer = new C()), (this.menuTop = new D(t));
                        const r = this.menuTop.init(),
                            s = this.footer.init(),
                            n = null == (e = this.header) ? void 0 : e.init();
                        Promise.all([s, n, r]).then(() => {
                            var e;
                            return null == (e = this.initTask)
                                ? void 0
                                : e.resolve(void 0);
                        });
                    }
                    _initWba(e = !1) {
                        var t, r, s, n, o, i, a;
                        wb.settings.secondHost &&
                            Object.defineProperty(window, "wba-url", {
                                get() {
                                    return this._wbaUrl;
                                },
                                set() {
                                    this._wbaUrl = `https://${wb.settings.secondHost}/a.wb/e`;
                                },
                            }),
                            (t = window),
                            (r = document),
                            (s = "script"),
                            (n = wb.settings.secondHost
                                ? `https://${wb.settings.secondHost}/a.wb/sdk/sdk.js`
                                : "https://a.wb.ru/sdk/sdk.js"),
                            (t[(o = "wba")] =
                                t[o] ||
                                function () {
                                    (t[o].q = t[o].q || []).push(arguments);
                                }),
                            (t[o].l = Date.now()),
                            e ||
                                ((i = r.createElement(s)),
                                (a = r.getElementsByTagName(s)[0]),
                                (i.async = 1),
                                (i.src = n),
                                a.parentNode.insertBefore(i, a));
                        const l =
                            -1 === window.location.hostname.indexOf("napi")
                                ? 4
                                : 35;
                        wba("init", {
                            counterId: l,
                        });
                    }
                    updateAfterLogin() {
                        var e, t;
                        this.$user.reset(),
                            null == (e = this.header) ||
                                e.shortBasketInfo.update(),
                            this.$geoLocation.updateLocation(),
                            this.$router.clearNotActiveContainer(),
                            null == (t = this.header) || t.updateSwitcher(),
                            this.$storageHelper.removeDb("files_v2_0");
                    }
                }
                Object.defineProperties(window, {
                    MainLayoutSpa: {
                        value: N,
                    },
                });
                var W = N;
            },
            14685: function (e, t) {
                "use strict";
                t.A = Object.freeze({
                    main: 1,
                    goods: 2,
                    search: 3,
                    brand: 4,
                    brandConstructor: 5,
                    brandConstructorCatalog: 6,
                    seller: 7,
                    sellerCustomMain: 9,
                    promoEntry: 11,
                    categoryDenyLink: 12,
                    recommendationsSearch: 13,
                });
            },
            70972: function (e, t) {
                "use strict";
                var r = Object.defineProperty,
                    s = (e, t, s) =>
                        ((e, t, s) =>
                            t in e
                                ? r(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: s,
                                  })
                                : (e[t] = s))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            s
                        );
                const n = 6048e5,
                    o = "__catalogOptions";
                class i {
                    constructor() {
                        s(this, "sort", "popular"),
                            s(this, "cardSize", "c516x688");
                    }
                    setValues(e, t) {
                        e && (this.sort = e), t && (this.cardSize = t);
                    }
                }
                class a {
                    static updateCatalogOptions(e, t) {
                        const r = a._getCatalogOptionsFromCache();
                        "cardSize" === e && (r.cardSize = t),
                            "sort" === e && (r.sort = t),
                            a._updateAllOptions(r);
                    }
                    static _updateAllOptions(e) {
                        localStorage.putObject(o, {
                            expired: Date.now() + n,
                            data: e,
                        });
                    }
                    static getCatalogOptionsValueByKey(e) {
                        return a._getCatalogOptionsFromCache()[e];
                    }
                    static _getCatalogOptionsFromCache() {
                        const e = localStorage.getObject(o),
                            t = new i();
                        return (
                            null != e && e.data && e.expired > Date.now() - n
                                ? t.setValues(e.data.sort, e.data.cardSize)
                                : a._updateAllOptions(t),
                            t
                        );
                    }
                }
                t.A = a;
            },
            21048: function () {
                "use strict";
                let e = null;
                const t = new (class {
                    constructor() {
                        (this.body = document.body), (this.scrollY = 0);
                    }
                    enable() {
                        this.body &&
                            ((this.scrollY = window.scrollY), this.addStyles());
                    }
                    disable() {
                        this.body &&
                            (this.removeStyles(),
                            window.scrollTo(0, this.scrollY));
                    }
                    addStyles() {
                        this.body &&
                            ((this.body.style.position = "fixed"),
                            (this.body.style.top = -1 * this.scrollY + "px"),
                            (this.body.style.right = "0px"),
                            (this.body.style.bottom = "0px"),
                            (this.body.style.left = "0px"));
                    }
                    removeStyles() {
                        this.body &&
                            (this.body.style.removeProperty("position"),
                            this.body.style.removeProperty("top"),
                            this.body.style.removeProperty("right"),
                            this.body.style.removeProperty("bottom"),
                            this.body.style.removeProperty("left"));
                    }
                })();
                function r(e, t = 0) {
                    return () => {
                        (e.style.top =
                            Math.max(
                                document.documentElement.clientHeight / 2 +
                                    window.scrollY -
                                    e.clientHeight / 2 +
                                    t,
                                window.scrollY + t
                            ) + "px"),
                            (e.style.left =
                                Math.max(
                                    document.documentElement.clientWidth / 2 -
                                        e.clientWidth / 2,
                                    0
                                ) + "px");
                    };
                }
                function s(e) {
                    const t = document.createElement("div");
                    return t.classList.addMany(e), t;
                }
                function n(e, t) {
                    const r = document.createElement("a");
                    (r.href = "#"),
                        t.push("close"),
                        r.classList.addMany(t),
                        e.appendChild(r);
                }
                function o(e, t, r, s, n, o) {
                    const i = document.createElement("div");
                    if (
                        (null != s &&
                            Array.isArray(s) &&
                            i.classList.addMany(s),
                        r)
                    )
                        i.innerHTML = t;
                    else if (o) {
                        let t = document.querySelector(o),
                            r = document.createElement("span");
                        (r.id = "popup_pc"),
                            t.parentElement.insertBefore(r, t),
                            (e.placeholder = document.getElementById(r.id)),
                            i.appendChild(t);
                    } else i.textContent = t;
                    null != n &&
                        Object.entries(n).forEach(([e, t]) =>
                            i.setAttribute(e, t)
                        ),
                        e.appendChild(i);
                }
                function i(e, t, r) {
                    const s = document.createElement("button");
                    s.classList.addMany(r || []),
                        (s.textContent = t),
                        e.appendChild(s);
                }
                function a(e) {
                    if (!e) return 0;
                    const t = document.querySelectorAll(".j-custom-overlay");
                    let r = 0;
                    return (
                        t.forEach((e) => {
                            r = Math.max(r, e.style.zIndex);
                        }),
                        r
                    );
                }
                function l(t, r, s, n) {
                    var o, i, l;
                    let c;
                    const u = (e) => {
                        var t;
                        e instanceof Event && e.preventDefault(),
                            (null == (t = n.onBeforeHide)
                                ? void 0
                                : t.call(n)) ||
                                (r.classList.remove("shown"),
                                !n.keepOpenOnTransition &&
                                    window.removeEventListener(
                                        "spaTransition",
                                        c
                                    ),
                                window.removeEventListener("keydown", d, !0),
                                Promise.resolve().then(() => {
                                    var t;
                                    null == (t = n.onHide) || t.call(n, e);
                                }));
                    };
                    (c = () => {
                        u();
                    }),
                        !n.keepOpenOnTransition &&
                            window.addEventListener("spaTransition", c);
                    const d = (e) => {
                        27 == e.keyCode &&
                            (u(e),
                            window.removeEventListener("keydown", d, !0));
                    };
                    (n.modal || null == n.modal) &&
                        (window.addEventListener("keydown", d, !0),
                        setTimeout(() =>
                            null == s ? void 0 : s.addEventListener("click", u)
                        )),
                        (null == (o = n.closeSelector) ? void 0 : o.length) >
                            0 &&
                            r.addEventListener(
                                "click",
                                this.$helper.delegator(n.closeSelector, u)
                            ),
                        null != e && (e.close(), (e = null));
                    const p = a(s);
                    s && (s.style.zIndex = p + 300),
                        (r.style.zIndex = p + 311),
                        t.appendChild(r),
                        s && t.appendChild(s),
                        null == (i = n.onBeforeShow) || i.call(n, r),
                        document.body.insertBefore(t, document.body.firstChild),
                        null == (l = n.onShow) || l.call(n, r);
                    const h = {
                        popup: r,
                        overlay: s,
                        close: (e) => u(e),
                        centered: n.centeredFunction,
                    };
                    return n.onlyOne && (e = h), h;
                }
                function c(e, t, a, c = !0, u = !1) {
                    e instanceof Error
                        ? (e =
                              e.isCustomError && !e.isCancelled && e.message
                                  ? e.message
                                  : wb.i18n.t("common.errors.serverError"))
                        : e || (e = wb.i18n.t("common.errors.serverError"));
                    const d = document.createDocumentFragment();
                    let p = ["popup", "popup-alert", "shown"];
                    t && (Array.isArray(t) ? (p = p.concat(t)) : p.push(t));
                    const h = s(p);
                    d.appendChild(h),
                        u && n(h, ["popup__close"]),
                        o(h, e, !0),
                        null !== a &&
                            i(h, a || wb.i18n.t("common.close"), [
                                "popup__btn-main",
                                "popup-alert__close",
                            ]);
                    const m = document.createElement("div");
                    m.classList.addMany([
                        "overlay",
                        "initially-hidden",
                        "j-custom-overlay",
                    ]);
                    const g = r(h);
                    window.addEventListener("resize", g),
                        l.call(this, d, h, m, {
                            onlyOne: !0,
                            closeSelector: ".popup-alert__close, .popup__close",
                            modal: c,
                            onShow: function () {
                                (h.style.display = "block"), g();
                            },
                            onHide: function () {
                                window.removeEventListener("resize", g),
                                    h.remove(),
                                    m.remove();
                            },
                        });
                }
                function u(e, t = {}) {
                    const r = {
                        msg: e,
                        lockScroll: !0,
                        modal: !1,
                        showCloseBtn: !0,
                        useHtml: !0,
                        contentClasses: ["content"],
                        popupClassesList: [
                            "shown",
                            "tooltip",
                            "tooltip--mobile",
                            ...((null == t ? void 0 : t.classes) || []),
                        ],
                        useCenteredFunction: !0,
                        onShow: (e) => e.classList.remove("popup"),
                    };
                    return wb.popup.showCustomPopup(r);
                }
                function d(e, t, i, a) {
                    const c = document.createDocumentFragment(),
                        u = s(t);
                    n(u, ["j-close"]),
                        o(
                            u,
                            e,
                            !0,
                            [
                                "content",
                                "quick-order-popup-content",
                                "j-sizepicker-content",
                            ],
                            null
                        );
                    const d = document.createElement("div");
                    d.classList.addMany([
                        "overlay",
                        "initially-hidden",
                        "j-custom-overlay",
                    ]),
                        (u.id = "size-picker-popup"),
                        (u.style.opacity = "0");
                    const p = r(u);
                    window.addEventListener("resize", p),
                        l.call(this, c, u, d, {
                            closeSelector: ".j-close",
                            onHide: function () {
                                window.removeEventListener("resize", p),
                                    u.remove(),
                                    d.remove(),
                                    null == a || a();
                            },
                            onShow: function () {
                                (u.style.display = "block"),
                                    p(),
                                    (u.style.opacity = "1"),
                                    null == i || i(u);
                            },
                        });
                }
                function p(e) {
                    const i = this.$helper.deepMerge(
                            {},
                            {
                                overlay: !0,
                                showCross: !0,
                                useHtml: !1,
                                popupClassesList: [],
                                contentClasses: [],
                                overlayClasses: [],
                                contentAttributeDictionary: {},
                                msg: "",
                                closeClass: ["j-close", "popup__close"],
                                modal: !0,
                                closeSelector: ".j-close",
                                useCenteredFunction: !1,
                                lockScroll: !1,
                                lockScrollMobile: !1,
                                lockScrollPreviewProduct: !1,
                                onlyOne: !1,
                                hasAnimation: !1,
                            },
                            e
                        ),
                        c = document.createDocumentFragment(),
                        u = s(["popup"].concat(i.popupClassesList));
                    u.dataset.lockScroll = i.lockScroll ? "true" : "false";
                    const d = document.querySelector(".j-fixed-block"),
                        p = document.querySelector(".j-header"),
                        h = document.querySelector(".j-wrapper");
                    i.showCross && n(u, i.closeClass),
                        o(
                            u,
                            i.msg,
                            i.useHtml,
                            i.contentClasses,
                            i.contentAttributeDictionary,
                            i.srcElem
                        ),
                        i.showCloseBtn &&
                            (function (e, t) {
                                const r = document.createElement("button");
                                (r.innerText = wb.i18n.t("common.close")),
                                    !t.length && t.push("close"),
                                    r.classList.addMany(t),
                                    e.appendChild(r);
                            })(u, i.closeClass);
                    const m = i.overlay ? document.createElement("div") : null;
                    if (m) {
                        const e = [
                            "overlay",
                            "initially-hidden",
                            "j-custom-overlay",
                        ].concat(i.overlayClasses);
                        m.classList.addMany(e);
                    }
                    let g;
                    if (i.useCenteredFunction) {
                        const e = i.hasAnimation ? 40 : 0;
                        (g = r(u, e)), window.addEventListener("resize", g);
                    }
                    return l.call(this, c, u, m, {
                        onBeforeHide: () => {
                            var e;
                            return null == (e = i.onBeforeHide)
                                ? void 0
                                : e.call(i);
                        },
                        onHide: function (e, r) {
                            var s, n, o, l, c;
                            if (
                                null == (s = i.onBeforeHide)
                                    ? void 0
                                    : s.call(i)
                            )
                                return;
                            !i.lockScroll ||
                                (null == r ? void 0 : r.keepLockScroll) ||
                                i.keepLockScroll ||
                                (document.body.classList.remove(
                                    "body--overflow"
                                ),
                                h && (h.style.paddingRight = ""),
                                d && (d.style.marginRight = ""),
                                p &&
                                    ((p.style.paddingRight = ""),
                                    (p.style.marginRight = ""))),
                                i.lockScrollPreviewProduct &&
                                    document.body.classList.remove(
                                        "body--overflow-preview-kt"
                                    ),
                                !i.lockScrollMobile ||
                                    (null == r ? void 0 : r.keepLockScroll) ||
                                    i.keepLockScroll ||
                                    (document.body.classList.remove(
                                        "body--overflow-mobile"
                                    ),
                                    WbSpaModel.prototype.$isDesktop ||
                                        t.disable()),
                                i.useCenteredFunction &&
                                    window.removeEventListener("resize", g),
                                i.srcElem &&
                                    (null ==
                                        (o =
                                            null == (n = u.placeholder)
                                                ? void 0
                                                : n.parentElement) ||
                                        o.insertBefore(
                                            document.querySelector(i.srcElem),
                                            u.placeholder
                                        ),
                                    null == (l = u.placeholder) || l.remove());
                            const b = 27 == (null == e ? void 0 : e.keyCode);
                            if (i.hasAnimation && !i.onlyOne && !b) {
                                document.querySelectorAll(".overlay").length >
                                    1 &&
                                    document.body.classList.add(
                                        "body--overflow"
                                    );
                            }
                            if (
                                i.hasAnimation &&
                                "d" === wb.settings.displayMode
                            ) {
                                u.classList.add("popup--disappear");
                                const t = a(m);
                                u.style.zIndex = t + 1;
                                const r =
                                    document.querySelectorAll("body>div.popup");
                                setTimeout(() => {
                                    var t;
                                    null == (t = i.onHide) || t.call(i, u, e),
                                        u.remove(),
                                        null == m || m.remove(),
                                        document
                                            .querySelector("body")
                                            .classList.remove("no-scroll"),
                                        !i.onlyOne &&
                                            r[1] &&
                                            ((r[1].style.visibility =
                                                "visible"),
                                            r[1].classList.add(
                                                "popup--appear"
                                            ));
                                }, 400);
                            } else if (
                                (null == (c = i.onHide) || c.call(i, u, e),
                                u.remove(),
                                null == m || m.remove(),
                                i.hasAnimation && !i.onlyOne)
                            ) {
                                const e =
                                    document.querySelectorAll("body>div.popup");
                                e[0] && (e[0].style.visibility = "visible");
                            }
                        },
                        onShow: () => {
                            var e;
                            if (
                                (document.activeElement.blur(),
                                i.lockScroll &&
                                    !document.body.classList.contains(
                                        "body--overflow"
                                    ))
                            ) {
                                const e = Math.abs(
                                    window.innerWidth -
                                        document.documentElement.clientWidth
                                );
                                document.body.classList.add("body--overflow"),
                                    h && (h.style.paddingRight = `${e}px`),
                                    d && (d.style.marginRight = `${e}px`),
                                    p &&
                                        ((p.style.paddingRight = `${e}px`),
                                        p.classList.contains("header--fixed") ||
                                            (p.style.marginRight = `-${e}px`));
                            }
                            i.lockScrollPreviewProduct &&
                                !document.body.classList.contains(
                                    "body--overflow-preview-kt"
                                ) &&
                                document.body.classList.add(
                                    "body--overflow-preview-kt"
                                ),
                                i.lockScrollMobile &&
                                    !document.body.classList.contains(
                                        "body--overflow-mobile"
                                    ) &&
                                    (document.body.classList.add(
                                        "body--overflow-mobile"
                                    ),
                                    WbSpaModel.prototype.$isDesktop ||
                                        t.enable());
                            const r = () => {
                                    (u.style.opacity = 1),
                                        i.useCenteredFunction && g(),
                                        i.hasAnimation &&
                                            u.classList.add("popup--appear");
                                },
                                s = this.$helper
                                    .nextTick()
                                    .then(() => (r(), Promise.resolve()));
                            if (
                                (Object.defineProperty(u, "contentEl", {
                                    get() {
                                        return u.querySelector(
                                            ".popup__content"
                                        );
                                    },
                                }),
                                i.onShowAsync
                                    ? i.onShowAsync(u).then(r)
                                    : null == (e = i.onShow) || e.call(i, u, s),
                                i.hasAnimation && !i.onlyOne)
                            ) {
                                [...document.querySelectorAll("body>div.popup")]
                                    .slice(1)
                                    .forEach((e) => {
                                        (e.style.visibility = "hidden"),
                                            e.classList.remove("popup--appear");
                                    });
                            }
                        },
                        onBeforeShow: function () {
                            var e;
                            (u.style.opacity = 0),
                                (u.style.display = "block"),
                                null == (e = i.onBeforeShow) || e.call(i, u);
                        },
                        modal: i.modal,
                        closeSelector: i.closeSelector,
                        centeredFunction: g,
                        onlyOne: i.onlyOne,
                        keepOpenOnTransition: i.keepOpenOnTransition,
                    });
                }
                function h(e, t) {
                    let r;
                    const s = this.$helper,
                        n = wb.popup.showCustomPopup({
                            useHtml: !0,
                            popupClassesList: ["popup-video", "shown"],
                            contentClasses: ["content"],
                            useCenteredFunction: !0,
                            msg: $.templates(
                                '<h2 class="popup__header">{{>title}}</h2><div class="video"><video id="videoPlayer" class="video-js vjs-default-skin vjs-big-play-centered vjs-waiting" width="855" controls autoplay preload></video></div>'
                            )({
                                title: t,
                            }),
                            onBeforeShow: (e) => {
                                (e.style.opacity = 0),
                                    (e.style.display = "block");
                            },
                            onShow: (t) => {
                                (r = videojs("videoPlayer", {
                                    html5: {
                                        nativeAudioTracks: !1,
                                        nativeVideoTracks: !1,
                                        hls: {
                                            overrideNative: !0,
                                        },
                                    },
                                })),
                                    r.ready(function () {
                                        this.src({
                                            src: e,
                                            type: "application/x-mpegURL",
                                            withCredentials: !0,
                                        });
                                    }),
                                    s.nextTick().then(() => {
                                        (t.style.opacity = 1), n.centered();
                                    });
                            },
                            onHide: () => {
                                r.isDisposed() ||
                                    (r.isInPictureInPicture() &&
                                        r.exitPictureInPicture(),
                                    r.dispose());
                            },
                        });
                }
                function m(e, t = {}) {
                    return new Promise((c) => {
                        var u, d, p, h;
                        document.activeElement.blur();
                        let m = null != (u = t.hasAnimation) && u;
                        const g = document.createDocumentFragment();
                        let b = ["popup", "popup-confirm", "shown"];
                        t.classList && (b = b.concat(t.classList));
                        let y = ["popup__btn-main", "j-yes"],
                            v = ["popup__btn-base", "j-no"];
                        t.yesBtnClassList && (y = t.yesBtnClassList),
                            t.noBtnClassList && (v = t.noBtnClassList);
                        const f = s(b);
                        (f.style.display = "block"),
                            m && (f.style.opacity = "0"),
                            (t.contentClasses = t.contentClasses || []),
                            t.contentClasses.push("popup__msg"),
                            o(f, e, !0, t.contentClasses);
                        let w = document.createElement("div");
                        w.classList.add("popup__btn", "btn-block"),
                            f.appendChild(w);
                        const S = [];
                        if (
                            ((null == (d = t.showYesBtn) || d) &&
                                S.push(() =>
                                    i(w, t.yes || wb.i18n.t("common.yes"), y)
                                ),
                            (null == (p = t.showNoBtn) || p) &&
                                S.push(() =>
                                    i(w, t.no || wb.i18n.t("common.no"), v)
                                ),
                            t.inverseBtns && S.reverse(),
                            S.forEach((e) => e()),
                            t.showCross && n(f, ["popup__close"]),
                            t.lockScroll &&
                                !document.body.classList.contains(
                                    "body--overflow"
                                ))
                        ) {
                            const e = Math.abs(
                                window.innerWidth -
                                    document.documentElement.clientWidth
                            );
                            document.body.classList.add("body--overflow"),
                                (document.body.style.paddingRight = `${e}px`);
                        }
                        const _ = document.createElement("div");
                        let C;
                        if (
                            (_.classList.addMany([
                                "overlay",
                                "initially-hidden",
                                "j-custom-overlay",
                            ]),
                            t.useCenteredFunction)
                        ) {
                            (C = r(f, m ? 40 : 0)),
                                window.addEventListener("resize", C);
                        }
                        const I = l.call(this, g, f, _, {
                            onHide: function () {
                                if (m) {
                                    f.classList.add("popup--disappear");
                                    const e = a(_);
                                    (f.style.zIndex = e + 1),
                                        null == _ || _.remove();
                                    const t =
                                        document.querySelectorAll(
                                            "body>div.popup"
                                        );
                                    setTimeout(() => {
                                        f.remove(),
                                            document
                                                .querySelector("body")
                                                .classList.remove("no-scroll"),
                                            t[1] &&
                                                ((t[1].style.visibility =
                                                    "visible"),
                                                t[1].classList.add(
                                                    "popup--appear"
                                                )),
                                            c(!1);
                                    }, 400);
                                } else f.remove(), _.remove(), c(!1);
                                if (
                                    (t.lockScroll &&
                                        (document.body.classList.remove(
                                            "body--overflow"
                                        ),
                                        (document.body.style.paddingRight =
                                            "")),
                                    t.useCenteredFunction &&
                                        window.removeEventListener("resize", C),
                                    m && !t.onlyOne)
                                ) {
                                    document.querySelectorAll(".overlay")
                                        .length > 1 &&
                                        document.body.classList.add(
                                            "body--overflow"
                                        );
                                }
                            },
                            onShow: function () {
                                var e;
                                const s = f.querySelector(".popup__back");
                                if ((r(f)(), m)) {
                                    (f.style.opacity = "1"),
                                        f.classList.add("popup--appear");
                                    [
                                        ...document.querySelectorAll(
                                            "body>div.popup"
                                        ),
                                    ]
                                        .slice(1)
                                        .forEach((e) => {
                                            (e.style.visibility = "hidden"),
                                                e.classList.remove(
                                                    "popup--appear"
                                                );
                                        });
                                }
                                f
                                    .querySelector(
                                        y.map((e) => "." + e).join("")
                                    )
                                    .addEventListener("click", (e) => {
                                        c(!0), I.close();
                                    }),
                                    null ==
                                        (e = f.querySelector(
                                            v.map((e) => "." + e).join("")
                                        )) ||
                                        e.addEventListener("click", (e) => {
                                            c(!1), I.close();
                                        }),
                                    s &&
                                        s.addEventListener("click", () => {
                                            t.backBtnCallback(), I.close();
                                        });
                            },
                            modal: null != (h = t.modal) && h,
                            closeSelector: t.showCross ? ".popup__close" : null,
                            onlyOne: t.onlyOne,
                            hasAnimation: m,
                        });
                    });
                }
                function g(e, { width: t = 600, height: r = 500 } = {}) {
                    const s = [
                        `top=${
                            Math.floor(
                                (window.screenY || window.screenTop || 0) +
                                    (window.outerHeight - r) / 2
                            ) || 0
                        }`,
                        `left=${
                            Math.floor(
                                (window.screenX || window.screenLeft || 0) +
                                    (window.outerWidth - t) / 2
                            ) || 0
                        }`,
                        `width=${t}`,
                        `height=${r}`,
                        "status=0",
                        "toolbar=0",
                    ];
                    return null != window.open(e, "", s.join(","));
                }
                class b extends WbSpaModel {
                    renderModalError() {
                        return c.apply(this, arguments);
                    }
                    renderModalAdaptive() {
                        return u.apply(this, arguments);
                    }
                    showCustomPopup() {
                        return p.apply(this, arguments);
                    }
                    confirm() {
                        return m.apply(this, arguments);
                    }
                    videoPlayer() {
                        return h.apply(this, arguments);
                    }
                    showSizePickerPopup() {
                        return d.apply(this, arguments);
                    }
                    browserPopup() {
                        return g.apply(this, arguments);
                    }
                    showFeedbackError(e) {
                        let t = null;
                        return (
                            e
                                ? e.isCancelled
                                    ? (t = null)
                                    : ("string" == typeof e.message ||
                                          e.message instanceof String) &&
                                      (t = e.message)
                                : (t = null),
                            $.views
                                .loadTemplateAsync("popupErrorUnbuy")
                                .then((e) => {
                                    wb.popup.showCustomPopup({
                                        useHtml: !0,
                                        msg: e.render({
                                            errorMessage: t,
                                        }),
                                        popupClassesList: [
                                            "popup-error-unbuy",
                                            "shown",
                                        ],
                                        contentClasses: ["popup__content"],
                                        useCenteredFunction: !0,
                                        modal: !0,
                                    });
                                })
                        );
                    }
                }
                wb.popup = new b();
            },
            86485: function () {
                "use strict";
                Array.prototype.findLast ||
                    (Array.prototype.findLast = function (e, t) {
                        for (let r = this.length - 1; r >= 0; r--)
                            if (e.call(t, this[r], r, this)) return this[r];
                    }),
                    String.prototype.replaceAll ||
                        (String.prototype.replaceAll = function (e, t) {
                            return "[object regexp]" ===
                                Object.prototype.toString.call(e).toLowerCase()
                                ? this.replace(e, t)
                                : this.replace(new RegExp(e, "g"), t);
                        }),
                    Array.prototype.flatMap ||
                        (Array.prototype.flatMap = function (e, t) {
                            const r = t || this;
                            if (null == r)
                                throw new TypeError(
                                    "Array.prototype.flatMap called on null or undefined"
                                );
                            if ("function" != typeof e)
                                throw new TypeError(e + " is not a function");
                            let s = [];
                            const n = Object(r),
                                o = n.length >>> 0;
                            for (let t = 0; t < o; t++)
                                if (t in n) {
                                    const o = e.call(r, n[t], t, n);
                                    s = s.concat(o);
                                }
                            return s;
                        });
            },
            57964: function (e, t, r) {
                "use strict";
                r.d(t, {
                    A: function () {
                        return p;
                    },
                });
                var s = Object.defineProperty,
                    n = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? s(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                class o {
                    constructor(e, t) {
                        n(this, "state"),
                            n(this, "previous"),
                            n(this, "next"),
                            (this.state = e),
                            (this.previous = t),
                            (this.next = null);
                    }
                    updateNext(e) {
                        this.next = e;
                    }
                    updatePrevious(e) {
                        this.previous = e;
                    }
                    update(e) {
                        this.state = e;
                    }
                }
                var i = Object.defineProperty,
                    a = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? i(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                class l {
                    constructor() {
                        a(this, "head"),
                            a(this, "current"),
                            (this.head = null),
                            (this.current = null);
                    }
                    push(e) {
                        const t = new o(e, this.current);
                        null == this.head || null == this.current
                            ? (this.head = t)
                            : this.current.updateNext(t),
                            (this.current = t);
                    }
                    tryUpdateCurrrent(e) {
                        return (
                            null != this.current && (this.current.update(e), !0)
                        );
                    }
                    findCurrent(e) {
                        const { id: t } = e;
                        let r = this.head;
                        for (; r; ) {
                            if (r.state.id == t) {
                                this.current = r;
                                break;
                            }
                            r = r.next;
                        }
                    }
                    tryRevokeFromCache(e) {
                        const t = e.reduce(
                            (e, t) => (e.set(t.state, new o(t.state, null)), e),
                            new Map()
                        );
                        e.forEach((e) => {
                            const r = t.get(e.state);
                            if (e.next) {
                                const s = t.find((t) => t.state.id == e.next);
                                null == r || r.updateNext(s);
                            }
                            if (e.previous) {
                                const s = t.find(
                                    (t) => t.state.id == e.previous
                                );
                                null == r || r.updatePrevious(s);
                            }
                        });
                        const r = t.find((e) => null == e.previous);
                        return !!r && ((this.head = r), !0);
                    }
                    toJSON() {
                        var e, t;
                        let r = this.head;
                        const s = [];
                        for (; r; )
                            s.push({
                                state: r.state,
                                next:
                                    null == (e = r.next) ? void 0 : e.state.id,
                                previous:
                                    null == (t = r.previous)
                                        ? void 0
                                        : t.state.id,
                            }),
                                (r = r.next);
                        return s;
                    }
                    canMove(e) {
                        let t = this.current,
                            r = e > 0 ? -1 : 1,
                            s = e > 0 ? "next" : "previous",
                            n = e;
                        for (; 0 != n; ) {
                            if (null == t) return;
                            (t = t[s]), (n += r);
                        }
                        return !0;
                    }
                }
                var c = Object.defineProperty,
                    u = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? c(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                const d = "spa_history";
                var p = class {
                    constructor() {
                        u(this, "history"), (this.history = new l());
                    }
                    addItem(e) {
                        this.history.push(e), this._updateCache();
                    }
                    tryInitFromCache(e) {
                        const t = sessionStorage.getObject(d);
                        return (
                            t &&
                                e &&
                                this.history.tryRevokeFromCache(t) &&
                                this.history.findCurrent(e),
                            this
                        );
                    }
                    updateCurrent(e) {
                        this.history.findCurrent(e);
                    }
                    updateCurrentItem(e) {
                        this.history.tryUpdateCurrrent(e) ||
                            this.history.push(e),
                            this._updateCache();
                    }
                    canMove(e) {
                        return this.history.canMove(e);
                    }
                    _updateCache() {
                        sessionStorage.putObject(d, this.history);
                    }
                    static generateId() {
                        return WbSpaModel.prototype.$generateGuid();
                    }
                };
            },
            93141: function (
                __unused_webpack_module,
                __webpack_exports__,
                __webpack_require__
            ) {
                "use strict";
                var app_loadReactApp__WEBPACK_IMPORTED_MODULE_3__ =
                        __webpack_require__(86797),
                    features_core_Observable__WEBPACK_IMPORTED_MODULE_0__ =
                        __webpack_require__(70322),
                    _utils_core__WEBPACK_IMPORTED_MODULE_1__ =
                        __webpack_require__(52890),
                    _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_2__ =
                        __webpack_require__(57964),
                    __defProp = Object.defineProperty,
                    __getOwnPropSymbols = Object.getOwnPropertySymbols,
                    __hasOwnProp = Object.prototype.hasOwnProperty,
                    __propIsEnum = Object.prototype.propertyIsEnumerable,
                    __defNormalProp = (e, t, r) =>
                        t in e
                            ? __defProp(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r),
                    __spreadValues = (e, t) => {
                        for (var r in t || (t = {}))
                            __hasOwnProp.call(t, r) &&
                                __defNormalProp(e, r, t[r]);
                        if (__getOwnPropSymbols)
                            for (var r of __getOwnPropSymbols(t))
                                __propIsEnum.call(t, r) &&
                                    __defNormalProp(e, r, t[r]);
                        return e;
                    },
                    __objRest = (e, t) => {
                        var r = {};
                        for (var s in e)
                            __hasOwnProp.call(e, s) &&
                                t.indexOf(s) < 0 &&
                                (r[s] = e[s]);
                        if (null != e && __getOwnPropSymbols)
                            for (var s of __getOwnPropSymbols(e))
                                t.indexOf(s) < 0 &&
                                    __propIsEnum.call(e, s) &&
                                    (r[s] = e[s]);
                        return r;
                    },
                    __publicField = (e, t, r) =>
                        __defNormalProp(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                const DEFAULT_PREVIEW = "preview_General",
                    APP_CONTAINERS = Object.freeze([
                        {
                            containerId: 0,
                            viewModel: null,
                        },
                        {
                            containerId: 1,
                            viewModel: null,
                        },
                        {
                            containerId: 2,
                            viewModel: null,
                        },
                    ]),
                    VIEW_MODEL_STATUSES = Object.freeze({
                        prepearing: 0,
                        readyToInstall: 1,
                        installed: 2,
                        destroyed: 3,
                    }),
                    VALID_EXTERNAL_DOMAINS = Object.freeze([
                        "vmeste.wildberries.ru",
                        "vmeste-stage.wildberries.ru",
                        "digital.wildberries.ru",
                        "vsemrabota.ru",
                        "guru.wildberries.ru",
                        "guru-stage.wildberries.ru",
                        "travel.wildberries.ru",
                        "digital.wb.ru",
                        "seller.wildberries.ru",
                        "career.wb.ru",
                    ]);
                class RouterState extends features_core_Observable__WEBPACK_IMPORTED_MODULE_0__.c {
                    constructor() {
                        super(...arguments),
                            __publicField(this, "showPreview", !1);
                    }
                }
                class Router {
                    constructor() {
                        __publicField(this, "$localziation"),
                            __publicField(this, "abortController"),
                            __publicField(this, "activeContainer"),
                            __publicField(this, "clientRenderInited"),
                            __publicField(this, "current"),
                            __publicField(this, "currentRoute"),
                            __publicField(this, "customHistory"),
                            __publicField(
                                this,
                                "initTask",
                                new _utils_core__WEBPACK_IMPORTED_MODULE_1__.Deferred()
                            ),
                            __publicField(this, "isLeaving"),
                            __publicField(this, "loadingTemplate"),
                            __publicField(this, "queryParams"),
                            __publicField(this, "referrer"),
                            __publicField(this, "routeParameters"),
                            __publicField(this, "routesDictionary"),
                            __publicField(this, "state", new RouterState()),
                            __publicField(this, "targetRoute"),
                            __publicField(this, "tmplHashes"),
                            __publicField(this, "userIsAuth");
                    }
                    async init(e) {
                        var t, r, s, n;
                        (this.customHistory =
                            new _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_2__.A().tryInitFromCache(
                                window.history.state
                            )),
                            (this.abortController = new AbortController()),
                            (this.routeParameters = {}),
                            (this.clientRenderInited = !1),
                            (this.referrer = document.referrer),
                            Object.defineProperty(document, "referrer", {
                                get: function () {
                                    return WbSpaModel.prototype.$router
                                        .referrer;
                                },
                            });
                        let o =
                            null ==
                            (t = this._findRoute(window.location.pathname))
                                ? void 0
                                : t.name;
                        if (!o) {
                            try {
                                const e =
                                    await WbSpaModel.prototype.$httpClient.fetchJSON(
                                        `/webapi/check-redirect${window.location.pathname}${window.location.search}`
                                    );
                                (null == e ? void 0 : e.redirect) &&
                                    (o =
                                        null ==
                                        (r = this._findRoute(
                                            window.location.pathname
                                        ))
                                            ? void 0
                                            : r.name);
                            } catch (e) {}
                            if (!o)
                                return (
                                    this._bindEvents(), this.moveTo404Async()
                                );
                        }
                        (this.currentRoute = this.routesDictionary[o]),
                            (this.targetRoute = o),
                            this._bindEvents();
                        const i = this.routesDictionary[o].useSSR;
                        return (
                            i ||
                                (this.current = $.templates["preview_" + o]
                                    ? "preview_" + o
                                    : DEFAULT_PREVIEW),
                            (null == (s = window.history.state)
                                ? void 0
                                : s.name) ||
                                this._replaceState(
                                    {
                                        name: o,
                                    },
                                    document.title,
                                    window.location.href
                                ),
                            (this.loadingTemplate = o),
                            null == (n = this.initTask) || n.resolve(null),
                            i && null != e
                                ? this._initSSR(e, o)
                                : this._routerTransitionAsync(
                                      o,
                                      window.location,
                                      !0
                                  )
                                      .then((e) => Promise.resolve(e))
                                      .catch((e) => {
                                          var t;
                                          return (
                                              console.log(e),
                                              e.isCancelled ||
                                                  this.moveTo500Async(),
                                              null == (t = this.initTask) ||
                                                  t.resolve(null),
                                              Promise.resolve()
                                          );
                                      })
                        );
                    }
                    setData(e, t) {
                        (this.routesDictionary = e), (this.tmplHashes = t);
                    }
                    get appContainers() {
                        return APP_CONTAINERS;
                    }
                    get previewTemplate() {
                        return DEFAULT_PREVIEW;
                    }
                    get viewModel() {
                        var e;
                        return null ==
                            (e = this.appContainers.find(
                                (e) => e.containerId == this.activeContainer
                            ))
                            ? void 0
                            : e.viewModel;
                    }
                    refresh() {
                        const e = this.currentRoute;
                        this.clearNotActiveContainer(),
                            this.goToRoute(e, window.location, !0);
                    }
                    clearNotActiveContainer() {
                        this.appContainers
                            .filter(
                                (e) => e.containerId !== this.activeContainer
                            )
                            .forEach((e) => {
                                var t, r;
                                null !== e.viewModel &&
                                    ((null == (t = e.viewModel)
                                        ? void 0
                                        : t.__modelStatus__) !=
                                        VIEW_MODEL_STATUSES.destroyed &&
                                        (null == (r = e.viewModel) ||
                                            r.onBeforeUnrender()),
                                    (e.viewModel = null));
                            });
                    }
                    move(e, t) {
                        var r;
                        const s = null == t ? void 0 : t.currentTarget;
                        null == (null == s ? void 0 : s.href)
                            ? window.history.go(e)
                            : (null == (r = this.customHistory)
                                  ? void 0
                                  : r.canMove(e)) &&
                              (null == t || t.preventDefault(),
                              window.history.go(e));
                    }
                    moveTo(e, t = !1, r = !1, s = !1) {
                        var n, o, i;
                        let a;
                        try {
                            a = new URL(e, window.location.origin);
                        } catch (e) {
                            return !1;
                        }
                        if ("javascript:" === a.protocol) return !1;
                        if (VALID_EXTERNAL_DOMAINS.includes(a.host))
                            return (window.location.href = a.toString()), !1;
                        const l = this._findRoute(a.pathname);
                        if (
                            null == l ||
                            null == this.routesDictionary[l.name] ||
                            a.hostname !== window.location.hostname
                        )
                            return (
                                (this.isLeaving = !0),
                                t
                                    ? window.location.replace(
                                          encodeURIComponent(String(e))
                                      )
                                    : (window.location.href = String(e))
                            );
                        if (
                            ((this.isLeaving = !1),
                            (null == (n = this.currentRoute)
                                ? void 0
                                : n.name) === l.name &&
                                window.dispatchEvent(
                                    new CustomEvent("spaTransition", {
                                        detail: {
                                            isFinished: !0,
                                            dest: l,
                                        },
                                    })
                                ),
                            a.pathname === window.location.pathname &&
                                window.location.search === a.search &&
                                !r)
                        )
                            return (
                                null ==
                                    (i =
                                        null == (o = this.viewModel)
                                            ? void 0
                                            : o.onSamePageNavigation) ||
                                    i.call(o, e),
                                void window.dispatchEvent(
                                    new CustomEvent("samePageNavigation", {
                                        detail: {
                                            targetLink: e,
                                        },
                                    })
                                )
                            );
                        (this.targetRoute = l.name),
                            (this.referrer = window.location.href);
                        const c = {
                                name: l.name,
                            },
                            u =
                                WbSpaModel.prototype.$analitic.getTempAnalyticForState();
                        u && (c.analyticData = u),
                            t
                                ? this._replaceState(c, document.title, a.href)
                                : this._pushState(c, document.title, a.href),
                            this.goToRoute(l, a, s)
                                .then((e) => {
                                    e &&
                                        this._replaceState(
                                            c,
                                            document.title,
                                            a.href
                                        );
                                })
                                .catch(() => {});
                    }
                    goToRoute(e, t, r = !1) {
                        return (
                            window.dispatchEvent(
                                new CustomEvent("spaTransition", {
                                    detail: {
                                        isFinished: !1,
                                        dest: e,
                                    },
                                })
                            ),
                            this._routerTransitionAsync(e.name, t, !1, r, !0)
                        );
                    }
                    getAppliedEntries() {
                        var e;
                        const t =
                            document &&
                            (null == (e = document.currentScript)
                                ? void 0
                                : e.src);
                        let r;
                        return (
                            (r =
                                "currentScript" in document
                                    ? t.includes("static-basket")
                                        ? t.substring(
                                              t.indexOf(
                                                  wb.settings.siteStaticPath
                                              ) +
                                                  wb.settings.siteStaticPath
                                                      .length -
                                                  1
                                          )
                                        : t.replace(window.origin, "")
                                    : this.routesDictionary[
                                          this.loadingTemplate
                                      ].requiredModel),
                            Object.keys(this.routesDictionary).filter(
                                (e) =>
                                    this.routesDictionary[e].requiredModel === r
                            )
                        );
                    }
                    prepareUrl(e) {
                        if (null == e.routePathSegments) return e.path;
                        const t = e.routePathSegments
                            .reduce((e, t) => {
                                e += "/";
                                const r = t.name;
                                return (
                                    t.isParameter && r
                                        ? (!t.isOptional ||
                                              (t.isOptional &&
                                                  null !=
                                                      this.routeParameters[
                                                          r
                                                      ])) &&
                                          (e += this.routeParameters[r])
                                        : (e += t.content),
                                    e
                                );
                            }, "")
                            .replace(/[\/\?]$/, "");
                        return e.externalPath ? e.externalPath + t : t;
                    }
                    addState(e, t, r) {
                        var s;
                        this._pushState(
                            __spreadValues(
                                {
                                    isLocalHandler: !0,
                                    name:
                                        (null == (s = this.currentRoute)
                                            ? void 0
                                            : s.name) || "",
                                },
                                e
                            ),
                            null != t ? t : "",
                            null != r ? r : ""
                        );
                    }
                    replaceState(e, t, r) {
                        var s;
                        this._replaceState(
                            __spreadValues(
                                {
                                    isLocalHandler: !0,
                                    name:
                                        (null == (s = this.currentRoute)
                                            ? void 0
                                            : s.name) || "",
                                },
                                e
                            ),
                            null != t ? t : "",
                            null != r ? r : ""
                        );
                    }
                    _pushState(e, t, r) {
                        var s;
                        const n =
                            _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_2__.A.generateId();
                        (e.id = n),
                            window.history.pushState(e, t, r),
                            null == (s = this.customHistory) || s.addItem(e);
                    }
                    _replaceState(e, t, r) {
                        var s;
                        (e.id =
                            _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_2__.A.generateId()),
                            (e.title = t),
                            window.history.replaceState(e, "", r),
                            null == (s = this.customHistory) ||
                                s.updateCurrentItem(e);
                    }
                    initCSR() {
                        const e = Object.create(WbSpaModel.prototype, {
                            router: {
                                value: this,
                            },
                        });
                        $.link.appTemplate("#app", e),
                            (this.clientRenderInited = !0);
                    }
                    async updateRouteDataExternal(e, t) {
                        var r;
                        (t =
                            t ||
                            (null == (r = this.currentRoute)
                                ? void 0
                                : r.name) ||
                            ""),
                            await this._updateRouteData(t, e);
                    }
                    async moveTo404Async() {
                        var e;
                        try {
                            const t =
                                    await WbSpaModel.prototype.$moduleLoader.loadModuleAsync(
                                        "error404"
                                    ),
                                r = new t(t.data, t.template);
                            await r.showErrorPage(),
                                (null == (e = this.currentRoute)
                                    ? void 0
                                    : e.useReact) && this._unmountReact(),
                                window.dispatchEvent(
                                    new CustomEvent("spaTransition", {
                                        detail: {
                                            isFinished: !0,
                                        },
                                    })
                                );
                        } catch (e) {
                            console.error(e), $.link.criticalError("#app");
                        }
                    }
                    async moveTo500Async(e, t) {
                        try {
                            await this._updateRouteData("criticalError");
                        } catch (e) {
                            console.error(e),
                                this._updateRouteData("absoluteCriticalError");
                        } finally {
                            wb.spa.logError(e, t, !0);
                        }
                    }
                    async loadRouteDataAsync(e, t = 0, r = !1, s = !1) {
                        var n, o, i, a, l, c, u, d, p, h, m;
                        const g = WbSpaModel.prototype.$routeExtensions.extend(
                            null == e ? void 0 : e.name
                        );
                        let b = {};
                        try {
                            if (!e) {
                                return {
                                    viewData: {},
                                    needStateUpdate: !1,
                                };
                            }
                            (b = {
                                url: new URL(
                                    `${this.prepareUrl(e)}?${
                                        null == (n = this.queryParams)
                                            ? void 0
                                            : n.toString()
                                    }`,
                                    window.location.origin
                                ),
                                params: {
                                    method: "POST",
                                },
                                options: {
                                    redirectUnauth: !0,
                                    replaceState: !0,
                                    includeResponse: !0,
                                },
                            }),
                                await Promise.all(
                                    (null !=
                                    (o = null == g ? void 0 : g.pipelines)
                                        ? o
                                        : []
                                    ).map((e) => {
                                        var r;
                                        return null ==
                                            (r = e.onBeforeActionExecuting)
                                            ? void 0
                                            : r.call(
                                                  e,
                                                  b.url,
                                                  b.params,
                                                  b.options,
                                                  s,
                                                  t
                                              );
                                    })
                                );
                            const r = [];
                            (null == (i = b.options)
                                ? void 0
                                : i.cancelRequest) ||
                            (null == (a = b.options) ? void 0 : a.redirected)
                                ? r.push(Promise.resolve({}))
                                : r.push(
                                      WbSpaModel.prototype.$httpClient.fetchJSON(
                                          String(b.url),
                                          b.params,
                                          b.options
                                      )
                                  ),
                                r.push(
                                    ...(null !=
                                    (l = null == g ? void 0 : g.pipelines)
                                        ? l
                                        : []
                                    ).map((e) => {
                                        var r;
                                        return null == (r = e.onActionExecuting)
                                            ? void 0
                                            : r.call(
                                                  e,
                                                  b.url,
                                                  b.params,
                                                  b.options,
                                                  s,
                                                  t
                                              );
                                    })
                                );
                            const [m] = await Promise.all(r);
                            (null == (c = b.options) ? void 0 : c.redirected) ||
                                (await Promise.all(
                                    (null !=
                                    (u = null == g ? void 0 : g.pipelines)
                                        ? u
                                        : []
                                    ).map((e) => {
                                        var t;
                                        return null == (t = e.onActionExecuted)
                                            ? void 0
                                            : t.call(e, m, s);
                                    })
                                ));
                            let y = m.responseData;
                            (null == (d = b.options)
                                ? void 0
                                : d.cancelRequest) &&
                                (null == g ? void 0 : g.fallback) &&
                                (y = null == g ? void 0 : g.fallback(b));
                            return {
                                viewData: y,
                                needStateUpdate: !1,
                                needRouteUpdate: !(
                                    null !=
                                        (h =
                                            null == (p = b.options)
                                                ? void 0
                                                : p.redirected) && h
                                ),
                            };
                        } catch (s) {
                            const n = null != (m = g.maxTriesCount) ? m : 3;
                            if (
                                s.isNotFound ||
                                s.isUnauthorize ||
                                s.isCancelled ||
                                t >= n ||
                                r
                            ) {
                                if (
                                    (null == g ? void 0 : g.fallback) &&
                                    (s.isCancelled || t >= n)
                                ) {
                                    return {
                                        viewData:
                                            null == g ? void 0 : g.fallback(b),
                                        needStateUpdate: !1,
                                    };
                                }
                                throw s;
                            }
                            return await this.loadRouteDataAsync(e, ++t);
                        }
                    }
                    moveToSignIn(e, t) {
                        let r = $.views.helpers.urlSignIn(
                            e && e.query && e.query.returnUrl
                        );
                        this.moveTo(new URL(r, window.location.href).href, t);
                    }
                    _bindEvents() {
                        window.addEventListener("popstate", (e) => {
                            var t, r, s, n;
                            WbSpaModel.prototype.$analitic.updateStatInfo(!1);
                            const {
                                name: o,
                                isLocalHandler: i,
                                title: a,
                            } = history.state;
                            if (
                                (a && (document.title = a),
                                null != this.routesDictionary[o])
                            ) {
                                if (
                                    (null == (t = this.customHistory) ||
                                        t.updateCurrent(history.state),
                                    window.dispatchEvent(
                                        new CustomEvent("spaTransition", {
                                            detail: {
                                                isFinished: !1,
                                                dest: {
                                                    name: o,
                                                },
                                            },
                                        })
                                    ),
                                    i &&
                                        (null == (r = this.currentRoute)
                                            ? void 0
                                            : r.name) == o)
                                )
                                    return (
                                        this._updateRouteParametres(
                                            window.location.pathname.substring(
                                                1
                                            ),
                                            this.currentRoute
                                        ),
                                        this._updateQueryModel(),
                                        null ==
                                            (n =
                                                null == (s = this.viewModel)
                                                    ? void 0
                                                    : s.onHistoryChange) ||
                                            n.call(
                                                s,
                                                history.state,
                                                null,
                                                {
                                                    fromPopstate: !0,
                                                },
                                                this.abortController.signal
                                            ),
                                        void window.dispatchEvent(
                                            new CustomEvent("spaTransition", {
                                                detail: {
                                                    isFinished: !0,
                                                    dest: {
                                                        name: o,
                                                    },
                                                },
                                            })
                                        )
                                    );
                                (this.targetRoute = o),
                                    this._routerTransitionAsync(o);
                            } else window.location.reload();
                        }),
                            window.addEventListener("mouseup", (e) => {
                                const t = e.target.closest("a");
                                if (!t) return !1;
                                return (
                                    0 == e.button ||
                                        1 == e.which ||
                                        (WbSpaModel.prototype.$analitic.saveEcomInfo(
                                            t
                                        ),
                                        WbSpaModel.prototype.$analitic.updateStatInfo(
                                            !0
                                        )),
                                    !0
                                );
                            }),
                            window.addEventListener("click", (e) => {
                                const t = e.target.closest("a");
                                return (
                                    !(
                                        (null == t
                                            ? void 0
                                            : t.classList.contains(
                                                  "BDC_ReloadLink"
                                              )) ||
                                        e.defaultPrevented ||
                                        e.ctrlKey ||
                                        e.metaKey
                                    ) &&
                                    (WbSpaModel.prototype.$analitic.saveEcomInfo(
                                        t
                                    ),
                                    null != t &&
                                        (t.hasAttribute("target") &&
                                        "_blank" === t.getAttribute("target")
                                            ? WbSpaModel.prototype.$analitic.updateStatInfo(
                                                  !0
                                              )
                                            : (WbSpaModel.prototype.$analitic.updateStatInfo(
                                                  !1
                                              ),
                                              e.preventDefault(),
                                              this.moveTo(t.href))),
                                    !0)
                                );
                            });
                    }
                    async _unmountReact() {
                        const { unmountReactPage: e } = await Promise.all([
                            __webpack_require__.e(89362),
                            __webpack_require__.e(63946),
                            __webpack_require__.e(81774),
                            __webpack_require__.e(70767),
                            __webpack_require__.e(31887),
                            __webpack_require__.e(96042),
                            __webpack_require__.e(48829),
                            __webpack_require__.e(14627),
                            __webpack_require__.e(37266),
                            __webpack_require__.e(64210),
                        ]).then(
                            __webpack_require__.bind(__webpack_require__, 3330)
                        );
                        e();
                        const t = document.getElementById("app");
                        t && (t.style.display = "");
                    }
                    async _routerTransitionAsync(
                        e,
                        t = window.location,
                        r = !1,
                        s = !1,
                        n = !1
                    ) {
                        this.abortController.abort(),
                            (this.abortController = new AbortController());
                        const o = this.abortController.signal,
                            i = this.currentRoute;
                        (this.currentRoute = this.routesDictionary[e]),
                            (null == i ? void 0 : i.useReact) &&
                                !this.currentRoute.useReact &&
                                this._unmountReact(),
                            wb.stat.sendPageView(),
                            WbSpaModel.prototype.$analitic.sendEvent(
                                "pageview",
                                {
                                    cookies_alert: wb.spa
                                        .getMainLayout()
                                        .cookiePolicy.check()
                                        ? 1
                                        : 0,
                                }
                            );
                        try {
                            const {
                                viewData: i,
                                needStateUpdate: a,
                                needRouteUpdate: l,
                            } = await this._loadRouteData(e, t, r, s, o);
                            return (
                                l && this._updateRouteData(e, i, o, n),
                                window.dispatchEvent(
                                    new CustomEvent("spaTransition", {
                                        detail: {
                                            isFinished: !0,
                                            dest: this.currentRoute,
                                        },
                                    })
                                ),
                                window.scrollTo(0, 0),
                                a
                            );
                        } catch (t) {
                            if (t.isNotFound) return this.moveTo404Async(), !1;
                            if (
                                !t.isCancelled &&
                                !t.isUnauthorize &&
                                null != t.message &&
                                "" != t.message
                            )
                                return (
                                    console.log(t.message),
                                    this.moveTo500Async(t, {
                                        method: "_routerTransitionAsync",
                                        destRoute: e,
                                        current: window.location.toString(),
                                        initial: r,
                                        forced: s,
                                    }),
                                    !1
                                );
                            throw t;
                        }
                    }
                    _findRoute(e) {
                        var t;
                        const r = e.substring(1).split("/"),
                            s = e.substring(1);
                        let n =
                            null !=
                            (t = Object.keys(this.routesDictionary)
                                .filter((e) => {
                                    const t = this.routesDictionary[e];
                                    return null == t.routePathSegments
                                        ? t.path === s
                                        : ("SpaCatalogEntrypoint" !== t.name ||
                                              ".aspx" !== s.slice(-5)) &&
                                              t.routePathSegments.every(
                                                  (e, t) => {
                                                      var s;
                                                      return e.isParameter
                                                          ? !(
                                                                null !=
                                                                    (s =
                                                                        null ==
                                                                        e
                                                                            ? void 0
                                                                            : e.isOptional) &&
                                                                !s
                                                            ) || r[t]
                                                          : e.content === r[t];
                                                  }
                                              );
                                })
                                .map((e) => this.routesDictionary[e]))
                                ? t
                                : [];
                        if (n.length > 1) {
                            const e = (e) => {
                                var t, r;
                                return (
                                    null !=
                                        (r =
                                            null == (t = e.routePathSegments)
                                                ? void 0
                                                : t.some(
                                                      (e) => e.isCatchAll
                                                  )) && r
                                );
                            };
                            n.sort((t, r) => Number(e(t)) - Number(e(r))),
                                (n = n.filter(
                                    (e) => "SpaCatalogEntrypoint" !== e.name
                                ));
                        }
                        return n[0];
                    }
                    async _initSSR(e, t) {
                        var r, s, n, o, i, a, l, c;
                        this.currentRoute = this.routesDictionary[t];
                        const u = this.currentRoute.requiredModel
                                ? WbSpaModel.prototype.$helper.loadJsAsync(
                                      this.currentRoute.requiredModel
                                  )
                                : Promise.resolve(),
                            d = this._loadTemplateAsync(t);
                        this._updateQueryModel(),
                            this._updateRouteParametres(
                                window.location.pathname.substring(1),
                                this.routesDictionary[t]
                            );
                        try {
                            await Promise.all([d, u]);
                            const p = wb.spa.getViewModelByName(t),
                                h = p
                                    ? new p(e, t)
                                    : Object.create(WbSpaModel.prototype, {});
                            h.fromSSR = !0;
                            const m =
                                    null !=
                                    (s =
                                        null == (r = this.currentRoute)
                                            ? void 0
                                            : r.targetContainer)
                                        ? s
                                        : 0,
                                g = this.appContainers.find(
                                    (e) => e.containerId == m
                                );
                            $.observable(g).setProperty({
                                viewModel: h,
                            }),
                                $.observable(this).setProperty({
                                    activeContainer: m,
                                });
                            const b =
                                new WbSpaModel.prototype.$helper.Deferred();
                            await (null ==
                            (o = (n = this.viewModel).onBeforeRender)
                                ? void 0
                                : o.call(n, e, b.promise)),
                                $.link(!0, "#app", this.viewModel),
                                await WbSpaModel.prototype.$helper.nextTick(),
                                null ==
                                    (a = (i = this.viewModel).onAfterRender) ||
                                    a.call(i, {
                                        data: e,
                                    }),
                                wb.stat.sendPageView();
                            const y =
                                null == (c = (l = this.viewModel).getScreenName)
                                    ? void 0
                                    : c.call(l);
                            y &&
                                WbSpaModel.prototype.$analitic.sendEvent(
                                    "Screen_V",
                                    {
                                        name: y,
                                    }
                                );
                        } catch (e) {
                            console.error(e.message);
                        }
                    }
                    async _loadRouteData(e, t, r, s, n) {
                        var o, i, a, l, c, u;
                        this._updateRouteParametres(
                            t.pathname.substring(1),
                            this.routesDictionary[e]
                        ),
                            this._updateQueryModel(t);
                        const d = this.prepareUrl(this.currentRoute);
                        WbSpaModel.prototype.menuLk().then((e) => {
                            e.updateMenu(
                                d,
                                this.currentRoute.lkMenuOptions,
                                this.userIsAuth
                            );
                        });
                        const p =
                                null !=
                                (i =
                                    null == (o = this.currentRoute)
                                        ? void 0
                                        : o.targetContainer)
                                    ? i
                                    : 0,
                            h =
                                null ==
                                (a = this.appContainers.find(
                                    (e) => e.containerId == p
                                ))
                                    ? void 0
                                    : a.viewModel,
                            m =
                                !s &&
                                null != h &&
                                h.__modelStatus__ !=
                                    VIEW_MODEL_STATUSES.destroyed &&
                                h.__routeName__ == e &&
                                null != h.onHistoryChange;
                        if (this.clientRenderInited || m)
                            if (m || r) {
                                if (m) {
                                    const e = this.activeContainer == p;
                                    return (
                                        e ||
                                            ($.observable(this).setProperty({
                                                showPreview: !0,
                                            }),
                                            (this.state.showPreview = !0)),
                                        null ==
                                            (c =
                                                null == (l = this.viewModel)
                                                    ? void 0
                                                    : l.onActiveViewChanged) ||
                                            c.call(l, !1, {
                                                sameContainer: e,
                                            }),
                                        await (null == (u = h.onHistoryChange)
                                            ? void 0
                                            : u.call(
                                                  h,
                                                  window.history.state,
                                                  s,
                                                  {},
                                                  n
                                              )),
                                        n.aborted ||
                                            ($.observable(this).setProperty({
                                                activeContainer: p,
                                                showPreview: !1,
                                            }),
                                            (this.state.showPreview = !1)),
                                        {
                                            viewData: null,
                                            needStateUpdate: !1,
                                            needRouteUpdate: !1,
                                        }
                                    );
                                }
                            } else
                                $.observable(this).setProperty({
                                    showPreview: !0,
                                }),
                                    (this.state.showPreview = !0);
                        else
                            !r &&
                                (this.current = $.templates["preview_" + e]
                                    ? "preview_" + e
                                    : DEFAULT_PREVIEW);
                        !this.currentRoute.metaTagsUrl &&
                            WbSpaModel.prototype.$seoHelper.update(d, null);
                        const g = await this._loadRequiredResoursesAsync(e);
                        return __spreadValues(
                            {
                                needRouteUpdate: !n.aborted,
                            },
                            g
                        );
                    }
                    _loadRequiredResoursesAsync(e, t = 0) {
                        this.loadingTemplate = e;
                        const r = this.routesDictionary[e],
                            s =
                                null == $.templates[e] && r.tmpl
                                    ? this._loadTemplateAsync(e, r.tmpl)
                                    : Promise.resolve(),
                            n = this.loadRouteDataAsync(r.requiredData, t, !0),
                            o = r.requiredCss
                                ? Promise.all(
                                      r.requiredCss.map(
                                          WbSpaModel.prototype.$helper
                                              .loadCssAsync
                                      )
                                  )
                                : Promise.resolve(),
                            i = r.requiredJs
                                ? Promise.all(
                                      r.requiredJs.map(
                                          WbSpaModel.prototype.$helper
                                              .loadJsAsync
                                      )
                                  )
                                : Promise.resolve(),
                            a = r.requiredModel
                                ? WbSpaModel.prototype.$helper.loadJsAsync(
                                      r.requiredModel
                                  )
                                : Promise.resolve();
                        return Promise.all([n, i, o, a, s])
                            .then(([e]) => Promise.resolve(e))
                            .catch((r) =>
                                r.isNotFound ||
                                r.isUnauthorize ||
                                r.isCancelled ||
                                t >= 3
                                    ? Promise.reject(r)
                                    : this._loadRequiredResoursesAsync(e, ++t)
                            );
                    }
                    async _updateRouteData(e, t, r, s) {
                        var n, o, i, a, l, c, u, d, p, h, m, g;
                        const b = r || this.abortController.signal,
                            y = s || !1;
                        if (b.aborted) return;
                        const v = this.routesDictionary[e];
                        if (null == v ? void 0 : v.useReact) {
                            const e = v.reactPageName,
                                { renderReactPage: r } = await (0,
                                app_loadReactApp__WEBPACK_IMPORTED_MODULE_3__.V)();
                            if (
                                (await r({
                                    reactPageName: e,
                                    viewData: t,
                                    routerState: this.state,
                                }),
                                b.aborted)
                            )
                                return;
                            const s = document.getElementById("app");
                            s && (s.style.display = "none");
                        } else
                            requestIdleCallback(() => {
                                (0,
                                app_loadReactApp__WEBPACK_IMPORTED_MODULE_3__.V)();
                            });
                        if (e.indexOf("preview_") > -1)
                            return (
                                (this.state.showPreview = !0),
                                $.observable(this).setProperty({
                                    showPreview: !0,
                                })
                            );
                        const f = wb.spa.getViewModelByName(e),
                            w = f
                                ? new f(t, e)
                                : Object.assign(
                                      Object.create(WbSpaModel.prototype),
                                      null != t ? t : {}
                                  ),
                            S =
                                null !=
                                (o =
                                    null == (n = this.currentRoute)
                                        ? void 0
                                        : n.targetContainer)
                                    ? o
                                    : 0,
                            _ = w.onBeforeRender,
                            C = w.onAfterRender,
                            I = w.onBeforeUnrender;
                        Object.defineProperties(w, {
                            __routeName__: {
                                value: e,
                            },
                            __targetContainer__: {
                                value: S,
                            },
                            __modelStatus__: {
                                value: VIEW_MODEL_STATUSES.prepearing,
                                writable: !0,
                            },
                            routeTemplate: {
                                value: e,
                            },
                            onBeforeRender: {
                                value: async function (e, t) {
                                    b.aborted ||
                                        (await (null == _
                                            ? void 0
                                            : _.call(w, e, t)),
                                        (this.__modelStatus__ =
                                            VIEW_MODEL_STATUSES.readyToInstall));
                                },
                            },
                            onAfterRender: {
                                value: async function (e, t) {
                                    b.aborted ||
                                        (await (null == C
                                            ? void 0
                                            : C.call(w, e, b, t)),
                                        (this.__modelStatus__ =
                                            VIEW_MODEL_STATUSES.installed));
                                },
                            },
                            onBeforeUnrender: {
                                value: async function (e) {
                                    await (null == I ? void 0 : I.call(w, e)),
                                        (this.__modelStatus__ =
                                            VIEW_MODEL_STATUSES.destroyed);
                                },
                            },
                        });
                        const k = null == this ? void 0 : this.viewModel;
                        if (
                            (null == k ||
                            (k.__targetContainer__ != S &&
                                null != k.onHistoryChange)
                                ? null ==
                                      (c =
                                          null ==
                                          (l =
                                              null == this
                                                  ? void 0
                                                  : this.viewModel)
                                              ? void 0
                                              : l.onActiveViewChanged) ||
                                  c.call(l, !1)
                                : await (null ==
                                  (a =
                                      null ==
                                      (i =
                                          null == this
                                              ? void 0
                                              : this.viewModel)
                                          ? void 0
                                          : i.onBeforeUnrender)
                                      ? void 0
                                      : a.call(i)),
                            b.aborted)
                        )
                            return;
                        const M = new WbSpaModel.prototype.$helper.Deferred();
                        await (null == (u = w.onBeforeRender)
                            ? void 0
                            : u.call(w, t, M.promise));
                        let P = window._debug && performance.now();
                        const T = this.appContainers.find(
                            (e) => e.containerId == S
                        );
                        (null == (d = null == T ? void 0 : T.viewModel)
                            ? void 0
                            : d.__modelStatus__) !=
                            VIEW_MODEL_STATUSES.destroyed &&
                            (null == (p = null == T ? void 0 : T.viewModel) ||
                                p.onBeforeUnrender(t)),
                            b.aborted ||
                                ($.observable(T).setProperty({
                                    viewModel: w,
                                }),
                                $.observable(this).setProperty({
                                    showPreview: !1,
                                    activeContainer: S,
                                }),
                                (this.state.showPreview = !1)),
                            this.clientRenderInited || this.initCSR(),
                            P &&
                                console.log(
                                    "[INITIAL MODEL RENDER]: ",
                                    performance.now() - P,
                                    e
                                ),
                            await WbSpaModel.prototype.$helper.nextTick(),
                            M.resolve(null),
                            null == (h = w.onAfterRender) || h.call(w, t, b),
                            y && (null == (m = w.onSpaTransition) || m.call(w));
                        const A =
                            null == (g = w.getScreenName) ? void 0 : g.call(w);
                        A &&
                            WbSpaModel.prototype.$analitic.sendEvent(
                                "Screen_V",
                                {
                                    name: A,
                                }
                            );
                    }
                    _updateRouteParametres(e, t) {
                        if (null == t.routePathSegments)
                            return void (this.routeParameters = {});
                        const r = e.split("/"),
                            s = t.routePathSegments.reduce(
                                (e, t, s) => (
                                    t.isParameter &&
                                        t.name &&
                                        (t.isCatchAll
                                            ? (e[t.name] = r.slice(s).join("/"))
                                            : (e[t.name] = r[s])),
                                    e
                                ),
                                {}
                            );
                        this.routeParameters = s;
                    }
                    _updateQueryModel(e) {
                        this.queryParams = new URLSearchParams(
                            (null != e ? e : window.location).search
                        );
                    }
                    _loadTemplateAsync(routeName, tmplNameInput) {
                        const tmplName = (
                                "string" == typeof tmplNameInput
                                    ? tmplNameInput
                                    : `${routeName.replace("Entrypoint", "")}`
                            ).toLowerCase(),
                            tmplFullName = (window._debug, `${tmplName}.json`),
                            hash = this.tmplHashes[tmplFullName],
                            path = window._debug
                                ? `${tmplFullName}?${hash}`
                                : tmplFullName.replace(
                                      ".json",
                                      `.${hash}.json`
                                  );
                        return WbSpaModel.prototype.$httpClient
                            .fetchStaticV3(
                                wb.helpers.url.urlForJsTmpl,
                                {},
                                path
                            )
                            .then((tmpl) => {
                                const _a = tmpl,
                                    { main: main, localization: localization } =
                                        _a,
                                    templates = __objRest(_a, [
                                        "main",
                                        "localization",
                                    ]);
                                if (localization)
                                    try {
                                        Object.assign(this.$localziation, {
                                            [routeName]: eval(localization),
                                        });
                                    } catch (e) {}
                                return (
                                    $.templates(
                                        __spreadValues(
                                            {
                                                [routeName]: main,
                                            },
                                            templates
                                        )
                                    ),
                                    Promise.resolve()
                                );
                            })
                            .catch((e) => Promise.reject(e));
                    }
                }
                __webpack_exports__.A = Router;
            },
            41365: function (e, t, r) {
                "use strict";
                var s = r(98864);
                const n = "wb_delivery-points-",
                    o = "wb_allpickups_hash",
                    i = 36e4,
                    a = [
                        {
                            dtype: 86,
                            min: 1e7,
                            max: 11e6,
                        },
                    ],
                    l = s.Ho;
                t.A = class {
                    constructor() {
                        this._startJobSyncPickups(),
                            (this.checkInterval = null);
                    }
                    _startJobSyncPickups() {
                        (this._pickupDbName = "wb_allpickups"),
                            (this._objectStoreName = "pickups_active"),
                            (this._version = 1),
                            setTimeout(this._syncPickups.bind(this), 15e3);
                    }
                    _openPickupDb() {
                        return this.$storageHelper.openDb(this._pickupDbName, {
                            onupgradeneeded: (e) =>
                                e.createObjectStore(this._objectStoreName, {
                                    keyPath: "id",
                                }),
                            version: this._version,
                        });
                    }
                    restoreOriginalId(e) {
                        for (const { min: t, max: r, dtype: s } of a)
                            if (t <= e && e < r)
                                return {
                                    id: e - t,
                                    dtype: s,
                                };
                        return {
                            id: e,
                        };
                    }
                    async _syncPickups() {
                        const e = await WbSpaModel.prototype.$httpClient
                            .fetchStaticDataV2(
                                "all-poo-v10.json.hash",
                                5e3,
                                "text"
                            )
                            .catch((e) => null);
                        if (null !== e)
                            if (e !== localStorage.getItem(o)) {
                                const t =
                                        await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(
                                            "all-poo-fr-v10.json",
                                            6e4
                                        ),
                                    r =
                                        null == t
                                            ? void 0
                                            : t.selectMany((e) => {
                                                  if (
                                                      "az" === e.country ||
                                                      "tm" === e.country
                                                  )
                                                      return [];
                                                  if (
                                                      "tj" ===
                                                      wb.settings.currentLocale
                                                  ) {
                                                      if (
                                                          "ge" === e.country ||
                                                          "kg" === e.country
                                                      )
                                                          return [];
                                                  } else if (
                                                      "ge" ===
                                                      wb.settings.currentLocale
                                                  ) {
                                                      if ("ge" !== e.country)
                                                          return [];
                                                  } else if (
                                                      "tj" === e.country ||
                                                      "ge" === e.country
                                                  )
                                                      return [];
                                                  return (
                                                      e.items.forEach((t) => {
                                                          t.country = e.country;
                                                      }),
                                                      e.items
                                                  );
                                              });
                                if (!((r && r.length) || this.checkInterval))
                                    return void setTimeout(
                                        this._syncPickups.bind(this),
                                        15e3
                                    );
                                if ((!r || !r.length) && this.checkInterval)
                                    return;
                                this.checkInterval ||
                                    (this.checkInterval = setInterval(
                                        this._syncPickups.bind(this),
                                        i
                                    )),
                                    this._openPickupDb().then((t) => {
                                        window._debug &&
                                            console.time("transaction pickups"),
                                            t
                                                .transaction(
                                                    [this._objectStoreName],
                                                    "readwrite"
                                                )
                                                .objectStore(
                                                    this._objectStoreName
                                                )
                                                .clear(),
                                            (this.updating = !0),
                                            this.$storageHelper
                                                .addItems(
                                                    t,
                                                    this._objectStoreName,
                                                    r,
                                                    0
                                                )
                                                .then(() => {
                                                    window._debug &&
                                                        console.timeEnd(
                                                            "transaction pickups"
                                                        ),
                                                        (this.updating = !1);
                                                }),
                                            localStorage.setItem(o, e);
                                    });
                            } else
                                this.checkInterval ||
                                    (this.checkInterval = setInterval(
                                        this._syncPickups.bind(this),
                                        i
                                    ));
                        else
                            this.checkInterval ||
                                setTimeout(this._syncPickups.bind(this), 15e3);
                    }
                    getAddressSignData(e) {
                        const t = e.lat || e.latitude,
                            r = e.lon || e.longitude;
                        return `officeId=${
                            "courier" === e.deliveryType
                                ? e.officeId
                                : e.addressId
                        }&dest=${e.dest}&sign=${e.sign}&lat=${t}&lng=${r}`;
                    }
                    getPickupAsync(e, t) {
                        const r = [
                            this._openPickupDb().then((t) =>
                                this.$storageHelper.getItem(
                                    t,
                                    this._objectStoreName,
                                    e
                                )
                            ),
                        ];
                        return (
                            t &&
                                r.push(
                                    this.$helper.delay(t, () => {
                                        throw new Error(
                                            "idb get office timeout"
                                        );
                                    })
                                ),
                            Promise.race(r)
                        );
                    }
                    async getActivePickupsAsync(e = {}) {
                        const [t, r] = await Promise.all([
                            this._openPickupDb().then((e) =>
                                this.$storageHelper.getAll(
                                    e,
                                    this._objectStoreName
                                )
                            ),
                            this.$auth.jwtData.user
                                ? this.$services.userData.getUserDataAsync()
                                : Promise.resolve({}),
                        ]);
                        return [
                            ...this._filterPickups(
                                t,
                                null == r ? void 0 : r.userInfo,
                                e
                            ),
                        ];
                    }
                    *_filterPickups(
                        e,
                        {
                            isEmployeeSynced: t,
                            houseKeeping: r,
                            isPickupPointOwner: s,
                        } = {},
                        n = {}
                    ) {
                        for (const o of e) {
                            (o.isHkn && !r) ||
                                (o.emp && !t) ||
                                (o.isSortCenter && !(s || t)) ||
                                ((null == n ? void 0 : n.dest) &&
                                    o.dest3 != n.dest) ||
                                ("changeOffice" ===
                                    (null == n ? void 0 : n.source) &&
                                    (2 === o.status ||
                                        o.isExternalPostamat ||
                                        31 ==
                                            (null == o
                                                ? void 0
                                                : o.typePoint))) ||
                                (yield o);
                        }
                    }
                    get removeUrl() {
                        return (
                            this.$services.cartService.publicBasketApiUrl +
                            "/spa/removeaddress"
                        );
                    }
                    get editPooUrl() {
                        return (
                            this.$services.cartService.publicBasketApiUrl +
                            "/spa/poos/create?version=1"
                        );
                    }
                    get editCourierAddressUrl() {
                        return (
                            this.$services.cartService.publicBasketApiUrl +
                            "/spa/yandexaddress/editajax?version=2"
                        );
                    }
                    get deliveryPointsUrl() {
                        return (
                            this.$services.cartService.publicBasketApiUrl +
                            "/spa/deliverypoints"
                        );
                    }
                    getDeliveryPointsAsync(e, t) {
                        return new Promise((r, s) => {
                            const n = Object.assign(
                                {
                                    deliveryWay: e,
                                    currency:
                                        WbSpaModel.prototype.$user.getCurrency(),
                                },
                                t
                            );
                            this.$httpClient
                                .fetchJSON(
                                    this.deliveryPointsUrl,
                                    {
                                        method: "POST",
                                        body: this.$helper.objectSerializer(n),
                                        credentials: "include",
                                    },
                                    {
                                        timeout: 2e3,
                                    }
                                )
                                .then((t) => {
                                    const s = this._updateDeliveryPoints(t, e);
                                    r(s);
                                })
                                .catch((t) => {
                                    console.log(t.message);
                                    let s = this.restoreDeliveryPoints(e);
                                    s && r(s);
                                });
                        });
                    }
                    _updateDeliveryPoints(e, t) {
                        const r = [
                            ...e,
                            ...this.restoreDeliveryPoints(t).filter(
                                (e) => e._local
                            ),
                        ].reduce((e, t) => {
                            const r = e.findIndex(
                                (e) => e.addressId === t.addressId
                            );
                            return (
                                -1 === r
                                    ? e.push(t)
                                    : (e[r]._local = e[r]._local && t._local),
                                e
                            );
                        }, []);
                        return (
                            this.backupDeliveryPoints(r, t),
                            this._syncDeliveryPoints(
                                r.filter((e) => e._local).reverse(),
                                t
                            ),
                            r
                        );
                    }
                    async _syncDeliveryPoints(e, t) {
                        for (let r = 0; r < e.length; r++)
                            await this._saveAddressAsync(e[r], t);
                    }
                    get(e, t) {
                        var r;
                        const s =
                            null == (r = this.restoreDeliveryPoints(t))
                                ? void 0
                                : r.find((t) => t.addressId == e);
                        return (
                            s && s._local && this._syncDeliveryPoints([s], t), s
                        );
                    }
                    getByCoordinates(e, t, r) {
                        return (
                            ["self", "courier"].forEach((s) => {
                                var n;
                                const o =
                                    null == (n = this.restoreDeliveryPoints(s))
                                        ? void 0
                                        : n.find(
                                              (s) =>
                                                  s.lat == e &&
                                                  s.lon == t &&
                                                  s.address === r
                                          );
                                if (
                                    (o &&
                                        o._local &&
                                        this._syncDeliveryPoints([o], s),
                                    o)
                                )
                                    return o;
                            }),
                            null
                        );
                    }
                    get _key() {
                        const e = this.$services.sessionService.getUserUid();
                        return `${n}_${e}`;
                    }
                    backupDeliveryPoints(e, t) {
                        this.deliveryPoints[t] = e;
                        const r = this._key;
                        localStorage.putObject(r, this.deliveryPoints),
                            Object.entries(localStorage)
                                .filter((e) => e[0].startsWith(n) && e[0] !== r)
                                .forEach((e) => {
                                    localStorage.removeItem(e[0]);
                                });
                    }
                    restoreDeliveryPoints(e) {
                        var t, r;
                        return (
                            (this.deliveryPoints =
                                null != (t = localStorage.getObject(this._key))
                                    ? t
                                    : {}),
                            this.deliveryPoints.self ||
                                (this.deliveryPoints.self = []),
                            this.deliveryPoints.courier ||
                                (this.deliveryPoints.courier = []),
                            [
                                ...this.deliveryPoints.courier,
                                ...this.deliveryPoints.self,
                            ].forEach((e) => {
                                (e.latitude && e.longitude) ||
                                    !e.lat ||
                                    !e.lon ||
                                    ((e.latitude = e.lat),
                                    (e.longitude = e.lon));
                            }),
                            null != (r = this.deliveryPoints[e]) ? r : []
                        );
                    }
                    async add(e, t) {
                        let r = this.restoreDeliveryPoints(t);
                        const s = this._convertModel(e, t);
                        if (
                            !r.find(
                                (e) =>
                                    (null == e ? void 0 : e.addressId) ==
                                    s.addressId
                            )
                        ) {
                            if ("courier" === t) {
                                const e =
                                    await WbSpaModel.prototype.$httpClient.fetchBasicJSON(
                                        `${l}get-office?latitude=${s.lat}&longitude=${s.lon}`,
                                        {},
                                        {
                                            timeout: 3e3,
                                            nullOnError: !0,
                                        }
                                    );
                                e && Object.assign(s, e);
                            }
                            r.unshift(s), this.backupDeliveryPoints(r, t);
                        }
                        return this._saveAddressAsync(s, t), r;
                    }
                    remove(e, t) {
                        let r = this.restoreDeliveryPoints(t);
                        return (
                            (r = r.filter((t) => t.addressId != e)),
                            this.backupDeliveryPoints(r, t),
                            this._removeAddressAsync(e, t),
                            r
                        );
                    }
                    _removeAddressAsync(e, t) {
                        this.$httpClient
                            .fetchJSON(this.removeUrl, {
                                method: "POST",
                                body: this.$helper.objectSerializer({
                                    addressId: e,
                                    deliveryWay: t,
                                }),
                                credentials: "include",
                            })
                            .then((e) => {
                                this.backupDeliveryPoints(e, t);
                            });
                    }
                    _saveAddressAsync(e, t) {
                        const r =
                            "self" === t
                                ? {
                                      "Item.AddressId": e.addressId,
                                  }
                                : e;
                        return this.$httpClient
                            .fetchJSON(this._dataUrl(t), {
                                method: "POST",
                                credentials: "include",
                                body: this.$helper.objectSerializer(
                                    r,
                                    new URLSearchParams(),
                                    !0
                                ),
                            })
                            .then((e) => (this.backupDeliveryPoints(e, t), e));
                    }
                    _dataUrl(e) {
                        return "self" === e
                            ? this.editPooUrl
                            : this.editCourierAddressUrl;
                    }
                    _convertModel(e, t) {
                        if ("courier" === t) {
                            let r = Object.assign({}, e);
                            return (
                                (r._local = !0),
                                (r.deliveryType = t),
                                (r.addressId = btoa(
                                    wb.helpers.generateGuid().slice(12)
                                )),
                                (r.address = `${
                                    r.city ? r.city : r.province
                                }, `),
                                r.area &&
                                    !r.city &&
                                    (r.address += `${r.area}, `),
                                r.street && (r.address += `${r.street}, `),
                                r.home &&
                                    (r.address += `${wb.i18n.t(
                                        "userAddress.addressDetails.home",
                                        {
                                            home: r.home,
                                        }
                                    )}, `),
                                r.flat &&
                                    !r.isPrivateHouse &&
                                    (r.address += `${wb.i18n.t(
                                        "userAddress.addressDetails.flat",
                                        {
                                            flat: r.flat,
                                        }
                                    )}, `),
                                r.entrance &&
                                    (r.address += `${wb.i18n.t(
                                        "userAddress.addressDetails.entrance",
                                        {
                                            entrance: r.entrance,
                                        }
                                    )}, `),
                                r.doorCode &&
                                    (r.address += `${wb.i18n.t(
                                        "userAddress.addressDetails.doorCode",
                                        {
                                            doorCode: r.doorCode,
                                        }
                                    )}, `),
                                r.floor &&
                                    (r.address += `${wb.i18n.t(
                                        "userAddress.addressDetails.floor",
                                        {
                                            floor: r.floor,
                                        }
                                    )}, `),
                                (r.address = r.address.slice(0, -2)),
                                r.lat || (r.lat = r.latitude),
                                r.lon || (r.lon = r.longitude),
                                r
                            );
                        }
                        if ("self" === t)
                            return {
                                _local: !0,
                                address: e.address,
                                addressId: e.id,
                                lat: e.coordinates[0],
                                lon: e.coordinates[1],
                                workTime: e.workTime,
                                deliveryType: t,
                                pointTypeName: this._getPointTypeName(e.dtype),
                                IsSortCenter: 63 === t,
                                status: e.status,
                                rate: e.rate,
                                deliveryPrice: $.views.helpers.priceFromRub(
                                    e.deliveryPrice,
                                    !0
                                ),
                                country: e.country,
                                dest: e.dest,
                                sign: e.sign,
                            };
                    }
                    _getPointTypeName(e) {
                        switch (e) {
                            case 63:
                                return wb.i18n.t("delivery.points.scWarehouse");
                            case 31:
                                return wb.i18n.t("delivery.points.kiosk");
                            default:
                                return wb.i18n.t("delivery.points.pickupPoint");
                        }
                    }
                };
            },
            29841: function (e, t) {
                "use strict";
                function r(e) {
                    return e < 26
                        ? e + 65
                        : e < 52
                        ? e + 71
                        : e < 62
                        ? e - 4
                        : 62 === e
                        ? 43
                        : 63 === e
                        ? 47
                        : 65;
                }
                function s(e) {
                    for (
                        var t = 2, s = "", n = e.length, o = 0, i = 0;
                        i < n;
                        i++
                    )
                        (t = i % 3),
                            (o |= e[i] << ((16 >>> t) & 24)),
                            (2 !== t && e.length - i != 1) ||
                                ((s += String.fromCodePoint(
                                    r((o >>> 18) & 63),
                                    r((o >>> 12) & 63),
                                    r((o >>> 6) & 63),
                                    r(63 & o)
                                )),
                                (o = 0));
                    return (
                        s.substr(0, s.length - 2 + t) +
                        (2 === t ? "" : 1 === t ? "=" : "==")
                    );
                }
                t.A = class {
                    static decode(e) {
                        return e
                            ? (function (e) {
                                  for (
                                      var t, r = "", s = e.length, n = 0;
                                      n < s;
                                      n++
                                  )
                                      (t = e[n]),
                                          (r += String.fromCodePoint(
                                              t > 251 && t < 254 && n + 5 < s
                                                  ? 1073741824 * (t - 252) +
                                                        ((e[++n] - 128) << 24) +
                                                        ((e[++n] - 128) << 18) +
                                                        ((e[++n] - 128) << 12) +
                                                        ((e[++n] - 128) << 6) +
                                                        e[++n] -
                                                        128
                                                  : t > 247 &&
                                                    t < 252 &&
                                                    n + 4 < s
                                                  ? ((t - 248) << 24) +
                                                    ((e[++n] - 128) << 18) +
                                                    ((e[++n] - 128) << 12) +
                                                    ((e[++n] - 128) << 6) +
                                                    e[++n] -
                                                    128
                                                  : t > 239 &&
                                                    t < 248 &&
                                                    n + 3 < s
                                                  ? ((t - 240) << 18) +
                                                    ((e[++n] - 128) << 12) +
                                                    ((e[++n] - 128) << 6) +
                                                    e[++n] -
                                                    128
                                                  : t > 223 &&
                                                    t < 240 &&
                                                    n + 2 < s
                                                  ? ((t - 224) << 12) +
                                                    ((e[++n] - 128) << 6) +
                                                    e[++n] -
                                                    128
                                                  : t > 191 &&
                                                    t < 224 &&
                                                    n + 1 < s
                                                  ? ((t - 192) << 6) +
                                                    e[++n] -
                                                    128
                                                  : t
                                          ));
                                  return r;
                              })(
                                  (function (e, t) {
                                      for (
                                          var r,
                                              s,
                                              n,
                                              o = e.replace(
                                                  /[^A-Za-z0-9\+\/]/g,
                                                  ""
                                              ),
                                              i = o.length,
                                              a = t
                                                  ? Math.ceil(
                                                        ((3 * i + 1) >> 2) / t
                                                    ) * t
                                                  : (3 * i + 1) >> 2,
                                              l = new Uint8Array(a),
                                              c = 0,
                                              u = 0,
                                              d = 0;
                                          d < i;
                                          d++
                                      )
                                          if (
                                              ((s = 3 & d),
                                              (c |=
                                                  ((n = o.charCodeAt(d)) > 64 &&
                                                  n < 91
                                                      ? n - 65
                                                      : n > 96 && n < 123
                                                      ? n - 71
                                                      : n > 47 && n < 58
                                                      ? n + 4
                                                      : 43 === n
                                                      ? 62
                                                      : 47 === n
                                                      ? 63
                                                      : 0) <<
                                                  (6 * (3 - s))),
                                              3 === s || i - d == 1)
                                          ) {
                                              for (
                                                  r = 0;
                                                  r < 3 && u < a;
                                                  r++, u++
                                              )
                                                  l[u] =
                                                      (c >>>
                                                          ((16 >>> r) & 24)) &
                                                      255;
                                              c = 0;
                                          }
                                      return l;
                                  })(e)
                              )
                            : null;
                    }
                    static encode(e) {
                        return e
                            ? s(
                                  (function (e) {
                                      for (
                                          var t, r, s = e.length, n = 0, o = 0;
                                          o < s &&
                                          null != (r = e.codePointAt(o));
                                          o++
                                      )
                                          r > 65536 && o++,
                                              (n +=
                                                  r < 128
                                                      ? 1
                                                      : r < 2048
                                                      ? 2
                                                      : r < 65536
                                                      ? 3
                                                      : r < 2097152
                                                      ? 4
                                                      : r < 67108864
                                                      ? 5
                                                      : 6);
                                      t = new Uint8Array(n);
                                      for (
                                          var i = 0, a = 0;
                                          i < n &&
                                          null != (r = e.codePointAt(a));
                                          a++
                                      )
                                          r < 128
                                              ? (t[i++] = r)
                                              : r < 2048
                                              ? ((t[i++] = 192 + (r >>> 6)),
                                                (t[i++] = 128 + (63 & r)))
                                              : r < 65536
                                              ? ((t[i++] = 224 + (r >>> 12)),
                                                (t[i++] =
                                                    128 + ((r >>> 6) & 63)),
                                                (t[i++] = 128 + (63 & r)))
                                              : r < 2097152
                                              ? ((t[i++] = 240 + (r >>> 18)),
                                                (t[i++] =
                                                    128 + ((r >>> 12) & 63)),
                                                (t[i++] =
                                                    128 + ((r >>> 6) & 63)),
                                                (t[i++] = 128 + (63 & r)),
                                                a++)
                                              : r < 67108864
                                              ? ((t[i++] = 248 + (r >>> 24)),
                                                (t[i++] =
                                                    128 + ((r >>> 18) & 63)),
                                                (t[i++] =
                                                    128 + ((r >>> 12) & 63)),
                                                (t[i++] =
                                                    128 + ((r >>> 6) & 63)),
                                                (t[i++] = 128 + (63 & r)),
                                                a++)
                                              : ((t[i++] = 252 + (r >>> 30)),
                                                (t[i++] =
                                                    128 + ((r >>> 24) & 63)),
                                                (t[i++] =
                                                    128 + ((r >>> 18) & 63)),
                                                (t[i++] =
                                                    128 + ((r >>> 12) & 63)),
                                                (t[i++] =
                                                    128 + ((r >>> 6) & 63)),
                                                (t[i++] = 128 + (63 & r)),
                                                a++);
                                      return t;
                                  })(e)
                              )
                            : "";
                    }
                    static encodeBytesArr(e) {
                        return s(e);
                    }
                };
            },
            52890: function (e, t, r) {
                "use strict";
                r.r(t),
                    r.d(t, {
                        Deferred: function () {
                            return B;
                        },
                        animationFrameWithMinDelay: function () {
                            return L;
                        },
                        base64: function () {
                            return j;
                        },
                        debounce: function () {
                            return w;
                        },
                        debounceLead: function () {
                            return S;
                        },
                        debounceTrail: function () {
                            return _;
                        },
                        deepMerge: function () {
                            return v;
                        },
                        deepMerge_v2: function () {
                            return f;
                        },
                        delay: function () {
                            return A;
                        },
                        delegator: function () {
                            return P;
                        },
                        getClientDt: function () {
                            return O;
                        },
                        isElementInViewport: function () {
                            return D;
                        },
                        isMobileBrowser: function () {
                            return E;
                        },
                        isNumber: function () {
                            return x;
                        },
                        loadCssAsync: function () {
                            return N;
                        },
                        loadJsAsync: function () {
                            return F;
                        },
                        lockPromise: function () {
                            return M;
                        },
                        nextTick: function () {
                            return T;
                        },
                        objectSerializer: function () {
                            return b;
                        },
                        once: function () {
                            return k;
                        },
                        repeat: function () {
                            return I;
                        },
                        serializeToFormData: function () {
                            return y;
                        },
                        sleep: function () {
                            return $;
                        },
                        throttle: function () {
                            return C;
                        },
                    });
                var s = Object.defineProperty,
                    n = Object.getOwnPropertySymbols,
                    o = Object.prototype.hasOwnProperty,
                    i = Object.prototype.propertyIsEnumerable,
                    a = (e, t, r) =>
                        t in e
                            ? s(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r),
                    l = (e, t) => {
                        for (var r in t || (t = {}))
                            o.call(t, r) && a(e, r, t[r]);
                        if (n)
                            for (var r of n(t)) i.call(t, r) && a(e, r, t[r]);
                        return e;
                    };
                class c {
                    static getCookie(e) {
                        const t = document.cookie.split(";").find((t) => {
                            const [r] = t.trim().split("=");
                            return r == e;
                        });
                        return t
                            ? decodeURIComponent(t.trim().split("=")[1])
                            : null;
                    }
                    static setCookie(e, t, r = {}) {
                        r = l(
                            {
                                path: "/",
                                "max-age": 31536e3,
                            },
                            r
                        );
                        let s =
                            encodeURIComponent(e) + "=" + encodeURIComponent(t);
                        Object.keys(r).forEach((e) => {
                            (s += `; ${e}`), 1 != r[e] && (s += `=${r[e]}`);
                        }),
                            (document.cookie = s);
                    }
                    static deleteCookie(e, t = {}) {
                        c.setCookie(
                            e,
                            "",
                            l(
                                {
                                    "max-age": -1,
                                },
                                t
                            )
                        );
                    }
                }
                wb.cookieHelper = c;
                r(96929);
                var u = r(29841),
                    d = Object.defineProperty,
                    p = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? d(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                const h = {
                        cache: {},
                        onFirstExecution() {
                            0 === Object.keys(this.cache).length &&
                                document
                                    .querySelectorAll(
                                        "script[type='text/javascript']"
                                    )
                                    .forEach((e) => {
                                        if ("" !== e.src) {
                                            const t = e.src.replace(
                                                /https?:/,
                                                ""
                                            );
                                            this.cache[t] = Promise.resolve();
                                        }
                                    });
                        },
                        require(e) {
                            let t = this.cache[e];
                            return (
                                null == t &&
                                    (this.onFirstExecution(),
                                    (t = this.cache[e]),
                                    null == t &&
                                        (t = this.cache[e] =
                                            g(e, this.loadScriptAsync))),
                                t.catch(
                                    (t) => (
                                        (this.cache[e] = null),
                                        Promise.reject(t)
                                    )
                                )
                            );
                        },
                        loadScriptAsync(e) {
                            return new Promise((t, r) => {
                                try {
                                    const s = document.createElement("script");
                                    (s.type = "text/javascript"),
                                        (s.src = e),
                                        (s.onload = t),
                                        (s.onerror = r),
                                        document.body.appendChild(s);
                                } catch (e) {
                                    r(e);
                                }
                            });
                        },
                    },
                    m = {
                        cashe: {},
                        orinalStylesIncluded: !1,
                        require(e) {
                            return new Promise((t, r) => {
                                this.orinalStylesIncluded ||
                                    this.addOrinalStyles(),
                                    null == this.cashe[e] &&
                                        (this.cashe[e] = g(
                                            e,
                                            this.loadCssAsync
                                        )),
                                    this.cashe[e].then(t).catch((t) => {
                                        (this.cashe[e] = null), r(t);
                                    });
                            });
                        },
                        addOrinalStyles() {
                            (this.orinalStylesIncluded = !0),
                                document
                                    .querySelectorAll("link[type='text/css']")
                                    .forEach(
                                        (e) =>
                                            (this.cashe[
                                                e.href.replace(/https?:/, "")
                                            ] = Promise.resolve())
                                    );
                        },
                        loadCssAsync(e) {
                            return new Promise((t, r) => {
                                var s;
                                let n;
                                if (
                                    navigator.userAgent.indexOf("MSIE ") > 0 ||
                                    navigator.userAgent.indexOf("Trident/") > 0
                                ) {
                                    const s = document.createElement("link");
                                    (s.href = e),
                                        (s.type = "text/css"),
                                        (s.rel = "stylesheet"),
                                        (s.onload = t),
                                        (s.onerror = r),
                                        (n = s);
                                } else {
                                    const s = document.createElement("style");
                                    (s.onload = t),
                                        (s.textContent = `@import "${e}"`),
                                        (s.onload = t),
                                        (s.onerror = r),
                                        (n = s);
                                }
                                null == (s = document.querySelector("head")) ||
                                    s.appendChild(n);
                            });
                        },
                    };
                async function g(e, t) {
                    return new Promise((r, s) => {
                        "/" === e[0] && "/" !== e[1] && (e = e.slice(1));
                        const n = wb.helpers.url.urlSiteStatic(e),
                            o = wb.helpers.url.urlSiteStatic(e, !0);
                        t(n)
                            .then((e) => r())
                            .catch((e) =>
                                t(o)
                                    .then((e) => r())
                                    .catch((e) => s())
                            );
                    });
                }
                function b(e, t = new URLSearchParams(), r = !1, s = !1) {
                    const n = (e, o) => {
                        s && "boolean" == typeof o
                            ? null == t || t.append(e, o.toString())
                            : "object" == typeof o && null != o
                            ? Object.entries(o).forEach(([t, r]) => {
                                  n(`${e}[${t}]`, r);
                              })
                            : (r && null == o) || null == t || t.append(e, o);
                    };
                    return Object.entries(e).forEach(([e, t]) => n(e, t)), t;
                }
                function y(e, t = new FormData()) {
                    const r = (e, s = "") => {
                        for (let n in e) {
                            const o = e[n];
                            let i = n;
                            s &&
                                (i = Array.isArray(e)
                                    ? `${s}[${n}]`
                                    : `${s}.${n}`),
                                "boolean" == typeof o ||
                                "string" == typeof o ||
                                "number" == typeof o
                                    ? t.append(i, o.toString())
                                    : "object" == typeof o && r(o, i);
                        }
                    };
                    return r(e), t;
                }
                function v(...e) {
                    let t = e[0],
                        r = (e) => {
                            for (let r in e)
                                e.hasOwnProperty(r) &&
                                    ("[object Object]" ===
                                        Object.prototype.toString.call(e[r]) &&
                                    null != t[r]
                                        ? (t[r] = v(t[r], e[r]))
                                        : (t[r] = e[r]));
                        };
                    for (let t = 1; t < e.length; t++) r(e[t]);
                    return t;
                }
                function f(...e) {
                    let t = e[0],
                        r = (e) => {
                            for (let r in e)
                                e.hasOwnProperty(r) &&
                                    ("[object Object]" ===
                                        Object.prototype.toString.call(e[r]) &&
                                    null != t[r]
                                        ? (t[r] = f(t[r], e[r]))
                                        : void 0 !== e[r] && (t[r] = e[r]));
                        };
                    for (let t = 1; t < e.length; t++) r(e[t]);
                    return t;
                }
                const w = (e, t) => {
                        let r = null;
                        return function (...s) {
                            r && clearTimeout(r),
                                (r = setTimeout(() => {
                                    e.apply(this, s), (r = null);
                                }, t));
                        };
                    },
                    S = (e, t = 300) => {
                        let r;
                        return function (...s) {
                            r || e.apply(this, s),
                                r && clearTimeout(r),
                                (r = setTimeout(() => (r = null), t));
                        };
                    },
                    _ = (e, t = 300) => {
                        let r;
                        return function (...s) {
                            clearTimeout(r),
                                (r = setTimeout(() => {
                                    e.apply(this, s);
                                }, t));
                        };
                    },
                    C = (e, t) => {
                        let r,
                            s,
                            n = !1;
                        return function o(...i) {
                            if (n) return (r = i), void (s = this);
                            e.apply(this, i),
                                (n = !0),
                                setTimeout(function () {
                                    (n = !1),
                                        r && (o.apply(s, r), (r = s = null));
                                }, t);
                        };
                    },
                    I = (e, t, r, s) => {
                        let n = 0,
                            o = setInterval(function () {
                                if (n > t)
                                    return clearInterval(o), void (s && s());
                                e(o) && clearInterval(o), n++;
                            }, r);
                        return o;
                    },
                    k = (e) => {
                        let t = !1;
                        return function (...r) {
                            return t ? void 0 : ((t = !0), e.apply(this, r));
                        };
                    },
                    M = (e) => {
                        let t = null;
                        return function (...r) {
                            return (
                                t ||
                                    (t = e
                                        .apply(this, r)
                                        .then((e) => e)
                                        .finally(() => (t = null))),
                                t
                            );
                        };
                    },
                    P = (e, t) =>
                        function (r) {
                            let s = null;
                            r.target instanceof HTMLElement &&
                                (s = r.target.closest(e)),
                                null != s && t(r, s);
                        },
                    T = () => Promise.resolve().then(() => Promise.resolve()),
                    $ = (e) => new Promise((t) => setTimeout(t, e)),
                    A = (e, t) =>
                        new Promise((r, s) =>
                            setTimeout((e) => {
                                try {
                                    t() && r();
                                } catch (e) {
                                    s(e);
                                }
                            }, e)
                        );
                function D(e, t, r) {
                    var s;
                    const n = e.getBoundingClientRect();
                    return r &&
                        ((r.threshold = null != (s = r.threshold) ? s : 10),
                        x(r.top))
                        ? n.top >= r.top - r.threshold &&
                              n.top <= r.top + r.threshold
                        : n.top >= 0 &&
                              (t || n.left >= 0) &&
                              n.bottom <=
                                  (window.innerHeight ||
                                      document.documentElement.clientHeight) &&
                              (t ||
                                  n.right <=
                                      (window.innerWidth ||
                                          document.documentElement
                                              .clientWidth));
                }
                class B {
                    constructor() {
                        p(this, "_resolve", () => {}),
                            p(this, "_reject", () => {}),
                            p(
                                this,
                                "_promise",
                                new Promise((e, t) => {
                                    (this._reject = t), (this._resolve = e);
                                })
                            );
                    }
                    get promise() {
                        return this._promise;
                    }
                    get then() {
                        return this._promise.then.bind(this._promise);
                    }
                    resolve(e) {
                        this._resolve(e);
                    }
                    reject(e) {
                        this._reject(e);
                    }
                }
                function O() {
                    const e = new Date(),
                        t = new Date(
                            e.getTime() - 6e4 * e.getTimezoneOffset()
                        ).toISOString();
                    return t.slice(0, t.length - 1);
                }
                function E() {
                    if (void 0 !== window._isMobileBrowser)
                        return window._isMobileBrowser;
                    let e = !1;
                    var t;
                    return (
                        (t =
                            navigator.userAgent ||
                            navigator.vendor ||
                            window.opera),
                        (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(
                            t
                        ) ||
                            /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(
                                t.substr(0, 4)
                            )) &&
                            (e = !0),
                        (window._isMobileBrowser = e),
                        window._isMobileBrowser
                    );
                }
                function x(e) {
                    return !isNaN(parseFloat(String(e))) && isFinite(Number(e));
                }
                function L(e, t) {
                    const r = performance.now(),
                        s = () =>
                            performance.now() - r > e
                                ? t()
                                : window.requestAnimationFrame(s);
                    window.requestAnimationFrame(s);
                }
                const j = u.A,
                    F = h.require.bind(h),
                    N = m.require.bind(m);
            },
            55085: function () {
                "use strict";
                var e = Object.defineProperty,
                    t = (t, r, s) =>
                        ((t, r, s) =>
                            r in t
                                ? e(t, r, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: s,
                                  })
                                : (t[r] = s))(
                            t,
                            "symbol" != typeof r ? r + "" : r,
                            s
                        );
                class r extends Error {
                    constructor(e) {
                        const { message: s, payload: n } = r.parsePayload(e);
                        super(s),
                            t(this, "isCustomError"),
                            t(this, "payload"),
                            (this.isCustomError = !0),
                            (this.payload = n);
                    }
                    static parsePayload(e) {
                        var t;
                        return "string" == typeof e
                            ? {
                                  message: e,
                                  payload: null,
                              }
                            : {
                                  message:
                                      null !=
                                      (t = null == e ? void 0 : e.message)
                                          ? t
                                          : "Unknow error",
                                  payload: null == e ? void 0 : e.payload,
                              };
                    }
                }
                Object.defineProperties(window, {
                    KnownServerError: {
                        value: r,
                    },
                    UnauthorizeError: {
                        value: class extends r {
                            constructor({ msg: e, jwtDrop: r } = {}) {
                                super(e),
                                    t(this, "isUnauthorize"),
                                    t(this, "jwtDrop"),
                                    (this.isUnauthorize = !0),
                                    (this.jwtDrop = r);
                            }
                        },
                    },
                    CancelledRequestError: {
                        value: class extends r {
                            constructor(e = "") {
                                super(e),
                                    t(this, "isCancelled"),
                                    (this.isCancelled = !0);
                            }
                        },
                    },
                    NotFoundError: {
                        value: class extends r {
                            constructor(e = "") {
                                super(e),
                                    t(this, "isNotFound"),
                                    (this.isNotFound = !0);
                            }
                        },
                    },
                    NetworkError: {
                        value: class {
                            constructor() {
                                t(this, "isNetworkError"),
                                    (this.isNetworkError = !0);
                            }
                        },
                    },
                });
            },
            96929: function () {
                "use strict";
                class e {
                    static canShowWalletDiscount(
                        e = 0,
                        t = "",
                        r = 0,
                        s = 0,
                        n = 0
                    ) {
                        if (1048576 & r || 0 === s || 536870912 & r) return !1;
                        return (
                            (n ||
                                (wb.settings.walletTypeCode > 1
                                    ? wb.global.settings.variables
                                          .wlt2DiscountDisplayMaxPrice
                                    : wb.global.settings.variables
                                          .wlt1DiscountDisplayMaxPrice)) >= e &&
                            "RUB" === t &&
                            "ge" !== wb.settings.currentLocale
                        );
                    }
                    static calcWalletDiscount(
                        t = 0,
                        r = "",
                        s = 0,
                        n = 0,
                        o = 0
                    ) {
                        const i =
                            n ||
                            (wb.settings.walletTypeCode > 1
                                ? wb.settings.wlt2DiscountPercent
                                : wb.settings.wlt1DiscountPercent);
                        if (i > 0) {
                            const n = e.calculateDiscount(t, i, r);
                            if (e.canShowWalletDiscount(t - n, r, s, i, o))
                                return n;
                        }
                        return 0;
                    }
                    static calculateDiscount(e = 0, t = 0, r = "", s = !1) {
                        if (!e || !t) return 0;
                        let n = e * (t / 100);
                        return this.toLocalPrice(n, r, s);
                    }
                    static calculateCommission(e, t, r = "") {
                        return this.calculateDiscount(e, t, r, !0);
                    }
                    static calculateAdjustedDiscount(
                        e = 0,
                        t = 0,
                        r = 0,
                        s = ""
                    ) {
                        if (!t || !r) return 0;
                        let n = (e / t) * r;
                        return this.toLocalPrice(n, s);
                    }
                    static toLocalPrice(e = 0, t = "", r = !1) {
                        if (0 !== e) {
                            const s =
                                $.views.helpers.minFiscalPriceInCurrency(t);
                            e =
                                e < s
                                    ? s
                                    : Math[r ? "floor" : "ceil"](e / s) * s;
                        }
                        return e;
                    }
                    static calculateCustomCharges(e, t, r) {
                        const s = 100 * e;
                        if (!r) return 0;
                        if (s < r.dutyFreelimit) return 0;
                        const n = 0.15 * (s - r.dutyFreelimit) + r.fixedAmount;
                        return $.views.helpers.toLocalPrice(n / 100, t);
                    }
                    static getReturnableVatPercent(e) {
                        return (
                            !!e &&
                            !!wb.xnm.isVatRefundable(e) &&
                            wb.xnm.getVatPercent(e)
                        );
                    }
                    static verificationRequired({
                        userInfo: e,
                        signedBalance: t,
                        storesMap: r,
                        storeId: s,
                        addressLocale: n,
                    }) {
                        return (
                            (null == e ? void 0 : e.isAuthenticated) &&
                            r.needVerification(n, s) &&
                            !(
                                !(1 & ~e.verificationLevel) ||
                                ("active" ==
                                    (null == t ? void 0 : t.walletStatus) &&
                                    "verified" ==
                                        (null == t ? void 0 : t.walletType))
                            )
                        );
                    }
                }
                wb.priceHelper = e;
            },
            3659: function (e, t, r) {
                "use strict";
                r.d(t, {
                    A: function () {
                        return f;
                    },
                });
                var s = r(98864),
                    n = r(89115);
                (wb.currencies = n.Q2),
                    $.views.helpers({
                        wbCurrencies: n.dt,
                        getIsoCode: n.BD,
                    }),
                    $.views.converters({
                        isoCode: n.BD,
                        currencySign: n.lD,
                    });
                var o = Object.defineProperty,
                    i = Object.defineProperties,
                    a = Object.getOwnPropertyDescriptors,
                    l = Object.getOwnPropertySymbols,
                    c = Object.prototype.hasOwnProperty,
                    u = Object.prototype.propertyIsEnumerable,
                    d = (e, t, r) =>
                        t in e
                            ? o(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r),
                    p = (e, t) => {
                        for (var r in t || (t = {}))
                            c.call(t, r) && d(e, r, t[r]);
                        if (l)
                            for (var r of l(t)) u.call(t, r) && d(e, r, t[r]);
                        return e;
                    },
                    h = (e, t) => i(e, a(t)),
                    m = (e, t, r) => d(e, "symbol" != typeof t ? t + "" : t, r);
                const g = "_sys_auth",
                    b = "user-balance",
                    y = s.of,
                    v = class e {
                        constructor() {
                            var t;
                            m(this, "balance"),
                                m(this, "brokerInstallmentConfig"),
                                m(this, "brokerInstallmentStatus"),
                                m(this, "userInfo"),
                                m(this, "_balanceTs"),
                                m(this, "_brokerInstStatusTs"),
                                m(this, "_resetBrokerInstStatusTs"),
                                m(this, "_savedBalance"),
                                m(this, "_userGrade"),
                                m(this, "_customsData");
                            for (const t in e.syncData) e.syncData[t].init();
                            (this.balance = localStorage.getObject(
                                e.storageKey(b)
                            )),
                                this.balance &&
                                    (this._savedBalance = Object.assign(
                                        this.balance
                                    )),
                                (this._balanceTs =
                                    (null == (t = this.balance)
                                        ? void 0
                                        : t.balanceTs) || 0),
                                (this.getUserGrade =
                                    WbSpaModel.prototype.$helper.lockPromise(
                                        this.getUserGrade
                                    )),
                                (this.getCustomsDuty =
                                    WbSpaModel.prototype.$helper.lockPromise(
                                        this.getCustomsDuty
                                    )),
                                window.addEventListener(
                                    "storage",
                                    this._onSync.bind(this)
                                );
                        }
                        getUid() {
                            return e._getUserUid();
                        }
                        getId() {
                            return WbSpaModel.prototype.$auth.jwtData.user || 0;
                        }
                        getUserInfo() {
                            return this.userInfo;
                        }
                        initUser() {
                            const t = WbSpaModel.prototype.$auth.jwtData,
                                r = WbSpaModel.prototype.$auth.isAuth,
                                s =
                                    WbSpaModel.prototype.$services.sessionService.getBasketUid(),
                                n = r ? e._getUserUid() : "";
                            localStorage.setItem(g, r ? t.user : "unauth"),
                                (this.userInfo = r
                                    ? {
                                          uid: n,
                                          basketUid: void 0,
                                          isAuth: r,
                                          t: t.user,
                                      }
                                    : {
                                          uid: 0,
                                          basketUid: s,
                                          isAuth: r,
                                      }),
                                wb.analitics.sendUserEvent(n, r ? t.user : ""),
                                wb.analitics.sendSessionStartEvent(),
                                r
                                    ? this.getUserGrade(this.getCurrency())
                                    : this._setDiscountForUnAuth(),
                                wb.spa &&
                                    wb.spa.setUserStatus({
                                        userIsAuth: r,
                                        userUid: r ? n : s,
                                        userId: parseInt(t.user, 10),
                                    });
                        }
                        async getBalance({ force: t, timeout: r } = {}) {
                            var s, n;
                            let o = !1;
                            if (
                                t ||
                                ((null == (s = this._savedBalance)
                                    ? void 0
                                    : s.balanceCurrency) &&
                                    this._savedBalance.balanceCurrency !==
                                        this.getCurrency()) ||
                                !this.balance ||
                                this._balanceTs < new Date().getTime()
                            ) {
                                this._balanceTs = new Date().getTime() + 3e4;
                                try {
                                    (this.balance =
                                        await WbSpaModel.prototype.$httpClient.fetchJSON(
                                            "/webapi/account/getsignedbalance",
                                            {
                                                method: "POST",
                                            },
                                            r
                                                ? {
                                                      timeout: r,
                                                  }
                                                : {}
                                        )),
                                        (this.balance.balanceCurrency =
                                            this.getCurrency()),
                                        (this.balance.walletTypeCode =
                                            "ge" !== wb.settings.currentLocale
                                                ? this._getWalletTypeCode(
                                                      this.balance.walletType,
                                                      this.balance.walletStatus
                                                  )
                                                : 0),
                                        (this._savedBalance = Object.assign(
                                            this.balance
                                        )),
                                        (this.balance.balanceTs =
                                            this._balanceTs),
                                        localStorage.putObject(
                                            e.storageKey(b),
                                            this.balance
                                        ),
                                        (o = !0);
                                } catch (e) {
                                    if (!this._savedBalance)
                                        throw (
                                            ((this._balanceTs =
                                                new Date().getTime() + 15e3),
                                            e)
                                        );
                                    this.balance = Object.assign(
                                        this._savedBalance
                                    );
                                }
                            }
                            if (null === this.balance)
                                return {
                                    walletLimit: 0,
                                    moneyBalanceRUB: 0,
                                    walletBalance: 0,
                                    cashbackBalance: 0,
                                    totalBalanceRub: 0,
                                    totalBalance: 0,
                                    balanceCurrency: this.getCurrency(),
                                };
                            const i =
                                null !=
                                (n =
                                    this.balance[
                                        `moneyBalance${this.balance.balanceCurrency}`
                                    ])
                                    ? n
                                    : "RUB" === this.balance.balanceCurrency
                                    ? this.balance.moneyBalance
                                    : 0;
                            return (
                                (this.balance.totalBalance =
                                    i +
                                    ("RUB" === this.balance.balanceCurrency
                                        ? this.balance.bonusBalance +
                                          this.balance.walletBalance
                                        : 0)),
                                "RUB" === this.balance.balanceCurrency &&
                                    (this.balance.totalBalance = Math.floor(
                                        Math.abs(this.balance.totalBalance) < 1
                                            ? 0
                                            : this.balance.totalBalance
                                    )),
                                (this.balance.totalBalanceRub =
                                    (this.balance.moneyBalanceRUB || 0) +
                                    (this.balance.bonusBalance || 0) +
                                    (this.balance.walletBalance || 0)),
                                (this.balance.totalBalanceRub = Math.floor(
                                    Math.abs(this.balance.totalBalanceRub) < 1
                                        ? 0
                                        : this.balance.totalBalanceRub
                                )),
                                o &&
                                    WbSpaModel.prototype.$eventBus.dispatchEvent(
                                        new CustomEvent("BalanceUpdated", {
                                            detail: this.balance,
                                        })
                                    ),
                                o &&
                                    WbSpaModel.prototype.$eventBus.dispatchEvent(
                                        new CustomEvent("LocaleUpdated")
                                    ),
                                this.balance
                            );
                        }
                        _getWalletTypeCode(e = "", t = "") {
                            return "rejected" === t ||
                                "closed" === t ||
                                "blocked" === t ||
                                "blocked_system" === t ||
                                "blocked_system_close" === t ||
                                "blocked_user" === t
                                ? 0
                                : "verified" === e
                                ? 2
                                : "anonymous" === e
                                ? 1
                                : 0;
                        }
                        resetBalance() {
                            (this.balance = null),
                                WbSpaModel.prototype.$eventBus.dispatchEvent(
                                    new CustomEvent("BalanceReset")
                                );
                        }
                        async getBrokerInstallmentConfig() {
                            if ("ru" !== wb.settings.currentLocale) return null;
                            if (this.brokerInstallmentConfig)
                                return this.brokerInstallmentConfig;
                            if (
                                ((this.brokerInstallmentConfig =
                                    localStorage.getObject(
                                        "wbx_br_inst_config"
                                    )),
                                !this.brokerInstallmentConfig ||
                                    this.brokerInstallmentConfig.expire <
                                        Date.now())
                            )
                                try {
                                    const e =
                                            await WbSpaModel.prototype.$wbxHttpClient.fetch(
                                                `${y}/v2/config`,
                                                {
                                                    method: "GET",
                                                    headers: {
                                                        "wb-apptype": "web",
                                                    },
                                                    timeout: 1e3,
                                                }
                                            ),
                                        t = await e.json();
                                    (t.expire = Date.now() + 36e5),
                                        localStorage.putObject(
                                            "wbx_br_inst_config",
                                            t
                                        ),
                                        (this.brokerInstallmentConfig = t);
                                } catch (e) {
                                    wb.spa.logError(
                                        e,
                                        "[WBX_BR_INST_CONFIG]: failed to fetch broker installment config"
                                    );
                                }
                            return this.brokerInstallmentConfig;
                        }
                        resetBrokerInstStatusTs() {
                            this._resetBrokerInstStatusTs = !0;
                        }
                        async getBrokerInstallmentStatus(e = !1) {
                            if ("ru" !== wb.settings.currentLocale) return null;
                            if (
                                (e && this.resetBrokerInstStatusTs(),
                                (this._brokerInstStatusTs = this
                                    ._resetBrokerInstStatusTs
                                    ? 0
                                    : Date.now() + 3e5),
                                !this.brokerInstallmentStatus ||
                                    this._brokerInstStatusTs < Date.now())
                            )
                                try {
                                    const e =
                                        await WbSpaModel.prototype.$wbxHttpClient.fetch(
                                            `${y}/v1/status`,
                                            {
                                                method: "GET",
                                                credentials: "include",
                                                headers: {
                                                    "wb-apptype": "web",
                                                },
                                                timeout: 1e3,
                                            }
                                        );
                                    (this.brokerInstallmentStatus =
                                        await e.json()),
                                        ["186199515"].includes(
                                            WbSpaModel.prototype.$auth.jwtData
                                                .user
                                        ) &&
                                            (this.brokerInstallmentStatus = {
                                                maxInstallmentSum: 15e5,
                                                status: "completed",
                                                availableSum: 15e5,
                                            }),
                                        (this._resetBrokerInstStatusTs = !1);
                                } catch (e) {
                                    this.brokerInstallmentStatus = null;
                                }
                            return this.brokerInstallmentStatus;
                        }
                        async getUserGrade(e = "RUB") {
                            var t, r, s, n, o, i;
                            if (!WbSpaModel.prototype.$auth.isAuth) return null;
                            let a =
                                this._userGrade ||
                                localStorage.getObject("wbx_user_grade");
                            WbSpaModel.prototype.$auth.jwtData.user !==
                                (null == a ? void 0 : a.user_id) && (a = null);
                            const l =
                                WbSpaModel.prototype.$useCatalogReturnCost()
                                    ? 4
                                    : 3;
                            if (
                                null == a ||
                                a.expire < Date.now() ||
                                WbSpaModel.prototype.$auth.jwtData.user !==
                                    a.user_id ||
                                a.currency !== e ||
                                a.version != l
                            )
                                try {
                                    const i =
                                        await WbSpaModel.prototype.$wbxHttpClient.fetch(
                                            `https://user-grade.wildberries.ru/api/v${l}/grade?curr=${e}`
                                        );
                                    if (!i.ok)
                                        throw new Error(
                                            `resp_status=${i.status}`
                                        );
                                    const c = await i.json();
                                    if (null == c.payload || 0 !== c.state)
                                        throw new Error(
                                            `resp_data=${JSON.stringify(
                                                c || {}
                                            )}`
                                        );
                                    (a = c.payload),
                                        (a.sign = c.sign),
                                        (a.sign_version = c.sign_version),
                                        (a.expire = Date.now() + 3e5),
                                        a.fraud &&
                                        (null == (t = JSON.parse(a.fraud))
                                            ? void 0
                                            : t.is_trust)
                                            ? ((a.premiumIsAvailable = !0),
                                              (a.wbClub = "available"))
                                            : (a.premiumIsAvailable = !1),
                                        (null == (r = a.subscription_features)
                                            ? void 0
                                            : r.length) &&
                                            (a.wbClub = "subscribed"),
                                        (a.isPremium =
                                            (null ==
                                            (s = a.subscription_features)
                                                ? void 0
                                                : s.indexOf("extra_discount")) >
                                            -1),
                                        (null == a ? void 0 : a.payments) &&
                                            (a.priceAdjustmentPercent =
                                                -(null !=
                                                (o =
                                                    null ==
                                                    (n = a.payments.find(
                                                        (e) => 2 === e.wctype_id
                                                    ))
                                                        ? void 0
                                                        : n.price_discount)
                                                    ? o
                                                    : 0)),
                                        localStorage.putObject(
                                            "wbx_user_grade",
                                            a
                                        ),
                                        (this._userGrade = a),
                                        WbSpaModel.prototype.$eventBus.dispatchEvent(
                                            new CustomEvent("UserGradeUpdated")
                                        );
                                } catch (e) {
                                    wb.spa.logError(
                                        e,
                                        "[WBX_USER_GRADE]: failed to fetch user grade data"
                                    );
                                }
                            if (null == a ? void 0 : a.payments) {
                                const e = a.payments.find(
                                    (e) => 1 === e.wctype_id
                                );
                                (wb.settings.wlt1DiscountPercent =
                                    a.isPremium &&
                                    (null == e
                                        ? void 0
                                        : e.wb_club_anonymous_discount) > 0
                                        ? e.wb_club_anonymous_discount
                                        : (null == e
                                              ? void 0
                                              : e.anonymous_discount) || 0),
                                    (wb.settings.wlt2DiscountPercent =
                                        a.isPremium &&
                                        (null == e
                                            ? void 0
                                            : e.wb_club_uprid_discount) > 0
                                            ? e.wb_club_uprid_discount
                                            : (null == e
                                                  ? void 0
                                                  : e.uprid_discount) || 0);
                                let t =
                                        (null == e
                                            ? void 0
                                            : e.wb_club_anonymous_discount) -
                                        (null == e
                                            ? void 0
                                            : e.anonymous_discount),
                                    r =
                                        (null == e
                                            ? void 0
                                            : e.wb_club_uprid_discount) -
                                        (null == e ? void 0 : e.uprid_discount);
                                (wb.settings.premium1DiscountPercent =
                                    t > 0 ? t : 0),
                                    (wb.settings.premium2DiscountPercent =
                                        r > 0 ? r : 0),
                                    (wb.settings.premium1DiscountPercentFull =
                                        null == e
                                            ? void 0
                                            : e.wb_club_anonymous_discount),
                                    (wb.settings.premium2DiscountPercentFull =
                                        null == e
                                            ? void 0
                                            : e.wb_club_uprid_discount),
                                    "account" ===
                                        (null == (i = a.wallet)
                                            ? void 0
                                            : i.wallet_type) &&
                                        ((wb.settings.wlt2DiscountPercent =
                                            (null == e
                                                ? void 0
                                                : e.invoice_discount) || 0),
                                        (wb.settings.premium2DiscountPercent =
                                            (null == e
                                                ? void 0
                                                : e.wb_club_invoice_discount) ||
                                            0));
                            } else
                                (wb.settings.wlt1DiscountPercent = 0),
                                    (wb.settings.wlt2DiscountPercent = 0);
                            return (
                                a || {
                                    spp: 0,
                                    postpaid_limit: 0,
                                    currency: e,
                                }
                            );
                        }
                        getUserGradeFromCache() {
                            return WbSpaModel.prototype.$auth.isAuth
                                ? this._userGrade ||
                                      localStorage.getObject("wbx_user_grade")
                                : null;
                        }
                        resetUserGrade() {
                            const e = this.getUserGradeFromCache();
                            e &&
                                ((e.expire = 0),
                                localStorage.putObject("wbx_user_grade", e));
                        }
                        async _setDiscountForUnAuth() {
                            var e, t;
                            let r = localStorage.getObject(
                                "wbx_default_discounts"
                            );
                            if (null == r || r.expire < Date.now()) {
                                const t =
                                    await WbSpaModel.prototype.$httpClient.fetchStaticV3(
                                        wb.helpers.url.urlStaticBasket,
                                        {},
                                        "global-payment/default-payment.json",
                                        1
                                    );
                                if (0 === (null == t ? void 0 : t.state)) {
                                    const s =
                                        null == (e = t.data)
                                            ? void 0
                                            : e.find((e) => 1 === e.wctype_id);
                                    (r = {
                                        wctype_id:
                                            (null == s
                                                ? void 0
                                                : s.wctype_id) || 1,
                                        discount_value:
                                            (null == s
                                                ? void 0
                                                : s.discount_value) || 0,
                                        expire: Date.now() + 3e5,
                                    }),
                                        (r.expire = Date.now() + 3e5),
                                        localStorage.putObject(
                                            "wbx_default_discounts",
                                            r
                                        );
                                }
                            }
                            wb.settings.wlt1DiscountPercent =
                                null !=
                                (t = null == r ? void 0 : r.discount_value)
                                    ? t
                                    : 0;
                        }
                        async getCustomsDuty(e) {
                            var t, r, s;
                            if (
                                !(null ==
                                (r =
                                    null == (t = wb.global.settings)
                                        ? void 0
                                        : t.switches)
                                    ? void 0
                                    : r.enableCustomsDuty)
                            )
                                return null;
                            let n =
                                this._customsData ||
                                localStorage.getObject("customs_duty");
                            try {
                                if (
                                    !n ||
                                    !n.dutyForImportedGoods ||
                                    n.dutyForImportedGoods.find(
                                        (e) =>
                                            new Date(1e3 * e.timestamp).addDays(
                                                1
                                            ) < new Date()
                                    )
                                ) {
                                    const e =
                                        await WbSpaModel.prototype.$httpClient
                                            .fetchStaticV3(
                                                wb.helpers.url.urlStaticBasket,
                                                {
                                                    timeout: 500,
                                                },
                                                "duty/duty.json",
                                                44
                                            )
                                            .catch(
                                                (e) => (
                                                    wb.spa.logError(
                                                        e,
                                                        "[CUSTOMS_DUTY]: failed to fetch customs duty data"
                                                    ),
                                                    this._customsData
                                                )
                                            );
                                    e &&
                                        (localStorage.putObject(
                                            "customs_duty",
                                            e
                                        ),
                                        (this._customsData = n = e));
                                }
                                return null ==
                                    (s =
                                        null == n
                                            ? void 0
                                            : n.dutyForImportedGoods)
                                    ? void 0
                                    : s.find((t) => t.curr == e);
                            } catch (e) {
                                return (
                                    wb.spa.logError(
                                        e,
                                        "[CUSTOMS_DUTY]: customs duty exception"
                                    ),
                                    null
                                );
                            }
                        }
                        reset() {
                            this.resetUserGrade(),
                                wb.cookieHelper.deleteCookie("access_token"),
                                this.initUser(),
                                this.resetBalance(),
                                this.clearXInfo(),
                                WbSpaModel.prototype.$services.userData.clear(),
                                WbSpaModel.prototype
                                    .$getService("groupedDeliveriesService")
                                    .then((e) => e.resetCache());
                        }
                        clearLocalUserData() {
                            WbSpaModel.prototype.$services.userData.clearLocalUserInfo(),
                                localStorage.removeItem(e.storageKey(b)),
                                localStorage.removeItem("offerRateMain");
                        }
                        static _getUserUid() {
                            return WbSpaModel.prototype.$auth.um.userUid || "0";
                        }
                        async _getUserData() {
                            return (
                                null != e.syncData.userData.time &&
                                    e.syncData.userData.time <= Date.now() &&
                                    !e.syncData.userData.updateInProgress &&
                                    (await this._xInfoUpdate()),
                                e.syncData.userData.data
                            );
                        }
                        static storageKey(t) {
                            return `${t}-${e._getUserUid()}`;
                        }
                        async _xInfoUpdate() {
                            const t = e.syncData.userData;
                            t.data &&
                                (wb.settings.b2bMode
                                    ? (t.data.xinfo += "&b2b=true")
                                    : (t.data.xinfo = t.data.xinfo.replace(
                                          "&b2b=true",
                                          ""
                                      ))),
                                (t.updateInProgress = !0);
                            const r = e.storageKey(t.prefix);
                            await navigator.locks.request(
                                `lock-${r}`,
                                async (s) => {
                                    var n;
                                    const o = e.syncData.userData;
                                    if (
                                        !o ||
                                        (null != o.time && o.time < Date.now())
                                    ) {
                                        const e = null == t ? void 0 : t.data;
                                        let s = new URLSearchParams();
                                        (null == e ? void 0 : e.currency) &&
                                            s.set("currency", e.currency),
                                            e &&
                                                (s.set(
                                                    "latitude",
                                                    e.latitude.toString()
                                                ),
                                                s.set(
                                                    "longitude",
                                                    e.longitude.toString()
                                                ),
                                                s.set("locale", e.locale),
                                                s.set("address", e.address),
                                                s.set(
                                                    "dt",
                                                    (e.dt || "0").toString()
                                                ),
                                                s.set(
                                                    "currentLocale",
                                                    wb.settings.currentLocale.toString()
                                                ),
                                                e.addressId &&
                                                    s.set(
                                                        "addressId",
                                                        e.addressId
                                                    ),
                                                e.addressType &&
                                                    s.set(
                                                        "addressType",
                                                        e.addressType
                                                    ));
                                        const o = t.fetchParam.url(s),
                                            i =
                                                await WbSpaModel.prototype.$httpClient.fetchBasicJSON(
                                                    o,
                                                    {
                                                        credentials: "include",
                                                    },
                                                    {
                                                        timeout:
                                                            t.fetchParam
                                                                .timeout,
                                                        nullOnError: !0,
                                                        addAuthHeader: !0,
                                                    }
                                                );
                                        if (i) {
                                            i.xinfo &&
                                                WbSpaModel.prototype.$isSupportBooking() &&
                                                (i.xinfo = i.xinfo.replace(
                                                    "&hide_dtype=10",
                                                    ""
                                                ));
                                            const e =
                                                    null ==
                                                    (n =
                                                        localStorage.getObject(
                                                            r
                                                        ))
                                                        ? void 0
                                                        : n.data,
                                                s = {
                                                    time:
                                                        Date.now() + t.interval,
                                                    data: p(p({}, e), i),
                                                };
                                            localStorage.putObject(r, s),
                                                Object.assign(t, s),
                                                this._checkForRefresh(e, i);
                                        } else e && (e.time = Date.now() + 1e4);
                                    } else
                                        o &&
                                            o.time !== t.time &&
                                            Object.assign(t, o);
                                    t.updateInProgress = !1;
                                }
                            );
                        }
                        getXinfo() {
                            return this._getUserData().then((e) =>
                                Promise.resolve(null == e ? void 0 : e.xinfo)
                            );
                        }
                        getXinfoWithClustersAndVectors(t) {
                            return (
                                this._checkNeedUpdateData(
                                    e.syncData.userClusters
                                ),
                                this._checkNeedUpdateData(
                                    e.syncData.userVector
                                ),
                                this._getUserData().then((r) => {
                                    var s, n, o, i;
                                    let a =
                                        e.syncData.userClusters.data &&
                                        (null ==
                                        (s = e.syncData.userClusters.data)
                                            ? void 0
                                            : s.length) > 0
                                            ? (null == r ? void 0 : r.xinfo) +
                                              `&uclusters=${e.syncData.userClusters.data.join(
                                                  ","
                                              )}`
                                            : null == r
                                            ? void 0
                                            : r.xinfo;
                                    if (
                                        ((wb.global.settings.switches
                                            .addUserVector &&
                                            "search" === t) ||
                                            (wb.global.settings.switches
                                                .addUserVectorCatalog &&
                                                "catalog" === t) ||
                                            (wb.global.settings.switches
                                                .addUserVectorRecommend &&
                                                "new_recom" === t)) &&
                                        (null == (n = e.syncData.userVector)
                                            ? void 0
                                            : n.data) &&
                                        (null ==
                                        (i =
                                            null == (o = e.syncData.userVector)
                                                ? void 0
                                                : o.data[t])
                                            ? void 0
                                            : i.value)
                                    ) {
                                        const r = e.syncData.userVector.data[t];
                                        a += `&uv=${r.value}&uiv=${r.version}`;
                                    }
                                    return Promise.resolve(a);
                                })
                            );
                        }
                        getUserClusters() {
                            var t;
                            return (
                                this._checkNeedUpdateData(
                                    e.syncData.userClusters
                                ),
                                null == (t = e.syncData.userClusters.data)
                                    ? void 0
                                    : t.join(",")
                            );
                        }
                        getXinfoSignedV1() {
                            return this._getUserData().then((e) => {
                                var t;
                                return Promise.resolve({
                                    xinfo: null == e ? void 0 : e.xinfo,
                                    userDataSign:
                                        null == e ? void 0 : e.userDataSign,
                                    addressDataSign:
                                        null == e ? void 0 : e.addressDataSign,
                                    shard: null == e ? void 0 : e.shard,
                                    latitude: null == e ? void 0 : e.latitude,
                                    longitude: null == e ? void 0 : e.longitude,
                                    address: null == e ? void 0 : e.address,
                                    dest:
                                        null ==
                                        (t =
                                            null == e ? void 0 : e.destinations)
                                            ? void 0
                                            : t.last(),
                                    addressId: null == e ? void 0 : e.addressId,
                                });
                            });
                        }
                        async getLocationData() {
                            const e = await this._getUserData();
                            return {
                                latitude: null == e ? void 0 : e.latitude,
                                longitude: null == e ? void 0 : e.longitude,
                                address: null == e ? void 0 : e.address,
                                destinations:
                                    null == e ? void 0 : e.destinations,
                                locale: null == e ? void 0 : e.locale,
                            };
                        }
                        async setGeo(t) {
                            var r, s, n;
                            const o = null != (r = t.lat) ? r : t.latitude,
                                i = null != (s = t.lon) ? s : t.longitude,
                                a = t.address;
                            if (o && i && a) {
                                const r = e.syncData.userData,
                                    s = e.storageKey(r.prefix),
                                    l =
                                        WbSpaModel.prototype.$services.userAddressService.getAddressSignData(
                                            t
                                        ),
                                    c = h(
                                        p(
                                            p({}, null == r ? void 0 : r.data),
                                            null ==
                                                (n = localStorage.getObject(s))
                                                ? void 0
                                                : n.data
                                        ),
                                        {
                                            latitude: o,
                                            longitude: i,
                                            address: a,
                                            addressId: t.addressId,
                                            addressType: t.deliveryType,
                                            addressDataSign: l,
                                            dt: (Date.now() / 1e3) | 0,
                                            relevant: !1,
                                        }
                                    );
                                c.xinfo = this._changeXDest(c.xinfo, t.dest);
                                const u = {
                                    data: c,
                                    time: e._timeInPast(r.interval),
                                };
                                Object.assign(r, u),
                                    localStorage.putObject(s, u),
                                    WbSpaModel.prototype.$geoLocation.setCityName(
                                        a
                                    ),
                                    await this._xInfoUpdate();
                            }
                        }
                        async setCurrency(t) {
                            var r;
                            if (t) {
                                const s = e.syncData.userData,
                                    n = e.storageKey(s.prefix),
                                    o = h(
                                        p(
                                            p({}, null == s ? void 0 : s.data),
                                            null ==
                                                (r = localStorage.getObject(n))
                                                ? void 0
                                                : r.data
                                        ),
                                        {
                                            currency: t,
                                            relevant: !1,
                                        }
                                    );
                                (o.xinfo = this._changeXCurrency(o.xinfo, t)),
                                    Object.assign(s, {
                                        data: o,
                                        time: e._timeInPast(s.interval),
                                    }),
                                    await this._xInfoUpdate();
                            }
                        }
                        clearXInfo() {
                            for (const t in e.syncData)
                                e.syncData[t].time = e._timeInPast(
                                    e.syncData[t].interval
                                );
                            Object.keys(localStorage).forEach((t) => {
                                for (const r in e.syncData)
                                    -1 !== t.indexOf(e.syncData[r].prefix) &&
                                        localStorage.removeItem(t);
                            });
                        }
                        clearUserData(t) {
                            const r = e.syncData[t];
                            (r.time = e._timeInPast(r.interval)),
                                Object.keys(localStorage).forEach((e) => {
                                    -1 !== e.indexOf(r.prefix) &&
                                        localStorage.removeItem(e);
                                });
                        }
                        async getShardAsync() {
                            const e = await this._getUserData();
                            return null == e ? void 0 : e.shard;
                        }
                        getIp() {
                            var t;
                            return null == (t = e.syncData.userData.data)
                                ? void 0
                                : t.ip;
                        }
                        getCurrency() {
                            var t;
                            return null == (t = e.syncData.userData.data)
                                ? void 0
                                : t.currency;
                        }
                        async getCurrencyAsync() {
                            const e = await this._getUserData();
                            return null == e ? void 0 : e.currency;
                        }
                        getLocale() {
                            var t;
                            return null == (t = e.syncData.userData.data)
                                ? void 0
                                : t.locale;
                        }
                        getDest() {
                            var t, r;
                            return null ==
                                (r =
                                    null == (t = e.syncData.userData.data)
                                        ? void 0
                                        : t.destinations)
                                ? void 0
                                : r.last();
                        }
                        getCurrentCoordinates() {
                            var t, r;
                            return [
                                null == (t = e.syncData.userData.data)
                                    ? void 0
                                    : t.longitude,
                                null == (r = e.syncData.userData.data)
                                    ? void 0
                                    : r.latitude,
                            ];
                        }
                        _changeXCurrency(e, t) {
                            const r = `$1${t.toLowerCase()}$3`;
                            return e.replace(/(&curr=)(.*?)(&)/, r);
                        }
                        _changeXDest(e, t) {
                            const r = `$1${t}$3`;
                            return e.replace(/(&dest=)(.*?)(&)/, r);
                        }
                        static getXCurrency(e) {
                            var t;
                            return null == (t = /curr=(.*?)&/.exec(e))
                                ? void 0
                                : t[1];
                        }
                        _checkForRefresh(t, r, s) {
                            var n, o, i, a, l, c, u, d;
                            let p = !1;
                            (null == t ? void 0 : t.currency) !==
                                (null == r ? void 0 : r.currency) &&
                                (e._checkCurrencyInvalid(r) &&
                                    location.reload(),
                                null == (n = wb.spa.getMainLayout().header) ||
                                    n.changeSettings.refresh(r.currency),
                                (p = !0)),
                                (null == t
                                    ? void 0
                                    : t.destinations[
                                          t.destinations.length - 1
                                      ]) !==
                                    (null == r
                                        ? void 0
                                        : r.destinations[
                                              r.destinations.length - 1
                                          ]) && (p = !0),
                                (null == r ? void 0 : r.address) &&
                                    (null ==
                                    (o =
                                        WbSpaModel.prototype.$geoLocation
                                            .location)
                                        ? void 0
                                        : o.address) !==
                                        (null == r ? void 0 : r.address) &&
                                    WbSpaModel.prototype.$geoLocation.updateLocation(),
                                p &&
                                    (WbSpaModel.prototype.$eventBus.dispatchEvent(
                                        new CustomEvent("GeoUpdated")
                                    ),
                                    null ==
                                        (l =
                                            null ==
                                            (a =
                                                null == (i = wb.spa)
                                                    ? void 0
                                                    : i.getMainLayout())
                                                ? void 0
                                                : a.menuTop) ||
                                        l.refreshMenu(
                                            (null == t ? void 0 : t.locale) !==
                                                (null == r ? void 0 : r.locale)
                                        ),
                                    WbSpaModel.prototype.$router.clearNotActiveContainer(),
                                    (s ||
                                        (WbSpaModel.prototype.$router
                                            .currentRoute &&
                                            "SpaBasketEntrypoint" !==
                                                (null ==
                                                (c =
                                                    WbSpaModel.prototype.$router
                                                        .currentRoute)
                                                    ? void 0
                                                    : c.name) &&
                                            "SpaBasketBuyItNowEntrypoint" !==
                                                (null ==
                                                (u =
                                                    WbSpaModel.prototype.$router
                                                        .currentRoute)
                                                    ? void 0
                                                    : u.name))) &&
                                        (null == (d = wb.spa) || d.refresh()));
                        }
                        _onSync(t) {
                            const { key: r, oldValue: s, newValue: n } = t;
                            if (r === g && n)
                                s !== n &&
                                    (n &&
                                    "unauth" !== n &&
                                    !WbSpaModel.prototype.$auth.isAuth
                                        ? wb.spa
                                              .getMainLayout()
                                              .updateAfterLogin()
                                        : location.reload());
                            else if (
                                r === e.storageKey(e.syncData.userData.prefix)
                            ) {
                                if (n) {
                                    const t = JSON.parse(s),
                                        r = JSON.parse(n);
                                    Object.assign(e.syncData.userData, r),
                                        setTimeout(
                                            () =>
                                                this._checkForRefresh(
                                                    null == t ? void 0 : t.data,
                                                    r.data,
                                                    !0
                                                ),
                                            1e3
                                        );
                                }
                            } else
                                for (const t in e.syncData)
                                    if (
                                        r === e.storageKey(e.syncData[t].prefix)
                                    ) {
                                        const r = JSON.parse(n);
                                        Object.assign(e.syncData[t], r);
                                    }
                        }
                        static _getFallbackData() {
                            const t = wb.settings.currentLocale || "ru",
                                r = e._getDefaultCurrency(t);
                            let s = {
                                xinfo: `appType=1&curr=${
                                    null == r ? void 0 : r.toLowerCase()
                                }&dest=-1257786&locale=${t}&spp=30&lang=${
                                    wb.currentLanguage
                                }`,
                                address: "Москва",
                                latitude: 55.753737,
                                longitude: 37.6201,
                                currency: r,
                                destinations: [
                                    -1029256, -102269, -2162196, -1257786,
                                ],
                            };
                            switch (t) {
                                case "ru":
                                    break;
                                case "by":
                                    s = {
                                        xinfo: `appType=1&curr=${
                                            null == r ? void 0 : r.toLowerCase()
                                        }&dest=-8139704&locale=${t}&spp=30&lang=${
                                            wb.currentLanguage
                                        }`,
                                        address: "Минск",
                                        latitude: 53.901328,
                                        longitude: 27.549044,
                                        currency: r,
                                        destinations: [
                                            12358386, 12358403, -70563,
                                            -8139704,
                                        ],
                                    };
                                    break;
                                case "kz":
                                    s = {
                                        xinfo: `appType=1&curr=${
                                            null == r ? void 0 : r.toLowerCase()
                                        }&dest=85&locale=${t}&spp=30&lang=${
                                            wb.currentLanguage
                                        }`,
                                        address: "Нур-Султан",
                                        latitude: 51.129669,
                                        longitude: 71.495475,
                                        currency: r,
                                        destinations: [
                                            12358388, 12358412, -3479876, 85,
                                        ],
                                    };
                                    break;
                                case "kg":
                                    s = {
                                        xinfo: `appType=1&curr=${
                                            null == r ? void 0 : r.toLowerCase()
                                        }&dest=28&locale=${t}&spp=30&lang=${
                                            wb.currentLanguage
                                        }`,
                                        address: "Бишкек",
                                        latitude: 42.8618,
                                        longitude: 74.5831,
                                        currency: r,
                                        destinations: [
                                            12358387, 12358395, -10860151, 28,
                                        ],
                                    };
                                    break;
                                case "am":
                                    s = {
                                        xinfo: `appType=1&curr=${
                                            null == r ? void 0 : r.toLowerCase()
                                        }&dest=36&locale=${t}&spp=30&lang=${
                                            wb.currentLanguage
                                        }`,
                                        address: "Ереван",
                                        latitude: 40.177628,
                                        longitude: 44.512547,
                                        currency: r,
                                        destinations: [
                                            12358387, 12358400, -13404218, 36,
                                        ],
                                    };
                                    break;
                                case "uz":
                                    s = {
                                        xinfo: `appType=1&curr=${
                                            null == r ? void 0 : r.toLowerCase()
                                        }&dest=491&locale=${t}&spp=30&lang=${
                                            wb.currentLanguage
                                        }`,
                                        address: "Ташкент",
                                        latitude: 41.311158,
                                        longitude: 69.279737,
                                        currency: r,
                                        destinations: [
                                            12358390, 12358442, -2448072, 491,
                                        ],
                                    };
                                    break;
                                case "tj":
                                    s = {
                                        xinfo: `appType=1&curr=${
                                            null == r ? void 0 : r.toLowerCase()
                                        }&dest=-1257786&locale=${t}&spp=30&lang=${
                                            wb.currentLanguage
                                        }`,
                                        address: "Душанбе",
                                        latitude: 38.576271,
                                        longitude: 68.779716,
                                        currency: r,
                                        destinations: [
                                            -214626, -7328360, -11018181,
                                            123589607,
                                        ],
                                    };
                                    break;
                                case "ge":
                                    s = {
                                        xinfo: `appType=1&curr=${
                                            null == r ? void 0 : r.toLowerCase()
                                        }&dest=123586302&locale=${t}&spp=30&lang=${
                                            wb.currentLanguage
                                        }`,
                                        address: "Тбилиси",
                                        latitude: 41.693083,
                                        longitude: 44.801561,
                                        currency: r,
                                        destinations: [
                                            -28699, -1996871, -13438811,
                                            123586302,
                                        ],
                                    };
                            }
                            return (s.locale = t), (s.shard = 0), s;
                        }
                        static _getDefaultCurrency(e) {
                            return wb.currencies.getDefaultForLocale(e);
                        }
                        static _timeInPast(e) {
                            return Date.now() - e;
                        }
                        static _checkCurrencyInvalid(t) {
                            var r;
                            const s =
                                null == (r = e.getXCurrency(t.xinfo))
                                    ? void 0
                                    : r.toUpperCase();
                            return (
                                !t ||
                                !wb.currencies.info[t.currency] ||
                                (s && !wb.currencies.info[s])
                            );
                        }
                        _checkNeedUpdateData(t) {
                            if (
                                (null != t.time && t.time >= Date.now()) ||
                                t.updateInProgress
                            )
                                return;
                            t.updateInProgress = !0;
                            const r = e.storageKey(t.prefix);
                            navigator.locks.request(`lock-${r}`, async (s) => {
                                const n = localStorage.getObject(r);
                                if (!n || n.time < Date.now()) {
                                    let s;
                                    if ("0" !== e._getUserUid())
                                        if (
                                            t.disableFetch &&
                                            (await t.disableFetch())
                                        )
                                            s = [];
                                        else {
                                            const r = t.fetchParam.url(
                                                    e._getUserUid()
                                                ),
                                                n =
                                                    await WbSpaModel.prototype.$httpClient.fetchBasicJSON(
                                                        r,
                                                        {
                                                            credentials: "omit",
                                                        },
                                                        {
                                                            timeout:
                                                                t.fetchParam
                                                                    .timeout,
                                                            nullOnError: !0,
                                                            addAuthHeader:
                                                                t.fetchParam
                                                                    .jwt,
                                                        }
                                                    );
                                            s =
                                                t.processData &&
                                                t.processData(n);
                                        }
                                    else s = [];
                                    if (s) {
                                        const e = {
                                            time: Date.now() + t.interval,
                                            data: s,
                                        };
                                        localStorage.putObject(r, e),
                                            Object.assign(t, e);
                                    } else
                                        t.time = Date.now() - t.interval + 6e4;
                                } else
                                    n &&
                                        n.time !== t.time &&
                                        Object.assign(t, n);
                                t.updateInProgress = !1;
                            });
                        }
                    };
                m(v, "syncData", {
                    userData: {
                        prefix: "geo-data-v1",
                        data: null,
                        interval: 18e4,
                        fetchParam: {
                            url: (e) => `${s.Ho}get-geo-info?${e}`,
                            timeout: 3e3,
                        },
                        init: function () {
                            const e = {
                                    data: v._getFallbackData(),
                                    time: v._timeInPast(Date.now()),
                                },
                                t = localStorage.getObject(
                                    v.storageKey(this.prefix)
                                );
                            (null == t ? void 0 : t.data) &&
                                v._checkCurrencyInvalid(t.data) &&
                                (t.time = v._timeInPast(this.interval)),
                                Object.assign(this, p(p({}, e), t));
                        },
                    },
                    userClusters: {
                        prefix: "user-clusters",
                        data: null,
                        processData: function (e) {
                            return this.fetchParam.dataField
                                ? e[this.fetchParam.dataField]
                                : e;
                        },
                        interval: 432e5,
                        fetchParam: {
                            url: (e) =>
                                `https://personal-clusters.wildberries.ru/api/v1/clusters?id=${e}`,
                            dataField: "uclusters",
                            timeout: 2e4,
                        },
                        init: function () {
                            Object.assign(
                                this,
                                p(
                                    p(
                                        {},
                                        {
                                            data: [],
                                            time: v._timeInPast(this.interval),
                                        }
                                    ),
                                    localStorage.getObject(
                                        v.storageKey(this.prefix)
                                    )
                                )
                            );
                        },
                        disableFetch: async function () {
                            const e =
                                await WbSpaModel.prototype.$services.userData.getUserDataAsync();
                            return !e || !e.userInfo.enableUserPersonalization;
                        },
                    },
                    userVector: {
                        prefix: "user-vector",
                        data: null,
                        processData: function (e) {
                            if (e) {
                                const t = {};
                                for (const r of Object.keys(e))
                                    if (e[r].length > 0) {
                                        const s = e[r][0];
                                        t[r] = {
                                            value: s.value,
                                            version: s.version,
                                        };
                                    }
                                return t;
                            }
                            return this.data;
                        },
                        interval: 432e5,
                        fetchParam: {
                            url: () =>
                                "https://user-vector-info.wb.ru/api/v2/vector",
                            timeout: 2e4,
                            jwt: !0,
                        },
                        init: function () {
                            Object.assign(
                                this,
                                p(
                                    p(
                                        {},
                                        {
                                            data: [],
                                            time: v._timeInPast(this.interval),
                                        }
                                    ),
                                    localStorage.getObject(
                                        v.storageKey(this.prefix)
                                    )
                                )
                            );
                        },
                        disableFetch: async function () {
                            const e =
                                await WbSpaModel.prototype.$services.userData.getUserDataAsync();
                            return !e || !e.userInfo.enableUserPersonalization;
                        },
                    },
                });
                var f = v;
            },
            36881: function () {
                "use strict";
                ($.processResponse = function (e, t, r, s) {
                    if (null == e) return !1;
                    const n = e.resultState,
                        o = e.value;
                    if (-1 === n) {
                        const t =
                            e.value || wb.i18n.t("common.errors.serverError");
                        return "boolean" == typeof r
                            ? (r && wb.popup.renderModalError(t), !0)
                            : (null != r && null != o
                                  ? r(o)
                                  : null != o && window.alert(String(o)),
                              !0);
                    }
                    if (0 === n) return null != t && (t(o), !0);
                    if (1 === n) return (window.location.href = String(o)), !0;
                    if (2 === n || 4 === n) {
                        if (4 === n && wb.spa) return wb.spa.refresh(), !0;
                        let e = window.location.href;
                        const t = e.indexOf("#");
                        return (
                            -1 !== t && (e = e.substr(0, t)),
                            null != o
                                ? ((window.location.href = e + o),
                                  window.location.reload())
                                : (window.location.href = e),
                            !0
                        );
                    }
                    if (3 === n) {
                        const e = o;
                        if (null == e ? void 0 : e.url) {
                            if (wb.spa) {
                                const t = new URL(
                                    decodeURIComponent(e.url),
                                    window.location.origin
                                );
                                return (
                                    (e.redirect = !0),
                                    null == s || s(e),
                                    wb.spa.redirect(
                                        t.href,
                                        e.replaceState,
                                        e.forceUpdate
                                    ),
                                    !0
                                );
                            }
                            return (window.location.href = e.url), !0;
                        }
                    }
                    return !0;
                }),
                    (wb.quickNav = function (e) {
                        var t = e || {},
                            r = document.querySelector(".j-quicknav");
                        if (null === r) return;
                        r.addEventListener("click", function () {
                            return (
                                window.scrollTo({
                                    top: 0,
                                    behavior: "smooth",
                                }),
                                !1
                            );
                        });
                        let s;
                        function n() {
                            null !== r && (r.style.display = "block");
                        }
                        function o() {
                            null !== r && (r.style.display = "none");
                        }
                        window.addEventListener("scroll", function () {
                            if (r) {
                                document.documentElement.clientWidth >= 768
                                    ? (function () {
                                          const e =
                                              t.bottomPx ||
                                              (function () {
                                                  const e =
                                                      document.querySelector(
                                                          "#app"
                                                      );
                                                  return e
                                                      ? e.offsetTop +
                                                            parseFloat(
                                                                getComputedStyle(
                                                                    e,
                                                                    null
                                                                ).height.replace(
                                                                    "px",
                                                                    ""
                                                                )
                                                            )
                                                      : 0;
                                              })();
                                          (window.pageYOffset ||
                                              document.documentElement
                                                  .scrollTop ||
                                              document.body.scrollTop ||
                                              0) > e
                                              ? n()
                                              : o();
                                      })()
                                    : (function () {
                                          const e =
                                              window.pageYOffset ||
                                              document.documentElement
                                                  .scrollTop ||
                                              document.body.scrollTop ||
                                              0;
                                          s || (s = e),
                                              (function () {
                                                  if (e >= s) return !1;
                                                  const t =
                                                      document.documentElement
                                                          .clientHeight;
                                                  return !(e < 1.5 * t);
                                              })()
                                                  ? n()
                                                  : o(),
                                              (s = e);
                                      })();
                            }
                        });
                    }),
                    wb.namespace(
                        "displayModeSettings",
                        (function () {
                            const e = "displayMode";
                            let t;
                            var r = new Map();
                            return {
                                init: function () {
                                    function r() {
                                        const r = wb.settings.breakponts,
                                            s = window.innerWidth;
                                        for (var n in ((t = "d"), r))
                                            s < Number(n) && (t = r[n]);
                                        let o = "desktop";
                                        s <= 767.98 && (o = "phone"),
                                            s >= 768 &&
                                                s <= 1023.98 &&
                                                (o = "tablet"),
                                            $.observable(
                                                wb.settings
                                            ).setProperty(e, t),
                                            $.observable(
                                                wb.settings
                                            ).setProperty({
                                                displayType: o,
                                            });
                                    }
                                    r(), window.addEventListener("resize", r);
                                },
                                addObserver: function (s, n) {
                                    if ("function" == typeof s) {
                                        n && s(t);
                                        var o = () => s(t);
                                        $.observe(wb.settings, e, o),
                                            $.observe(
                                                wb.settings,
                                                "displayType",
                                                o
                                            ),
                                            r.set(s, o);
                                    }
                                },
                                removeObserver: function (t) {
                                    let s = r.get(t);
                                    s &&
                                        ($.unobserve(wb.settings, e, s),
                                        $.unobserve(
                                            wb.settings,
                                            "displayType",
                                            s
                                        ));
                                },
                            };
                        })()
                    ),
                    wb.namespace(
                        "network",
                        (function () {
                            return {
                                init: function () {
                                    function e() {
                                        $.observable(wb.settings).setProperty(
                                            "isOffline",
                                            !window.navigator.onLine
                                        );
                                    }
                                    e(),
                                        window.addEventListener("online", e),
                                        window.addEventListener("offline", e);
                                },
                            };
                        })()
                    );
            },
            40369: function () {
                "use strict";
                (wb.stat = (function () {
                    let e,
                        t = [];
                    const r = () => {
                            const e = t;
                            return (t = []), e;
                        },
                        s = () => {
                            if (!t.length || window._debug) return;
                            const s = r(),
                                n = {
                                    pageViewGuid: e,
                                    path: window.location.pathname,
                                    queryString: window.location.search,
                                    urlReferrer:
                                        null != wb.spa
                                            ? wb.spa.getReferrer()
                                            : document.referrer,
                                    deviceId:
                                        wb.cookieHelper.getCookie("_wbauid"),
                                    statisticEvents: s,
                                };
                            WbSpaModel.prototype.$httpClient
                                .fetch("/webapi/stats/events", {
                                    method: "POST",
                                    body: JSON.stringify(n),
                                    headers: {
                                        "Content-Type": "application/json",
                                    },
                                })
                                .catch((e) => {
                                    t = t.concat(s);
                                });
                        };
                    return (
                        setInterval(() => {
                            s();
                        }, 3e3),
                        {
                            sendEvent: (e, r, n) => {
                                const o = r.slice();
                                t.push({
                                    EventName: e,
                                    EventParams: o,
                                }),
                                    n && s();
                            },
                            wrapParam: (e, t) => ({
                                ParamName: e,
                                ParamValue:
                                    void 0 === t
                                        ? null
                                        : t.toString().replace(/"/g, "\\x22"),
                            }),
                            sendPageView: () => {
                                if (window._debug) return;
                                let s;
                                const n = {
                                    statusCode: 200,
                                    path: window.location.pathname,
                                    queryString: window.location.search,
                                    urlReferrer: document.referrer,
                                    deviceId:
                                        wb.cookieHelper.getCookie("_wbauid"),
                                };
                                t.length > 0 &&
                                    ((s = r()), (n.statisticEvents = s)),
                                    WbSpaModel.prototype.$user
                                        .getLocationData()
                                        .then(
                                            (e) => (
                                                e &&
                                                    ((n.address = e.address),
                                                    (n.latitude = e.latitude),
                                                    (n.longitude =
                                                        e.longitude)),
                                                WbSpaModel.prototype.$httpClient.fetch(
                                                    "/webapi/stats/pageview",
                                                    {
                                                        method: "POST",
                                                        body: JSON.stringify(n),
                                                        headers: {
                                                            "Content-Type":
                                                                "application/json",
                                                        },
                                                    }
                                                )
                                            )
                                        )
                                        .then((e) => e.json())
                                        .then((t) => {
                                            e = t;
                                        })
                                        .catch((e) => {
                                            s && (t = t.concat(s));
                                        });
                            },
                        }
                    );
                })()),
                    (wb.stat.banners = (function () {
                        const e = "j-banner",
                            t = {
                                cl: {
                                    banner: e,
                                },
                                sl: {
                                    shownStat: ".j-banner-shown-stat",
                                    clickStat: ".j-banner-click-stat",
                                    banner: "." + e,
                                },
                            },
                            r = function (e) {
                                const t = [],
                                    r = e.data("banner-id"),
                                    s = e.data("section"),
                                    n = e.data("statistic-fields");
                                return "" === r
                                    ? null
                                    : (t.push(wb.stat.wrapParam("BID", r)),
                                      t.push(wb.stat.wrapParam("SCTN", s)),
                                      n &&
                                          (t.push(
                                              wb.stat.wrapParam(
                                                  "BUT",
                                                  n.urlType
                                              )
                                          ),
                                          t.push(
                                              wb.stat.wrapParam(
                                                  "BLT",
                                                  n.locationType
                                              )
                                          ),
                                          t.push(
                                              wb.stat.wrapParam(
                                                  "BDT",
                                                  n.displayType
                                              )
                                          ),
                                          t.push(
                                              wb.stat.wrapParam("SORT", n.sort)
                                          )),
                                      t);
                            },
                            s = function (e) {
                                e instanceof jQuery || (e = $(e));
                                if (e.data("shown-stat-sent")) return;
                                const t = r(e);
                                if (!t) return;
                                const s =
                                    e[0].classList.contains(
                                        "j-banner-stat-send"
                                    );
                                wb.stat.sendEvent("BSE", t, s),
                                    e.attr("data-shown-stat-sent", String(!0));
                            },
                            n = (e, t) => {
                                var s;
                                if ((null == e ? void 0 : e.length) > 0) {
                                    const t = e[0];
                                    if (t.classList.contains("j-banner-wba")) {
                                        let { data: e } = $.view(t);
                                        (e = e.length > 0 ? e[0] : e),
                                            e.banner && (e = e.banner);
                                        const r = Boolean(e.ordBannerMark),
                                            n =
                                                (null ==
                                                (s = e.bannerSelections)
                                                    ? void 0
                                                    : s.length) > 0
                                                    ? e.bannerSelections
                                                          .map((e) => e.href)
                                                          .toString()
                                                    : e.link;
                                        wb.analitics.sendBannersWbaEvent(
                                            "Banner_T",
                                            e.alt,
                                            t.dataset.analiticsCode,
                                            n,
                                            t.dataset.bannerIndex,
                                            e.id,
                                            r
                                        );
                                    }
                                }
                                if (t) return;
                                if (e.data("click-stat-sent")) return;
                                const n = r(e);
                                n &&
                                    (wb.stat.sendEvent("BCE", n, !0),
                                    e.attr("data-click-stat-sent", String(!0)));
                            };
                        return {
                            initClickEvent: (e) => {
                                $("body")
                                    .off("mousedown", t.sl.clickStat)
                                    .on("mousedown", t.sl.clickStat, (r) => {
                                        if (3 === r.which) return;
                                        const s =
                                            r.currentTarget.classList.contains(
                                                t.cl.banner
                                            );
                                        let o = $(r.currentTarget);
                                        var i;
                                        s ||
                                            ((i = o.data("banner-id")),
                                            (o = $(t.sl.banner)
                                                .filter(
                                                    (e, t) =>
                                                        $(t).data(
                                                            "banner-id"
                                                        ) === i
                                                )
                                                .first())),
                                            n(o, e);
                                    });
                            },
                            sendShownStatistic: s,
                            sendAllShownStatistic: () => {
                                const e = $(t.sl.shownStat);
                                wb.scrollListener.addElements(
                                    e,
                                    (e) => {
                                        s($(e));
                                    },
                                    !1,
                                    0.6
                                ),
                                    wb.scrollListener.start();
                            },
                            sendStatisticNow: () => {
                                $.each($(t.sl.shownStat), (e, t) => {
                                    wb.stat.banners.sendShownStatistic($(t));
                                });
                            },
                            sendShownCarousel: (e) => {
                                const t = e
                                    .find("li:not(.jc-clone)")
                                    .find(".j-banner");
                                $.each(t, (e, t) => {
                                    wb.stat.banners.sendShownStatistic($(t));
                                });
                            },
                            callShownVisibleHandlerForCarousel: (e, t) => {
                                const r = e
                                    .find("li")
                                    .find(".j-banner:not(.j-banner-section)");
                                wb.scrollListener.addElements(
                                    r,
                                    (e) => {
                                        wb.stat.banners.sendShownStatistic(
                                            $(e)
                                        );
                                    },
                                    !1,
                                    t
                                ),
                                    wb.scrollListener.start();
                            },
                            getShownAfterSetActiveEvent: (e) => (t) => {
                                const r = t.find(".j-banner").first();
                                wb.scrollListener.checkRatio(r, e) &&
                                    wb.stat.banners.sendShownStatistic(r);
                            },
                            sendClickStatistic: n,
                            destroyClickEvent: () => {
                                $("body").off("mousedown", t.sl.clickStat);
                            },
                            bannerBlockShownStatWba: (e) => {
                                const t = ((e) => {
                                    if (!e) return;
                                    const t =
                                            document.querySelectorAll(
                                                ".j-banners-block"
                                            ),
                                        r = [],
                                        s = (t) => {
                                            const s = Array.from(
                                                    t.querySelectorAll(
                                                        ".j-banner-wba"
                                                    )
                                                ),
                                                n =
                                                    e.$observerHelper.getVerticalObserver(
                                                        s,
                                                        {
                                                            threshold: 0.5,
                                                        }
                                                    );
                                            r.push(n);
                                            const o = (t) => {
                                                const r = t.target,
                                                    { data: s } = $.view(r),
                                                    i = Boolean(
                                                        s.ordBannerMark
                                                    );
                                                e.$analitic.sendBannersWbaEvent(
                                                    "Banner_S",
                                                    r.title,
                                                    r.dataset.analiticsCode,
                                                    r.href,
                                                    r.dataset.bannerIndex,
                                                    r.dataset.bannerId,
                                                    i,
                                                    s.pixelSrc
                                                ),
                                                    e.$stat.banners.sendShownStatistic(
                                                        r
                                                    ),
                                                    r.removeEventListener(
                                                        n.elementInViewportEventName,
                                                        o
                                                    );
                                            };
                                            s.forEach((e) => {
                                                e.addEventListener(
                                                    n.elementInViewportEventName,
                                                    o
                                                );
                                            }),
                                                n.observe();
                                        };
                                    return (
                                        t.forEach((e) => {
                                            s(e);
                                        }),
                                        {
                                            destroy: () => {
                                                r.forEach((e) => {
                                                    e.destroy();
                                                });
                                            },
                                            addBlocks: (e) => {
                                                (null == e
                                                    ? void 0
                                                    : e.length) &&
                                                    e
                                                        .filter((e) =>
                                                            e.classList.contains(
                                                                "j-banners-block"
                                                            )
                                                        )
                                                        .forEach((e) => {
                                                            s(e);
                                                        });
                                            },
                                        }
                                    );
                                })(e);
                                return {
                                    destroy: () => {
                                        t && t.destroy();
                                    },
                                    addBlocks: (e) => {
                                        t && t.addBlocks(e);
                                    },
                                };
                            },
                        };
                    })());
                (() => {
                    const e = document.createElement("a");
                    if (
                        ((e.href = document.referrer),
                        !((e) => {
                            let t = !0;
                            return (
                                ["wb.", "wildberries."].forEach((r) => {
                                    e.indexOf(r) < 0 ||
                                        (-1 ===
                                            $.inArray(e.split(".")[0], [
                                                "style",
                                                "blog",
                                                "lookshop",
                                            ]) &&
                                            (t = !1));
                                }),
                                t
                            );
                        })(e.hostname))
                    )
                        return;
                    const t = wb.helpers.getParamsFromUrlQuery(location.search),
                        r = [];
                    if (
                        !(
                            e.hostname ||
                            t.utm_medium ||
                            t.utm_campaign ||
                            t.utm_source
                        )
                    )
                        return (
                            r.push(wb.stat.wrapParam("Rfr", "direct")),
                            void wb.stat.sendEvent("RFR", r)
                        );
                    r.push(
                        wb.stat.wrapParam(
                            "UTMM",
                            t.utm_medium ? t.utm_medium : "not_set"
                        )
                    ),
                        r.push(
                            wb.stat.wrapParam(
                                "UTMC",
                                t.utm_campaign ? t.utm_campaign : "not_set"
                            )
                        ),
                        r.push(
                            wb.stat.wrapParam(
                                "UTMS",
                                t.utm_source
                                    ? t.utm_source
                                    : e.hostname
                                    ? e.hostname
                                    : "not_set"
                            )
                        ),
                        t.gclid && r.push(wb.stat.wrapParam("GCID", "adwords")),
                        e.hostname &&
                            r.push(wb.stat.wrapParam("Rfr", e.hostname)),
                        wb.stat.sendEvent("RFR", r);
                })(),
                    (() => {
                        const e = wb.getURLparam("wb_tp"),
                            t = wb.getURLparam("wb_bnd"),
                            r = [];
                        e &&
                            t &&
                            (r.push(wb.stat.wrapParam("Btp", e)),
                            r.push(wb.stat.wrapParam("Bbnd", t)),
                            wb.stat.sendEvent("BV", r));
                    })();
            },
            63152: function () {
                "use strict";
                var e = class {
                    getFullEcomInfoHtml(e) {
                        return this.getFullEcomInfo(e, null);
                    }
                    _tryGetTargetItem(e) {
                        var t, r, s;
                        let n =
                            null == e ? void 0 : e.closest(".j-analitics-item");
                        return n
                            ? $.view(n).data
                            : ((n =
                                  null == e
                                      ? void 0
                                      : e.closest(".j-menu-main-item")),
                              n
                                  ? {
                                        getFullEcomInfo:
                                            (null ==
                                            (s =
                                                null ==
                                                (r =
                                                    null ==
                                                    (t =
                                                        wb.spa.getMainLayout()
                                                            .menuTop)
                                                        ? void 0
                                                        : t.sideMenu)
                                                    ? void 0
                                                    : r.statisticManager)
                                                ? void 0
                                                : s.getFullEcomInfoMenuItem) ||
                                            null,
                                    }
                                  : null);
                    }
                    getFullEcomInfo(e, t) {
                        var r;
                        if ((t || (t = this._tryGetTargetItem(e)), !t))
                            return null;
                        return (
                            (null ==
                            (r = null == t ? void 0 : t.getFullEcomInfo)
                                ? void 0
                                : r.call(t, e, t)) || null
                        );
                    }
                };
                const t = "onw_handler_key",
                    r = 3e5;
                var s = class {
                        saveStatInfo(e, t) {
                            if (!e || !t) return;
                            const r = document.location.pathname;
                            this._saveStatInfo({
                                targetUrl: e,
                                pathname: r,
                                analiticsData: t,
                            });
                        }
                        getStatInfo() {
                            const e = this._getStatInfo();
                            return (
                                (null == e ? void 0 : e.analiticsData) || null
                            );
                        }
                        _getStatInfo() {
                            var e;
                            const s = JSON.parse(
                                null != (e = localStorage.getItem(t)) ? e : "{}"
                            );
                            if (
                                !(null == s ? void 0 : s.expired) ||
                                s.expired < Date.now() - r
                            )
                                return null;
                            const n = s.data,
                                o = document.location.href,
                                i = document.referrer
                                    ? new URL(document.referrer).pathname
                                    : "";
                            return n.targetUrl == o && n.pathname == i
                                ? n
                                : null;
                        }
                        _saveStatInfo(e) {
                            try {
                                if (!e) return;
                                localStorage.putObject(t, {
                                    expired: Date.now() + r,
                                    data: e,
                                });
                            } catch (e) {}
                        }
                    },
                    n = Object.defineProperty,
                    o = Object.defineProperties,
                    i = Object.getOwnPropertyDescriptors,
                    a = Object.getOwnPropertySymbols,
                    l = Object.prototype.hasOwnProperty,
                    c = Object.prototype.propertyIsEnumerable,
                    u = (e, t, r) =>
                        t in e
                            ? n(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r),
                    d = (e, t) => {
                        for (var r in t || (t = {}))
                            l.call(t, r) && u(e, r, t[r]);
                        if (a)
                            for (var r of a(t)) c.call(t, r) && u(e, r, t[r]);
                        return e;
                    },
                    p = (e, t) => o(e, i(t));
                const h = "tail_object_data",
                    m = ["SNT", "SNH", "SNS", "SST", "SHT", "SVR"],
                    g = ["SNS", "ANS", "SNH", "ANH", "SHT", "AVR"],
                    b = ["SAB", "ANH", "ANS", "AST", "ATR", "AVR"],
                    y = [
                        "MBB",
                        "MBM",
                        "MBS",
                        "BBB",
                        "BBA",
                        "CBB",
                        "CBA",
                        "CBU",
                        "CBS",
                    ];
                var v = class {
                        getTermsFromTailObject(e, t) {
                            var r, s, n, o, i, a, l, c, u, h;
                            const v = this.getTailObjectData(),
                                f = {
                                    filters: null != (r = v.filters) ? r : "",
                                    filters_entry_point:
                                        null != (s = v.filters_entry_point)
                                            ? s
                                            : "default",
                                },
                                w = {
                                    bid: v.bid,
                                    bid_index: v.bid_index,
                                },
                                S = {
                                    category: v.category,
                                    id_category: v.id_category,
                                },
                                _ = {
                                    parent_item_id: v.parent_item_id,
                                    brand: v.brand,
                                },
                                C = {
                                    entry_point: v.entry_point,
                                    entry_point_info: v.entry_point_info,
                                };
                            if ("AAA" === e || "ADI" === e) {
                                const e = this.getTailObjectData();
                                let t;
                                switch (e.page_type) {
                                    case "brand":
                                        t = null != (n = e.brand) ? n : "";
                                        break;
                                    case "catalog":
                                        t =
                                            null != (o = e.id_category)
                                                ? o
                                                : "";
                                        break;
                                    case "search":
                                        t =
                                            null != (i = e.search_text)
                                                ? i
                                                : "";
                                        break;
                                    case "seller":
                                        t = null != (a = e.page_info) ? a : "";
                                        break;
                                    default:
                                        t = "";
                                }
                                return {
                                    page_type: e.page_type,
                                    page_info: t,
                                };
                            }
                            if ("AHT" === e) {
                                const e = this.getTailObjectData();
                                return {
                                    catalog_type: e.catalog_type,
                                    catalog_value: e.catalog_value,
                                    normquery: e.normquery,
                                    query_id: e.query_id,
                                    filters: e.filters,
                                    filters_entry_point: e.filters_entry_point,
                                    rs: e.rs,
                                    search_text: e.search_text,
                                    meta_preset_id: e.meta_preset_id,
                                };
                            }
                            if ("SCL" === e) {
                                const e = this.getTailObjectData();
                                return {
                                    catalog_type: e.catalog_type,
                                    catalog_value: e.catalog_value,
                                    query_id: e.query_id,
                                    rs: e.rs,
                                };
                            }
                            if ("SCM" === e) {
                                const e = this.getTailObjectData();
                                return {
                                    catalog_type: e.catalog_type,
                                    catalog_value: e.catalog_value,
                                    query_id: e.query_id,
                                    rs: e.rs,
                                };
                            }
                            function I() {
                                return d(d({}, w), f);
                            }
                            function k() {
                                return d(d({}, f), S);
                            }
                            function M() {
                                return {
                                    project_name: v.project_name,
                                    entry_point: v.entry_point,
                                    vendor_name: v.vendor_name,
                                    bid_index: v.bid_index,
                                    banner_block: v.banner_block,
                                    link: v.link,
                                };
                            }
                            if (y.includes(e))
                                return ["BBB", "BBA"].includes(e)
                                    ? d(d({}, I()), C)
                                    : I();
                            if ("BWA" === e || "BQA" === e)
                                return p(d(d(d({}, f), w), C), {
                                    page_type: v.page_type,
                                    page_info: v.page_info,
                                });
                            if (m.includes(e) || b.includes(e)) {
                                const r = (function () {
                                    const e = d(
                                            {
                                                catalog_type: v.catalog_type,
                                                catalog_value: v.catalog_value,
                                                normquery: v.normquery,
                                                query_id: v.query_id,
                                                rs: v.rs,
                                                search_text: v.search_text,
                                                meta_preset_id:
                                                    v.meta_preset_id,
                                            },
                                            f
                                        ),
                                        r = Object.keys(t || {})
                                            .filter((t) => t in e)
                                            .reduce(
                                                (e, r) => ((e[r] = t[r]), e),
                                                {}
                                            );
                                    return d(d({}, e), r);
                                })();
                                return (
                                    g.includes(e) &&
                                        ((r.text_typed =
                                            null != (l = v.text_typed)
                                                ? l
                                                : ""),
                                        (r.meta_preset_id = v.meta_preset_id)),
                                    r
                                );
                            }
                            return "STB" === e
                                ? {
                                      filters: v.filters,
                                      filters_entry_point:
                                          v.filters_entry_point,
                                      brand: v.brand,
                                      query_id: v.query_id,
                                      text_typed:
                                          null != (P = v.text_typed) ? P : "",
                                      meta_preset_id:
                                          null != (T = v.meta_preset_id)
                                              ? T
                                              : "",
                                  }
                                : "ATB" === e
                                ? p(d({}, f), {
                                      brand: v.brand,
                                      query_id: v.query_id,
                                      catalog_value: v.catalog_value,
                                      catalog_type: v.catalog_type,
                                      search_text: v.text_typed,
                                  })
                                : "SCF" === e
                                ? {
                                      search_text: v.search_text,
                                  }
                                : "SPA" === e
                                ? {
                                      query_id: v.query_id,
                                  }
                                : "ATB" === e
                                ? d(
                                      {
                                          brand: v.brand,
                                          query_id: v.query_id,
                                          meta_preset_id: v.meta_preset_id,
                                      },
                                      f
                                  )
                                : "CAR" === e
                                ? d(
                                      {
                                          catalog_type: v.catalog_type,
                                          catalog_value: v.catalog_value,
                                          type_auto: v.type_auto,
                                          query_id: v.query_id,
                                          search_text: v.search_text,
                                      },
                                      f
                                  )
                                : "CAA" === e
                                ? d(
                                      {
                                          type_auto: v.type_auto,
                                          query_id: v.query_id,
                                          search_text: v.search_text,
                                      },
                                      f
                                  )
                                : "MAB" === e || "MCS" === e
                                ? d(
                                      {
                                          catalog_type: v.catalog_type,
                                          catalog_value: v.catalog_value,
                                          preset_type: v.preset_type,
                                          recid: v.recid,
                                      },
                                      t
                                  )
                                : "MBL" === e
                                ? d(
                                      {
                                          bid: v.bid,
                                      },
                                      f
                                  )
                                : "MBT" === e
                                ? p(d(d({}, w), f), {
                                      tv_block: "1",
                                  })
                                : "IBC" === e
                                ? f
                                : "BCR" === e
                                ? d(d({}, f), C)
                                : "BTA" === e
                                ? d(
                                      d(
                                          {
                                              carousel_name: v.carousel_name,
                                              carousel_index: v.carousel_index,
                                              type_of_block:
                                                  null !=
                                                  (c =
                                                      null == t
                                                          ? void 0
                                                          : t.type_of_block)
                                                      ? c
                                                      : "FullsizeBlock",
                                          },
                                          f
                                      ),
                                      C
                                  )
                                : "BCA" === e || "BEA" === e
                                ? d(d({}, k()), C)
                                : "BOL" === e || "BOA" === e
                                ? p(d({}, f), {
                                      letter: v.text_typed,
                                      place: v.search_text,
                                  })
                                : "CCT" === e || "CCR" === e
                                ? {}
                                : ["CCC", "CTC", "CAB"].includes(e)
                                ? k()
                                : "ICC" === e
                                ? f
                                : "IAB" === e
                                ? p(d({}, f), {
                                      banner_name: v.banner_name,
                                  })
                                : ["ABN", "ABC"].includes(e)
                                ? d(d({}, f), _)
                                : "IBA" === e ||
                                  ["IAC", "IBN", "ISC", "IBB"].includes(e)
                                ? p(d({}, f), {
                                      parent_item_id: v.parent_item_id,
                                  })
                                : ["ICO", "ICV", "ICR", "IPT", "ISR"].includes(
                                      e
                                  )
                                ? {
                                      parent_item_id: v.parent_item_id,
                                  }
                                : ["ISP", "ISA"].includes(e)
                                ? {
                                      photo_index: v.photo_index,
                                      parent_item_id: v.parent_item_id,
                                  }
                                : "ITO" === e
                                ? {
                                      parent_item_id: v.parent_item_id,
                                      type_of_block: v.type_of_block,
                                  }
                                : "ISC" === e
                                ? p(d({}, f), {
                                      parent_item_id: v.parent_item_id,
                                  })
                                : "IPT" === e
                                ? {
                                      parent_item_id: v.parent_item_id,
                                  }
                                : "ICS" === e || "ICA" === e
                                ? {
                                      catalog_type: v.catalog_type,
                                      catalog_value: v.catalog_value,
                                      preset_type: v.preset_type,
                                      parent_item_id: v.parent_item_id,
                                  }
                                : ["CCB", "CCM", "CPF"].includes(e)
                                ? {
                                      item_ids: v.item_ids,
                                  }
                                : "CRV" === e
                                ? {
                                      empty_cart: v.empty_cart,
                                  }
                                : ["CSI", "TCM"].includes(e)
                                ? {
                                      parent_item_id: v.parent_item_id,
                                  }
                                : ["CSD", "CAD", "WLC", "WLA"].includes(e)
                                ? d(
                                      d(
                                          {
                                              discount_name: "Скидка WB клуба",
                                          },
                                          f
                                      ),
                                      S
                                  )
                                : "PBC" === e || "PBB" === e
                                ? w
                                : "PCB" === e
                                ? S
                                : [
                                      "PSA",
                                      "PBA",
                                      "PAP",
                                      "AMB",
                                      "PPA",
                                      "PCS",
                                      "DLV",
                                      "DCV",
                                      "DRE",
                                  ].includes(e)
                                ? {}
                                : "FBR" === e || "FBA" === e
                                ? f
                                : "FSA" === e || "FAA" === e
                                ? {
                                      parent_item_id:
                                          null !=
                                          (u =
                                              null == t
                                                  ? void 0
                                                  : t.parent_item_id)
                                              ? u
                                              : v.parent_item_id,
                                      parent_loc: "",
                                  }
                                : "FCA" === e
                                ? {
                                      parent_item_id:
                                          null !=
                                          (h =
                                              null == t
                                                  ? void 0
                                                  : t.parent_item_id)
                                              ? h
                                              : v.parent_item_id,
                                  }
                                : "AAA" === e || "ADI" === e
                                ? {
                                      page_type: v.page_type,
                                      page_info: v.page_info,
                                  }
                                : "LLI" === e || "AIL" === e
                                ? {
                                      special_project: v.special_project,
                                  }
                                : "ICB" === e
                                ? {
                                      type_of_block: v.type_of_block,
                                      parent_item_id: v.parent_item_id,
                                  }
                                : "PVC" === e || "PAC" === e
                                ? d(
                                      {
                                          type_of_block: v.type_of_block,
                                          filters: v.filters,
                                          filters_entry_point:
                                              v.filters_entry_point,
                                          vendor_index: v.vendor_index,
                                          promo_name: v.promo_name,
                                          promo_id: v.promo_id,
                                          vendor_rate: v.vendor_rate,
                                          vendor_id: v.vendor_id,
                                      },
                                      t
                                  )
                                : "LSP" === e
                                ? d({}, M())
                                : "UAA" === e
                                ? p(d({}, M()), {
                                      parent_loc: v.parent_loc,
                                  })
                                : void 0;
                            var P, T;
                        }
                        getTailObjectData() {
                            const e = sessionStorage.getItem(h);
                            return JSON.parse(null != e ? e : "{}");
                        }
                        updateTailObjectDataFromHtml(e) {
                            if (e)
                                if ([...y, "MBL", "MBT"].includes(e.l)) {
                                    const t = {
                                        bid: e.t,
                                        bid_index: e.t2,
                                    };
                                    this.updateTailObjectData(t);
                                } else if ("IAB" === e.l) {
                                    const t = {
                                        banner_name: e.t,
                                    };
                                    this.updateTailObjectData(t);
                                } else if (
                                    [
                                        "ICO",
                                        "ICV",
                                        "ICR",
                                        "ICS",
                                        "ISC",
                                        "IBN",
                                        "IBB",
                                    ].includes(e.l)
                                ) {
                                    const t = {
                                        parent_item_id: e.t,
                                    };
                                    this.updateTailObjectData(t);
                                } else if ("ISP" === e.l || "ISA" === e.l) {
                                    const t = {
                                        photo_index: e.t,
                                        parent_item_id: e.t3,
                                    };
                                    this.updateTailObjectData(t);
                                }
                        }
                        updateTailObjectData(e) {
                            if (!e) return;
                            const t = this.getTailObjectData();
                            e.terms && (e.terms = d(d({}, t.terms), e.terms));
                            const r = d(d({}, t), e);
                            this._saveTailObjectData(r);
                        }
                        _saveTailObjectData(e) {
                            try {
                                if (!e) return;
                                sessionStorage.setItem(h, JSON.stringify(e));
                            } catch (e) {}
                        }
                        isSearchTail(e) {
                            if (e)
                                return (
                                    (null == e ? void 0 : e.l) &&
                                    (m.includes(e.l) || b.includes(e.l))
                                );
                        }
                    },
                    f = Object.defineProperty,
                    w = Object.defineProperties,
                    S = Object.getOwnPropertyDescriptors,
                    _ = Object.getOwnPropertySymbols,
                    C = Object.prototype.hasOwnProperty,
                    I = Object.prototype.propertyIsEnumerable,
                    k = (e, t, r) =>
                        t in e
                            ? f(e, t, {
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                                  value: r,
                              })
                            : (e[t] = r),
                    M = (e, t) => {
                        for (var r in t || (t = {}))
                            C.call(t, r) && k(e, r, t[r]);
                        if (_)
                            for (var r of _(t)) I.call(t, r) && k(e, r, t[r]);
                        return e;
                    },
                    P = (e, t) => w(e, S(t)),
                    T = (e, t, r) => k(e, "symbol" != typeof t ? t + "" : t, r);
                const A = "wbAnalitic",
                    D = "__wba_s",
                    B = "last_search_type",
                    O = "search_suggest",
                    E = "purchase_checkout",
                    x = "stat_helper",
                    L = "query_id_search",
                    j = {
                        l: "AAA",
                        iid: 1,
                    },
                    F = 3e5,
                    N = "temp_analytic_object_for_state";
                class W {
                    constructor() {
                        T(this, "_currentAddress"),
                            T(this, "ecomStatHandler"),
                            T(this, "moveFromTemp"),
                            T(this, "openInNewWindowHandler"),
                            T(this, "tailObjectModule"),
                            T(this, "_statHelper"),
                            (this.tailObjectModule = new v()),
                            (this.openInNewWindowHandler = new s()),
                            (this.ecomStatHandler = new e()),
                            (this._statHelper = {
                                moveFrom: "",
                            }),
                            (this.moveFromTemp = ""),
                            (this._currentAddress = "");
                    }
                    init() {
                        var e, t;
                        if (null == sessionStorage.getItem(A)) {
                            const t = JSON.parse(
                                null != (e = localStorage.getItem(A)) ? e : "{}"
                            );
                            (null == t ? void 0 : t.expired) > Date.now() - F &&
                                sessionStorage.setItem(
                                    A,
                                    JSON.stringify(t.payload)
                                ),
                                this._updateFromDataForNewWindow();
                        }
                        const r = JSON.parse(
                            null != (t = localStorage.getItem(x)) ? t : "{}"
                        );
                        (null == r ? void 0 : r.expired) > Date.now() - F &&
                            (this._statHelper = r.info);
                    }
                    _updateFromDataForNewWindow() {
                        const e = this.openInNewWindowHandler.getStatInfo();
                        if (!e) return;
                        if (!e.analiticsCode) return;
                        const t = this.ecomInfoToAnaliticsState(e);
                        this.saveState(t),
                            e.tailObjectTerms &&
                                this.updateTailObjectData(e.tailObjectTerms);
                    }
                    _getSort(e) {
                        return "DRE" === e.l || "DRE" === e.l || "LCV" === e.l
                            ? ""
                            : "popular";
                    }
                    savePurchaseCheckout(e) {
                        sessionStorage.setItem(E, e);
                    }
                    getPurchaseCheckout() {
                        var e;
                        return null != (e = sessionStorage.getItem(E))
                            ? e
                            : "not_found";
                    }
                    sendWbaEcomStat(e, t, r, s) {
                        var n, o;
                        try {
                            if (
                                !window.wba ||
                                (!s &&
                                    0 ===
                                        (null !=
                                        (n = null == t ? void 0 : t.length)
                                            ? n
                                            : 0))
                            )
                                return;
                            if (
                                ((r = null != r ? r : {}).hasOwnProperty(
                                    "cookies_alert"
                                ) ||
                                    (r.cookies_alert = wb.spa
                                        .getMainLayout()
                                        .cookiePolicy.check()
                                        ? 1
                                        : 0),
                                r.hasOwnProperty("country") ||
                                    (r.country = wb.settings.currentLocale),
                                !r.hasOwnProperty("cluster"))
                            ) {
                                const e =
                                    WbSpaModel.prototype.$user.getUserClusters();
                                e && (r.cluster = e);
                            }
                            (r.address =
                                null != (o = this._currentAddress)
                                    ? o
                                    : "not_selected"),
                                (r.lang = wb.currentLanguage);
                            const i = new Date().format("yyyy-MM-dd HH:mm:ss");
                            t.length && !s
                                ? t.forEach((t) => {
                                      var s, n, o, a, l, c, u, d, p, h, m, g;
                                      let b = {
                                          utcTime: i,
                                          id:
                                              null == (s = t.id)
                                                  ? void 0
                                                  : s.toString(),
                                          nm: Number(t.id),
                                          chrt: Number(t.chrt),
                                          rid:
                                              null == (n = t.rid)
                                                  ? void 0
                                                  : n.toString(),
                                          name: t.name,
                                          brand: t.brand,
                                          price: Number(t.price),
                                          inListIndex:
                                              Number(t.inListIndex) || 1,
                                          listName: t.listName,
                                          variant:
                                              null != (o = t.variant) ? o : "",
                                          quantity: 1,
                                          affiliation: `${
                                              null != (a = t.affiliation)
                                                  ? a
                                                  : ""
                                          }|${
                                              null != (l = t.storeId) ? l : ""
                                          }|${
                                              null != (c = t.deliveryType)
                                                  ? c
                                                  : ""
                                          }`,
                                          category:
                                              null != (u = t.category)
                                                  ? u
                                                  : "regular",
                                          category2:
                                              t.subjectId > 0
                                                  ? t.subjectId.toString()
                                                  : "",
                                          category3:
                                              t.subjectParentId > 0
                                                  ? t.subjectParentId.toString()
                                                  : "",
                                          coupon: `${
                                              null != (d = t.feedbacksCount)
                                                  ? d
                                                  : ""
                                          }|${null != (p = t.rating) ? p : ""}`,
                                          currency: t.currency,
                                          country_code:
                                              wb.settings.currentLocale,
                                          logs: null != (h = t.logs) ? h : "",
                                          tailObject: t.tailObject,
                                          is_available: t.is_available,
                                          mark: t.mark,
                                          shippingItem: t.shippingItem,
                                      };
                                      if (
                                          "cart_del" ===
                                              (null == r
                                                  ? void 0
                                                  : r.type_remove) ||
                                          "after_check_data" ===
                                              (null == r
                                                  ? void 0
                                                  : r.type_remove) ||
                                          "card" ===
                                              (null == r ? void 0 : r.type_add)
                                      )
                                          return (
                                              (b.quantity =
                                                  null != (m = t.quantity)
                                                      ? m
                                                      : 1),
                                              void window.wba(
                                                  "ec:addProduct",
                                                  b
                                              )
                                          );
                                      if (
                                          (window.wba(
                                              "ec:setCurrency",
                                              WbSpaModel.prototype.$user.getCurrency()
                                          ),
                                          "add_to_wishlist" === e)
                                      )
                                          window.wba("ec:addProduct", b);
                                      else {
                                          const e =
                                                  parseInt(
                                                      String(t.quantity)
                                                  ) || 1,
                                              r =
                                                  (!!t.rid &&
                                                      e > 1 &&
                                                      (null == (g = b.rid)
                                                          ? void 0
                                                          : g.split(","))) ||
                                                  [];
                                          for (let t = 0; t < e; t++)
                                              (null == r ? void 0 : r.length) >
                                                  t &&
                                                  ((b = Object.assign({}, b)),
                                                  (b.rid = r[t])),
                                                  window.wba(
                                                      "ec:addProduct",
                                                      b
                                                  );
                                      }
                                  })
                                : window.wba(
                                      "ec:setCurrency",
                                      WbSpaModel.prototype.$user.getCurrency()
                                  ),
                                window.wba("ec:setAction", e),
                                window.wba("ec:send", r);
                        } catch (e) {
                            console.log("wba exception", e);
                        }
                    }
                    async sendAddToCartEvent(e, t) {
                        const r = e.map((e) => ({
                                nmId: e.cod1S ? e.cod1S : e.code1S,
                                size: e.characteristicId,
                            })),
                            s = await wb.xnm.getInfoForWbaStat(r),
                            n = e.map((e) => {
                                var r, n;
                                const o =
                                        t.find((t) => t.cod1S == e.cod1S) ||
                                        t.find((t) => t.code1S == e.cod1S),
                                    i = this.getStoreProp(e.stocks, "wh"),
                                    a = this.getStoreProp(e.stocks, "dtype");
                                return {
                                    id: e.cod1S,
                                    chrt: e.characteristicId,
                                    name:
                                        (null == o ? void 0 : o.goodsName) ||
                                        (null == o ? void 0 : o.name),
                                    brand:
                                        (null == o ? void 0 : o.brandName) ||
                                        (null == o ? void 0 : o.brand),
                                    price:
                                        null !=
                                        (n =
                                            null ==
                                            (r = s.get(e.code1S || e.cod1S))
                                                ? void 0
                                                : r.salePrice)
                                            ? n
                                            : 0,
                                    inListIndex: parseInt(
                                        e.targetInfo.analiticsInfo.iid || 1
                                    ),
                                    listName: this.analiticsInfoToListName(
                                        e.targetInfo.analiticsInfo
                                    ),
                                    variant:
                                        (null == o ? void 0 : o.colorName) ||
                                        (null == o ? void 0 : o.color),
                                    quantity: e.quantity,
                                    affiliation:
                                        (null == o ? void 0 : o.supplierId) ||
                                        (null == o ? void 0 : o.sellerId),
                                    storeId: i || (null == o ? void 0 : o.wh),
                                    deliveryType:
                                        (null == o ? void 0 : o.whDtype) ||
                                        this.getDeliveryTypeForStat(a),
                                    subjectId: null == o ? void 0 : o.subjectId,
                                    subjectParentId:
                                        null == o ? void 0 : o.subjectParentId,
                                    feedbacksCount:
                                        null == o ? void 0 : o.feedbacks,
                                    rating:
                                        (null == o ? void 0 : o.reviewRating) ||
                                        (null == o ? void 0 : o.rating),
                                    rid: null == o ? void 0 : o.rId,
                                    logs: e.targetInfo.analiticsInfo.logs,
                                    tailObject:
                                        this.getTailObjectFromAnalyticsInfo(
                                            e.targetInfo.analiticsInfo
                                        ),
                                    is_available: 1,
                                };
                            });
                        this.sendWbaEcomStat("add_to_cart", n, {
                            type_add: "list",
                        });
                    }
                    sendEvent(e, t = {}) {
                        var r;
                        if (!window.wba) return;
                        (t.country = wb.settings.currentLocale),
                            (t.lang = wb.currentLanguage);
                        const s = WbSpaModel.prototype.$user.getUserClusters();
                        s && (t.cluster = s),
                            (t.address =
                                null != (r = this._currentAddress)
                                    ? r
                                    : "not_selected"),
                            "Header_T" === e &&
                                (t.type =
                                    "d" === wb.settings.displayMode
                                        ? "desktop"
                                        : "mobile"),
                            window.wba(e, t);
                    }
                    sendAddressSelection({
                        source: e,
                        deliveryType: t,
                        addressId: r,
                        address: s,
                        isChanged: n,
                    }) {
                        const o = n ? "DLV_Address_Add_Ok" : "DLV_Address_Slt",
                            i = {
                                location: e,
                            };
                        "courier" === t
                            ? ((i.type = "CRR"), (i.address_crr = s))
                            : ((i.type = "PUP"), (i.pup_id = r.toString())),
                            this.sendEvent(o, i);
                    }
                    sendCarouselWbaEvent(e, t, r, s, n, o) {
                        "Carousel_All" === e &&
                            (this.moveFromTemp = "carousel");
                        let i = {
                            location: (t = t || this.getState().l),
                            index: null == r ? void 0 : r.toString(),
                            item_id: null == s ? void 0 : s.toString(),
                            name: n,
                        };
                        o && (i = Object.assign(i, o)), this.sendEvent(e, i);
                    }
                    sendBannersWbaEvent(
                        e,
                        t,
                        r,
                        s,
                        n = "0",
                        o,
                        i,
                        a = null,
                        l = !1
                    ) {
                        (r = r || this.getState().l),
                            "Banner_T" === e && (this.moveFromTemp = "banner");
                        const c = {
                            name: null != t ? t : "",
                            location: r,
                            link: s,
                            index: (parseInt(n) + 1).toString(),
                            id: o,
                        };
                        l || (c.promo = i ? "yes" : "no"),
                            "MBT" === r && (c.tv_block = 1),
                            this.sendEvent(e, c),
                            a && this.sendTrackingPixel(a);
                    }
                    getStatInfo() {
                        return this._statHelper;
                    }
                    setStatInfo(e, t) {
                        try {
                            null == localStorage ||
                                localStorage.putObject(x, {
                                    info: e,
                                    expired: Date.now() + F,
                                }),
                                t || (this._statHelper = e);
                        } catch (e) {
                            console.warn("Saving analitics state has failed"),
                                console.error(e.message);
                        }
                    }
                    updateStatInfo(e) {
                        const t = this.getStatInfo();
                        (t.moveFrom = this.moveFromTemp
                            ? this.moveFromTemp
                            : ""),
                            (this.moveFromTemp = ""),
                            this.setStatInfo(t, e);
                    }
                    sendSessionStartEvent() {
                        const e = localStorage.getItem(D),
                            t = Date.now();
                        localStorage.setItem(D, (t + 18e5).toString()),
                            (e && Number(e) > t) ||
                                this.sendEvent("session_start");
                    }
                    async getSplitInfo() {
                        return WbSpaModel.prototype.$services.splitterService.getSplitInfo();
                    }
                    getSplitInfoV2(e) {
                        return WbSpaModel.prototype.$services.splitterService.getSplitInfoV2(
                            e
                        );
                    }
                    appendSplitInfoV2(e, t) {
                        return WbSpaModel.prototype.$services.splitterService.appendSplitInfoV2(
                            e,
                            t
                        );
                    }
                    getSplitterHeadersV2(e) {
                        var t;
                        const r = this.getSplitInfoV2(e),
                            s = WbSpaModel.prototype.$user.getUserInfo(),
                            n = (
                                null != (t = null == s ? void 0 : s.uid) ? t : 0
                            ).toString();
                        let o = "";
                        (null == r ? void 0 : r.length) &&
                            r.forEach((e) => {
                                o += `${e.key}=${e.value};`;
                            });
                        const i = new Headers();
                        return (
                            i.set("UserID", n),
                            i.set(
                                "Test-Properties",
                                (null == o
                                    ? void 0
                                    : o.substring(0, o.length - 1)) || ""
                            ),
                            i
                        );
                    }
                    getRecommendationsSplitterHeaders() {
                        return this.getSplitterHeadersV2("rec");
                    }
                    checkDataInSplitterServiceV2(e, t, r) {
                        let s = !1;
                        if (e) {
                            const n = this.getSplitInfoV2(e);
                            for (let e = 0; e < n.length; e++)
                                n[e].key === t &&
                                    n[e].value === r &&
                                    ((s = !0), (e = n.length));
                        }
                        return s;
                    }
                    tryGetAnaliticsCodeForSearchAdvert(e) {
                        switch (e) {
                            case "SNH":
                                return "ANH";
                            case "SNS":
                                return "ANS";
                            case "SHT":
                                return "AHT";
                            case "STC":
                                return "ATC";
                            case "SNT":
                                return "SAB";
                            case "SST":
                                return "AST";
                            case "AAA":
                                return "ADI";
                            case "MBB":
                                return "AMB";
                            case "PBC":
                                return "PBA";
                            case "PBB":
                                return "PPA";
                            case "PCB":
                                return "PAP";
                            case "CSD":
                                return "CAD";
                            case "WLC":
                                return "WLA";
                            case "PVC":
                                return "PAC";
                            case "WCI":
                                return "WCD";
                            case "IBN":
                                return "ABN";
                            case "IBB":
                                return "IBA";
                            case "IBC":
                                return "ABC";
                            case "ICC":
                                return "IAC";
                            case "LSP":
                                return "UAA";
                            case "CAR":
                                return "CAA";
                            case "STB":
                                return "ATB";
                            case "FBR":
                                return "FBA";
                            case "BBB":
                                return "BQA";
                            case "BBA":
                                return "BWA";
                            case "BCA":
                                return "BEA";
                            case "BCR":
                                return "BTA";
                            case "BOL":
                                return "BOA";
                            case "ISP":
                                return "ISA";
                            case "FCS":
                                return "FCA";
                            case "FSA":
                                return "FAA";
                            default:
                                return null;
                        }
                    }
                    tryGetAdvertCode(e) {
                        switch (e) {
                            case "ANH":
                                return "SNH";
                            case "ANS":
                                return "SNS";
                            case "AHT":
                                return "SHT";
                            case "ATC":
                                return "STC";
                            case "SAB":
                                return "SNT";
                            case "AST":
                                return "SST";
                            case "ADI":
                                return "AAA";
                            case "CAA":
                                return "CAR";
                            case "ATB":
                                return "STB";
                            case "FBA":
                                return "FBR";
                            case "BQA":
                                return "BBB";
                            case "BWA":
                                return "BBA";
                            case "BEA":
                                return "BCA";
                            case "BTA":
                                return "BCR";
                            case "BOA":
                                return "BOL";
                            case "FCS":
                                return "FCA";
                            case "FSA":
                                return "FAA";
                            default:
                                return null;
                        }
                    }
                    getTermByTermName(e) {
                        const t = wb.cookieHelper.getCookie("_wbauid"),
                            r = new Date().format("yyyyMMddHHmmss", !0),
                            s = {
                                qid: "qid",
                                recid: "recid",
                            };
                        return s[e] ? `${s[e]}${t}${r}` : void 0;
                    }
                    updateTailObjectData(e) {
                        this.tailObjectModule.updateTailObjectData(e);
                    }
                    getTailObjectData() {
                        return this.tailObjectModule.getTailObjectData();
                    }
                    getTempAnalyticForState() {
                        const e = sessionStorage.getItem(N);
                        if (e) {
                            const t = JSON.parse(e);
                            return sessionStorage.removeItem(N), t;
                        }
                        return null;
                    }
                    saveTempAnalyticForState(e, t) {
                        try {
                            if (!e) return;
                            sessionStorage.setItem(
                                N,
                                JSON.stringify({
                                    list: e,
                                    tail: t,
                                })
                            );
                        } catch (e) {}
                    }
                    getTermsFromTailObject(e, t) {
                        return this.tailObjectModule.getTermsFromTailObject(
                            e,
                            t
                        );
                    }
                    getAnaliticsInfoFromTargetUrl(e, t = null, r = "", s = !1) {
                        var n;
                        e || (e = "");
                        const o = [
                                "targetUrl",
                                "iid",
                                "l",
                                "lw",
                                "s",
                                "t",
                                "t1",
                                "t2",
                                "t3",
                                "t4",
                                "logs",
                            ],
                            i = (e, s) => {
                                var n;
                                return null !=
                                    (n =
                                        null != e
                                            ? e
                                            : t && (null == t ? void 0 : t[s]))
                                    ? n
                                    : r;
                            },
                            a = {},
                            l = e.split("|");
                        for (let e = s ? 2 : 0; e < o.length; e++) {
                            const t = null != (n = l[e]) ? n : null,
                                r = o[e];
                            if (!r) return;
                            a[r] = i(t, r);
                        }
                        return a;
                    }
                    analiticsInfoToListName(e = {}, t = {}) {
                        const r = M(M({}, e), t),
                            {
                                l: s = "",
                                lw: n = "",
                                s: o = "",
                                t: i = "",
                                t1: a = "",
                                t2: l = "",
                                t3: c = "",
                                t4: u = "",
                                t5: d = "",
                            } = r;
                        let p = `${s}|${n}|${o}|${i}|${a}|${l}|${c}|${u}`;
                        return d && (p += `|${d}`), p;
                    }
                    getDeliveryTypeForStat(e = null) {
                        switch (15 & (null != e ? e : 0)) {
                            case 2:
                                return "DBS";
                            case 7:
                                return "eDBS";
                            default:
                                return "WB";
                        }
                    }
                    getStoreProp(e = null, t = null) {
                        var r;
                        return (null == e ? void 0 : e.length) && t
                            ? null ==
                              (r = e.sort(
                                  (e, t) =>
                                      e.time1 + e.time2 - t.time1 - t.time2
                              )[0])
                                ? void 0
                                : r[t]
                            : null;
                    }
                    getTailObjectFromAnalyticsInfo(e, t, r) {
                        var s;
                        return (
                            (t =
                                t ||
                                this.tailObjectModule.getTermsFromTailObject(
                                    null != (s = null == e ? void 0 : e.l)
                                        ? s
                                        : "",
                                    null != r ? r : {}
                                )),
                            this._getTailObjectFromAnalyticsInfo(e, t)
                        );
                    }
                    _getTailObjectFromAnalyticsInfo(
                        {
                            l: e = "",
                            lw: t = "",
                            s: r = "",
                            t: s = "",
                            t1: n = "",
                            t2: o = "",
                            t3: i = "",
                            t4: a = "",
                            t5: l = "",
                            t6: c = "",
                            t7: u = "",
                            t8: d = "",
                        } = {},
                        p = null
                    ) {
                        const h = {
                            loc: e,
                            loc_way: t,
                            sort: r,
                        };
                        if (p) return (h.terms = p), h;
                        const m = {
                                banner_block: a,
                                bid_index_t2: o,
                                bid_index_t3: i,
                                bid_index_t6: c,
                                bid_t: s,
                                bid_t5: l,
                                brand_index: o,
                                brand_t: s,
                                brand_t3: i,
                                carousel_index_t3: i,
                                carousel_name: s,
                                carousel_type: a,
                                catalog_type: o,
                                catalog_value: n,
                                category_t: s,
                                category_t5: l,
                                empty_cart: s,
                                entry_point: n,
                                filters_entry_point: d,
                                filters_t2: o,
                                filters_t7: u,
                                id_category_t1: n,
                                id_category_t3: i,
                                id_category_t6: c,
                                item_ids: s,
                                letter_t3: i,
                                link: o,
                                name_t: s,
                                name_t1: n,
                                parent_item_id_t: s,
                                parent_item_id_t1: n,
                                place: s,
                                project_name: s,
                                promo_id_t1: n,
                                promo_id_t3: i,
                                promo_name: s,
                                query_id: l,
                                search_text_t: s,
                                search_text_t3: i,
                                subject_id: o,
                                subject_parent_id: i,
                                supplier_name: s,
                                supplier_type: n,
                                tag_index: n,
                                tag_text: s,
                                tv_block: n,
                                type_of_block_t1: n,
                                type_of_block_t5: l,
                                type: s,
                                vendor_id: i,
                                vendor_index: a,
                                vendor_name: o,
                                vendor_rate: o,
                            },
                            g = Object.keys(m).reduce(
                                (e, t) => ((e[t] = String(m[t])), e),
                                {}
                            ),
                            {
                                banner_block: b,
                                bid_index_t2: y,
                                bid_index_t3: v,
                                bid_index_t6: f,
                                bid_t: w,
                                bid_t5: S,
                                brand_index: _,
                                brand_t: C,
                                brand_t3: I,
                                carousel_index_t3: k,
                                carousel_name: T,
                                carousel_type: $,
                                catalog_type: A,
                                catalog_value: D,
                                category_t: B,
                                category_t5: O,
                                empty_cart: E,
                                entry_point: x,
                                filters_entry_point: L,
                                filters_t2: j,
                                filters_t7: F,
                                id_category_t1: N,
                                id_category_t3: W,
                                id_category_t6: R,
                                item_ids: U,
                                letter_t3: H,
                                link: q,
                                name_t: z,
                                name_t1: V,
                                parent_item_id_t: G,
                                parent_item_id_t1: Q,
                                place: K,
                                project_name: J,
                                promo_id_t1: X,
                                promo_id_t3: Y,
                                promo_name: Z,
                                query_id: ee,
                                search_text_t: te,
                                search_text_t3: re,
                                subject_id: se,
                                subject_parent_id: ne,
                                supplier_name: oe,
                                supplier_type: ie,
                                tag_index: ae,
                                tag_text: le,
                                tv_block: ce,
                                type_of_block_t1: ue,
                                type_of_block_t5: de,
                                type: pe,
                                vendor_id: he,
                                vendor_index: me,
                                vendor_name: ge,
                                vendor_rate: be,
                            } = g,
                            ye = {
                                catalog_type: A,
                                catalog_value: D,
                                normquery: "",
                            },
                            ve = {
                                catalog_type: "",
                                catalog_value: "",
                                normquery: "",
                            },
                            fe = {
                                filters: "",
                                filters_entry_point: "",
                            },
                            we = {},
                            Se = {
                                category: B,
                                id_category: N,
                            },
                            _e = {
                                bid: w,
                                bid_index: y,
                            },
                            Ce = {
                                supplier_type: ie,
                            };
                        return [
                            "SVR",
                            "STA",
                            "SNT",
                            "SHS",
                            "SNH",
                            "STH",
                            "SNS",
                            "SHT",
                            "SCF",
                            "STC",
                            "STB",
                        ].includes(e)
                            ? P(M({}, h), {
                                  terms: P(M(M({}, ye), fe), {
                                      search_text: te,
                                      query_id: ee,
                                  }),
                              })
                            : ["SST"].includes(e)
                            ? P(M({}, h), {
                                  terms: {
                                      search_text: te,
                                      catalog_value: D,
                                      catalog_type: A,
                                  },
                              })
                            : [
                                  "SAB",
                                  "AVR",
                                  "ANH",
                                  "ANS",
                                  "AST",
                                  "AHT",
                                  "ATR",
                              ].includes(e)
                            ? P(M({}, h), {
                                  terms: P(M({}, we), {
                                      search_text: re,
                                      query_id: ee,
                                  }),
                              })
                            : "ATC" === e
                            ? P(M({}, h), {
                                  terms: P(M({}, we), {
                                      id_category: W,
                                      query_id: ee,
                                  }),
                              })
                            : "STB" === e
                            ? P(M({}, h), {
                                  terms: {
                                      brand: C,
                                      catalog_value: D,
                                      catalog_type: A,
                                      query_id: ee,
                                  },
                              })
                            : "ATB" === e
                            ? P(M({}, h), {
                                  terms: P(M(M({}, fe), ve), {
                                      brand: I,
                                  }),
                              })
                            : "STC" === e
                            ? P(M({}, h), {
                                  terms: P(M(M({}, ye), fe), {
                                      category: B,
                                      query_id: ee,
                                  }),
                              })
                            : "STS" === e
                            ? P(M({}, h), {
                                  terms: P(M(M({}, ye), fe), {
                                      supplier_name: oe,
                                      supplier_id: "",
                                      query_id: ee,
                                  }),
                              })
                            : ["STR", "STG"].includes(e)
                            ? P(M({}, h), {
                                  terms: P(M(M({}, fe), ve), {
                                      tag_text: le,
                                      tag_index: ae,
                                      supplier_id: "",
                                      query_id: ee,
                                  }),
                              })
                            : [
                                  "SBA",
                                  "SIS",
                                  "SCM",
                                  "SCN",
                                  "SPH",
                                  "STM",
                                  "SCR",
                                  "SPA",
                              ].includes(e)
                            ? P(M({}, h), {
                                  terms: {
                                      query_id: ee,
                                  },
                              })
                            : ["MBB", "MBH", "MBM", "MBS", "MBV"].includes(e)
                            ? P(M({}, h), {
                                  terms: M(M({}, _e), fe),
                              })
                            : "MBT" === e
                            ? P(M({}, h), {
                                  terms: P(M(M({}, _e), fe), {
                                      tv_block: ce,
                                  }),
                              })
                            : ["MBG", "MBF"].includes(e)
                            ? P(M({}, h), {
                                  terms: M({}, _e),
                              })
                            : ["MAB", "AMB"].includes(e)
                            ? P(M({}, h), {
                                  terms: M({}, we),
                              })
                            : [
                                  "MCS",
                                  "MCB",
                                  "MCP",
                                  "MCV",
                                  "MCO",
                                  "MPF",
                                  "MCM",
                                  "MCN",
                                  "MSA",
                              ].includes(e)
                            ? M({}, h)
                            : "MCD" === e || "MAD" === e
                            ? P(M({}, h), {
                                  terms: {
                                      promo_name: Z,
                                      promo_id: X,
                                      type_of_block: de,
                                  },
                              })
                            : ["BBB", "BBA", "BBD"].includes(e)
                            ? P(M({}, h), {
                                  terms: M(M({}, fe), _e),
                              })
                            : ["BQA", "BWA"].includes(e)
                            ? P(M({}, h), {
                                  terms: P(M({}, fe), {
                                      bid: w,
                                      bid_index: v,
                                  }),
                              })
                            : "BCA" === e
                            ? P(M({}, h), {
                                  terms: M(
                                      {
                                          filters: j,
                                      },
                                      Se
                                  ),
                              })
                            : "BEA" === e
                            ? P(M({}, h), {
                                  terms: {
                                      category: B,
                                      id_category: W,
                                  },
                              })
                            : "BPA" === e
                            ? P(M({}, h), {
                                  terms: P(M({}, we), {
                                      brand: I,
                                      filters: F,
                                  }),
                              })
                            : ["BCR", "BCB", "BCP"].includes(e)
                            ? P(M({}, h), {
                                  terms: M({}, fe),
                              })
                            : "BTA" === e
                            ? P(M({}, h), {
                                  terms: P(M({}, fe), {
                                      carousel_name: T,
                                      carousel_index: k,
                                  }),
                              })
                            : "BOL" === e || "BOA" === e
                            ? P(M({}, h), {
                                  terms: P(M({}, fe), {
                                      place: K,
                                      letter: H,
                                  }),
                              })
                            : ["CCC", "CTC"].includes(e)
                            ? P(M({}, h), {
                                  terms: P(M({}, Se), {
                                      filters: j,
                                      filters_entry_point: "",
                                  }),
                              })
                            : "CAB" === e
                            ? P(M({}, h), {
                                  terms: P(M(M({}, fe), we), {
                                      id_category: W,
                                  }),
                              })
                            : "CAA" === e
                            ? P(M({}, h), {
                                  terms: P(M(M({}, fe), we), {
                                      search_text: re,
                                      query_id: ee,
                                      filters: F,
                                  }),
                              })
                            : ["CBB", "CBA", "CBS", "CBU"].includes(e)
                            ? P(M({}, h), {
                                  terms: M(M({}, _e), fe),
                              })
                            : [
                                  "CCA",
                                  "CCR",
                                  "CCT",
                                  "CAR",
                                  "CBP",
                                  "CPA",
                              ].includes(e)
                            ? M({}, h)
                            : "CAR" === e
                            ? P(M({}, h), {
                                  terms: {
                                      search_text: te,
                                      catalog_value: D,
                                      catalog_type: A,
                                      query_id: ee,
                                      filters: F,
                                  },
                              })
                            : "SPL" === e
                            ? P(M({}, h), {
                                  terms: M({}, Ce),
                              })
                            : ["SBB", "SBT", "SBC"].includes(e)
                            ? P(M({}, h), {
                                  terms: M(M({}, Ce), _e),
                              })
                            : "SCA" === e
                            ? P(M({}, h), {
                                  terms: P(M({}, Ce), {
                                      category: B,
                                  }),
                              })
                            : "SBR" === e
                            ? P(M({}, h), {
                                  terms: P(M({}, Ce), {
                                      brand_index: _,
                                  }),
                              })
                            : ["SCB", "SCO", "SCP"].includes(e)
                            ? P(M({}, h), {
                                  terms: M({}, Ce),
                              })
                            : "SSB" === e
                            ? P(M({}, h), {
                                  terms: {
                                      name: z,
                                      type_of_block: ue,
                                  },
                              })
                            : "ABP" === e
                            ? P(M({}, h), {
                                  terms: P(
                                      M(
                                          {
                                              parent_item_id:
                                                  null == s
                                                      ? void 0
                                                      : s.toString(),
                                          },
                                          we
                                      ),
                                      {
                                          brand: I,
                                          filters: F,
                                          filters_entry_point: L,
                                      }
                                  ),
                              })
                            : ["ABC", "ABN"].includes(e)
                            ? P(M({}, h), {
                                  terms: P(M({}, fe), {
                                      parent_item_id:
                                          null == s ? void 0 : s.toString(),
                                      brand: I,
                                  }),
                              })
                            : "IBA" === e
                            ? P(M({}, h), {
                                  terms: P(M({}, fe), {
                                      parent_item_id:
                                          null == s ? void 0 : s.toString(),
                                  }),
                              })
                            : "IAC" === e
                            ? P(M({}, h), {
                                  terms: P(
                                      M(
                                          {
                                              parent_item_id: G,
                                          },
                                          we
                                      ),
                                      {
                                          filters: F,
                                          filters_entry_point: L,
                                      }
                                  ),
                              })
                            : [
                                  "ICO",
                                  "ICB",
                                  "ICF",
                                  "ICV",
                                  "ICD",
                                  "ICR",
                                  "ICE",
                                  "ICS",
                                  "IBS",
                                  "ICL",
                                  "ICI",
                                  "ISC",
                                  "IAD",
                              ].includes(e)
                            ? P(M({}, h), {
                                  terms: M(
                                      {
                                          parent_item_id: G,
                                      },
                                      fe
                                  ),
                              })
                            : "ICA" === e
                            ? P(M({}, h), {
                                  terms: P(M({}, we), {
                                      parent_item_id: G,
                                  }),
                              })
                            : "IAB" === e
                            ? P(M({}, h), {
                                  terms: M(M({}, _e), fe),
                              })
                            : [
                                  "IBP",
                                  "IBC",
                                  "ICC",
                                  "IRC",
                                  "ISP",
                                  "ISA",
                                  "ITA",
                              ].includes(e)
                            ? P(M({}, h), {
                                  terms: M({}, fe),
                              })
                            : ["IBN", "IBB"].includes(e)
                            ? P(M({}, h), {
                                  terms: {
                                      parent_item_id: G,
                                      filters: F,
                                      filters_entry_point: L,
                                  },
                              })
                            : ["CCM", "CPF", "CRA"].includes(e)
                            ? P(M({}, h), {
                                  terms: {
                                      item_ids: U,
                                  },
                              })
                            : "CSI" === e
                            ? P(M({}, h), {
                                  terms: {
                                      parent_item_id: G,
                                  },
                              })
                            : "CRV" === e
                            ? P(M({}, h), {
                                  terms: {
                                      empty_cart: E,
                                  },
                              })
                            : ["CCS", "CSA"].includes(e)
                            ? P(M({}, h), {
                                  terms: {},
                              })
                            : ["CRT", "CER", "CEB"].includes(e)
                            ? M({}, h)
                            : "CCB" === e
                            ? P(M({}, h), {
                                  terms: {
                                      item_ids: U,
                                      parent_item_id: Q,
                                      subject_id: se,
                                      subject_parent_id: ne,
                                      carousel_type: $,
                                  },
                              })
                            : ["DLV", "DCR", "DCV", "DRC", "DRE"].includes(e)
                            ? P(M({}, h), {
                                  terms: M({}, fe),
                              })
                            : "TCB" === e
                            ? P(M({}, h), {
                                  terms: {
                                      parent_item_id: G,
                                  },
                              })
                            : "TCM" === e ||
                              [
                                  "FCR",
                                  "FCS",
                                  "FCA",
                                  "FSA",
                                  "FAA",
                                  "FRP",
                                  "FCV",
                              ].includes(e) ||
                              ["VRW", "VCV"].includes(e) ||
                              ["AAA", "ADI", "AAB", "AAC", "AAS"].includes(e) ||
                              ["LCS", "LCR", "WTL"].includes(e) ||
                              [
                                  "WSH",
                                  "WCA",
                                  "WCV",
                                  "WCS",
                                  "WCR",
                                  "WAB",
                              ].includes(e) ||
                              "RWA" === e ||
                              ["NCV", "NCB", "NCM", "NCR"].includes(e) ||
                              "NIA" === e ||
                              ["PRC", "PCV"].includes(e) ||
                              ["FEW", "FEQ", "FEF"].includes(e) ||
                              "PPM" === e
                            ? M({}, h)
                            : ["FBR", "FBV"].includes(e) ||
                              "FBA" === e ||
                              "LBA" === e
                            ? P(M({}, h), {
                                  terms: M({}, fe),
                              })
                            : "PCA" === e
                            ? P(M({}, h), {
                                  terms: P(M({}, fe), {
                                      type: pe,
                                      name: V,
                                      link: q,
                                  }),
                              })
                            : "ITO" === e
                            ? P(M({}, h), {
                                  terms: {
                                      parent_item_id: G,
                                      type_of_block: ue,
                                  },
                              })
                            : "LSP" === e
                            ? P(M({}, h), {
                                  sort: "default",
                                  terms: {
                                      project_name: J,
                                  },
                              })
                            : ["PBC", "PBB"].includes(e)
                            ? P(M({}, h), {
                                  terms: M({}, _e),
                              })
                            : ["PSA", "PBA", "PPA"].includes(e)
                            ? P(M({}, h), {
                                  terms: P(M({}, we), {
                                      bid: S,
                                      bid_index: f,
                                  }),
                              })
                            : "PAP" === e
                            ? P(M({}, h), {
                                  terms: P(M({}, we), {
                                      category: O,
                                      id_category: R,
                                  }),
                              })
                            : "PCB" === e
                            ? P(M({}, h), {
                                  terms: M({}, Se),
                              })
                            : "PSP" === e
                            ? P(M({}, h), {
                                  terms: {
                                      parent_item_id: G,
                                  },
                              })
                            : "PCS" === e || ["WCI", "WCD"].includes(e)
                            ? M({}, h)
                            : "LCV" === e
                            ? P(M({}, h), {
                                  sort: "popular",
                              })
                            : [
                                  "TBV",
                                  "TBN",
                                  "TBC",
                                  "TBA",
                                  "TBP",
                                  "TBT",
                              ].includes(e)
                            ? P(M({}, h), {
                                  terms: M({}, _e),
                              })
                            : "PVC" === e
                            ? P(M({}, h), {
                                  terms: {
                                      promo_name: Z,
                                      promo_id: X,
                                      vendor_rate: be,
                                      vendor_id: he,
                                      vendor_index: me,
                                  },
                              })
                            : "PAC" === e
                            ? P(M({}, h), {
                                  terms: {
                                      promo_name: Z,
                                      promo_id: Y,
                                  },
                              })
                            : "LSP" === e
                            ? P(M({}, h), {
                                  terms: {
                                      project_name: J,
                                  },
                              })
                            : "UAA" === e
                            ? P(M({}, h), {
                                  terms: {
                                      project_name: J,
                                      entry_point: x,
                                      vendor_name: ge,
                                      bid_index: v,
                                      banner_block: b,
                                  },
                              })
                            : {};
                    }
                    saveEcomInfo(e) {
                        let t = this.ecomStatHandler.getFullEcomInfo(e, null);
                        t &&
                            this.openInNewWindowHandler.saveStatInfo(e.href, t);
                    }
                    getEcomInfoFromHtmlItem(e) {
                        return this.ecomStatHandler.getFullEcomInfoHtml(e);
                    }
                    getEcomInfoFromItem(e, t) {
                        return this.ecomStatHandler.getFullEcomInfo(e, t);
                    }
                    analiticsStateToEcomInfo(e) {
                        const {
                                l: t = "",
                                iid: r = "",
                                logs: s = "",
                                lw: n = "",
                                s: o = "",
                                t: i = "",
                                t1: a = "",
                                t2: l = "",
                                t3: c = "",
                                t4: u = "",
                            } = e,
                            d = {
                                analiticsCode: t,
                                locationWay: n,
                                sort: o,
                                index: r,
                                termsForListName: {
                                    t: i,
                                    t1: a,
                                    t2: l,
                                    t3: c,
                                    t4: u,
                                },
                            };
                        return s && (d.logs = s), d;
                    }
                    convertToAnaliticsState(e, t, r, s, n, o, i, a, l) {
                        if ("string" != typeof e) return;
                        "string" != typeof t &&
                            "number" != typeof t &&
                            (t = null),
                            "string" != typeof r &&
                                "number" != typeof r &&
                                (r = null),
                            "string" != typeof s &&
                                "number" != typeof s &&
                                (s = null),
                            "string" != typeof n &&
                                "number" != typeof n &&
                                (n = null),
                            "string" != typeof o &&
                                "number" != typeof o &&
                                (o = null),
                            "string" != typeof i &&
                                "number" != typeof i &&
                                (i = null),
                            "string" != typeof a &&
                                "number" != typeof a &&
                                (a = null),
                            "string" != typeof l && (l = null);
                        const c = {
                            l: e,
                        };
                        let u = parseInt(String(t));
                        return (
                            null == t || isNaN(u) || (c.iid = Math.max(1, u)),
                            null != r && (c.opt = r),
                            null != s && (c.t = s),
                            null != n && (c.t1 = n),
                            null != o && (c.t2 = o),
                            null != i && (c.t3 = i),
                            null != a && (c.t4 = a),
                            null != l && (c.logs = l),
                            c
                        );
                    }
                    ecomInfoToAnaliticsState(e) {
                        var t, r, s, n, o, i, a;
                        const l = this.convertToAnaliticsState(
                            null == e ? void 0 : e.analiticsCode,
                            null == e ? void 0 : e.index,
                            null != (t = null == e ? void 0 : e.sort) ? t : "",
                            null !=
                                (r = null == e ? void 0 : e.termsForListName.t)
                                ? r
                                : "",
                            null !=
                                (s = null == e ? void 0 : e.termsForListName.t1)
                                ? s
                                : "",
                            null !=
                                (n = null == e ? void 0 : e.termsForListName.t2)
                                ? n
                                : "",
                            null !=
                                (o = null == e ? void 0 : e.termsForListName.t3)
                                ? o
                                : "",
                            null !=
                                (i = null == e ? void 0 : e.termsForListName.t4)
                                ? i
                                : "",
                            null != (a = null == e ? void 0 : e.logs) ? a : ""
                        );
                        return l && e.sort && (l.s = e.sort), l;
                    }
                    saveState(e, t = !1, r = !1) {
                        try {
                            "string" == typeof e &&
                                (e = this.getAnaliticsInfoFromTargetUrl(
                                    `||${e}`
                                ));
                            const s = JSON.stringify({
                                payload: e,
                                expired: Date.now() + F,
                            });
                            r ||
                                "object" != typeof e ||
                                null == e ||
                                (e.s = this._getSort(e));
                            const n = JSON.stringify(e);
                            sessionStorage.setItem(A, n),
                                t || localStorage.setItem(A, s);
                        } catch (e) {
                            console.warn("Saving analitics state has failed"),
                                console.error(e.message);
                        }
                    }
                    trySaveStateV2(e) {
                        const t = this.getEcomInfoFromHtmlItem(e);
                        if (!t) return !1;
                        const r = this.ecomInfoToAnaliticsState(t);
                        return (
                            this.saveState(r),
                            this.updateTailObjectData(t.tailObjectTerms),
                            !0
                        );
                    }
                    mapPaymentSystemToWbaName(e) {
                        var t;
                        if (!e) return "";
                        const r = "_newcardid" === e.id,
                            s = "qrc" === e.codeLower && e.createNew,
                            n = null != (t = e.system) ? t : e.codeLower;
                        if (r) return "Add_Card";
                        if (s) return "Add_SBP";
                        switch (n) {
                            case "mir":
                                return "MIR";
                            case "visa":
                                return "Visa";
                            case "mastercard":
                                return "Mastercard";
                            case "belcard":
                                return "Belcard";
                            case "arca":
                                return "Arca";
                            case "humo":
                                return "Humo";
                            case "union_pay":
                                return "UnionPay";
                            case "elcard":
                                return "Elcard";
                            case "maestro":
                                return "Maestro";
                            case "uzcard":
                                return "Uzcard";
                            case "american_express":
                                return "AmericanExpress";
                            case "drm":
                                return "Idram";
                            case "sbp":
                                return "SberPay";
                            case "qrc":
                                return "Selected_SBP";
                            case "wlt":
                                return "Wallet";
                            case "ebl":
                                return "Balance";
                            case "cre":
                                return "credit";
                            case "cin":
                                return "cin_installment";
                            case "cwb":
                                return "wb_installment";
                        }
                        return "";
                    }
                    getNameForPaymentType(e) {
                        var t, r;
                        return e
                            ? e.isWallet
                                ? "Wallet"
                                : e.isSberPay
                                ? "Sber_pay"
                                : e.isCredit
                                ? "Credit"
                                : e.isWbComInst
                                ? "Paid_installment"
                                : e.isBalance
                                ? "Balance"
                                : e.isBplInst || e.isInst
                                ? "Installment"
                                : e.isCwbInst
                                ? "Wb_installment"
                                : e.isCreditCard
                                ? "sbp" ===
                                  (null ==
                                  (t = null == e ? void 0 : e.selectedBankCard)
                                      ? void 0
                                      : t.system)
                                    ? "Sber_pay"
                                    : "qrc" ===
                                      (null ==
                                      (r =
                                          null == e
                                              ? void 0
                                              : e.selectedBankCard)
                                          ? void 0
                                          : r.system)
                                    ? "Sbp"
                                    : "Card"
                                : ""
                            : "";
                    }
                    sendUserEvent(e, t) {
                        this.sendEvent("user_id", {
                            clientId: e,
                            account_id: t,
                        });
                    }
                    proceedAndSave(e, t, r, s, n, o, i, a, l) {
                        if ("string" != typeof e) return;
                        const c = this.convertToAnaliticsState(
                            e,
                            t,
                            r,
                            s,
                            n,
                            o,
                            i,
                            a,
                            l
                        );
                        this.tailObjectModule.updateTailObjectDataFromHtml(c),
                            this.saveState(c);
                    }
                    _escape(e) {
                        return e
                            ? "string" != typeof e
                                ? e
                                : e.replace(/'/g, " ")
                            : "";
                    }
                    _validateAndFix(e) {
                        return (
                            (null == e.iid || isNaN(e.iid) || e.iid < 1) &&
                                (e.iid = 1),
                            (e.t = this._escape(e.t)),
                            (e.t1 = this._escape(e.t1)),
                            (e.t2 = this._escape(e.t2)),
                            e
                        );
                    }
                    getState(e = !0) {
                        var t;
                        let r =
                            null != (t = sessionStorage.getObject(A)) ? t : j;
                        return (
                            e &&
                                r.extraL &&
                                ((r.l = r.extraL),
                                r.extraTerms &&
                                    (r = M(M({}, r), r.extraTerms))),
                            this._validateAndFix(r)
                        );
                    }
                    updateState(e, t) {
                        const r = this.getState(!1);
                        let s = M(M({}, r), e);
                        !e.extraTerms &&
                            t &&
                            t[r.l] &&
                            (s = M(M({}, s), t[r.l])),
                            this.saveState(s);
                    }
                    updateAnalyticsFromQuery() {
                        var e;
                        const t = new URL(window.location.href);
                        if (
                            document.referrer.indexOf("guru.wildberries.ru") >
                                0 &&
                            t.searchParams.has("externalSource") &&
                            t.searchParams.has("analyticsCode")
                        ) {
                            const r =
                                null !=
                                (e = t.searchParams.get("analyticsCode"))
                                    ? e
                                    : "";
                            this.saveState(r, !1, !0);
                        } else if (t.searchParams.has("listName")) {
                            const e = t.searchParams.get("listName"),
                                r = this.getAnaliticsInfoFromTargetUrl(
                                    `||${e}`
                                );
                            this.saveState(r);
                            const s = null == r ? void 0 : r.l;
                            s &&
                                ["LLI", "AIL"].includes(s) &&
                                this.updateTailObjectData({
                                    special_project: null == r ? void 0 : r.t,
                                });
                        } else
                            t.searchParams.has("analiticsCode") &&
                                this.saveState(
                                    {
                                        l: t.searchParams.get("analiticsCode"),
                                    },
                                    !0
                                );
                    }
                    saveLastSearchAnaliticsData(e) {
                        sessionStorage.putObject(B, e);
                    }
                    saveLastSearchAnalyticsDataForSuggest(e) {
                        sessionStorage.setItem(O, e);
                    }
                    saveQueryIdForSearch(e) {
                        sessionStorage.setItem(L, e);
                    }
                    retrieveQueryIdForSearch() {
                        const e = sessionStorage.getItem(L);
                        if (e) return e;
                        {
                            const e = this.getTermByTermName("qid");
                            return e && this.saveQueryIdForSearch(e), e;
                        }
                    }
                    getLastSearchAnaliticsData() {
                        var e;
                        const t =
                            null != (e = sessionStorage.getObject(B))
                                ? e
                                : null;
                        return t && sessionStorage.removeItem(B), t;
                    }
                    getLastSearchAnalyticsDataForSuggest() {
                        var e;
                        return null != (e = sessionStorage.getItem(O)) ? e : "";
                    }
                    async isAbTest155Approved() {
                        const { splitId: e, title: t } =
                            await this.getSplitInfo();
                        return "155" === e && "test_1" === t;
                    }
                    setCurrentAddress(e, t) {
                        this._currentAddress = `${
                            "courier" === e ? "CRR" : ""
                        }${t}`;
                    }
                    saveLastViewedNm(e) {
                        sessionStorage.putObject("LAST_VIEWED_NM", e);
                    }
                    getLastViewedNm() {
                        return sessionStorage.getObject("LAST_VIEWED_NM");
                    }
                    updateAnalyticsSource(e) {
                        this.updateState({
                            source: e,
                        });
                    }
                    sendTrackingPixel(e) {
                        document.createElement("img").src = e;
                    }
                    isSearchTerms(e) {
                        return this.tailObjectModule.isSearchTail(e);
                    }
                }
                wb.namespace(
                    "analitics",
                    (() => {
                        const e = new W();
                        return e.init(), e;
                    })()
                );
            },
            86797: function (e, t, r) {
                "use strict";
                r.d(t, {
                    V: function () {
                        return s;
                    },
                });
                const s = () =>
                    Promise.all([
                        r.e(89362),
                        r.e(63946),
                        r.e(81774),
                        r.e(70767),
                        r.e(31887),
                        r.e(96042),
                        r.e(48829),
                        r.e(14627),
                        r.e(37266),
                        r.e(64210),
                    ]).then(r.bind(r, 3330));
            },
            70322: function (e, t, r) {
                "use strict";
                r.d(t, {
                    O: function () {
                        return a;
                    },
                    c: function () {
                        return i;
                    },
                });
                var s = r(17765),
                    n = Object.defineProperty,
                    o = (e, t, r) =>
                        ((e, t, r) =>
                            t in e
                                ? n(e, t, {
                                      enumerable: !0,
                                      configurable: !0,
                                      writable: !0,
                                      value: r,
                                  })
                                : (e[t] = r))(
                            e,
                            "symbol" != typeof t ? t + "" : t,
                            r
                        );
                class i {
                    constructor(e = {}) {
                        return (
                            o(this, "observers", new Map()),
                            o(this, "updateInProgress", !1),
                            o(this, "pendingNotifications", new Set()),
                            this.checkForConflicts(e),
                            (0, s.RI)(e) ||
                                Object.entries(e).forEach(([e, t]) => {
                                    this.defineObservableProperty(e, t);
                                }),
                            new Proxy(this, {
                                set: (e, t, r) => {
                                    if (!(0, s.Kg)(t))
                                        throw new TypeError(
                                            "Property must be a string, got " +
                                                typeof t
                                        );
                                    return (
                                        e[t] !== r &&
                                            ((e[t] = r),
                                            this.updateInProgress
                                                ? this.pendingNotifications.add(
                                                      t
                                                  )
                                                : this.notifyObservers(t)),
                                        !0
                                    );
                                },
                                get: (e, t) => {
                                    if (t) return e[t];
                                },
                            })
                        );
                    }
                    subscribe(e, t) {
                        const r = String(e);
                        this.observers.has(r) ||
                            this.observers.set(r, new Set()),
                            this.observers.get(r).add(t);
                    }
                    unsubscribe(e, t) {
                        var r;
                        const s = String(e);
                        null == (r = this.observers.get(s)) || r.delete(t);
                    }
                    update(e) {
                        (this.updateInProgress = !0),
                            Object.entries(e).forEach(([e, t]) => {
                                this[e] = t;
                            }),
                            (this.updateInProgress = !1),
                            this.pendingNotifications.forEach((e) =>
                                this.notifyObservers(e)
                            ),
                            this.pendingNotifications.clear();
                    }
                    notifyObservers(e) {
                        var t;
                        const r = String(e);
                        null == (t = this.observers.get(r)) ||
                            t.forEach((e) => e());
                    }
                    checkForConflicts(e) {
                        const t = Object.getOwnPropertyNames(
                                Object.getPrototypeOf(this)
                            ),
                            r = Object.keys(e).filter((e) => t.includes(e));
                        r.length > 0 &&
                            console.warn(
                                `Observable initialization warning: The following keys in the initial state conflict with properties in the prototype: ${r.join(
                                    ", "
                                )}.`
                            );
                    }
                    defineObservableProperty(e, t) {
                        Object.defineProperty(this, e, {
                            configurable: !0,
                            enumerable: !0,
                            writable: !0,
                            value: t,
                        });
                    }
                }
                const a = (e = {}) => new i(e);
            },
            89115: function (e, t, r) {
                "use strict";
                r.d(t, {
                    Q2: function () {
                        return i;
                    },
                    lD: function () {
                        return c;
                    },
                    BD: function () {
                        return l;
                    },
                    dt: function () {
                        return a;
                    },
                });
                const s = JSON.parse(
                        '{"RUB":{"locale":"ru","sign":"₽","code":"643"},"BYN":{"locale":"by","sign":"р.","code":"933"},"KZT":{"locale":"kz","sign":"тг.","code":"398"},"AMD":{"locale":"am","sign":"драм","code":"051"},"KGS":{"locale":"kg","sign":"сом","code":"417"},"UZS":{"locale":"uz","sign":"сум","code":"860"},"TJS":{"locale":"tj","sign":"с.","code":"972"},"GEL":{"locale":"ge","sign":"₾","code":"981"}}'
                    ),
                    n = Object.entries(s).reduce(
                        (e, [t, r]) => ((e[r.sign] = t), e),
                        {}
                    ),
                    o = Object.entries(s).reduce(
                        (e, [t, r]) => ((e[r.code] = t), e),
                        {}
                    ),
                    i = {
                        info: s,
                        getIsoBySign: (e) =>
                            n[e] || wb.settings.currencyCodeByLetters,
                        getDefaultForLocale: (e) => {
                            let t;
                            for (const r in s) s[r].locale === e && (t = r);
                            return null != t ? t : "RUB";
                        },
                        getCurrencyByCode: (e) => o[e],
                        localeWithCoins: [
                            "BYN",
                            "TJS",
                            "GEL",
                            "byn",
                            "tjs",
                            "gel",
                        ],
                    },
                    a = Object.entries(i.info).reduce((e, [t, r]) => {
                        const s = wb.settings.currentLocale;
                        return (
                            "ge" === s
                                ? "GEL" === t && (e[t] = r)
                                : "tj" === s
                                ? ("TJS" != t && "GEL" === t) || (e[t] = r)
                                : "GEL" !== t && "TJS" !== t && (e[t] = r),
                            e
                        );
                    }, {}),
                    l = (e) => {
                        var t;
                        const r = e.toUpperCase();
                        return null ==
                            (t =
                                i.info[r] ||
                                i.info[wb.settings.currencyCodeByLetters])
                            ? void 0
                            : t.code;
                    },
                    c = (e) => {
                        var t;
                        return null ==
                            (t =
                                i.info[e] ||
                                i.info[wb.settings.currencyCodeByLetters])
                            ? void 0
                            : t.sign;
                    };
            },
            98864: function (e, t, r) {
                "use strict";
                r.d(t, {
                    Aj: function () {
                        return n;
                    },
                    D4: function () {
                        return l;
                    },
                    E$: function () {
                        return u;
                    },
                    F3: function () {
                        return a;
                    },
                    F8: function () {
                        return h;
                    },
                    Ho: function () {
                        return i;
                    },
                    R0: function () {
                        return c;
                    },
                    XX: function () {
                        return s;
                    },
                    YM: function () {
                        return p;
                    },
                    g2: function () {
                        return o;
                    },
                    ge: function () {
                        return g;
                    },
                    of: function () {
                        return m;
                    },
                    sk: function () {
                        return d;
                    },
                });
                const s = "https://card.wb.ru/cards/v2/list",
                    n = "https://card.wb.ru/cards/v2/detail",
                    o = "https://catalog.wb.ru/",
                    i = "https://user-geo-data.wildberries.ru/",
                    a = "https://cart-storage-api.wildberries.ru/api/basket",
                    l = "https://favs-storage-api.wildberries.ru/api/favs",
                    c = "https://wbx-auth.wildberries.",
                    u = "https://ru-basket-api.wildberries.ru",
                    d = "https://basket-api.wildberries.",
                    p = "https://wbx-bell-v3.wildberries.ru",
                    h = "https://shopper-bt.wb.ru",
                    m = "https://fin-person-installment.wildberries.ru",
                    g = "https://astro.wildberries.ru";
            },
            16590: function (e, t, r) {
                "use strict";
                r.d(t, {
                    m: function () {
                        return s;
                    },
                });
                const s = () => window || globalThis || {};
            },
            17765: function (e, t, r) {
                "use strict";
                r.d(t, {
                    Kg: function () {
                        return s;
                    },
                    RI: function () {
                        return o;
                    },
                    b0: function () {
                        return n;
                    },
                    rI: function () {
                        return i;
                    },
                });
                const s = (e) => "string" == typeof e,
                    n = (e) => void 0 === e,
                    o = (e) => 0 === Object.keys(e).length,
                    i = (e) =>
                        "function" == typeof e &&
                        "prototype" in e &&
                        e.prototype.constructor === e;
            },
            60138: function (e, t, r) {
                "use strict";
                r.d(t, {
                    _: function () {
                        return n;
                    },
                    m: function () {
                        return o;
                    },
                });
                var s = r(62819);
                const n = {
                        suppliersOrgForms: [
                            "ООО",
                            "ПАО",
                            "ОАО",
                            "ЗАО",
                            "ИП",
                            "Фонд",
                            "Ассоциации",
                            "Союзы",
                            "НАО",
                            "ТОО",
                            "АО",
                        ],
                        isDefaultSupplier: function (e, t) {
                            return (
                                32477 === e ||
                                12399 === e ||
                                17887 === e ||
                                23316 === e ||
                                28906 === e ||
                                "Brands Seller" === t ||
                                "Best Brands" === t ||
                                "First Choice" === t ||
                                "WILDBERRIES" === t
                            );
                        },
                        supplierFineName: function (e, t) {
                            return 20624 === t
                                ? ""
                                : 1876 === t && "Wildberries" === e
                                ? "Brands Seller"
                                : 20253 === t && "Wildberries" === e
                                ? "Best Brands"
                                : 154 === t && "Wildberries" === e
                                ? "First Choice"
                                : "Wildberries" === e
                                ? "WILDBERRIES"
                                : o.trimSupplierName(
                                      e,
                                      $.views.helpers.suppliersOrgForms
                                  );
                        },
                        ImageUrl: wb.helpers.url.imageUrl,
                        ImageUrlPb: function (e, t, r, s, n) {
                            return wb.helpers.url.imageUrl(e, t, r, s, n, !0);
                        },
                        urlFeedbackPhoto: wb.helpers.url.urlFeedbackPhoto,
                        urlProductVideo: wb.helpers.url.urlVideoProduct,
                        urlFeedbackVideo: wb.helpers.url.urlFeedbackVideo,
                        urlSiteStatic: wb.helpers.url.urlSiteStatic,
                        urlSiteStaticPb: function (...e) {
                            return wb.helpers.url.urlSiteStatic(e[0]);
                        },
                        productCardUrl: function (e, t, r) {
                            return $.views.converters.urlForGood(
                                e,
                                null,
                                r,
                                null,
                                null,
                                t
                            );
                        },
                        forBrandLogoFromId: function (e, t = !1) {
                            return e
                                ? wb.helpers.url.urlStaticBasket(
                                      `sellers/brands/${e}.webp`,
                                      1
                                  )
                                : wb.helpers.url.urlSiteStatic("i/nologo.gif");
                        },
                        forSellerLogo: function (e, t = !1) {
                            return $.views.helpers.forSellerLogoPb(e, t, !1);
                        },
                        forSellerLogoPb: function (e, t = !1, r = !0) {
                            return wb.helpers.url.urlStaticBasket(
                                `crm-bnrs/shops/${e}_${
                                    t ? "main_banner" : "logo"
                                }.webp`,
                                1
                            );
                        },
                        isEmptyObject: function (e) {
                            return $.isEmptyObject(e);
                        },
                        Declension: function (e, t, r, s, n) {
                            let o;
                            const i = e % 10,
                                a = e % 100;
                            return (
                                (o =
                                    1 == i && 11 != a
                                        ? t
                                        : (2 == i && 12 != a) ||
                                          (3 == i && 13 != a) ||
                                          (4 == i && 14 != a)
                                        ? r
                                        : s || r),
                                void 0 === n ? o : n.format(e, o.format(e))
                            );
                        },
                        pluralize: function (e, ...t) {
                            return $.pluralize(null != e ? e : 0, ...t);
                        },
                        debug: function (e) {
                            console.log(e);
                        },
                        toDateFormat: function (e, t) {
                            return new Date(
                                parseInt(
                                    e.replace("/Date(", "").replace(")\\/", ""),
                                    10
                                )
                            ).format(t);
                        },
                        formatDate: function (e, t) {
                            return new Date(e).format(t);
                        },
                        toJson: function (e) {
                            return JSON.stringify(e);
                        },
                        fromJson: function (e) {
                            return JSON.parse(e);
                        },
                        encode: function (...e) {
                            let t = "";
                            for (let r = 0; r < e.length; r++)
                                t = t.concat(e[r]);
                            return encodeURIComponent(t);
                        },
                        isLazyImgInCarousel: function (e, t, r, s, n) {
                            return (
                                !!e &&
                                (r ? t >= 2 * s && t < n - s : t >= 2 * s)
                            );
                        },
                        timeLeft: function (e) {
                            const t = $.views.helpers.parseFromDotNet(e);
                            return wb.helpers.date.leftBefore(t);
                        },
                        parseFromDotNet: function (e) {
                            return new Date(
                                parseInt(
                                    e.replace("/Date(", "").replace(")\\/", ""),
                                    10
                                )
                            );
                        },
                        timeLeftSpa: function (e) {
                            const t = new Date(e);
                            return wb.helpers.date.leftBefore(t);
                        },
                        isPriceEqual: function (e, t) {
                            return e === t;
                        },
                        isNullOrWhiteSpace: function (e) {
                            return !e || 0 === e.length || /^\s*$/.test(e);
                        },
                        HasFlag: function (e, t) {
                            return (e & t) == t;
                        },
                        blurAdult: function (e) {
                            return e && !wb.adult.isConfirmed;
                        },
                        nonBreakingSpaceFormatted: function (e) {
                            return String(e).replace(
                                /\B(?=(\d{3})+(?!\d))/g,
                                " "
                            );
                        },
                        pickupType: function (e, t) {
                            if (86 == e.dtype || e.shouldShowName)
                                return e.name;
                            if (31 == (null == e ? void 0 : e.typePoint))
                                return wb.i18n.t("delivery.points.kiosk");
                            if ("courier" == e.deliveryType)
                                return wb.i18n.t(
                                    "delivery.points.courierAddress"
                                );
                            if (63 == e.dtype || e.isSortCenter)
                                return t
                                    ? wb.i18n.t("delivery.points.scWarehouse")
                                    : wb.i18n.t(
                                          "delivery.points.scWarehouseWb"
                                      );
                            if (29 == e.dtype || 31 == e.dtype || 32 == e.dtype)
                                return t
                                    ? wb.i18n.t("delivery.points.post")
                                    : wb.i18n.t("delivery.points.postOffice");
                            if (23 == e.dtype)
                                return 2 == e.pickupType
                                    ? wb.i18n.t(
                                          "delivery.points.partnerRussianPost"
                                      )
                                    : t
                                    ? wb.i18n.t("delivery.points.russianPost")
                                    : wb.i18n.t(
                                          "delivery.points.russianPostOffice"
                                      );
                            if (14 == e.dtype)
                                return wb.i18n.t(
                                    "delivery.points.halvaPostamat"
                                );
                            if (15 == e.dtype && e.pickupType >= 0) {
                                if (1 == e.pickupType)
                                    return wb.i18n.t(
                                        "delivery.points.sberbankBranch"
                                    );
                                if (0 == e.pickupType)
                                    return wb.i18n.t(
                                        "delivery.points.sberbankPostamat"
                                    );
                            }
                            return 16 == e.dtype
                                ? wb.i18n.t(
                                      "delivery.points.pyaterochkaPostamat"
                                  )
                                : 111 == e.smId
                                ? wb.i18n.t("delivery.points.pickup")
                                : e.isExternalPostamat
                                ? wb.i18n.t("delivery.points.partnerPostamate")
                                : e.isWb
                                ? wb.i18n.t("delivery.points.pickupPoint")
                                : wb.i18n.t(
                                      "delivery.points.partnerPickupPoint"
                                  );
                        },
                        pickupPhotos: (e) => {
                            var t, r;
                            if (!e.photos) return [];
                            if (86 == e.dtype) return e.photos;
                            const s = new Set(),
                                n = new Set();
                            for (let t of e.photos) {
                                const e = t.split(".").pop();
                                (t = t.replace("preview", "")),
                                    "webp" ==
                                    (null == e ? void 0 : e.toLowerCase())
                                        ? s.add(t)
                                        : n.add(t);
                            }
                            return [
                                ...(s.size > 0 &&
                                (null ==
                                (r =
                                    null == (t = WbSpaModel.prototype)
                                        ? void 0
                                        : t.$apiSupport)
                                    ? void 0
                                    : r.webpImage)
                                    ? s
                                    : n),
                            ];
                        },
                        priceFromRub: (e, t, r) => {
                            var s, n;
                            if (
                                !(null ==
                                (n =
                                    null == (s = wb.global)
                                        ? void 0
                                        : s.settings)
                                    ? void 0
                                    : n.currencies)
                            )
                                return e;
                            const o =
                                r || WbSpaModel.prototype.$user.getCurrency();
                            if ("RUB" === o) return e;
                            if (!wb.global.settings.currencies[o]) return e;
                            const i =
                                e / wb.global.settings.currencies[o].rubRate;
                            return t
                                ? "AMD" === o || "KZT" === o
                                    ? 10 * Math.floor(i / 10)
                                    : "BYN" === o || "GEL" === o
                                    ? Math.floor(100 * i) / 100
                                    : "UZS" === o
                                    ? 100 * Math.floor(i / 100)
                                    : Math.floor(i)
                                : i;
                        },
                        priceToRub: (e, t) => {
                            var r, s;
                            return (null ==
                            (s = null == (r = wb.global) ? void 0 : r.settings)
                                ? void 0
                                : s.currencies) &&
                                wb.global.settings.currencies[t]
                                ? e * wb.global.settings.currencies[t].rubRate
                                : e;
                        },
                        toLocalPrice: (e, t) =>
                            "AMD" === t || "KZT" === t
                                ? 10 * Math.floor(e / 10)
                                : "BYN" === t || "GEL" === t
                                ? Math.floor(100 * e) / 100
                                : "UZS" === t
                                ? 100 * Math.floor(e / 100)
                                : Math.floor(e),
                        max: (e) => Math.max(e, 0),
                        abs: (e) => Math.abs(e),
                        trimWord: function (e, t) {
                            if (!(null == t ? void 0 : t.length) || !e)
                                return e;
                            if (
                                (null == (t = [].concat(t))
                                    ? void 0
                                    : t.length) > 0
                            ) {
                                const r = (e = e.trim()).toLowerCase();
                                for (let s = 0; s < t.length; s++) {
                                    const n = t[s].toLowerCase(),
                                        o = r.indexOf(n + " ", 0);
                                    0 == o &&
                                        (e = e.substring(n.length).trim());
                                    const i = e
                                        .toLowerCase()
                                        .indexOf(n, e.length - n.length);
                                    if (
                                        (i > 0 && (e = e.substring(0, i)),
                                        0 == o || i > 0)
                                    )
                                        return e.trim();
                                }
                            }
                            return e;
                        },
                        trimSupplierName: function (e, t) {
                            if (!(null == t ? void 0 : t.length) || !e)
                                return e;
                            const r = e.trim().split(" "),
                                s = new Set(t);
                            return (e = r
                                .map((e) => {
                                    const t = e.toUpperCase();
                                    return s.has(t) && (e = ""), e;
                                })
                                .join(" ")
                                .trim());
                        },
                        brandUrl: function (e) {
                            return `/brands/${encodeURIComponent(e)}`;
                        },
                        brandUrlById: async function (e) {
                            if (!e) return null;
                            const t = (0, s.c)(),
                                r = await t.fetchStaticV3(
                                    wb.helpers.url.urlStaticData,
                                    {},
                                    `brands-by-id/${e}.json`
                                );
                            return r ? $.views.helpers.brandUrl(r.url) : null;
                        },
                        formatPrice: function (e, t, r) {
                            let s =
                                o.divideNumberBySeparator(e) +
                                (t ? `,${t}` : "");
                            return (
                                "" !== r &&
                                    (s +=
                                        " " +
                                        (r || wb.settings.currencyShortName)),
                                s
                            );
                        },
                        isDateToday: (e) => new Date(e).dateEqual(new Date()),
                        isClosedByUser: (e) => {
                            var t;
                            return (
                                (null == (t = wb.global.userSettings.closed)
                                    ? void 0
                                    : t.includes(e)) || !1
                            );
                        },
                        getCurrentCurrency: function () {
                            return $.views.converters.currencySign(
                                WbSpaModel.prototype.$user.getCurrency()
                            );
                        },
                        fillFeedbackPhotosAndVideo: (e) =>
                            e
                                ? e.map((e) => {
                                      const t = e.isVideo
                                          ? n.fillFeedbackVideos([e])
                                          : n.fillFeedbackPhotos([e]);
                                      return null == t ? void 0 : t[0];
                                  })
                                : [],
                        fillFeedbackPhotos: function (e) {
                            return e
                                ? e.map((e) => {
                                      const t = "number" != typeof e ? e.id : e;
                                      return {
                                          id: t,
                                          preview:
                                              wb.helpers.url.urlFeedbackPhoto(
                                                  t,
                                                  "ms"
                                              ),
                                          previewFallback:
                                              wb.helpers.url.urlFeedbackPhoto(
                                                  t,
                                                  "ms"
                                              ),
                                          fullPath:
                                              wb.helpers.url.urlFeedbackPhoto(
                                                  t,
                                                  "fs"
                                              ),
                                          fullPathFallback:
                                              wb.helpers.url.urlFeedbackPhoto(
                                                  t,
                                                  "fs"
                                              ),
                                      };
                                  })
                                : [];
                        },
                        fillFeedbackVideos: function (e) {
                            if (!e) return [];
                            return (Array.isArray(e) ? e : [e]).map((e) => {
                                const t = e.id,
                                    r = e.durationSec
                                        ? wb.helpers.formatVideoDuration(
                                              e.durationSec
                                          )
                                        : "-";
                                return {
                                    id: t,
                                    preview: wb.helpers.url.urlFeedbackVideo(e),
                                    video: wb.helpers.url.urlFeedbackVideo(
                                        e,
                                        "index.m3u8"
                                    ),
                                    mp4: wb.helpers.url.urlFeedbackVideo(
                                        e,
                                        "preview.mp4"
                                    ),
                                    isVideo: !0,
                                    duration: r,
                                };
                            });
                        },
                        stripHtml: (e, t) => {
                            if (!e) return "";
                            if (t) return e;
                            return (
                                new DOMParser().parseFromString(e, "text/html")
                                    .body.textContent || ""
                            );
                        },
                        isIosDevice: wb.helpers.iOS,
                        isHuaweiDevice: wb.helpers.huawei,
                        sumBy: (e, t) =>
                            t && e && 0 != e.length
                                ? e.reduce(
                                      (e, r) => (
                                          isNaN(r[t]) || (e += +r[t]), e
                                      ),
                                      0
                                  )
                                : 0,
                        minFiscalPriceInCurrency: function (e) {
                            switch (e.toUpperCase()) {
                                case "UZS":
                                    return 100;
                                case "AMD":
                                case "KZT":
                                    return 10;
                                case "BYN":
                                case "USD":
                                case "TJS":
                                case "GEL":
                                    return 0.01;
                                default:
                                    return 1;
                            }
                        },
                        stopPropagation: (e) => e.stopPropagation(),
                        subtract: function (e, t = 0) {
                            return (
                                (Math.round(100 * e) - Math.round(100 * t)) /
                                100
                            );
                        },
                        addLogisticsCost: function (e, t = 0) {
                            return t
                                ? (Math.round(100 * e) + Math.round(t)) / 100
                                : e;
                        },
                        isExpressDeliveryToday: function (e, t, r) {
                            if (!t || !e || !r) return !1;
                            const s = new Date(),
                                n = 60 * s.getHours() + s.getMinutes(),
                                o = r[0],
                                i = r[1],
                                a = n + 60 * e;
                            if (n >= o && n <= i) {
                                if (t.some((e) => a < e.start) && e < 5)
                                    return !0;
                            }
                            return !1;
                        },
                        formatNumberWithDot: function (e) {
                            return e ? String(e).replace(".", ",") : "";
                        },
                        getVatAmount: (e, t, r) => {
                            let s = Number(
                                -1 * (e / (1 + t / 100) - e)
                            ).toFixed(2);
                            return (
                                r &&
                                    ((s =
                                        $.views.converters.divideNumberBySeparator(
                                            s
                                        )),
                                    (s += `&nbsp;${r}`)),
                                s
                            );
                        },
                        onPreventDefault: (e) => {
                            e.preventDefault();
                        },
                        checkProductOpenSameWindowAb: () =>
                            "m" === wb.settings.displayMode ||
                            !(
                                wb.global.settings.switches.enableOpenNewTab ||
                                wb.analitics.checkDataInSplitterServiceV2(
                                    "common",
                                    "ab_enableOpenNewTab",
                                    "yes"
                                )
                            ),
                        applyConverter: function (e, ...t) {
                            return $.views.converters[e].apply(this, t);
                        },
                        getFilteredAllowedServicePages: (e) => {
                            if (!Array.isArray(e)) return;
                            const t = {
                                "/services/kak-sdelat-zakaz": {
                                    hideToTlds: ["ge", "tj"],
                                },
                                "/services/sposoby-oplaty": {
                                    hideToTlds: ["ge", "tj"],
                                },
                                "/services/besplatnaya-dostavka": {
                                    hideToTlds: ["ge", "tj"],
                                },
                                "/services/vozvrat-tovara": {
                                    hideToTlds: ["ge", "tj"],
                                },
                                "/services/vozvrat-denezhnyh-sredstv": {
                                    hideToTlds: ["ge", "tj"],
                                },
                                "/services/pravila-prodazhi": {
                                    hideToTlds: [
                                        "ge",
                                        "ru",
                                        "by",
                                        "am",
                                        "kg",
                                        "uz",
                                        "kz",
                                        "tj",
                                    ],
                                },
                                "/services/pravila-polzovaniya-torgovoy-ploshchadkoy":
                                    {
                                        hideToTlds: [
                                            "ge",
                                            "ru",
                                            "by",
                                            "am",
                                            "kg",
                                            "uz",
                                            "kz",
                                            "tj",
                                        ],
                                    },
                                "/services/voprosy-i-otvety": {
                                    hideToTlds: ["ge", "tj"],
                                },
                                "/services/o-nas": {
                                    hideToTlds: ["ge"],
                                },
                                "/services/rekvizity": {
                                    hideToTlds: ["ge"],
                                },
                                "/presservice": {
                                    hideToTlds: ["ge"],
                                },
                                "/services/kontakty": {
                                    hideToTlds: ["ge"],
                                },
                                "/services/bug-bounty": {
                                    hideToTlds: ["ge", "tj"],
                                },
                            };
                            return e.filter((e) => {
                                var r;
                                const s = t[e.pageUrl] || {},
                                    n = wb.settings.currentDomain;
                                if (0 === Object.keys(s).length) return !0;
                                return !(null == (r = s.hideToTlds)
                                    ? void 0
                                    : r.includes(n));
                            });
                        },
                        debounce: function (e, t) {
                            let r = null;
                            return (...s) => {
                                r && clearTimeout(r),
                                    (r = setTimeout(() => {
                                        e.apply(this, s), (r = null);
                                    }, t));
                            };
                        },
                    },
                    o = {
                        not: function (e) {
                            return !e;
                        },
                        formatPhone: function (e, t) {
                            return e.toString().formatPhone(t);
                        },
                        toOrdinalDigitByFemaleGender: function (e) {
                            return (
                                [
                                    wb.i18n.t(
                                        "common.femaleOrdinalDigit.first"
                                    ),
                                    wb.i18n.t(
                                        "common.femaleOrdinalDigit.second"
                                    ),
                                    wb.i18n.t(
                                        "common.femaleOrdinalDigit.third"
                                    ),
                                    wb.i18n.t(
                                        "common.femaleOrdinalDigit.fourth"
                                    ),
                                    wb.i18n.t(
                                        "common.femaleOrdinalDigit.fifth"
                                    ),
                                    wb.i18n.t(
                                        "common.femaleOrdinalDigit.sixth"
                                    ),
                                    wb.i18n.t(
                                        "common.femaleOrdinalDigit.seventh"
                                    ),
                                    wb.i18n.t(
                                        "common.femaleOrdinalDigit.eighth"
                                    ),
                                    wb.i18n.t(
                                        "common.femaleOrdinalDigit.ninth"
                                    ),
                                    wb.i18n.t(
                                        "common.femaleOrdinalDigit.tenth"
                                    ),
                                ][e] || e + 1
                            );
                        },
                        spaceFormatted: (e) =>
                            String(e).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1 "),
                        convertQuantity: (e) =>
                            wb.i18n.t("common.quantity", {
                                quantity: e,
                            }),
                        plusMinus: (e) => {
                            let t = "";
                            return (
                                e > 0 ? (t = "+") : e < 0 && (t = "-"),
                                `${t} ${o.spaceFormatted(Math.abs(e))}`
                            );
                        },
                        toInt: function (e) {
                            return parseInt(e, 10);
                        },
                        toFixed: function (e, t) {
                            const r = parseFloat(e);
                            return isNaN(r) ? "" : r.toFixed(t);
                        },
                        leadZero: function (e, t) {
                            if (isNaN(e) || null == e) return null;
                            let r = Math.floor(e);
                            for (; r.toString().length < t; ) r = "0" + r;
                            return r;
                        },
                        basketDeliveryDate: function (
                            e,
                            t,
                            r,
                            s,
                            n = !1,
                            i = !1,
                            a = !1,
                            l = !1,
                            c = !1,
                            u = !1
                        ) {
                            if (!e) return "";
                            const d = !(8 & ~r);
                            a && i && Number(i) > 540 && (n = "9:00–23:00");
                            if (d) {
                                const t = new Date().daysBetween(e);
                                if (n) {
                                    const t = o.dayNameFromDate(e, c);
                                    return l ? t : `${t}, ${n}`;
                                }
                                if (s < 5 && 0 == t)
                                    return $.views.converters.deliveryDateTxt(
                                        s,
                                        !0,
                                        d
                                    );
                            }
                            if (!t) {
                                if (n) {
                                    const t = o.dayNameFromDate(e, c);
                                    return l ? t : `${t}, ${n}`;
                                }
                                return u
                                    ? `${(p = e).toLocaleDateString("ru-RU", {
                                          weekday: "short",
                                      })}, ${$.views.converters.dayNameFromDate(
                                          p,
                                          c,
                                          null,
                                          null,
                                          !0
                                      )}`
                                    : o.dayNameFromDate(e, c);
                            }
                            var p;
                            const h = t instanceof Date ? t : new Date();
                            return (
                                "number" == typeof t &&
                                    (h.setTime(e.getTime()),
                                    h.setDate(h.getDate() + t)),
                                h.is1stJan() &&
                                    !d &&
                                    h.setDate(h.getDate() + 1),
                                e.getMonth() !== h.getMonth()
                                    ? `${e.format("d MMMM")}-${h.format(
                                          "d MMMM"
                                      )}`
                                    : `${e.format("d")}-${h.format("d MMMM")}`
                            );
                        },
                        priceWithCoins: function (e, t, r = !1) {
                            var s, n, o, i, a, l;
                            let c = Math.abs(
                                Math.round(100 * Number((e % 1).toFixed(2)))
                            );
                            e = e > 0 ? Math.floor(e) : Math.ceil(e);
                            const u =
                                (null ==
                                (o =
                                    null ==
                                    (n =
                                        null == (s = this.tagCtx)
                                            ? void 0
                                            : s.props)
                                        ? void 0
                                        : n.iso)
                                    ? void 0
                                    : o.toUpperCase()) ||
                                (this.ctxPrm &&
                                    (null == (i = this.ctxPrm("iso"))
                                        ? void 0
                                        : i.toUpperCase()));
                            return (
                                u &&
                                    (t =
                                        null ==
                                        (l =
                                            null == (a = wb.currencies)
                                                ? void 0
                                                : a.info[u])
                                            ? void 0
                                            : l.sign),
                                0 == c && r
                                    ? (c = null)
                                    : c < 10 && (c = "0" + c),
                                $.views.helpers.formatPrice(e, c, t)
                            );
                        },
                        priceWithCurrencyOld: function (e, t, r, s = !1) {
                            var o, i;
                            if (!t && (isNaN(e) || !e)) return "";
                            if (
                                ("BYN" === r ||
                                    "GEL" === r ||
                                    (!r && "" !== r)) &&
                                ("by" === wb.settings.currentLocale ||
                                    "ge" === wb.settings.currentLocale ||
                                    s)
                            ) {
                                let t = Math.round(
                                    100 * Number((e % 1).toFixed(2))
                                );
                                (e = Math.floor(e)),
                                    t < 10 && (t = "0" + t),
                                    r &&
                                        "BYN" !== r &&
                                        "GEL" !== r &&
                                        (t = null);
                                const s =
                                    "BYN" === r
                                        ? "р."
                                        : "GEL" === r
                                        ? "₾"
                                        : "₽";
                                return n.formatPrice(e, t, s);
                            }
                            const a =
                                (null ==
                                (i =
                                    null == (o = wb.currencies)
                                        ? void 0
                                        : o.info[r])
                                    ? void 0
                                    : i.sign) || wb.settings.currencyShortName;
                            return (
                                (e = Math.floor(100 * e) / 100),
                                n.formatPrice(e, null, a)
                            );
                        },
                        priceWithCurrencyV2: function (e, t) {
                            var r, s, o, i, a;
                            let {
                                showEmpty: l = !1,
                                withCoins: c = !1,
                                iso: u = null,
                                sale: d = 0,
                                currency: p = null,
                            } = t;
                            if (!l && (!e || isNaN(Number(e)))) return "";
                            const h = Number(e).toString().split(".");
                            c = c && Number(e) % 1 != 0;
                            const m = p
                                ? null ==
                                  (s =
                                      null == (r = wb.currencies)
                                          ? void 0
                                          : r.getIsoBySign)
                                    ? void 0
                                    : s.call(r, p)
                                : (null == u ? void 0 : u.toUpperCase()) ||
                                  ((null == this ? void 0 : this.ctxPrm) &&
                                      (null == (o = this.ctxPrm("iso"))
                                          ? void 0
                                          : o.toUpperCase())) ||
                                  WbSpaModel.prototype.$user.getCurrency();
                            p ||
                                (p =
                                    null ==
                                    (a =
                                        null == (i = wb.currencies)
                                            ? void 0
                                            : i.info[m])
                                        ? void 0
                                        : a.sign);
                            const g = null != d ? d : 0;
                            if (g > 0) {
                                e = Number(e);
                                let t = Math.ceil(e * (g / 100));
                                const r = n.minFiscalPriceInCurrency(p);
                                (t = t < r ? -r : -Math.ceil(t / r) * r),
                                    (e += t),
                                    (h[0] = `${e}`);
                            }
                            if ("RUB" === m && !c)
                                return n.formatPrice(h[0], null, p || "₽");
                            let b,
                                y = Number(e);
                            if (
                                "BYN" === m ||
                                "GEL" === m ||
                                ("RUB" === m && c)
                            ) {
                                (y = Math.floor(Number(e))), (b = "00");
                                const t = Number(e)
                                    .toString()
                                    .replace(",", ".")
                                    .split(".")[1];
                                (null == t ? void 0 : t.length) > 0 &&
                                    ((b = t.substring(0, 2)),
                                    1 == b.length && (b += "0")),
                                    (p =
                                        "BYN" === m
                                            ? "р."
                                            : "GEL" === m
                                            ? "₾"
                                            : "₽");
                            } else
                                ("AMD" !== m && "KZT" !== m) ||
                                "string" == typeof e
                                    ? "UZS" === m
                                        ? (y =
                                              100 *
                                              parseInt(String(Number(e) / 100)))
                                        : "KGS" === m &&
                                          (y = Math.floor(Number(e)))
                                    : (y =
                                          10 *
                                          parseInt(String(Number(e) / 10)));
                            return n.formatPrice(y, b, p);
                        },
                        priceUsdRaw: function (e) {
                            var t, r, s;
                            return (
                                null ==
                                (s =
                                    null ==
                                    (r =
                                        null == (t = wb.global)
                                            ? void 0
                                            : t.settings)
                                        ? void 0
                                        : r.variables)
                                    ? void 0
                                    : s.toUsdExchangeRate
                            )
                                ? (
                                      parseInt(
                                          String(
                                              e *
                                                  wb.global.settings.variables
                                                      .toUsdExchangeRate *
                                                  100
                                          )
                                      ) / 100
                                  ).toFixedNumber(2)
                                : 0;
                        },
                        priceUsd: function (e) {
                            var t, r, s;
                            if (
                                !(null ==
                                (s =
                                    null ==
                                    (r =
                                        null == (t = wb.global)
                                            ? void 0
                                            : t.settings)
                                        ? void 0
                                        : r.variables)
                                    ? void 0
                                    : s.toUsdExchangeRate)
                            )
                                return "";
                            return (
                                "$" +
                                $.views.converters
                                    .priceUsdRaw(e)
                                    .toString()
                                    .replace(/\B(?=(\d{3})+(?!\d))/g, "&nbsp;")
                                    .replace(".", ",")
                            );
                        },
                        urlForGood: function (e, t, r, s, n, o, i, a) {
                            const l = new URL(
                                `/catalog/${e}/detail.aspx`,
                                window.location.origin
                            );
                            return (
                                r && l.searchParams.set("targetUrl", r),
                                o && l.searchParams.set("size", String(o)),
                                a && l.searchParams.set("erid", a),
                                i && l.searchParams.set("isTrend", "true"),
                                s && (l.hash = s),
                                l.toString()
                            );
                        },
                        urlSiteStatic: function (e) {
                            return wb.helpers.url.urlSiteStatic(e);
                        },
                        urlSiteStaticPb: function (e) {
                            return wb.helpers.url.urlSiteStatic(e);
                        },
                        urlStaticBasket: function (e, t, r) {
                            return wb.helpers.url.urlStaticBasket(e, t);
                        },
                        toLower: function (e) {
                            return null == e ? void 0 : e.toLowerCase();
                        },
                        dateFromTimestamp: function (e, t) {
                            return new Date(e).format(t || "dd.MM.yyyy HH:mm");
                        },
                        formatDate: function (e, t) {
                            var r;
                            if (!e) return "";
                            const s = new Date(e);
                            return (
                                (null == (r = this.tagCtx)
                                    ? void 0
                                    : r.props.yearFormat) &&
                                    new Date().getFullYear() !=
                                        s.getFullYear() &&
                                    (t += this.tagCtx.props.yearFormat),
                                s.format(t)
                            );
                        },
                        humanDate: function (e, t) {
                            var r, s;
                            if (!e) return "";
                            "string" == typeof e && (e = new Date(e));
                            const n = (e) =>
                                    wb.i18n.plural("common.time.month_short", {
                                        count: e,
                                    }),
                                o = (e) =>
                                    wb.i18n.plural("common.time.year", {
                                        count: e,
                                    }),
                                {
                                    years: i,
                                    months: a,
                                    days: l,
                                } = wb.helpers.date.diff(e);
                            let c = (i > 0 || a > 0) && l > 15 ? a + 1 : a;
                            if (i > 0)
                                return 0 == c
                                    ? o(i)
                                    : 12 == c
                                    ? o(i + 1)
                                    : `${o(i)} ${n(c)}`;
                            if (a > 0) return 12 == c ? o(i + 1) : n(c);
                            const u =
                                null ==
                                (s =
                                    null == (r = this.tagCtx)
                                        ? void 0
                                        : r.props)
                                    ? void 0
                                    : s.genitive;
                            return null != t
                                ? t
                                : u
                                ? wb.i18n.plural("common.time.daysGenitive", {
                                      count: l,
                                  })
                                : wb.i18n.plural("common.time.days", {
                                      count: l,
                                  });
                        },
                        humanTime: function (e, t, r = !1, s = !1) {
                            if (e <= 0 || isNaN(e)) return "";
                            const n = [],
                                o = Math.round(e / 86400);
                            if (r && o)
                                return t
                                    ? wb.i18n.plural(
                                          "common.time.daysGenitive",
                                          {
                                              count: o,
                                          }
                                      )
                                    : wb.i18n.plural("common.time.days", {
                                          count: o,
                                      });
                            const i = Math.floor((e % 86400) / 3600);
                            i &&
                                n.push(
                                    t
                                        ? wb.i18n.plural(
                                              "common.time.hourGenitive",
                                              {
                                                  count: i,
                                              }
                                          )
                                        : wb.i18n.plural("common.time.hour", {
                                              count: i,
                                          })
                                );
                            const a = Math.floor((e % 3600) / 60) + (s ? 0 : 1);
                            if (
                                (a &&
                                    n.push(
                                        t
                                            ? wb.i18n.plural(
                                                  "common.time.minuteGenitive",
                                                  {
                                                      count: a,
                                                  }
                                              )
                                            : wb.i18n.plural(
                                                  "common.time.minute",
                                                  {
                                                      count: a,
                                                  }
                                              )
                                    ),
                                s)
                            ) {
                                const r = e % 60;
                                r &&
                                    n.push(
                                        t
                                            ? wb.i18n.plural(
                                                  "common.time.secondGenitive",
                                                  {
                                                      count: r,
                                                  }
                                              )
                                            : wb.i18n.plural(
                                                  "common.time.second",
                                                  {
                                                      count: r,
                                                  }
                                              )
                                    );
                            }
                            return n.reduce((e, t, r, s) => {
                                if (0 == r) return t;
                                return `${e}${
                                    s.length - 1 == r
                                        ? ` ${wb.i18n.t("common.and")} `
                                        : ", "
                                }${t}`;
                            }, "");
                        },
                        differenceDatesInSeconds: function (
                            e = new Date(),
                            t = 0
                        ) {
                            const r = new Date(e).addDays(t),
                                s = new Date(),
                                n = Math.floor((Number(r) - Number(s)) / 1e3);
                            return Math.max(0, n);
                        },
                        humanTimerFormat: function (e = 0, t = !1) {
                            if (e <= 0 || isNaN(e))
                                return wb.i18n.t("common.humanTimer.timeIsUp");
                            const r = (e) => e.toString().padStart(2, "0"),
                                s = Math.floor(e / 3600),
                                n = r(s),
                                o = r(Math.floor((e % 3600) / 60)),
                                i = r(e % 60);
                            if (e < 86400) {
                                if (t)
                                    return wb.i18n.t(
                                        "common.humanTimer.timeInWords",
                                        {
                                            hours: n,
                                            minutes: o,
                                            seconds: i,
                                        }
                                    );
                                {
                                    const e = `${n}:${o}:${i}`;
                                    return wb.i18n.plural(
                                        "common.humanTimer.remainingTime",
                                        {
                                            count: s,
                                            displayCount: e,
                                        }
                                    );
                                }
                            }
                            {
                                const t = Math.floor(e / 86400);
                                return wb.i18n.plural(
                                    "common.humanTimer.remainingDays",
                                    {
                                        count: t,
                                    }
                                );
                            }
                        },
                        getDaysFromOrder: function (e = null, t = null) {
                            if (!e || !t) return;
                            const r =
                                "Purchased" == e.status ? e.lastDate : null;
                            if (r) {
                                const e =
                                        $.views.converters.differenceDatesInSeconds(
                                            r,
                                            t
                                        ),
                                    s = new Date().daysBetween(
                                        new Date(r).addDays(t)
                                    );
                                return e <= 86400
                                    ? wb.i18n.t("common.today").toLowerCase()
                                    : wb.i18n.plural("common.time.afterDays", {
                                          count: s,
                                      });
                            }
                            return wb.i18n.plural("common.time.days", {
                                count: 0,
                            });
                        },
                        humanTimerFormatSimple: function (e = 0, t = !1) {
                            if (null == e) return;
                            const r = Math.floor(e / 3600),
                                s = Math.floor((e % 3600) / 60),
                                n = e % 60;
                            return `${
                                r > 0 || t ? `${r < 10 ? "0" : ""}${r}:` : ""
                            }${s < 10 ? "0" : ""}${s}:${n < 10 ? "0" : ""}${n}`;
                        },
                        humanTimerFormatSaleTimer: function (e = 0, t = !1) {
                            if (null == e) return;
                            if (e > 86400) {
                                const t = Math.ceil(e / 86400);
                                return wb.i18n.plural("common.time.days", {
                                    count: t,
                                });
                            }
                            const r = Math.floor(e / 3600),
                                s = Math.floor((e % 3600) / 60),
                                n = e % 60;
                            return `${
                                r > 0 || t ? `${r < 10 ? "0" : ""}${r}:` : ""
                            }${s < 10 ? "0" : ""}${s}:${n < 10 ? "0" : ""}${n}`;
                        },
                        dateStringToFormat: function (e, t) {
                            if (!e || "string" != typeof e) return "";
                            const [r, s, n] = e
                                .split(".")
                                .map((e) => parseInt(e));
                            try {
                                return new Date(n, s - 1, r).format(
                                    t || "dd MMMM yyyy"
                                );
                            } catch (e) {
                                return "";
                            }
                        },
                        localize: (e, ...t) => $.localize(e, ...t),
                        pluralize: (e, ...t) => $.pluralize(e, ...t),
                        customDateTimeFormat: function (e, t, r, s, n) {
                            n || (n = "HH:mm");
                            const o = new Date(e),
                                i = new Date();
                            if (o.toDateString() === i.toDateString())
                                return `${r}, ${o.format(n)}`;
                            const a = function () {
                                return this.setDate(this.getDate() - 1), this;
                            }.call(i);
                            if (o.toDateString() === a.toDateString())
                                return `${s}, ${o.format(n)}`;
                            const l = o.format(t);
                            return o.getFullYear() < i.getFullYear()
                                ? `${l} ${o.getFullYear()}, ${o.format(n)}`
                                : `${l}, ${o.format(n)}`;
                        },
                        divideNumberBySeparator: function (e, t) {
                            return Object.is(e, -0)
                                ? "-0"
                                : null == e
                                ? void 0
                                : e
                                      .toString()
                                      .replace(
                                          /\B(?=(\d{3})+(?!\d))/g,
                                          t || " "
                                      );
                        },
                        trimWord: n.trimWord,
                        trimSupplierName: n.trimSupplierName,
                        join: function (e) {
                            if (!e || 0 == e.length) return "";
                            const {
                                upper: t,
                                prefix: r,
                                separator: s,
                            } = this.tagCtx.props;
                            return e
                                .map(
                                    (e) => (
                                        t && (e = e.toUpperCase()),
                                        Boolean(r) && (e = `${r}${e}`),
                                        e
                                    )
                                )
                                .join(s);
                        },
                        humanBytes: (e) => {
                            const t = wb.i18n.t,
                                r = [
                                    t("common.bytes.byte"),
                                    t("common.bytes.kilobyte"),
                                    t("common.bytes.megabyte"),
                                    t("common.bytes.gigabyte"),
                                ];
                            let s = 0;
                            for (; s < r.length - 1 && e >= 1024; )
                                (e /= 1024), s++;
                            return `${Number(e.toFixed(2))} ${r[s]}`;
                        },
                        deliveryDateTxt: function (e, t = !1, r = !1) {
                            if (!e || "number" != typeof e) return "";
                            let s;
                            const n = new Date(Date.now()),
                                i = new Date(n.getTime() + 60 * e * 60 * 1e3);
                            i.is1stJan() &&
                                !r &&
                                (i.setDate(i.getDate() + 1), (e += 24));
                            const a = 24 - n.getHours(),
                                l = i.getHours();
                            return (
                                n.getDate() === i.getDate() && e < 24
                                    ? (s =
                                          l < 9
                                              ? wb.i18n.t("common.todayMorning")
                                              : l < 23
                                              ? t
                                                  ? e < 5
                                                      ? wb.i18n.plural(
                                                            "common.time.todayTimePeriodHour",
                                                            {
                                                                count: 4,
                                                                displayCount:
                                                                    "2–4",
                                                            }
                                                        )
                                                      : wb.i18n.plural(
                                                            "common.time.todayTimePeriodHour",
                                                            {
                                                                count: e,
                                                            }
                                                        )
                                                  : wb.i18n.plural(
                                                        "common.time.timePeriodHour",
                                                        {
                                                            count: e,
                                                        }
                                                    )
                                              : wb.i18n.t(
                                                    "common.tomorrowMorning"
                                                ))
                                    : e < a + 9
                                    ? (s =
                                          e < 5
                                              ? wb.i18n.t(
                                                    "common.tomorrowMorning"
                                                )
                                              : wb.i18n.t("common.tomorrow"))
                                    : e < 24 + a
                                    ? (s =
                                          l < 23
                                              ? wb.i18n.t("common.tomorrow")
                                              : wb.i18n.t(
                                                    "common.dayAfterTomorrow"
                                                ))
                                    : e < 48 + a && l < 23
                                    ? (s = wb.i18n.t("common.dayAfterTomorrow"))
                                    : (l >= 23 && (e += a),
                                      (s = o.dateFromTimestamp(
                                          Date.now() + 60 * e * 60 * 1e3,
                                          "d MMMM"
                                      ))),
                                s
                            );
                        },
                        minutesToTime: function (e) {
                            return `${Math.floor(e / 60)}:${(e % 60)
                                .toString()
                                .padStart(2, "0")}`;
                        },
                        fastDeliveryText: function (e, t, r) {
                            if (!t || !e || !r) return;
                            const s = new Date(),
                                n = 60 * s.getHours() + s.getMinutes(),
                                o = r[0],
                                i = r[1],
                                a = n + 60 * e,
                                l = t[0].start,
                                c = $.views.converters.minutesToTime(l);
                            if (n <= o)
                                return wb.i18n.t("common.todayFrom", {
                                    slot: c,
                                });
                            if (n >= o && n <= i) {
                                return t.some((e) => a < e.start)
                                    ? e < 5
                                        ? wb.i18n.plural(
                                              "common.time.timePeriodHour",
                                              {
                                                  count: 4,
                                                  displayCount: "2–4",
                                              }
                                          )
                                        : wb.i18n.plural(
                                              "common.time.timePeriodHour",
                                              {
                                                  count: e,
                                              }
                                          )
                                    : wb.i18n.t("common.tomorrowFrom", {
                                          slot: c,
                                      });
                            }
                            return wb.i18n.t("common.tomorrowFrom", {
                                slot: c,
                            });
                        },
                        formatTimeStr: function (e) {
                            return e.replace(/^0(\d):/, "$1:");
                        },
                        dayNameFromDate: function (
                            e,
                            t = !1,
                            r = !1,
                            s = !1,
                            n = !1,
                            o = !1
                        ) {
                            if (!e) return;
                            const i = new Date(),
                                a = e instanceof Date ? e : new Date(e),
                                l = i.daysBetween(a),
                                c = wb.i18n.t;
                            return 0 === l
                                ? n
                                    ? c("common.today").toLowerCase()
                                    : c("common.today")
                                : 1 === l
                                ? n
                                    ? c("common.tomorrow").toLowerCase()
                                    : c("common.tomorrow")
                                : 2 === l && t
                                ? n
                                    ? c("common.dayAfterTomorrow").toLowerCase()
                                    : c("common.dayAfterTomorrow")
                                : l >= 3 && l <= 7 && s
                                ? wb.i18n.plural("common.time.afterDays", {
                                      count: l,
                                  })
                                : r
                                ? a.getFullYear() !== i.getFullYear()
                                    ? a.format("d MMMM yyyy")
                                    : a.format("d MMMM")
                                : o
                                ? a.format("d MMM")
                                : a.format("d MMMM");
                        },
                        getWorkSchedule: function (e, t, r) {
                            const s = wb.i18n.t,
                                n = [
                                    "mon",
                                    "tue",
                                    "wed",
                                    "thu",
                                    "fri",
                                    "sat",
                                    "sun",
                                ].map((e) =>
                                    s(
                                        `common.dates.dayNamesShortUppercase.${e}`
                                    )
                                );
                            let o,
                                i = null;
                            if (r) {
                                let s = [],
                                    a = [];
                                n.forEach((e, t) => {
                                    0 === r[t] ? s.push(e) : a.push(e);
                                });
                                let l = [],
                                    c = [s[0]];
                                for (let e = 1; e < s.length; e++) {
                                    const t = n.indexOf(s[e - 1]);
                                    n.indexOf(s[e]) - t == 1
                                        ? c.push(s[e])
                                        : (l.push(c), (c = [s[e]]));
                                }
                                l.push(c),
                                    (o =
                                        l
                                            .map((e) =>
                                                e.length > 1
                                                    ? `${e[0]}-${
                                                          e[e.length - 1]
                                                      }`
                                                    : e[0]
                                            )
                                            .join(", ") +
                                        ` ${$.views.converters.leadZero(
                                            e,
                                            2
                                        )}:00-${$.views.converters.leadZero(
                                            t,
                                            2
                                        )}:00`),
                                    (i = a.join(", "));
                            } else
                                o = `${wb.i18n.t(
                                    "common.daily"
                                )} ${$.views.converters.leadZero(
                                    e,
                                    2
                                )}:00-${$.views.converters.leadZero(t, 2)}:00`;
                            return {
                                workTime: o,
                                weekend: i,
                            };
                        },
                        deliveryType: function () {
                            const { storeType: e } = this.tagCtx.props;
                            return 4 & ~e
                                ? 8 & ~e
                                    ? wb.i18n.t(
                                          "delivery.type.wildberriesDelivery"
                                      )
                                    : wb.i18n.t("delivery.type.sellerDelivery")
                                : 8 & ~e
                                ? wb.i18n.t(
                                      "delivery.type.wildberriesCargoDelivery"
                                  )
                                : wb.i18n.t(
                                      "delivery.type.sellerCargoDelivery"
                                  );
                        },
                        formatString: function (e, t, r, s) {
                            return (
                                r && (e = e.replace(/\[(\d+)\]/gm, "{$1}")),
                                s && (t = n.encode(t)),
                                e.format(t)
                            );
                        },
                        trim: function (e) {
                            return null == e ? void 0 : e.trim();
                        },
                        imgForPromoCategory: function (e = 0, t = !1, r, s) {
                            const n = t ? "small/" : "",
                                o = r ? r + "/" : "promo_v2/",
                                i = e < 1e6 ? e : parseInt((e + "").slice(-6));
                            return wb.helpers.url.urlStaticBasket(
                                `wbx-catalog/${o}${n}${i}.webp`,
                                1
                            );
                        },
                        fileName: function (e) {
                            var t, r;
                            const s = e.substring(e.lastIndexOf("/") + 1),
                                n =
                                    null ==
                                    (r =
                                        null == (t = this.tagCtx)
                                            ? void 0
                                            : t.props)
                                        ? void 0
                                        : r.mode;
                            return "name" == n
                                ? s.substring(0, s.lastIndexOf(".")) || s
                                : "extension" == n
                                ? s.slice(
                                      1 +
                                          (Math.max(s.lastIndexOf("."), 0) ||
                                              s.length)
                                  ) || ""
                                : s;
                        },
                        convertToText: function (e) {
                            if (!Array.isArray(e) || 0 === e.length) return "";
                            const t = {
                                    text: wb.i18n.t("common.text"),
                                    photo: wb.i18n.t("common.photo"),
                                    video: wb.i18n.t("common.video"),
                                },
                                r = e
                                    .map((e) =>
                                        t[e.toLowerCase()].toLowerCase()
                                    )
                                    .filter(Boolean);
                            if (0 === r.length) return "";
                            if (1 === r.length) return r[0];
                            const s = r.pop(),
                                n = r.join(", "),
                                o = wb.i18n.t("common.and");
                            return "en" === wb.currentLanguage && e.length > 2
                                ? `${n}, ${o} ${s}`
                                : `${n} ${o} ${s}`;
                        },
                        toHttps: (e) =>
                            $.views.converters.url(
                                null == e
                                    ? void 0
                                    : e.replace(/^http:/i, "https:")
                            ),
                        onlyDigits: (e) =>
                            null == e ? void 0 : e.replace(/[^\d\.]/g, ""),
                        toWebp: function (e) {
                            var t, r;
                            return (
                                null ==
                                (r =
                                    null == (t = WbSpaModel.prototype)
                                        ? void 0
                                        : t.$apiSupport)
                                    ? void 0
                                    : r.webpImage
                            )
                                ? "webp"
                                : e;
                        },
                        useWebp: function (e) {
                            var t, r;
                            return (
                                null ==
                                (r =
                                    null == (t = WbSpaModel.prototype)
                                        ? void 0
                                        : t.$apiSupport)
                                    ? void 0
                                    : r.webpImage
                            )
                                ? null == e
                                    ? void 0
                                    : e.replace(/^(.*\.)(jpg|jpeg)$/i, "$1webp")
                                : e;
                        },
                        toNumber: (e) => Number(e),
                        fixHtml: (e) =>
                            e
                                ? new DOMParser().parseFromString(
                                      e,
                                      "text/html"
                                  ).body.innerHTML
                                : "",
                        formatNumberWithDot: (e) =>
                            e ? String(e).replace(".", ",") : "",
                        checkProductOpenSameWindowAb() {
                            return (
                                "m" === wb.settings.displayMode ||
                                !(
                                    wb.global.settings.switches
                                        .enableOpenNewTab ||
                                    wb.analitics.checkDataInSplitterServiceV2(
                                        "common",
                                        "ab_enableOpenNewTab",
                                        "yes"
                                    )
                                )
                            );
                        },
                    };
            },
            62819: function (e, t, r) {
                "use strict";
                r.d(t, {
                    O: function () {
                        return i;
                    },
                    c: function () {
                        return o;
                    },
                });
                var s = r(56735);
                const n = "httpClient",
                    o = () => {
                        const e = (0, s.i)(n);
                        if (!e) throw new Error(`Can't get ${n} instance`);
                        return e;
                    },
                    i = (e) => {
                        (0, s.W)(n, e);
                    };
            },
            56735: function (e, t, r) {
                "use strict";
                r.d(t, {
                    W: function () {
                        return i;
                    },
                    i: function () {
                        return o;
                    },
                });
                var s = r(16590);
                const n = (e) => {
                        const t = `instancer_${e}`;
                        return Symbol.for(t);
                    },
                    o = (e) => {
                        const t = n(e);
                        return (0, s.m)()[t] || null;
                    },
                    i = (e, t) => {
                        const r = n(e);
                        (0, s.m)()[r] = t;
                    };
            },
            88758: function (e) {
                var t = {
                    utf8: {
                        stringToBytes: function (e) {
                            return t.bin.stringToBytes(
                                unescape(encodeURIComponent(e))
                            );
                        },
                        bytesToString: function (e) {
                            return decodeURIComponent(
                                escape(t.bin.bytesToString(e))
                            );
                        },
                    },
                    bin: {
                        stringToBytes: function (e) {
                            for (var t = [], r = 0; r < e.length; r++)
                                t.push(255 & e.charCodeAt(r));
                            return t;
                        },
                        bytesToString: function (e) {
                            for (var t = [], r = 0; r < e.length; r++)
                                t.push(String.fromCharCode(e[r]));
                            return t.join("");
                        },
                    },
                };
                e.exports = t;
            },
            69818: function (e) {
                var t, r;
                (t =
                    "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),
                    (r = {
                        rotl: function (e, t) {
                            return (e << t) | (e >>> (32 - t));
                        },
                        rotr: function (e, t) {
                            return (e << (32 - t)) | (e >>> t);
                        },
                        endian: function (e) {
                            if (e.constructor == Number)
                                return (
                                    (16711935 & r.rotl(e, 8)) |
                                    (4278255360 & r.rotl(e, 24))
                                );
                            for (var t = 0; t < e.length; t++)
                                e[t] = r.endian(e[t]);
                            return e;
                        },
                        randomBytes: function (e) {
                            for (var t = []; e > 0; e--)
                                t.push(Math.floor(256 * Math.random()));
                            return t;
                        },
                        bytesToWords: function (e) {
                            for (
                                var t = [], r = 0, s = 0;
                                r < e.length;
                                r++, s += 8
                            )
                                t[s >>> 5] |= e[r] << (24 - (s % 32));
                            return t;
                        },
                        wordsToBytes: function (e) {
                            for (var t = [], r = 0; r < 32 * e.length; r += 8)
                                t.push((e[r >>> 5] >>> (24 - (r % 32))) & 255);
                            return t;
                        },
                        bytesToHex: function (e) {
                            for (var t = [], r = 0; r < e.length; r++)
                                t.push((e[r] >>> 4).toString(16)),
                                    t.push((15 & e[r]).toString(16));
                            return t.join("");
                        },
                        hexToBytes: function (e) {
                            for (var t = [], r = 0; r < e.length; r += 2)
                                t.push(parseInt(e.substr(r, 2), 16));
                            return t;
                        },
                        bytesToBase64: function (e) {
                            for (var r = [], s = 0; s < e.length; s += 3)
                                for (
                                    var n =
                                            (e[s] << 16) |
                                            (e[s + 1] << 8) |
                                            e[s + 2],
                                        o = 0;
                                    o < 4;
                                    o++
                                )
                                    8 * s + 6 * o <= 8 * e.length
                                        ? r.push(
                                              t.charAt(
                                                  (n >>> (6 * (3 - o))) & 63
                                              )
                                          )
                                        : r.push("=");
                            return r.join("");
                        },
                        base64ToBytes: function (e) {
                            e = e.replace(/[^A-Z0-9+\/]/gi, "");
                            for (
                                var r = [], s = 0, n = 0;
                                s < e.length;
                                n = ++s % 4
                            )
                                0 != n &&
                                    r.push(
                                        ((t.indexOf(e.charAt(s - 1)) &
                                            (Math.pow(2, -2 * n + 8) - 1)) <<
                                            (2 * n)) |
                                            (t.indexOf(e.charAt(s)) >>>
                                                (6 - 2 * n))
                                    );
                            return r;
                        },
                    }),
                    (e.exports = r);
            },
            84783: function (e) {
                function t(e) {
                    return (
                        !!e.constructor &&
                        "function" == typeof e.constructor.isBuffer &&
                        e.constructor.isBuffer(e)
                    );
                }
                e.exports = function (e) {
                    return (
                        null != e &&
                        (t(e) ||
                            (function (e) {
                                return (
                                    "function" == typeof e.readFloatLE &&
                                    "function" == typeof e.slice &&
                                    t(e.slice(0, 0))
                                );
                            })(e) ||
                            !!e._isBuffer)
                    );
                };
            },
            86678: function (e, t, r) {
                var s, n, o, i, a;
                (s = r(69818)),
                    (n = r(88758).utf8),
                    (o = r(84783)),
                    (i = r(88758).bin),
                    ((a = function (e, t) {
                        e.constructor == String
                            ? (e =
                                  t && "binary" === t.encoding
                                      ? i.stringToBytes(e)
                                      : n.stringToBytes(e))
                            : o(e)
                            ? (e = Array.prototype.slice.call(e, 0))
                            : Array.isArray(e) ||
                              e.constructor === Uint8Array ||
                              (e = e.toString());
                        for (
                            var r = s.bytesToWords(e),
                                l = 8 * e.length,
                                c = 1732584193,
                                u = -271733879,
                                d = -1732584194,
                                p = 271733878,
                                h = 0;
                            h < r.length;
                            h++
                        )
                            r[h] =
                                (16711935 & ((r[h] << 8) | (r[h] >>> 24))) |
                                (4278255360 & ((r[h] << 24) | (r[h] >>> 8)));
                        (r[l >>> 5] |= 128 << l % 32),
                            (r[14 + (((l + 64) >>> 9) << 4)] = l);
                        var m = a._ff,
                            g = a._gg,
                            b = a._hh,
                            y = a._ii;
                        for (h = 0; h < r.length; h += 16) {
                            var v = c,
                                f = u,
                                w = d,
                                S = p;
                            (c = m(c, u, d, p, r[h + 0], 7, -680876936)),
                                (p = m(p, c, u, d, r[h + 1], 12, -389564586)),
                                (d = m(d, p, c, u, r[h + 2], 17, 606105819)),
                                (u = m(u, d, p, c, r[h + 3], 22, -1044525330)),
                                (c = m(c, u, d, p, r[h + 4], 7, -176418897)),
                                (p = m(p, c, u, d, r[h + 5], 12, 1200080426)),
                                (d = m(d, p, c, u, r[h + 6], 17, -1473231341)),
                                (u = m(u, d, p, c, r[h + 7], 22, -45705983)),
                                (c = m(c, u, d, p, r[h + 8], 7, 1770035416)),
                                (p = m(p, c, u, d, r[h + 9], 12, -1958414417)),
                                (d = m(d, p, c, u, r[h + 10], 17, -42063)),
                                (u = m(u, d, p, c, r[h + 11], 22, -1990404162)),
                                (c = m(c, u, d, p, r[h + 12], 7, 1804603682)),
                                (p = m(p, c, u, d, r[h + 13], 12, -40341101)),
                                (d = m(d, p, c, u, r[h + 14], 17, -1502002290)),
                                (c = g(
                                    c,
                                    (u = m(
                                        u,
                                        d,
                                        p,
                                        c,
                                        r[h + 15],
                                        22,
                                        1236535329
                                    )),
                                    d,
                                    p,
                                    r[h + 1],
                                    5,
                                    -165796510
                                )),
                                (p = g(p, c, u, d, r[h + 6], 9, -1069501632)),
                                (d = g(d, p, c, u, r[h + 11], 14, 643717713)),
                                (u = g(u, d, p, c, r[h + 0], 20, -373897302)),
                                (c = g(c, u, d, p, r[h + 5], 5, -701558691)),
                                (p = g(p, c, u, d, r[h + 10], 9, 38016083)),
                                (d = g(d, p, c, u, r[h + 15], 14, -660478335)),
                                (u = g(u, d, p, c, r[h + 4], 20, -405537848)),
                                (c = g(c, u, d, p, r[h + 9], 5, 568446438)),
                                (p = g(p, c, u, d, r[h + 14], 9, -1019803690)),
                                (d = g(d, p, c, u, r[h + 3], 14, -187363961)),
                                (u = g(u, d, p, c, r[h + 8], 20, 1163531501)),
                                (c = g(c, u, d, p, r[h + 13], 5, -1444681467)),
                                (p = g(p, c, u, d, r[h + 2], 9, -51403784)),
                                (d = g(d, p, c, u, r[h + 7], 14, 1735328473)),
                                (c = b(
                                    c,
                                    (u = g(
                                        u,
                                        d,
                                        p,
                                        c,
                                        r[h + 12],
                                        20,
                                        -1926607734
                                    )),
                                    d,
                                    p,
                                    r[h + 5],
                                    4,
                                    -378558
                                )),
                                (p = b(p, c, u, d, r[h + 8], 11, -2022574463)),
                                (d = b(d, p, c, u, r[h + 11], 16, 1839030562)),
                                (u = b(u, d, p, c, r[h + 14], 23, -35309556)),
                                (c = b(c, u, d, p, r[h + 1], 4, -1530992060)),
                                (p = b(p, c, u, d, r[h + 4], 11, 1272893353)),
                                (d = b(d, p, c, u, r[h + 7], 16, -155497632)),
                                (u = b(u, d, p, c, r[h + 10], 23, -1094730640)),
                                (c = b(c, u, d, p, r[h + 13], 4, 681279174)),
                                (p = b(p, c, u, d, r[h + 0], 11, -358537222)),
                                (d = b(d, p, c, u, r[h + 3], 16, -722521979)),
                                (u = b(u, d, p, c, r[h + 6], 23, 76029189)),
                                (c = b(c, u, d, p, r[h + 9], 4, -640364487)),
                                (p = b(p, c, u, d, r[h + 12], 11, -421815835)),
                                (d = b(d, p, c, u, r[h + 15], 16, 530742520)),
                                (c = y(
                                    c,
                                    (u = b(
                                        u,
                                        d,
                                        p,
                                        c,
                                        r[h + 2],
                                        23,
                                        -995338651
                                    )),
                                    d,
                                    p,
                                    r[h + 0],
                                    6,
                                    -198630844
                                )),
                                (p = y(p, c, u, d, r[h + 7], 10, 1126891415)),
                                (d = y(d, p, c, u, r[h + 14], 15, -1416354905)),
                                (u = y(u, d, p, c, r[h + 5], 21, -57434055)),
                                (c = y(c, u, d, p, r[h + 12], 6, 1700485571)),
                                (p = y(p, c, u, d, r[h + 3], 10, -1894986606)),
                                (d = y(d, p, c, u, r[h + 10], 15, -1051523)),
                                (u = y(u, d, p, c, r[h + 1], 21, -2054922799)),
                                (c = y(c, u, d, p, r[h + 8], 6, 1873313359)),
                                (p = y(p, c, u, d, r[h + 15], 10, -30611744)),
                                (d = y(d, p, c, u, r[h + 6], 15, -1560198380)),
                                (u = y(u, d, p, c, r[h + 13], 21, 1309151649)),
                                (c = y(c, u, d, p, r[h + 4], 6, -145523070)),
                                (p = y(p, c, u, d, r[h + 11], 10, -1120210379)),
                                (d = y(d, p, c, u, r[h + 2], 15, 718787259)),
                                (u = y(u, d, p, c, r[h + 9], 21, -343485551)),
                                (c = (c + v) >>> 0),
                                (u = (u + f) >>> 0),
                                (d = (d + w) >>> 0),
                                (p = (p + S) >>> 0);
                        }
                        return s.endian([c, u, d, p]);
                    })._ff = function (e, t, r, s, n, o, i) {
                        var a = e + ((t & r) | (~t & s)) + (n >>> 0) + i;
                        return ((a << o) | (a >>> (32 - o))) + t;
                    }),
                    (a._gg = function (e, t, r, s, n, o, i) {
                        var a = e + ((t & s) | (r & ~s)) + (n >>> 0) + i;
                        return ((a << o) | (a >>> (32 - o))) + t;
                    }),
                    (a._hh = function (e, t, r, s, n, o, i) {
                        var a = e + (t ^ r ^ s) + (n >>> 0) + i;
                        return ((a << o) | (a >>> (32 - o))) + t;
                    }),
                    (a._ii = function (e, t, r, s, n, o, i) {
                        var a = e + (r ^ (t | ~s)) + (n >>> 0) + i;
                        return ((a << o) | (a >>> (32 - o))) + t;
                    }),
                    (a._blocksize = 16),
                    (a._digestsize = 16),
                    (e.exports = function (e, t) {
                        if (null == e) throw new Error("Illegal argument " + e);
                        var r = s.wordsToBytes(a(e, t));
                        return t && t.asBytes
                            ? r
                            : t && t.asString
                            ? i.bytesToString(r)
                            : s.bytesToHex(r);
                    });
            },
        },
        __webpack_module_cache__ = {},
        leafPrototypes,
        getProto,
        inProgress,
        dataWebpackPrefix;
    function __webpack_require__(e) {
        var t = __webpack_module_cache__[e];
        if (void 0 !== t) return t.exports;
        var r = (__webpack_module_cache__[e] = {
            id: e,
            exports: {},
        });
        return (
            __webpack_modules__[e].call(
                r.exports,
                r,
                r.exports,
                __webpack_require__
            ),
            r.exports
        );
    }
    (__webpack_require__.m = __webpack_modules__),
        (__webpack_require__.n = function (e) {
            var t =
                e && e.__esModule
                    ? function () {
                          return e.default;
                      }
                    : function () {
                          return e;
                      };
            return (
                __webpack_require__.d(t, {
                    a: t,
                }),
                t
            );
        }),
        (getProto = Object.getPrototypeOf
            ? function (e) {
                  return Object.getPrototypeOf(e);
              }
            : function (e) {
                  return e.__proto__;
              }),
        (__webpack_require__.t = function (e, t) {
            if ((1 & t && (e = this(e)), 8 & t)) return e;
            if ("object" == typeof e && e) {
                if (4 & t && e.__esModule) return e;
                if (16 & t && "function" == typeof e.then) return e;
            }
            var r = Object.create(null);
            __webpack_require__.r(r);
            var s = {};
            leafPrototypes = leafPrototypes || [
                null,
                getProto({}),
                getProto([]),
                getProto(getProto),
            ];
            for (
                var n = 2 & t && e;
                "object" == typeof n && !~leafPrototypes.indexOf(n);
                n = getProto(n)
            )
                Object.getOwnPropertyNames(n).forEach(function (t) {
                    s[t] = function () {
                        return e[t];
                    };
                });
            return (
                (s.default = function () {
                    return e;
                }),
                __webpack_require__.d(r, s),
                r
            );
        }),
        (__webpack_require__.d = function (e, t) {
            for (var r in t)
                __webpack_require__.o(t, r) &&
                    !__webpack_require__.o(e, r) &&
                    Object.defineProperty(e, r, {
                        enumerable: !0,
                        get: t[r],
                    });
        }),
        (__webpack_require__.f = {}),
        (__webpack_require__.e = function (e) {
            return Promise.all(
                Object.keys(__webpack_require__.f).reduce(function (t, r) {
                    return __webpack_require__.f[r](e, t), t;
                }, [])
            );
        }),
        (__webpack_require__.u = function (e) {
            return (
                "site/app/" +
                ({
                    316: "orderThankYou-page",
                    2495: "giftCertificates-page",
                    5172: "giftCertificates-viewModel",
                    6427: "activeOrders-viewModel",
                    11271: "brandlist-viewModel",
                    11599: "customerReceipt-page",
                    13320: "newYearLanding-viewModel",
                    17877: "favoriteGoods-page",
                    23597: "personalCabinet-components-sessions-viewModel",
                    24176: "notificationPopup",
                    25201: "confirmEmail-page",
                    28540: "brandlistByLetter-viewModel",
                    29107: "feedbacks-page",
                    31168: "tooltip",
                    31887: "generalPreloader-component",
                    33639: "loadingError-component",
                    35417: "swiper-component",
                    36662: "activeOrders-page",
                    36708: "customerReceipt-viewModel",
                    38200: "personalCabinet-viewModel",
                    44914: "sessionsPopup",
                    44917: "orderThankYou-viewModel",
                    45050: "brandlist-page",
                    48829: "generalPreloader",
                    52933: "WbWallet-page",
                    53214: "helpers",
                    53626: "questions-page",
                    54352: "feedbacks-viewModel",
                    55122: "confirmEmail-viewModel",
                    57751: "wlArrived-page",
                    59822: "favoriteGoods-viewModel",
                    62201: "services-page",
                    62858: "services-viewModel",
                    63946: "mo-icons",
                    64210: "react-app",
                    64278: "tooltip-component",
                    64900: "chanceOnLanding-viewModel",
                    66814: "wbWallet-viewModel",
                    67691: "personalCabinet-page",
                    68984: "personalCabinet-components-notifications-viewModel",
                    70767: "modal-component",
                    76279: "brandlistByLetter-page",
                    76979: "swiper",
                    78300: "wlArrived-viewModel",
                    81774: "mo-ui",
                    86127: "chanceOnLanding-page",
                    89362: "react-vendors",
                    96042: "modal",
                    99015: "questions-viewModel",
                    99803: "newYearLanding-page",
                }[e] || e) +
                "." +
                {
                    316: "f679fd9ffc8ed8334568",
                    2495: "b10595f2d11aa94d91a6",
                    5172: "641ec24d9bfbc7dbc401",
                    6427: "acc39d80129bf534372f",
                    11271: "c9439abb69684861ae7e",
                    11599: "9ebf28de71b563a3fd88",
                    13320: "3768ab6b94edd487c812",
                    14627: "eb35aeacc24e8988fd4a",
                    17728: "e5574d9602dcddd301a5",
                    17877: "25cc935753ff39df0d65",
                    19138: "24acced9c5b868491e44",
                    20939: "18e2aada62d3c7ed2db8",
                    23158: "7492e03ac911d362de9b",
                    23597: "d26ac9e9438572695d47",
                    24176: "8ae44ee249903ff12d4e",
                    25201: "b990d93493a69da595ca",
                    28540: "b6d181f204b936491116",
                    29107: "7fea881386e2970569f3",
                    29883: "13427ba0602fb8b638e2",
                    31168: "6959915db6d1c7468367",
                    31887: "b16750749655f40cf947",
                    32452: "fa8bc23c215b24024d66",
                    33639: "8de79036c16707d2204a",
                    35417: "ba830f69a2cb19686802",
                    36662: "5813d58f36d59d6f93ea",
                    36708: "bd8998cf583bd654288d",
                    37266: "1262e74f2a4dd51ea1a8",
                    38200: "27ec33caeec02ffdbf38",
                    44377: "b631a460a25917cf44b3",
                    44914: "c10c45bf2edd8f2461b8",
                    44917: "3cc0aace0d0c1a320aae",
                    45050: "cb82401ed04f6010557f",
                    46541: "83f6571834d2b1cbcddf",
                    48829: "db1ad6d3be2e087f9660",
                    52933: "77925702d97e0be30a16",
                    53214: "8d662f98c71364c37141",
                    53626: "0b9d0b84f13fac01ea4d",
                    54352: "f9d144d8ca63cf3dfb64",
                    55122: "80f8f6bd40c36e2c9cf1",
                    57751: "8bdd115d040fe0674a3d",
                    59822: "041d5ddd26b32dcf028c",
                    62201: "6cdd529813fddbe1956f",
                    62858: "c14a0b823a81342c92c4",
                    63946: "729dc9593c21c7408e7d",
                    64210: "edd25795271b5e9d92ed",
                    64278: "fea562f676886230b645",
                    64900: "43ac622a4bbe683f89f5",
                    66814: "ae2fee381ff8f7d7d02e",
                    67691: "76d4c629a4013c1db2fa",
                    68890: "bcc1a453f3199d75d0b3",
                    68984: "0f7ebfe390472a38dda6",
                    70767: "fe76d2c77f4f65b78028",
                    73526: "b36395948eb7ab069512",
                    76279: "db19c184d63f4cad49f9",
                    76979: "335574f6e92c94767b4f",
                    78300: "e743ce435874a1eff00c",
                    79291: "b606a9bfd5c76fa492f5",
                    81774: "ff8eb13e2974e743441c",
                    86127: "de0a25cb8f160a12bdac",
                    89362: "4463b5fe473e03f21749",
                    90861: "388b45da99ba12ce8de4",
                    96042: "486f2c9583890c40cf7f",
                    99015: "aa064c8e7ec38ed8d369",
                    99803: "8ccc87c7692ab51b358d",
                }[e] +
                ".js"
            );
        }),
        (__webpack_require__.miniCssF = function (e) {
            return (
                "site/app/" +
                {
                    316: "orderThankYou-page",
                    17877: "favoriteGoods-page",
                    24176: "notificationPopup",
                    29107: "feedbacks-page",
                    31168: "tooltip",
                    36662: "activeOrders-page",
                    44914: "sessionsPopup",
                    48829: "generalPreloader",
                    54352: "feedbacks-viewModel",
                    57751: "wlArrived-page",
                    67691: "personalCabinet-page",
                    76979: "swiper",
                    96042: "modal",
                    99803: "newYearLanding-page",
                }[e] +
                "." +
                {
                    316: "595068e1795452d7d7a2",
                    17877: "0292c276552ea8226648",
                    24176: "e56c4583d407b6076d54",
                    29107: "3ff4d688c633d10b726c",
                    31168: "cbdc5c95a5d832ac24de",
                    36662: "f9483161e22a2fde1d20",
                    44914: "bbbf55cca6632f3bfda7",
                    48829: "afe2ccfd4a81a33f9c85",
                    54352: "3ff4d688c633d10b726c",
                    57751: "c4d71f0eedfb0c1124a5",
                    67691: "f66fc3fe992dc910a62d",
                    76979: "f9afa5d91d1f8b3579cd",
                    96042: "0146ad40257819344cef",
                    99803: "5febf91380d5b0ec098b",
                }[e] +
                ".css"
            );
        }),
        (__webpack_require__.g = (function () {
            if ("object" == typeof globalThis) return globalThis;
            try {
                return this || new Function("return this")();
            } catch (e) {
                if ("object" == typeof window) return window;
            }
        })()),
        (__webpack_require__.o = function (e, t) {
            return Object.prototype.hasOwnProperty.call(e, t);
        }),
        (inProgress = {}),
        (dataWebpackPrefix = "wildberries:"),
        (__webpack_require__.l = function (e, t, r, s) {
            if (inProgress[e]) inProgress[e].push(t);
            else {
                var n, o;
                if (void 0 !== r)
                    for (
                        var i = document.getElementsByTagName("script"), a = 0;
                        a < i.length;
                        a++
                    ) {
                        var l = i[a];
                        if (
                            l.getAttribute("src") == e ||
                            l.getAttribute("data-webpack") ==
                                dataWebpackPrefix + r
                        ) {
                            n = l;
                            break;
                        }
                    }
                n ||
                    ((o = !0),
                    ((n = document.createElement("script")).charset = "utf-8"),
                    (n.timeout = 120),
                    __webpack_require__.nc &&
                        n.setAttribute("nonce", __webpack_require__.nc),
                    n.setAttribute("data-webpack", dataWebpackPrefix + r),
                    (n.src = e)),
                    (inProgress[e] = [t]);
                var c = function (t, r) {
                        (n.onerror = n.onload = null), clearTimeout(u);
                        var s = inProgress[e];
                        if (
                            (delete inProgress[e],
                            n.parentNode && n.parentNode.removeChild(n),
                            s &&
                                s.forEach(function (e) {
                                    return e(r);
                                }),
                            t)
                        )
                            return t(r);
                    },
                    u = setTimeout(
                        c.bind(null, void 0, {
                            type: "timeout",
                            target: n,
                        }),
                        12e4
                    );
                (n.onerror = c.bind(null, n.onerror)),
                    (n.onload = c.bind(null, n.onload)),
                    o && document.head.appendChild(n);
            }
        }),
        (__webpack_require__.r = function (e) {
            "undefined" != typeof Symbol &&
                Symbol.toStringTag &&
                Object.defineProperty(e, Symbol.toStringTag, {
                    value: "Module",
                }),
                Object.defineProperty(e, "__esModule", {
                    value: !0,
                });
        }),
        (__webpack_require__.j = 10122),
        (function () {
            var e;
            __webpack_require__.g.importScripts &&
                (e = __webpack_require__.g.location + "");
            var t = __webpack_require__.g.document;
            if (
                !e &&
                t &&
                (t.currentScript &&
                    "SCRIPT" === t.currentScript.tagName.toUpperCase() &&
                    (e = t.currentScript.src),
                !e)
            ) {
                var r = t.getElementsByTagName("script");
                if (r.length)
                    for (
                        var s = r.length - 1;
                        s > -1 && (!e || !/^http(s?):/.test(e));

                    )
                        e = r[s--].src;
            }
            if (!e)
                throw new Error(
                    "Automatic publicPath is not supported in this browser"
                );
            (e = e
                .replace(/#.*$/, "")
                .replace(/\?.*$/, "")
                .replace(/\/[^\/]+$/, "/")),
                (__webpack_require__.p = e + "../../../");
        })(),
        (function () {
            if ("undefined" != typeof document) {
                var e = function (e) {
                        return new Promise(function (t, r) {
                            var s = __webpack_require__.miniCssF(e),
                                n = __webpack_require__.p + s;
                            if (
                                (function (e, t) {
                                    for (
                                        var r =
                                                document.getElementsByTagName(
                                                    "link"
                                                ),
                                            s = 0;
                                        s < r.length;
                                        s++
                                    ) {
                                        var n =
                                            (i = r[s]).getAttribute(
                                                "data-href"
                                            ) || i.getAttribute("href");
                                        if (
                                            "stylesheet" === i.rel &&
                                            (n === e || n === t)
                                        )
                                            return i;
                                    }
                                    var o =
                                        document.getElementsByTagName("style");
                                    for (s = 0; s < o.length; s++) {
                                        var i;
                                        if (
                                            (n = (i = o[s]).getAttribute(
                                                "data-href"
                                            )) === e ||
                                            n === t
                                        )
                                            return i;
                                    }
                                })(s, n)
                            )
                                return t();
                            !(function (e, t, r, s, n) {
                                var o = document.createElement("link");
                                (o.rel = "stylesheet"),
                                    (o.type = "text/css"),
                                    __webpack_require__.nc &&
                                        (o.nonce = __webpack_require__.nc),
                                    (o.onerror = o.onload =
                                        function (r) {
                                            if (
                                                ((o.onerror = o.onload = null),
                                                "load" === r.type)
                                            )
                                                s();
                                            else {
                                                var i = r && r.type,
                                                    a =
                                                        (r &&
                                                            r.target &&
                                                            r.target.href) ||
                                                        t,
                                                    l = new Error(
                                                        "Loading CSS chunk " +
                                                            e +
                                                            " failed.\n(" +
                                                            i +
                                                            ": " +
                                                            a +
                                                            ")"
                                                    );
                                                (l.name = "ChunkLoadError"),
                                                    (l.code =
                                                        "CSS_CHUNK_LOAD_FAILED"),
                                                    (l.type = i),
                                                    (l.request = a),
                                                    o.parentNode &&
                                                        o.parentNode.removeChild(
                                                            o
                                                        ),
                                                    n(l);
                                            }
                                        }),
                                    (o.href = t),
                                    r
                                        ? r.parentNode.insertBefore(
                                              o,
                                              r.nextSibling
                                          )
                                        : document.head.appendChild(o);
                            })(e, n, null, t, r);
                        });
                    },
                    t = {
                        10122: 0,
                        49864: 0,
                        69869: 0,
                        25307: 0,
                        55278: 0,
                        23597: 0,
                        53214: 0,
                    };
                __webpack_require__.f.miniCss = function (r, s) {
                    t[r]
                        ? s.push(t[r])
                        : 0 !== t[r] &&
                          {
                              316: 1,
                              17877: 1,
                              24176: 1,
                              29107: 1,
                              31168: 1,
                              36662: 1,
                              44914: 1,
                              48829: 1,
                              54352: 1,
                              57751: 1,
                              67691: 1,
                              76979: 1,
                              96042: 1,
                              99803: 1,
                          }[r] &&
                          s.push(
                              (t[r] = e(r).then(
                                  function () {
                                      t[r] = 0;
                                  },
                                  function (e) {
                                      throw (delete t[r], e);
                                  }
                              ))
                          );
                };
            }
        })(),
        (function () {
            __webpack_require__.b = document.baseURI || self.location.href;
            var e = {
                10122: 0,
                49864: 0,
                69869: 0,
                25307: 0,
                55278: 0,
                23597: 0,
                53214: 0,
            };
            __webpack_require__.f.j = function (t, r) {
                var s = __webpack_require__.o(e, t) ? e[t] : void 0;
                if (0 !== s)
                    if (s) r.push(s[2]);
                    else if (/^(31168|48829|76979|96042)$/.test(t)) e[t] = 0;
                    else {
                        var n = new Promise(function (r, n) {
                            s = e[t] = [r, n];
                        });
                        r.push((s[2] = n));
                        var o =
                                __webpack_require__.p +
                                __webpack_require__.u(t),
                            i = new Error();
                        __webpack_require__.l(
                            o,
                            function (r) {
                                if (
                                    __webpack_require__.o(e, t) &&
                                    (0 !== (s = e[t]) && (e[t] = void 0), s)
                                ) {
                                    var n =
                                            r &&
                                            ("load" === r.type
                                                ? "missing"
                                                : r.type),
                                        o = r && r.target && r.target.src;
                                    (i.message =
                                        "Loading chunk " +
                                        t +
                                        " failed.\n(" +
                                        n +
                                        ": " +
                                        o +
                                        ")"),
                                        (i.name = "ChunkLoadError"),
                                        (i.type = n),
                                        (i.request = o),
                                        s[1](i);
                                }
                            },
                            "chunk-" + t,
                            t
                        );
                    }
            };
            var t = function (t, r) {
                    var s,
                        n,
                        o = r[0],
                        i = r[1],
                        a = r[2],
                        l = 0;
                    if (
                        o.some(function (t) {
                            return 0 !== e[t];
                        })
                    ) {
                        for (s in i)
                            __webpack_require__.o(i, s) &&
                                (__webpack_require__.m[s] = i[s]);
                        if (a) a(__webpack_require__);
                    }
                    for (t && t(r); l < o.length; l++)
                        (n = o[l]),
                            __webpack_require__.o(e, n) && e[n] && e[n][0](),
                            (e[n] = 0);
                },
                r = (self.webpackChunkwildberries =
                    self.webpackChunkwildberries || []);
            r.forEach(t.bind(null, 0)), (r.push = t.bind(null, r.push.bind(r)));
        })(),
        (__webpack_require__.nc = void 0),
        __webpack_require__(36881),
        __webpack_require__(63152);
    var __webpack_exports__ = __webpack_require__(86055);
})();
